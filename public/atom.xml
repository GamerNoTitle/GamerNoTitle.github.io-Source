<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>GamerNoTitle</title>
  
  <subtitle>永远相信 美好的事情 即将发生 Always believe that good things will happen!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://bili33.top/"/>
  <updated>2020-04-05T06:42:50.471Z</updated>
  <id>http://bili33.top/</id>
  
  <author>
    <name>GamerNoTitle</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CSGO服务器架设指南</title>
    <link href="http://bili33.top/2020/04/05/CSGO-Server/"/>
    <id>http://bili33.top/2020/04/05/CSGO-Server/</id>
    <published>2020-04-05T04:48:50.000Z</published>
    <updated>2020-04-05T06:42:50.471Z</updated>
    
    <content type="html"><![CDATA[<p>“GOGOGO”最近我身边的小伙伴们都拉我打CSGO，还想打内战……然后就让我架设一个社区服务器。讲真，架设社区服务器的坑挺多的，我会在文中尽量把我架设服务器的过程给叙述完整，帮助你们，同样也帮助我在我忘记的时候回想起来</p><p>废话不多说，让我们开始吧（干货警告）</p><hr><h3 id="你需要准备："><a href="#你需要准备：" class="headerlink" title="你需要准备："></a>你需要准备：</h3><p>一台有公网IP的服务器</p><p>一个Steam账号（无任何的VAC记录，没有社区违规记录）</p><div class="note info">            <p>我这里使用的是阿里云的轻量应用服务器（Ubuntu 18.04 LTS），如果你也想使用阿里云，但是没有阿里云账号，可以到下边的这个链接进行注册（顺带帮我填一下邀请码秋梨膏）</p><p><a href="https://www.aliyun.com/minisite/goods?userCode=05u8nbft" target="_blank" rel="noopener">https://www.aliyun.com/minisite/goods?userCode=05u8nbft</a></p><p>然后可以到<a href="https://promotion.aliyun.com/ntms/act/campus2018.html?accounttraceid=fa8188b3-66d9-4f56-b466-597502576f22" target="_blank" rel="noopener">阿里云云翼计划</a>购买轻量应用服务器（下面的云服务器ECS），亲测一个服务器10个人带的动没啥问题</p>          </div><h3 id="Linux搭建方法"><a href="#Linux搭建方法" class="headerlink" title="Linux搭建方法"></a>Linux搭建方法</h3><h4 id="Steamcmd下载"><a href="#Steamcmd下载" class="headerlink" title="Steamcmd下载"></a>Steamcmd下载</h4><p>首先，你需要下载Steamcmd，这是一个Steam的官方软件，关于它的详细信息，你可以在<a href="https://developer.valvesoftware.com/wiki/SteamCMD" target="_blank" rel="noopener">这里</a>找到（V社官方WIKI，无需梯子）</p><h5 id="自动安装"><a href="#自动安装" class="headerlink" title="自动安装"></a>自动安装</h5><p>如果你的服务器是64位的Linux系统，你需要运行以下命令安装32位的运行库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo add-apt-repository multiverse</span><br><span class="line">$ sudo dpkg --add-architecture i386</span><br><span class="line">$ sudo apt update</span><br><span class="line">$ sudo apt install lib32gcc1 steamcmd</span><br></pre></td></tr></table></figure><p>然后就可以直接使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt install steamcmd<span class="comment"># Ubuntu用户</span></span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install steamcmd <span class="comment"># CentOS用户</span></span><br></pre></td></tr></table></figure><p>来安装Steamcmd，如果你更新了yum库或者apt库仍然提示未找到steamcmd包，那么你可以使用手动安装的方法</p><h5 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h5><p>手动安装就是自己从V社的官方服务器中获取可执行文件，当然在这之前，你还是需要安装32位的运行环境</p><ul><li><p>Ubuntu</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install lib32gcc1</span><br></pre></td></tr></table></figure></li><li><p>CentOS X86</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install glibc libstdc++</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>CentOS X64</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install glibc.i686 libstdc++.i686</span><br></pre></td></tr></table></figure></li></ul><p>安装完运行库后，我们需要下载steam官方的软件包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sqL <span class="string">"https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz"</span> | tar zxvf -</span><br></pre></td></tr></table></figure><p>使用上面这一条命令下载软件包，解压后应该有个<code>steamcmd.sh</code>和一个文件夹。我们直接运行steamcmd.sh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bash steamcmd.sh</span><br></pre></td></tr></table></figure><p>然后它会进入更新状态，就像是你平常打开Steam的那个小白窗</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@CSGO/img/CSGO-Server/Steam-Updating.png"  alt="Steam更新小白窗"></p><p>等它最后显示为<code>Steam&gt;</code>并且是输入状态的时候，它就完成了更新。至此，你就完成了Steamcmd的安装</p><p>按照steam官方的意思，他们不推荐使用root账户来运行steamcmd（我也不知道为什么），然而我实际上用root账户开下来也没有什么不妥的地方，所以是否使用root账户取决于你们自己吧</p><h4 id="CSGO服务器安装"><a href="#CSGO服务器安装" class="headerlink" title="CSGO服务器安装"></a>CSGO服务器安装</h4><p>在这之前，请确保你的服务器装得下CSGO的所有文件，服务端的大小跟客户端没差多少，请确定你的服务器有那么多的空间！！！</p><p>我们在Steamcmd里面输入<code>login anonymous</code>来进行匿名登录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Steam&gt;login anonymous</span><br></pre></td></tr></table></figure><p>当然你也可以使用你自己的账号登录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Steam&gt;login :Steam_Account :Password :Steam_Guard</span><br></pre></td></tr></table></figure><p>其中，<code>:Steam_Account</code>是你的Steam登录名，<code>:Password</code>是你的密码，<code>:Steam_Guard</code>是你的Steam令牌，如果你是使用邮箱令牌的，那你可以不加上令牌，先发出登录请求，等Steam执行了登录以后会让你输入你的邮箱验证码的</p><p>登录完成后，我们的Steamcmd就正式接入了Steam网络了。我们需要安装CSGO服务器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Steam&gt;app_update 740 validate</span><br></pre></td></tr></table></figure><p>用上面的命令来安装CSGO服务器，<code>740</code>是CSGO服务器这款应用在Steam的注册ID，<code>validate</code>是文件验证，初次安装需要进行文件验证，以后升级可以直接使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Steam&gt;app_update 740</span><br></pre></td></tr></table></figure><p>来进行升级。如果你的服务器不够空间，会给你报错，你可以先退出Steamcmd，在linux的命令行中使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ df -h</span><br></pre></td></tr></table></figure><p>来查看你的空间是否足够，一般来说需要查看最右边<code>Mounted on</code>的<code>/</code>这一个目录的剩余，<code>Avail</code>就是这个目录剩余的空间。</p><p>当你输入命令安装CSGO服务器后，Steamcmd会进入安装状态等到最后提示<code>Successfully installed</code>即为安装完成，你的CSGO已经被安装在了<code>./steamapps/common/Counter-Strike Global Offensive Beta - Dedicated Server</code>里面了</p><p>如果你觉得它太长了，你可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Steam&gt;force_install_dir :dir</span><br></pre></td></tr></table></figure><p>来安装到你觉得合适的地方，请将<code>:dir</code>换成你要的目录，并且在<code>app_update</code>前执行！</p><h4 id="配置服务器"><a href="#配置服务器" class="headerlink" title="配置服务器"></a>配置服务器</h4><p>安装完了以后，我们就要进行服务器的配置。CSGO服务器默认的配置很令人头疼的：竞技模式、TK开启、TK惩罚等等等等，各种不方便的东西都有。我们需要修改服务器的配置</p><p>CSGO也给我们提供了很方便的方法修改服务器，我们可以使用一个文件进行修改。</p><p>我们在CSGO服务器目录下的<code>./csgo/cfg</code>文件夹中新建一个文件叫做<code>server.cfg</code>，然后在这里面修改我们需要的配置。我先贴出<a href="">我的配置</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line">rcon_password <span class="string">""</span> <span class="comment">// OP 密码</span></span><br><span class="line"><span class="comment">// "" 表示没有</span></span><br><span class="line">hostname <span class="string">"服务器"</span></span><br><span class="line"><span class="comment">// 服务器名称</span></span><br><span class="line">sv_region <span class="number">255</span> <span class="comment">// 服务器所在区域注册参数</span></span><br><span class="line"><span class="comment">// 255=全球</span></span><br><span class="line"><span class="comment">// 0=美国东部</span></span><br><span class="line"><span class="comment">// 1=美国西部</span></span><br><span class="line"><span class="comment">// 2=南美洲</span></span><br><span class="line"><span class="comment">// 3=欧洲</span></span><br><span class="line"><span class="comment">// 4=亚洲</span></span><br><span class="line"><span class="comment">// 5=澳洲</span></span><br><span class="line"><span class="comment">// 6=中东</span></span><br><span class="line"><span class="comment">// 7=非洲</span></span><br><span class="line">sv_rcon_minfailures <span class="number">3</span></span><br><span class="line"><span class="comment">// 允许输入OP密码 错误次数下限 // 达到下限则封禁对方的IP</span></span><br><span class="line">sv_rcon_banpenalty <span class="number">5</span></span><br><span class="line"><span class="comment">// 封禁的时限 单位 分钟</span></span><br><span class="line"><span class="comment">// 0=永久</span></span><br><span class="line">sv_maxupdaterate <span class="number">100</span></span><br><span class="line"><span class="comment">// 服务器每秒更新最大频率</span></span><br><span class="line"><span class="comment">// 根据实际网络状况调节</span></span><br><span class="line"><span class="comment">// sv_maxrate / 300 = 要设的值 // 默认=30</span></span><br><span class="line"><span class="comment">// 局域网=101</span></span><br><span class="line">sv_minupdaterate <span class="number">40</span></span><br><span class="line"><span class="comment">// 服务器每秒更新最小频率</span></span><br><span class="line">sv_unlag <span class="number">1</span></span><br><span class="line"><span class="comment">// 玩家延时补偿</span></span><br><span class="line"><span class="comment">// 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启(默认)</span></span><br><span class="line">sv_maxunlag <span class="number">0.5</span> <span class="comment">// 延时补偿最大值默认 0.5 // 0.5=500毫秒(默认)</span></span><br><span class="line">sv_voiceenable <span class="number">1</span> <span class="comment">// 服务器是否允许麦克风语音通讯 // 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">sv_unlagsamples <span class="number">1</span> <span class="comment">// 延时补偿数据包平均采样数量 // 默认=1</span></span><br><span class="line">sv_unlagpush <span class="number">0</span> <span class="comment">// 服务器推进延时补偿</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_autokick <span class="number">0</span> <span class="comment">// 自动踢除不动的玩家</span></span><br><span class="line"><span class="comment">// 0=关闭(比赛默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_autocrosshair <span class="number">0</span> <span class="comment">// 自动瞄准</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_autoteambalance <span class="number">0</span></span><br><span class="line"><span class="comment">// 自动平衡双方人数</span></span><br><span class="line"><span class="comment">// 0=关闭(比赛默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_buytime <span class="number">0.25</span> <span class="comment">// 每回合购买武器装备时间单位分钟 // 比赛默认=0.25</span></span><br><span class="line">mp_consistency <span class="number">1</span> <span class="comment">// 防止某些模型被更改</span></span><br><span class="line"><span class="comment">// 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启(默认)</span></span><br><span class="line">mp_c4timer <span class="number">35</span> <span class="comment">// C4爆炸倒计时单位秒</span></span><br><span class="line"><span class="comment">// 比赛默认=35</span></span><br><span class="line">mp_decals <span class="number">300</span> <span class="comment">// 墙壁上的血花弹孔贴图细节数据传送(200-300)</span></span><br><span class="line">mp_falldamage <span class="number">1</span> <span class="comment">// 高处落下伤害</span></span><br><span class="line"><span class="comment">// 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启(默认)</span></span><br><span class="line">mp_fadetoblack <span class="number">0</span> <span class="comment">// 死后黑屏</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_flashlight <span class="number">1</span> <span class="comment">// 手电筒</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">mp_forcechasecam <span class="number">2</span> <span class="comment">// 死后跟随</span></span><br><span class="line"><span class="comment">// 0=所有玩家</span></span><br><span class="line"><span class="comment">// 1=仅队友</span></span><br><span class="line"><span class="comment">// 2=仅队友，主视角(比赛默认)</span></span><br><span class="line">mp_forcecamera <span class="number">2</span> <span class="comment">// 死后视角选择</span></span><br><span class="line"><span class="comment">// 0=全部视角</span></span><br><span class="line"><span class="comment">// 1=仅队友，全部视角</span></span><br><span class="line"><span class="comment">// 2=仅队友，主视角(比赛默认)</span></span><br><span class="line">mp_footsteps <span class="number">1</span> <span class="comment">// 脚步声</span></span><br><span class="line"><span class="comment">// 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启(默认)</span></span><br><span class="line">mp_fraglimit <span class="number">0</span> <span class="comment">//杀人数上限(1~n)，超过上限就换地图 // 0=关闭(默认)</span></span><br><span class="line">mp_freezetime <span class="number">8</span> <span class="comment">// 每回合开始冻结时间单位秒</span></span><br><span class="line">mp_friendlyfire <span class="number">1</span> <span class="comment">// 友军伤害</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_friendly_grenade_damage <span class="number">1</span></span><br><span class="line"><span class="comment">// 友军手雷伤害</span></span><br><span class="line"><span class="comment">// 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_hostagepenalty <span class="number">0</span> <span class="comment">// 惩罚人质杀手</span></span><br><span class="line"><span class="comment">// 0=不惩罚(默认)</span></span><br><span class="line"><span class="comment">// 1~N=人质被杀数量，超过则踢出该玩家</span></span><br><span class="line">mp_limitteams <span class="number">0</span> <span class="comment">// 两队人数差异上限</span></span><br><span class="line"><span class="comment">// 超过此上限，新玩家只能当观察员 // 比赛默认=10</span></span><br><span class="line">sv_logbans <span class="number">1</span></span><br><span class="line"><span class="comment">// 服务器日志里记录Ban掉玩家的内容 // 0=不记录</span></span><br><span class="line"><span class="comment">// 1=记录</span></span><br><span class="line">mp_logecho <span class="number">0</span> <span class="comment">// 将服务器日志反馈到控制台 // 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_logdetail <span class="number">3</span> <span class="comment">// 服务器日志里记录攻击信息 // 0=不记录任何信息</span></span><br><span class="line"><span class="comment">// 1=记录敌人攻击</span></span><br><span class="line"><span class="comment">// 2=记录队友攻击</span></span><br><span class="line"><span class="comment">// 3=记录所有攻击</span></span><br><span class="line">mp_logfile <span class="number">1</span> <span class="comment">// 服务器记录日志为文件 // 0=不记录</span></span><br><span class="line"><span class="comment">// 1=记录</span></span><br><span class="line">mp_logmessages <span class="number">1</span> <span class="comment">// 服务器日志里记录谈话内容 // 0=不记录</span></span><br><span class="line"><span class="comment">// 1=记录</span></span><br><span class="line">mp_maxrounds <span class="number">30</span> <span class="comment">// 回合上限，达到此上限，自动重新载入新地图</span></span><br><span class="line"><span class="comment">// 0=无回合上限(默认)</span></span><br><span class="line">mp_playerid <span class="number">0</span> <span class="comment">// 当准星指向敌人或队友时，显示他们的名字</span></span><br><span class="line"><span class="comment">// 0=显示所有人(比赛默认)</span></span><br><span class="line"><span class="comment">// 1=仅显示队友</span></span><br><span class="line"><span class="comment">// 2=不显示</span></span><br><span class="line">mp_roundtime <span class="number">2</span></span><br><span class="line"><span class="comment">// 每回合时限单位分钟</span></span><br><span class="line">mp_timelimit <span class="number">0</span></span><br><span class="line"><span class="comment">// 地图最大时限，达此时限，自动重新载入新地图</span></span><br><span class="line"><span class="comment">// 0=无时限</span></span><br><span class="line">mp_tkpunish <span class="number">0</span></span><br><span class="line"><span class="comment">// 惩罚队友杀手</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_startmoney <span class="number">800</span> <span class="comment">// 第一回合开始金钱(800~16000) // 加时赛=10000</span></span><br><span class="line">mp_winlimit <span class="number">0</span></span><br><span class="line"><span class="comment">// 一方最大胜利回合数，达到此数量，自动重新载入新地图</span></span><br><span class="line"><span class="comment">// 0=无限制(默认)</span></span><br><span class="line">sv_aim <span class="number">0</span></span><br><span class="line"><span class="comment">// 自动瞄准</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">sv_airaccelerate <span class="number">10</span> <span class="comment">// 玩家在空中移动的速度</span></span><br><span class="line"><span class="comment">// 默认=10</span></span><br><span class="line">sv_airmove <span class="number">1</span> <span class="comment">// 在空中移动&amp;转向</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">sv_allowdownload <span class="number">1</span></span><br><span class="line"><span class="comment">// 客户端下载服务器资源 // 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">sv_allowupload <span class="number">1</span></span><br><span class="line"><span class="comment">// 客户端上传自己的喷图 // 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">sv_alltalk <span class="number">1</span> <span class="comment">// 警匪通话</span></span><br><span class="line"><span class="comment">// 0=禁止(默认)</span></span><br><span class="line"><span class="comment">// 1=允许</span></span><br><span class="line">sv_proxies <span class="number">1</span> <span class="comment">// HLTV代理</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">sv_cheats <span class="number">0</span> <span class="comment">// 作弊模式</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">sv_clienttrace <span class="number">1.0</span> <span class="comment">// 客户端模型的范围框的尺寸</span></span><br><span class="line"><span class="comment">// 默认 1.0</span></span><br><span class="line">sv_clipmode <span class="number">0</span></span><br><span class="line"><span class="comment">// 锁定客户端快速模式</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">sv_friction <span class="number">4</span></span><br><span class="line"><span class="comment">// 地面摩擦力默认 4</span></span><br><span class="line"><span class="comment">// 数值越低，摩擦越小</span></span><br><span class="line">sv_gravity <span class="number">800</span> <span class="comment">// 重力默认 800</span></span><br><span class="line">sv_maxrate <span class="number">20000</span> <span class="comment">// 服务器最大传输速率&lt;0-25000&gt; // (服务器上传带宽 x 125) /服务器设定的最大人数 = 要设的值</span></span><br><span class="line"><span class="comment">// 0=无限制</span></span><br><span class="line"><span class="comment">// 局域网=25000</span></span><br><span class="line">sv_maxspeed <span class="number">320</span> <span class="comment">// 客户端最大移动速度</span></span><br><span class="line">sv_minrate <span class="number">0</span></span><br><span class="line"><span class="comment">// 服务器最小传输速率&lt;0-25000&gt; // 0=无限制</span></span><br><span class="line">sv_send_logos <span class="number">1</span> <span class="comment">// 客户端相互之间传送喷图</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(同时确保sv_allowdownload键值为1)</span></span><br><span class="line">sv_sendvelocity <span class="number">0</span></span><br><span class="line"><span class="comment">// 服务器混合物理运算，适用于较好配置的服务器 // 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">sv_send_resources <span class="number">1</span></span><br><span class="line"><span class="comment">// 自动向客户端传送地图关联的*.res文件里包括的资源文件 // 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启(同时确保sv_allowdownload为1)</span></span><br><span class="line">sv_stepsize <span class="number">18</span></span><br><span class="line"><span class="comment">// 玩家的步伐距离</span></span><br><span class="line"><span class="comment">// 默认 18</span></span><br><span class="line">sv_stopspeed <span class="number">75</span></span><br><span class="line"><span class="comment">// 玩家停止移动时的速度默认 75</span></span><br><span class="line">sv_timeout <span class="number">65</span></span><br><span class="line"><span class="comment">// 客户端连接服务器超时的时限，达到时限则断开连接</span></span><br><span class="line">sv_voicecodec voice_speex <span class="comment">// 语音通话解码</span></span><br><span class="line"><span class="comment">// voice_miles是HL引擎长期以来用的语音解码(默认)，占用带宽较大，为32kbps</span></span><br><span class="line"><span class="comment">// voice_speex是Valve新加入的解码，优于voice_miles，占用带宽较少，为2.4kbps至15.2kbps</span></span><br><span class="line">sv_voicequality <span class="number">5</span></span><br><span class="line"><span class="comment">// 客户端语音通话质量(确保sv_voicecodec voice_speex)</span></span><br><span class="line"><span class="comment">// 1=非常差...........占用带宽 2.4 kbps // 2=差...............占用带宽 6.0 kbps // 3=中等.............占用带宽 8.0 kbps // 4=好...............占用带宽 11.2 kbps // 5=非常清晰.........占用带宽 15.2 kbps</span></span><br><span class="line">allow_spectators <span class="number">1</span></span><br><span class="line"><span class="comment">// 观察员模式</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许</span></span><br><span class="line">decalfrequency <span class="number">30</span></span><br><span class="line"><span class="comment">// 玩家喷图的时间间隔单位秒</span></span><br><span class="line">edgefriction <span class="number">2</span></span><br><span class="line"><span class="comment">// 玩家与玩家、墙壁、物体之间的摩擦</span></span><br><span class="line"><span class="comment">// 默认 2</span></span><br><span class="line">host_framerate <span class="number">0</span></span><br><span class="line"><span class="comment">// 与Demo录制有关</span></span><br><span class="line"><span class="comment">// 0&lt;N&lt;1 为慢录</span></span><br><span class="line"><span class="comment">// n=0 为正常(默认)</span></span><br><span class="line"><span class="comment">// n&gt;1 为快录</span></span><br><span class="line">log on</span><br><span class="line"><span class="comment">// 开始记录日志</span></span><br><span class="line">pausable <span class="number">1</span></span><br><span class="line"><span class="comment">// 客户端暂停游戏</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许</span></span><br><span class="line"><span class="comment">// Steam社区服务器验证</span></span><br><span class="line">sv_setsteamaccount xxx</span><br><span class="line"><span class="comment">// 模式参数</span></span><br><span class="line">game_mode <span class="number">1</span></span><br><span class="line">game_type <span class="number">0</span></span><br><span class="line">mapcyclefile mapcycle.txt</span><br><span class="line"><span class="comment">// 地图循环列表所在的.txt文件</span></span><br><span class="line"><span class="comment">// *.txt = cstrike\*.txt文件</span></span><br><span class="line"><span class="comment">// Use this file to configure your DEDICATED server. // This config file is executed on server start.</span></span><br><span class="line"><span class="comment">// load ban files</span></span><br><span class="line">exec listip.cfg</span><br><span class="line">exec banned.cfg</span><br></pre></td></tr></table></figure><p>其中很多内容我都注释好了，其实这个配置文件也是我从网上找来然后进行修改得出的。其中有几个比较重要的参数：</p><p><code>rcon_password</code>管理员密码，在控制台可以输入密码使用管理员权限，就不需要在后台使用指令</p><p><code>hostname</code>服务器名称，记得一定要修改，之前翻社区服务器的时候发现很多没修改的都是写着Counter-Strike Global Offensive的</p><p><code>sv_password</code>玩家加入需要的密码，填入了就会加密你的服务器，只有输入正确的密码才能够进入</p><p><code>sv_setsteamaccount</code>社区服注册秘钥，这个一会会说</p><p>调整完了你的配置文件，将文件命名为<code>server.cfg</code>，然后放入上面所说的那个<code>./csgo/cfg</code>文件夹中即可</p><p>接着我们就可以着手开启服务器了</p><h4 id="开启服务器"><a href="#开启服务器" class="headerlink" title="开启服务器"></a>开启服务器</h4><p>关于服务器的开启，根据Steam的官方文档，我们需要安装一个叫做<code>screen</code>的包，使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install screen</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install screen</span><br></pre></td></tr></table></figure><p>来安装，然后我们就进入到CSGO服务器文件夹的根目录，也就是<code>./steamapps/common/Counter-Strike Global Offensive Beta - Dedicated Server</code>里面，使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ screen ./srcds_run</span><br></pre></td></tr></table></figure><p>就可以开启服务器了，当然后面可以跟一些参数，例如我想关闭VAC验证（避免<code>VAC无法验证您的回话</code>出现而无法加入服务器），那我就在后面加上<code>-insecure</code>即可；或者说我想更改模式，我就可以使用<code>+game_mode 1 +game_type 0</code>来进入竞技模式。</p><p>等到最后一行提示<code>GC Connection established for server version xxxx, instance idx 1</code>的时候就是开完了（xxxx是版本号）</p><p>关于模式，这里有一份较详细的表格（来源：Steam Developers官网）</p><table class="standard-table"><tbody><tr><th> Game Mode</th><th> game_type</th><th> game_mode</th></tr><tr><td> Casual (default)</td><td> 0</td><td> 0</td></tr><tr><td> Competitive / Scrimmage</td><td> 0</td><td> 1</td></tr><tr><td> Wingman</td><td> 0</td><td> 2</td></tr><tr><td> Arms Race</td><td> 1</td><td> 0</td></tr><tr><td> Demolition</td><td> 1</td><td> 1</td></tr><tr><td> Deathmatch</td><td> 1</td><td> 2</td></tr><tr><td> Custom</td><td> 3</td><td> any (?)</td></tr><tr><td> Guardian</td><td> 4</td><td> 0</td></tr><tr><td> Co-op Strike</td><td> 4</td><td> 1</td></tr><tr><td> Danger Zone</td><td> 6</td><td> 0</td></tr></tbody></table><h4 id="注册服务器"><a href="#注册服务器" class="headerlink" title="注册服务器"></a>注册服务器</h4><p>当你直接开启服务器后，用<code>connect ip:27015</code>进行连接会提示：仅限局域网连接，这就是没有注册服务器到社区服务器造成的结果。这就需要用到我刚刚所说的<code>sv_setsteamaccount</code>这个配置。</p><p>我们访问<a href="https://steamcommunity.com/dev/managegameservers" target="_blank" rel="noopener">Steam 社区 :: Steam 游戏服务器帐户管理</a>这个链接，在这里登陆你的Steam账号（一定要没有VAC记录和社区违规记录！！！否则会无法注册）</p><p>官方Steam账号要求</p><ul><li>您的 Steam 帐户目前不能处于社区封禁或锁定状态。</li><li>您的 Steam 帐户不能<a href="https://support.steampowered.com/kb_article.php?ref=3330-IAGK-7663" target="_blank" rel="noopener">受限</a>。</li><li>您的 Steam 帐户必须拥有一个[合格的注册手机](<a href="https://support.steampowered.com/kb_article.php?ref=8625-WRAH-9030&amp;l=simplified" target="_blank" rel="noopener">https://support.steampowered.com/kb_article.php?ref=8625-WRAH-9030&amp;l=simplified</a> chinese)。</li><li>您的 Steam 帐户必须拥有所创建游戏服务器对应的游戏。</li><li>您的 Steam 帐户可以创建 1000 个游戏服务器帐户。</li></ul><p>然后我们在下面的APPID里面填入<code>730</code>，备忘录按照自己喜好填，主要是用来区分不同的秘钥使用</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@CSGO/img/CSGO-Server/community-server-reg.png"  alt="CSGO社区服务器注册"></p><p>然后将获得的秘钥放入<code>sv_setsteamaccount</code>内即可，接着启动服务器，连接服务器，发现是不是可以连接了？</p><h3 id="Windows搭建方法"><a href="#Windows搭建方法" class="headerlink" title="Windows搭建方法"></a>Windows搭建方法</h3><p>其实Windows除了Steamcmd的安装跟linux不一样，其他都是一样的。Windows版的Steamcmd可以在这里下载<a href="https://steamcdn-a.akamaihd.net/client/installer/steamcmd.zip" target="_blank" rel="noopener">https://steamcdn-a.akamaihd.net/client/installer/steamcmd.zip</a></p><p>下载完后解压，通过命令行运行steamcmd，其余的方法都跟linux一样，可以从<a href="#CSGO服务器安装">CSGO服务器安装</a>开始看</p><hr><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>我打CSGO是真的菜，讲真……而且CSGO开箱真的开不起，我还是做一名咸鱼玩家吧</p><p>不过话说回来我CSGO有狗牌（忠诚徽章）耶，应该是我唯一能炫耀的东西惹……</p><p>辣鸡腾讯，QQ里面拦截我的网站，申诉还说我有恶意信息……一会加客服QQ问</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;“GOGOGO”最近我身边的小伙伴们都拉我打CSGO，还想打内战……然后就让我架设一个社区服务器。讲真，架设社区服务器的坑挺多的，我会在文中尽量把我架设服务器的过程给叙述完整，帮助你们，同样也帮助我在我忘记的时候回想起来&lt;/p&gt;
&lt;p&gt;废话不多说，让我们开始吧（干货警告）&lt;
      
    
    </summary>
    
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>hexo-theme-butterfly主题美化小笔记</title>
    <link href="http://bili33.top/2020/03/19/butterfly-customize/"/>
    <id>http://bili33.top/2020/03/19/butterfly-customize/</id>
    <published>2020-03-19T09:51:19.000Z</published>
    <updated>2020-04-05T02:32:45.570Z</updated>
    
    <content type="html"><![CDATA[<div class="note info">            <p>在正式讲博客的美化之前，我想先感谢<a href="https://jerryc.me/" target="_blank" rel="noopener">@jerryc</a>能够带来这么棒的主题~如果你同样想使用butterfly主题，你可以去查看<a href="https://jerryc.me/posts/21cfbf15/" target="_blank" rel="noopener">安装文档</a></p>          </div><p>话不多说，让我们开始吧！</p><p><strong>注：写这篇文章的时候我的主题版本是2.1.0</strong></p><hr><h3 id="友链界面加入更多的自定义文字"><a href="#友链界面加入更多的自定义文字" class="headerlink" title="友链界面加入更多的自定义文字"></a>友链界面加入更多的自定义文字</h3><p>关于友链界面，我加入了很多内容，如<code>A Few Requirements</code>和下面的<code>PS</code>就是我加入的。</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@butterfly-customize/img/butterfly-customize/Link-text.png"  alt="更多的内容"></p><p>之前闲着没事翻了一下主题的<code>layout</code>文件夹，里面的文件都已经命好名了，所以说一看我就知道哪个文件对应哪个部分，而我需要修改的就是<code>flink.pug</code>这个文件</p><p>原来它长这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">.flink</span><br><span class="line">  each i in site.data.link</span><br><span class="line">    h1&#x3D; i.class_name</span><br><span class="line">    .post-cards</span><br><span class="line">      ul.md-links</span><br><span class="line">        each item in i.link_list</span><br><span class="line">          li.md-links-item</span><br><span class="line">            a(href&#x3D;item.link  title&#x3D;item.name target&#x3D;&quot;_blank&quot;)</span><br><span class="line">              if theme.lazyload.enable</span><br><span class="line">                img.lazyload(data-src&#x3D;item.avatar onerror&#x3D;&#96;this.onerror&#x3D;null;this.src&#x3D;&#39;&#96; + url_for(theme.lodding_bg.flink) + &#96;&#39;&#96; alt&#x3D;item.name )</span><br><span class="line">              else</span><br><span class="line">                img(src&#x3D;item.avatar onerror&#x3D;&#96;this.onerror&#x3D;null;this.src&#x3D;&#39;&#96; + url_for(theme.lodding_bg.flink) + &#96;&#39;&#96; alt&#x3D;item.name )</span><br><span class="line">              .md-links-title&#x3D; item.name </span><br><span class="line">              .md-links-des&#x3D; item.descr</span><br><span class="line"></span><br><span class="line">  hr</span><br><span class="line">  div </span><br><span class="line">    h2&#x3D; theme.Flink.info_headline</span><br><span class="line">    ul</span><br><span class="line">      li&#x3D; theme.Flink.name</span><br><span class="line">      li&#x3D; theme.Flink.address</span><br><span class="line">      li&#x3D; theme.Flink.avatar </span><br><span class="line">      li&#x3D; theme.Flink.info</span><br><span class="line"></span><br><span class="line">  hr</span><br><span class="line">  .comment_int</span><br><span class="line">    p.comment-word&#x3D; theme.Flink.comment</span><br></pre></td></tr></table></figure><p>尽管我不是很懂pug这个东西，但是我还是能看懂代码的内容，其中<code>hr</code>就是一条分割线，所以说区块就用分割线来分开就好了。</p><p>最开始使用这个主题的时候（当时版本应该是1.2.0，还没有按钮分级），在做友链界面的时候，我这边就有人对我的数字提出了疑问，然后我就加入了下面那行<code>PS：本文所有的数字表示方式来自Mili - world.execute(me);</code></p><p>在<code>flink.pug</code>中加入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p(style&#x3D;&quot;font-size:9px;font-weight:bold&quot;)&#x3D; theme.Flink.PS</span><br></pre></td></tr></table></figure><p>然后在butterfly的配置文件中加入一行</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">PS:</span> <span class="string">PS：本文所有的数字表示方式来自Mili</span> <span class="bullet">-</span> <span class="string">world.execute(me);</span> <span class="comment"># PS内容，在flink自加的</span></span><br></pre></td></tr></table></figure><p>就可以在友链界面加入自定义的内容了</p><p>至于<code>A Few Requirements</code>区块在更新2.1.0后用同样的方式加入的</p><p>在<code>flink.pug</code>加入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hr</span><br><span class="line">div </span><br><span class="line">  h2&#x3D; theme.Flink.require_headline</span><br><span class="line">  ul</span><br><span class="line">    li&#x3D; theme.Flink.requirement1</span><br><span class="line">    li&#x3D; theme.Flink.requirement2</span><br><span class="line">    li&#x3D; theme.Flink.requirement3</span><br><span class="line">    li&#x3D; theme.Flink.requirement4</span><br><span class="line">    li&#x3D; theme.Flink.requirement5</span><br><span class="line">    li&#x3D; theme.Flink.requirement6</span><br></pre></td></tr></table></figure><p>有多少的requirement就加入多少行，然后在配置文件<code>butterfly.yml</code>用同样的方式加入</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">require_headline:</span> <span class="string">A</span> <span class="string">Few</span> <span class="string">Requirements</span></span><br><span class="line"><span class="attr">requirement1:</span> <span class="string">GamerNoTitle表示不接受商业性网站、下载站、视频站等</span></span><br><span class="line"><span class="attr">requirement2:</span> <span class="string">HTTP和HTTPS均可，不强制性要求小绿锁，但是只有一个IP或者带端口的不接受哦</span></span><br><span class="line"><span class="attr">requirement3:</span> <span class="string">网站要有维护，定期或不定期均可，线下朋友请忽略这一条</span></span><br><span class="line"><span class="attr">requirement4:</span> <span class="string">可以先在自己的网站加上我的友链，我处理的速度也会快一些呢~</span></span><br><span class="line"><span class="attr">requirement5:</span> <span class="string">大佬可以无视上面的要求，并加入“大佬之家”行列</span></span><br><span class="line"><span class="attr">requirement6:</span> <span class="string">如果你想联系我，在About页面中有我的相关联系方式</span></span><br></pre></td></tr></table></figure><p>就可以了~</p><h3 id="友链链接区块加入一行小字"><a href="#友链链接区块加入一行小字" class="headerlink" title="友链链接区块加入一行小字"></a>友链链接区块加入一行小字</h3><p>效果就像图片里面的那样</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@butterfly-customize/img/butterfly-customize/Link-Class-Descr.png"  alt="小字效果图"></p><p>其实这个也很简单，跟上面一样还是要动<code>flink.pug</code>文件，在最顶上那一块代码中加入一行，将所需的字典名字命名为<code>class_descr</code>，加入后的代码如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.flink</span><br><span class="line">  each i in site.data.link</span><br><span class="line">    h1&#x3D; i.class_name</span><br><span class="line">    h4&#x3D; i.class_descr&#x2F;&#x2F;- 给每个class加入class_descr参数</span><br><span class="line">    .post-cards</span><br><span class="line">      ul.md-links</span><br><span class="line">        each item in i.link_list</span><br><span class="line">          li.md-links-item</span><br><span class="line">            a(href&#x3D;item.link  title&#x3D;item.name target&#x3D;&quot;_blank&quot;)</span><br><span class="line">              if theme.lazyload.enable</span><br><span class="line">                img.lazyload(data-src&#x3D;item.avatar onerror&#x3D;&#96;this.onerror&#x3D;null;this.src&#x3D;&#39;&#96; + url_for(theme.lodding_bg.flink) + &#96;&#39;&#96; alt&#x3D;item.name )</span><br><span class="line">              else</span><br><span class="line">                img(src&#x3D;item.avatar onerror&#x3D;&#96;this.onerror&#x3D;null;this.src&#x3D;&#39;&#96; + url_for(theme.lodding_bg.flink) + &#96;&#39;&#96; alt&#x3D;item.name )</span><br><span class="line">              .md-links-title&#x3D; item.name </span><br><span class="line">              .md-links-des&#x3D; item.descr</span><br></pre></td></tr></table></figure><p>然后在link.yml的每一个class中就可以加入descr了，这里以一个区块做例子</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">class2:</span></span><br><span class="line">  <span class="attr">class_name:</span> <span class="string">DOS</span> <span class="string">私人服务</span></span><br><span class="line">  <span class="attr">class_descr:</span> <span class="string">我个人在使用的不同网络服务，在这里列出(＾Ｕ＾)ノ~ＹＯ</span><span class="comment"># 这里填入描述</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="attr">1:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">CloudFlare</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.cloudflare.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://dash.cloudflare.com/favicon.ico</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">免费的域名托管平台</span></span><br></pre></td></tr></table></figure><p>在<code>class_name</code>下面加入一行参数叫<code>class_descr</code>并设定为想要的内容即可，当然你也可以加在link_list的下面，但是请注意缩进要跟<code>class_name</code>和<code>link_list</code>平齐</p><h3 id="加入基于Gitalk的动态栏小部件"><a href="#加入基于Gitalk的动态栏小部件" class="headerlink" title="加入基于Gitalk的动态栏小部件"></a>加入基于Gitalk的动态栏小部件</h3><p>这个部件最开始是在<a href="https://diary.dorcandy.cn/" target="_blank" rel="noopener">@火喵</a>的博客看到的，然后就发了邮件问了一下是怎么实现的</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@butterfly-customize/img/butterfly-customize/Mail.png"  alt=""></p><p>感谢<a href="https://dorcandy.cn/" target="_blank" rel="noopener">@火喵</a>提供的思路~！</p><p>然后我参照了Gitalk的文档，用一个非常简单的什么都没有的html文件来装我这个Gitalk，正因为只有Gitalk，所以整个html文档就很简单</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@gitalk-css/css/gitalk-dorcandy.css"</span>&gt;</span><span class="comment">&lt;!-- 导入自己修改过后的css文件，参照了火喵的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@gitalk/js/gitalk.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="comment">&lt;!-- 导入自己修改后的js文件，主要修改了显示的字 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"gitalk-container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> gitalk = <span class="keyword">new</span> Gitalk(&#123;</span></span><br><span class="line"><span class="actionscript">    id: <span class="string">'Dynamics'</span>,</span></span><br><span class="line"><span class="actionscript">    clientID: <span class="string">'xxxxxxxxxxxxxxxxxxxx'</span>,</span></span><br><span class="line"><span class="actionscript">    clientSecret: <span class="string">'xxxxxxxxxxxxxxxxxxxxxxxxx'</span>,</span></span><br><span class="line"><span class="actionscript">    repo: <span class="string">'GamerNoTitle.Github.io'</span>,</span></span><br><span class="line"><span class="actionscript">    owner: <span class="string">'GamerNoTitle'</span>,</span></span><br><span class="line"><span class="actionscript">    admin: [<span class="string">'GamerNoTitle'</span>],</span></span><br><span class="line"><span class="actionscript">    title: <span class="string">'Dynamics'</span>,</span></span><br><span class="line"><span class="actionscript">    pagerDirection: <span class="string">'last'</span>,</span></span><br><span class="line">    perPage: 5,</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="actionscript">    gitalk.render(<span class="string">'gitalk-container'</span>)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中，<code>pagerDirection</code>本来是排序的顺序，但是按照Gitalk的<a href="https://github.com/gitalk/gitalk/issues/210" target="_blank" rel="noopener">issue#210</a>中官方所述，不登录的话排序顺序只能是从旧到新，所以我也没办法，我采取的操作是一个issue中只容纳5条动态，历史动态就放到另外的issue中</p><p>将这个html文件命名一下为<code>gitalk.html</code>，然后放在主题目录的source文件夹下，然后进入<code>.\layout\includes\widget</code>文件夹，将<code>card_announcement.pug</code>（公告卡片）复制一份作为模板并且重命名为<code>card_dynamics.pug</code>，然后打开修改里面的内容。原来里面的内容如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.card-widget.card-announcement</span><br><span class="line">  .card-content</span><br><span class="line">    .item-headline</span><br><span class="line">      i.fa.fa-bullhorn.card-announcement-animation(aria-hidden&#x3D;&quot;true&quot;)</span><br><span class="line">      span&#x3D; _p(&#39;aside.card_announcement&#39;)</span><br><span class="line">    .announcement_content&#x3D; theme.announcement.content</span><br></pre></td></tr></table></figure><p>在这里面，span应该是显示的字（如图红框处）</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@butterfly-customize/img/butterfly-customize/Announcement.png"  alt=""></p><p>但是我加入的字不在语言配置文件中有，所以直接修改成</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">span&#x3D; &#39;Dynamics&#39;</span><br></pre></td></tr></table></figure><p>就可以了，接着是要修改图标，作为动态，一个小喇叭的图标显得不是很好看。所以我就访问了<a href="https://fontawesome.com/v4.7.0/icons/" target="_blank" rel="noopener">Fontawesome@v4.7.0</a>，选择了现在的这个图标</p><p>将图标的信息修改为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i.fa.fa-quote-right(aria-hidden&#x3D;&quot;true&quot;)</span><br></pre></td></tr></table></figure><p>图标后面的那串动画就不要了，动画多了也不是很好看</p><p>最后需要引入Gitalk.html文件，在下面加入一行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include gitalk.html</span><br></pre></td></tr></table></figure><p>这样当部署完后，网站就会自动引用根目录下的<code>gitalk.html</code>文件。当然你要是直接访问我的gitalk.html文件也是能打开的</p><p>接着我们需要在网站的渲染中加入这个小部件</p><p>打开此目录下的<code>index.pug</code>，然后将这个引入加在认为合适的地方，我直接加载了公告的下面</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.aside.card_dynamics</span><br><span class="line">  include .&#x2F;card_dynamics.pug</span><br></pre></td></tr></table></figure><p>最后到<code>butterfly.yml</code>文件中，加入小部件的开关</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># left or right</span></span><br><span class="line">  <span class="attr">card_author:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_announcement:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_recent_post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_categories:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_tags:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">card_archives:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_webinfo:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_dynamics:</span> <span class="literal">true</span><span class="comment"># 动态开关</span></span><br></pre></td></tr></table></figure><p>部署自己的网页，就能够出现这种效果啦！</p><p>当然你要是在上面不要if判断，直接加入，那你就不需要在配置文件中加入开关了</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@butterfly-customize/img/butterfly-customize/dynamics-card.png"  alt="Dynamics小部件"></p><div class="note info">            <p>2020.4.4更新    主题版本<a href="mailto:butterfly@2.2.5">butterfly@2.2.5</a></p>          </div><h3 id="为网站加上全局黑白效果"><a href="#为网站加上全局黑白效果" class="headerlink" title="为网站加上全局黑白效果"></a>为网站加上全局黑白效果</h3><p>为什么加这个效果呢？我一开始加是<a href="https://mp.weixin.qq.com/s/S0-s4V1Gg443a-vyMmaOKA" target="_blank" rel="noopener">2020.4.4</a>为了纪念为抗争新冠肺炎而牺牲的各位烈士们，所以加了全局的黑白效果。先放两张图给你们看看加入后的效果</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@blackandwhite/img/butterfly-customize/blackandwhite-home.png"  alt="黑白首页"></p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@blackandwhite/img/butterfly-customize/blackandwhite-link.png"  alt="黑白友链"></p><p>就是像这样的全局黑白效果，加起来其实也不难，一开始<a href="https://yuleng.top" target="_blank" rel="noopener">@yuleng</a>给我分享了全局黑白的html代码，告诉我要加就加载header或者是body里面（下面先放html代码）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 黑白色 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">html&#123;</span><br><span class="line">filter: grayscale( 100%);</span><br><span class="line">-webkit-filter: grayscale( 100%);</span><br><span class="line">-moz-filter: grayscale( 100%);</span><br><span class="line">-ms-filter: grayscale( 100%);</span><br><span class="line">-o-filter: grayscale( 100%);</span><br><span class="line"><span class="xml">filter: url( "data:image/svg+xml;utf8,<span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">\</span>'<span class="attr">http:</span>//<span class="attr">www.w3.org</span>/<span class="attr">2000</span>/<span class="attr">svg</span>\'&gt;</span><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">\</span>'<span class="attr">grayscale</span>\'&gt;</span><span class="tag">&lt;<span class="name">feColorMatrix</span> <span class="attr">type</span>=<span class="string">\</span>'<span class="attr">matrix</span>\' <span class="attr">values</span>=<span class="string">\</span>'<span class="attr">0.3333</span> <span class="attr">0.3333</span> <span class="attr">0.3333</span> <span class="attr">0</span> <span class="attr">0</span> <span class="attr">0.3333</span> <span class="attr">0.3333</span> <span class="attr">0.3333</span> <span class="attr">0</span> <span class="attr">0</span> <span class="attr">0.3333</span> <span class="attr">0.3333</span> <span class="attr">0.3333</span> <span class="attr">0</span> <span class="attr">0</span> <span class="attr">0</span> <span class="attr">0</span> <span class="attr">0</span> <span class="attr">1</span> <span class="attr">0</span>\'/&gt;</span><span class="tag">&lt;/<span class="name">filter</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span>#grayscale");</span></span><br><span class="line">filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);</span><br><span class="line">-webkit-filter: grayscale( 1);</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>但是我们的butterfly后端是使用的pug文件作为网站样式的编写方式，所以我们要先把它转成pug形式的，转出来就是像下面这样</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  body</span><br><span class="line">    &#x2F;&#x2F; 黑白色</span><br><span class="line">    style.</span><br><span class="line">      html&#123;</span><br><span class="line">      filter: grayscale( 100%);</span><br><span class="line">      -webkit-filter: grayscale( 100%);</span><br><span class="line">      -moz-filter: grayscale( 100%);</span><br><span class="line">      -ms-filter: grayscale( 100%);</span><br><span class="line">      -o-filter: grayscale( 100%);</span><br><span class="line">      filter: url( &quot;data:image&#x2F;svg+xml;utf8,&lt;svg xmlns&#x3D;\&#39;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg\&#39;&gt;&lt;filter id&#x3D;\&#39;grayscale\&#39;&gt;&lt;feColorMatrix type&#x3D;\&#39;matrix\&#39; values&#x3D;\&#39;0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\&#39;&#x2F;&gt;&lt;&#x2F;filter&gt;&lt;&#x2F;svg&gt;#grayscale&quot;);</span><br><span class="line">      filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale&#x3D;1);</span><br><span class="line">      -webkit-filter: grayscale( 1);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>然后我把这一串代码存到一个名为<code>blackandwhite.pug</code>的文件，将它放在主题目录下的<code>layout/includes/addons</code>里面，然后就要在<code>layout.pug</code>里面引入文件。在原文件的<code>include ./head.pug</code>下面加入一行来引入我们的文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.blackandwhite</span><br><span class="line">  include .&#x2F;addons&#x2F;blackandwhite.pug</span><br></pre></td></tr></table></figure><p>加个if判断是为了下次要使用的时候还能够用，不用再次修改。</p><p>接着我们到<code>butterfly.yml</code>文件内加多一行</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">blackandwhite:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>这样就开启了我们的黑白效果</p><p>为了方便大家，我将文件放出来<a href="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@blackandwhite.pug/file/blackandwhite.pug" target="_blank" rel="noopener">blackandwhite.pug</a>，大家只需要将文件放在对应的位置，加上对应的配置项即可！</p><div class="note info">            <h3 id="不定期更新"><a href="#不定期更新" class="headerlink" title="不定期更新"></a>不定期更新</h3>          </div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;note info&quot;&gt;
            &lt;p&gt;在正式讲博客的美化之前，我想先感谢&lt;a href=&quot;https://jerryc.me/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;@jerryc&lt;/a&gt;能够带来这么棒的主题~如果
      
    
    </summary>
    
    
      <category term="Tech" scheme="http://bili33.top/categories/Tech/"/>
    
    
      <category term="Tech" scheme="http://bili33.top/tags/Tech/"/>
    
  </entry>
  
  <entry>
    <title>Valine-Admin博客评论邮件提醒系统部署</title>
    <link href="http://bili33.top/2020/03/14/Valine-Admin/"/>
    <id>http://bili33.top/2020/03/14/Valine-Admin/</id>
    <published>2020-03-14T13:47:10.000Z</published>
    <updated>2020-03-29T02:52:32.917Z</updated>
    
    <content type="html"><![CDATA[<div class="note info">            <h3 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h3><p>本篇内容为博主以前已经完成的事件的记录，并非完成后立即写的文章</p>          </div><div class="note success">            <h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>本篇内容以已经成功部署Valine作为评论系统为前提，如果还未部署，请参考<a href="https://github.com/DesertsP/Valine-Admin" target="_blank" rel="noopener">官方文档</a></p>          </div><hr><p>本网站一直在使用Valine作为评论系统，之前一直在想：wordpress里面的评论有邮件提醒功能，Valine能不能实现这种功能呢？于是我就到Google去搜索，然后发现了<a href="https://github.com/DesertsP/Valine-Admin" target="_blank" rel="noopener">Valine-Admin</a>这个项目</p><p>首先我们打开我们的Leancloud，进入我们的应用（我这里使用的是国际版，至于为什么选用国际版，有那么一丁点的原因的）</p><p>如图，点击云引擎-设置，然后将Valine-Admin的HTTPS仓库链接贴进去，链接如下：<code>https://github.com/DesertsP/Valine-Admin.git</code></p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Valine-Admin/img/Valine-Admin/Engine-Settings-Repo.png"  alt="云引擎贴入仓库地址"></p><p>请注意，不要使用SSH链接，会因为没有权限而部署失败！</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Valine-Admin/img/Valine-Admin/SSH-Deploy-Failed.png"  alt="SSH链接部署失败"></p><p>部署完后，我们需要按照教程配置我们的环境变量</p><p>下面是必填项（从<a href="https://deserts.io/valine-admin-document/" target="_blank" rel="noopener">官方教程</a>搬过来的表格）：</p><table><thead><tr><th align="left">变量</th><th align="left">示例</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">SITE_NAME</td><td align="left">Deserts</td><td align="left">[必填]博客名称</td></tr><tr><td align="left">SITE_URL</td><td align="left"><a href="https://panjunwen.com/" target="_blank" rel="noopener">https://panjunwen.com</a></td><td align="left">[必填]首页地址</td></tr><tr><td align="left"><strong>SMTP_SERVICE</strong></td><td align="left">QQ</td><td align="left">[新版支持]邮件服务提供商，支持 QQ、163、126、Gmail 以及 <a href="https://nodemailer.com/smtp/well-known/#supported-services" target="_blank" rel="noopener">更多</a></td></tr><tr><td align="left">SMTP_USER</td><td align="left"><a href="mailto:xxxxxx@qq.com">xxxxxx@qq.com</a></td><td align="left">[必填]SMTP登录用户</td></tr><tr><td align="left">SMTP_PASS</td><td align="left">ccxxxxxxxxch</td><td align="left">[必填]SMTP登录密码（QQ邮箱需要获取独立密码）</td></tr><tr><td align="left">SENDER_NAME</td><td align="left">Deserts</td><td align="left">[必填]发件人</td></tr><tr><td align="left">SENDER_EMAIL</td><td align="left"><a href="mailto:xxxxxx@qq.com">xxxxxx@qq.com</a></td><td align="left">[必填]发件邮箱</td></tr><tr><td align="left">ADMIN_URL</td><td align="left"><a href="https://xxx.leanapp.cn/" target="_blank" rel="noopener">https://xxx.leanapp.cn/</a></td><td align="left">[建议]Web主机二级域名，用于自动唤醒</td></tr><tr><td align="left">BLOGGER_EMAIL</td><td align="left"><a href="mailto:xxxxx@gmail.com">xxxxx@gmail.com</a></td><td align="left">[可选]博主通知收件地址，默认使用SENDER_EMAIL</td></tr><tr><td align="left">AKISMET_KEY</td><td align="left">xxxxxxxxxxxx</td><td align="left">[可选]Akismet Key 用于垃圾评论检测，设为MANUAL_REVIEW开启人工审核，留空不使用反垃圾</td></tr></tbody></table><p>变量设置完成后，需要到下面Web主机域名框填写自己的后台管理面板的域名</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Valine-Admin/img/Valine-Admin/Subdomain-Manage.png"  alt="管理面板域名填写"></p><p>填写完后我们输入自己填写的域名就可以进入后台界面了，第一次进入会要求创建账户</p><div class="note danger">            <p>如果直接是登录界面请先删除_User表中的所有数据！！！</p>          </div><p>登录界面应该长这样</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Valine-Admin-1/img/Valine-Admin/Manager-Login.png"  alt="评论后台管理面板登录"></p><p>云引擎的其他相关配置我在这里不多说，可以去看<a href="https://deserts.io/valine-admin-document/" target="_blank" rel="noopener">官方教程</a>，另外，关于博主的通知邮件，我在Rainbow模板上修改了一点，效果是这样的</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Valine-Admin/img/Valine-Admin/Email.png"  alt="博主通知邮件模板"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"border-radius: 10px 10px 10px 10px;font-size:13px;    color: #555555;width: 666px;font-family:'Century Gothic','Trebuchet MS','Hiragino Sans GB',微软雅黑,'Microsoft Yahei',Tahoma,Helvetica,Arial,'SimSun',sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffffff repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:100%;background:#49BDAD;color:#ffffff;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));background-image: -webkit-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"font-size:15px;word-break:break-all;padding: 23px 32px;margin:0;background-color: hsla(0,0%,100%,.4);border-radius: 10px 10px 0 0;"</span>&gt;</span>您的<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"text-decoration:none;color: #ffffff;"</span> <span class="attr">href</span>=<span class="string">"$&#123;SITE_URL&#125;"</span>&gt;</span> $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>上有新的留言：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"margin:40px auto;width:90%"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>$&#123;NICK&#125; 给您的留言如下：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;"</span>&gt;</span>$&#123;COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>您可以点击<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"text-decoration:none; color:#12addb"</span> <span class="attr">href</span>=<span class="string">"$&#123;POST_URL&#125;#comments"</span>&gt;</span>查看回复的完整內容<span class="tag">&lt;/<span class="name">a</span>&gt;</span>，欢迎再次光临<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"text-decoration:none; color:#12addb"</span>                <span class="attr">href</span>=<span class="string">"$&#123;SITE_URL&#125;"</span>&gt;</span> $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>。<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:visited</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:active</span>&#123;<span class="attribute">text-decoration</span>:none&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>而给用户的模板，使用的是官方的Rainbow模板</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"border-radius: 10px 10px 10px 10px;font-size:13px;    color: #555555;width: 666px;font-family:'Century Gothic','Trebuchet MS','Hiragino Sans GB',微软雅黑,'Microsoft Yahei',Tahoma,Helvetica,Arial,'SimSun',sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffffff repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:100%;background:#49BDAD;color:#ffffff;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));background-image: -webkit-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"font-size:15px;word-break:break-all;padding: 23px 32px;margin:0;background-color: hsla(0,0%,100%,.4);border-radius: 10px 10px 0 0;"</span>&gt;</span>您在<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"text-decoration:none;color: #ffffff;"</span> <span class="attr">href</span>=<span class="string">"$&#123;SITE_URL&#125;"</span>&gt;</span> $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>上的留言有新回复啦！<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"margin:40px auto;width:90%"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>$&#123;PARENT_NICK&#125; 同学，您曾在文章上发表评论：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;"</span>&gt;</span>$&#123;PARENT_COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>$&#123;NICK&#125; 给您的回复如下：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;"</span>&gt;</span>$&#123;COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>您可以点击<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"text-decoration:none; color:#12addb"</span> <span class="attr">href</span>=<span class="string">"$&#123;POST_URL&#125;#comments"</span>&gt;</span>查看回复的完整內容<span class="tag">&lt;/<span class="name">a</span>&gt;</span>，欢迎再次光临<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"text-decoration:none; color:#12addb"</span>                <span class="attr">href</span>=<span class="string">"$&#123;SITE_URL&#125;"</span>&gt;</span> $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>。<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:visited</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:active</span>&#123;<span class="attribute">text-decoration</span>:none&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note warning">            <h3 id="邮件提醒的坑"><a href="#邮件提醒的坑" class="headerlink" title="邮件提醒的坑"></a>邮件提醒的坑</h3><p>如果要使用邮件通知，不需要在你的网站配置中把Notify这一项设定为true，否则只会按照设置中重置密码的模板发送而不会使用在变量中设置的模板，并且云引擎也不会发送邮件；顺带可以把verify调整为false来避免出现Valine的反人类评论验证</p>          </div><p><a href="https://deserts.io/valine-admin-document/" target="_blank" rel="noopener">根据教程</a>配置完相关的变量和管理面板后，邮件就会自动发送了！</p><hr><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>最近着手于美化一下博客，想在右边加上一个像火喵那样的基于Gitalk的动态面板，顺带改一下友链界面</p><p>昨天已经上了强制HTTPS访问啦！就上不了CloudFlare的CDN了，不过没有减速CDN也会快的吧</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;note info&quot;&gt;
            &lt;h3 id=&quot;PS&quot;&gt;&lt;a href=&quot;#PS&quot; class=&quot;headerlink&quot; title=&quot;PS&quot;&gt;&lt;/a&gt;PS&lt;/h3&gt;&lt;p&gt;本篇内容为博主以前已经完成的事件的记录，并非完成后立即写的文章&lt;/p
      
    
    </summary>
    
    
      <category term="Software" scheme="http://bili33.top/categories/Software/"/>
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>日常吐槽05 - 【阿里云限时活动】免费领取6个月ESC服务器，到期前一个月还能免费续费多半年</title>
    <link href="http://bili33.top/2020/03/08/diary5/"/>
    <id>http://bili33.top/2020/03/08/diary5/</id>
    <published>2020-03-08T12:23:09.000Z</published>
    <updated>2020-03-29T02:52:32.952Z</updated>
    
    <content type="html"><![CDATA[<p>活动网址：<a href="https://developer.aliyun.com/adc/student/" target="_blank" rel="noopener">https://developer.aliyun.com/adc/student/</a></p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@diary5/img/Diary5/Website.png"  alt="网页"></p><p>近期，阿里云开启了白给活动，叫做<code>阿里云高校学生“在家实践”计划</code>，官方描述是这样的：</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@diary5/img/Diary5/Descr.png"  alt="白给活动描述"></p><p>然后往下拉，可以看到这个活动分成5个部分：</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@diary5/img/Diary5/Steps.png"  alt="五步"></p><p>①注册/登录 ②学生认证 ③完成测试 ④领取ECS学习资源 ⑤开始课程学习</p><p>其实这五部分就前面三个部分是需要我们进行的。注册和登录就不用多说了；学生认证：如果你是在校大学生，那么这个认证对你来说很轻松；<del>如果你不是在校大学生，没关系！按照阿里云官方的说法，24岁以下都算学生。</del> 事实证明还是要完成学生认证……</p><p>然后麻烦的东西是测试，这个测试共有10道题目，每道题10分，具体说明如下：</p><blockquote><h2 id="学生成长计划领取资格考试-云计算及云服务器入门"><a href="#学生成长计划领取资格考试-云计算及云服务器入门" class="headerlink" title="学生成长计划领取资格考试 - 云计算及云服务器入门"></a>学生成长计划领取资格考试 - 云计算及云服务器入门</h2><h4 id="共10道题-限时10分钟"><a href="#共10道题-限时10分钟" class="headerlink" title="共10道题 限时10分钟"></a>共10道题 限时10分钟</h4><p>知识点考察范围：云计算概念、云服务器ECS基础知识。学习《云计算的前世今生》（链接: <a href="https://developer.aliyun.com/course/1236）、《7天玩转云服务器》" target="_blank" rel="noopener">https://developer.aliyun.com/course/1236）、《7天玩转云服务器》</a> (链接: <a href="https://developer.aliyun.com/course/70" target="_blank" rel="noopener">https://developer.aliyun.com/course/70</a>) 课程将有助于提升考试通过率。</p><hr><h3 id="答题开始即开始计时，中途不可暂停，如超时则自动提交"><a href="#答题开始即开始计时，中途不可暂停，如超时则自动提交" class="headerlink" title="答题开始即开始计时，中途不可暂停，如超时则自动提交"></a>答题开始即开始计时，中途不可暂停，如超时则自动提交</h3><p>1、考试共 (10) 道题，总分100分，及格分数60分<br>2、考试需在（10分钟）内交卷，过程中无法暂停，请提前安排好时间；如未及时交卷，则本次考试作废<br>3、推荐使用 Chrome 浏览器（版本：73及以上的正式版本），或Firefox浏览器（版本：66及以上的正式版本)</p></blockquote><p>反正我做下来也挺简单的，拿了个80分，不会的可以去百度一下，10分钟10道题时间绝对够</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@diary5/img/Diary5/Server-information.png"  alt="服务器相关信息"></p><p>然后回到页面，你就有资格领取服务器啦！建议早上八点蹲点领取哦~</p><p>如果你是教师，你还可以通过教师认证，拿多一台服务器，岂不美哉？</p><p>阿里云活动规则如下：</p><blockquote><div class="ace-dialog-body"><div><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000" data-spm-anchor-id="a2c6h.13788107.0.i4.602b61a8cBLXd6">一、活动对象：国内全日制在校学生 </span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">二、符合以下条件用户可参与： </span></span></span></p><ul><li><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">阿里云注册且个人实名认证用户</span></span></span></li><li><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">完成学生认证</span></span></span></li><li><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">完成学习课程并通过测试</span></span></span></li></ul><p></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">三、活动规则</span></span></span></p><p data-spm-anchor-id="a2c6h.13788107.0.i2.602b61a8cBLXd6"><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">1.    全日制在校大学生，需同时完成阿里云个人实名认证、学生认证，且两者信息一致，认证通过后，完成学生计划的学习课程，并通过测试，同一用户可免费领取1台云服务器ECS（仅限当前未保有 ECS用户 ）和学习课程资源。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">2.    学生计划提供的云服务器ECS产品数额有限，每天8点开放固定领取名额 ，先到先得，领完即止。用户领取时应确认地域等相关选择信息，开通后不允许更改配置。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">3.    学生计划用户免费领取的云服务器ECS，有效期自领取日起6个月内有效。用户学生认证在有效期内且有效时长大于等于6个月的用户，云服务器ECS到期释放前30天内，可登录个人中心，参加阶段性学习考试，测试通过，可免费续期1次，时长为6个月，续费实例规格需跟领取时一致才可享受。使用过程中如需对领取产品进行升级，请按照标准费用进行升级。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">4.    如学生用户账号下存在正在使用的ECS产品或已通过云翼计划购买或未支付订单，会导致系统对用户领取资格的审核无法通过；在此情况下，用户ECS产品到期释放后、作废相应的未支付订单后，方可正常参与相应产品的领取。 </span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">5.    参与阿里云高校在家实践计划的学生用户，同一用户最多可保有2台云服务器ECS，指包括满足学生计划条件用户，领取的1台云服务器ECS（同一用户限领1台），和通过教师计划，满足实名认证和学生认证条件用户，获得教师提供兑换码，验证成功，领取的1台云服务器ECS（同一用户限领1台）。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">6.    参与阿里云高校在家实践计划的学生用户，通过教师提供兑换码，领取的云服务器ECS，仅用于教师指定课程学习使用，课程结束后，请及时保存相关数据并进行ECS资源释放。如需继续使用，请自行进行续费操作。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">7.    用户参与阿里云高校在家实践计划（含学生计划）所获得的相应权益，仅限本人使用，不得转让、出售或以其他方式换取利益。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">8.    为保证活动的公平公正，阿里云有权对恶意刷抢（如通过程序等技术手段）活动资源，长期资源闲置 ，利用资源从事违法违规行为的用户收回免费领取ECS使用资格。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">9.    如用户在活动中存在隐瞒、虚构、作弊、欺诈或通过其他非正常手段规避活动规则、获取不当利益的行为，例如：作弊领取、恶意套现、网络攻击、虚假交易等，阿里云有权收回相关权益、取消用户的活动参与资格，撤销违规交易，必要时追究违规用户的法律责任。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">10.    活动名称仅为方便用户理解参考使用，不具有效力，实际活动内容以具体活动规则为准。</span></span></span></p><p></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">四、名词及解释</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">1.    “阿里云官网”，是指包含域名为www.aliyun.com的网站以及阿里云客户端，如APP，但阿里云国际站，包括alibabacloud.com以及所有下属页面和jp.aliyun.com以及所有下属页面除外。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">2.    “同一用户”，是指根据不同阿里云账号在注册、登录、使用中的关联信息，阿里云判断其实际为同一用户。关联信息包括但不限于同一证件号、同一手机号、同一支付账号、同一设备、同一地址等。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">3.    “同人账号”，是指同一用户拥有多个阿里云账号的，各个账号之间互为同人账号。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">4.     “指定云产品”，是指某场具体活动列举的云产品（如上文所提ECS）。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">5.    除非有相反证据证明外，用户参与活动所获得的全部权益和相应责任，均归属于参与活动的该阿里云账号所对应的实名认证主体。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">6.    阿里云可以根据活动的实际情况对活动规则进行变动或调整，相关变动或调整将公布在活动页面上，并于公布时即时生效；但不影响用户在活动规则调整前已经获得的权益。</span></span></span></p></div></div></blockquote><p><strong>不说了，我要去白嫖了！</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;活动网址：&lt;a href=&quot;https://developer.aliyun.com/adc/student/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://developer.aliyun.com/adc/student/&lt;/a&gt;&lt;/p&gt;
      
    
    </summary>
    
    
      <category term="diary" scheme="http://bili33.top/categories/diary/"/>
    
    
      <category term="diary" scheme="http://bili33.top/tags/diary/"/>
    
  </entry>
  
  <entry>
    <title>Windows10美化笔记</title>
    <link href="http://bili33.top/2020/03/06/Windows10-Beautify/"/>
    <id>http://bili33.top/2020/03/06/Windows10-Beautify/</id>
    <published>2020-03-06T02:42:33.000Z</published>
    <updated>2020-03-29T02:52:32.941Z</updated>
    
    <content type="html"><![CDATA[<p>这几天在折腾Win10的美化，本来是想在<a href="https://zhutix.com/tag/win10-zhuti/" target="_blank" rel="noopener">某美化网站</a>上下载主题包来美化的（这里有两个美化主题包需要自取 <a href="https://www.lanzous.com/i9zex0b" target="_blank" rel="noopener">主题①</a> | <a href="https://www.lanzous.com/i9zewch" target="_blank" rel="noopener">主题②</a>），但是实在是太麻烦了（<a href="https://zhutix.com/study/win10-jc/" target="_blank" rel="noopener">具体怎么麻烦我把教程放出来你们感受一下</a>），于是我决定自己来……</p><hr><p>最后效果如图↓</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/Result.jpg"  alt="美化结果"></p><hr><h4 id="第一步：寻找壁纸"><a href="#第一步：寻找壁纸" class="headerlink" title="第一步：寻找壁纸"></a>第一步：寻找壁纸</h4><p>壁纸这个问题，当然是要去P站啦（当然是Pixiv啦，在想什么啦）</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/Pixiv-Search-Wallpaper.png"  alt="壁纸搜索"></p><p>因为是美化向，所以壁纸的风格建议是不要太辣眼睛。这里的辣眼睛是指颜色不要太多，色差不要太大，我这里找的图是一张颜色集中在蓝色的图片，地址在这里<a href="https://www.pixiv.net/artworks/79898339" target="_blank" rel="noopener">https://www.pixiv.net/artworks/79898339</a>（图片太大，一张图15.2MB，就不放原图了）</p><p>像下面这两张图这样的，第一张太亮，第二章色彩太繁杂的我是真的不推荐，当然你喜欢那我也没什么说的嘛</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/unrecommand1.png"  alt="不推荐类型1：太亮"></p><p>原图地址：<a href="https://www.pixiv.net/artworks/79925515" target="_blank" rel="noopener">https://www.pixiv.net/artworks/79925515</a></p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/unrecommand2.png"  alt="不推荐类型2：色彩繁杂"></p><p>原图地址：<a href="https://www.pixiv.net/artworks/79923171" target="_blank" rel="noopener">https://www.pixiv.net/artworks/79923171</a></p><p>如果有人执意使用过量的图片的话，我这里有个建议，可以到PS里面把图片的亮度拉低一点，这样子不会看起来那么亮眼。</p><h3 id="第二步：安装插件"><a href="#第二步：安装插件" class="headerlink" title="第二步：安装插件"></a>第二步：安装插件</h3><p>这里我安装的插件有以下几个：</p><p>1、<a href="http://www.yynote.cn/" target="_blank" rel="noopener">小黄条TODO</a></p><p>2、<a href="https://www.rainmeter.net/" target="_blank" rel="noopener">雨滴桌面</a></p><p>3、<a href="https://www.microsoft.com/store/apps/9PF4KZ2VN4W9" target="_blank" rel="noopener">TranslucentTB</a> 丨 <a href="[https://www.microsoft.com/zh-cn/p/translucenttb-%E6%B1%89%E5%8C%96-by-tpxxn/9n5w18jc9bg2](https://www.microsoft.com/zh-cn/p/translucenttb-汉化-by-tpxxn/9n5w18jc9bg2)">汉化版</a> 丨 <a href="https://github.com/TranslucentTB/TranslucentTB" target="_blank" rel="noopener">Github</a>（<a href="https://github.com/tpxxn/TranslucentTB" target="_blank" rel="noopener">汉化</a>）（微软商店有，可以自己去微软商店里面搜索）</p><p>第一个是一个ToDo的列表，就是我左上角的那个Todo列表，有点类似便签，免费版绝对够个人使用，付费也就是多了云端存储而已</p><p>第二个相信不用多说，桌面小挂件，雨滴桌面非常好用</p><p>第三个是任务栏透明，可以调整各种参数，例如窗口最大化后任务栏的外观等等，微软商店有，如果上面的链接打不开就去微软商店里面搜索</p><h3 id="第三步：放置图标"><a href="#第三步：放置图标" class="headerlink" title="第三步：放置图标"></a>第三步：放置图标</h3><p>如果真的要美化，相信微软自带的自动排列图标只是一个累赘，所以我们要把它关掉，然后把图标放在自己喜欢的位置。我的建议是把图标放在壁纸偏暗的地方或者是色块比较均匀的地方，没有太多的颜色变化的地方。放好了以后，各种应用的图标摆在一起，风格也不统一，我们就需要使用图标包来替换。</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/icon-change.png"  alt="图标更换"></p><p>这里我使用的是Pure轻雨图标包，在酷安上有手机版，电脑的这一套是我从网上找的，但是我没法发出来（蓝奏云的限制太烦了），所以还是请你们自己去网上找吧，当然你也可以使用其他的图标包。右击桌面上的快捷方式，选到属性，然后选更改图标，选到自己的图标点确定即可</p><p>把自己的应用图标更改好，放在自己喜欢的位置，就完成了图标的管理工作</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/icon-list.jpg"  alt="图标放置"></p><h3 id="第四步：配置雨滴"><a href="#第四步：配置雨滴" class="headerlink" title="第四步：配置雨滴"></a>第四步：配置雨滴</h3><p>雨滴的小挂件就是它的亮点，我们需要配置一下自己的小挂件。我这里分享一些小挂件，需要的同学可以自己拿 <a href="https://www.lanzous.com/b0e1msmzi" target="_blank" rel="noopener">传送门</a></p><p>一开始雨滴的那些黑色的挂件太丑了，我们可以右键它选择关闭皮肤来删除掉它</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/rainmeter-default-welcome.jpg"  alt="雨滴默认欢迎界面"></p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/rainmeter-default-welcome-delete.jpg"  alt="关闭欢迎界面"></p><p>皮肤共有两种安装方式：如果你拿到的是后缀名为<code>.rmskin</code>的，恭喜你，这是安装最简单的皮肤，直接双击安装即可！但是如果你拿到的是一个文件夹，别担心。你可以访问目录</p><p><code>C:\Users\%USERNAME%\Documents\Rainmeter\Skins</code>，将自己的皮肤拖入；或者直接右击托盘里面的雨滴，选到皮肤，打开皮肤目录，也可以打开这个文件夹。拖入后右击托盘中的雨滴，点击管理，然后点击左下角的刷新全部就可以载入皮肤了！</p><p>然后就右击托盘里面的雨滴图标，选择皮肤，再选择自己的皮肤包里面的所需挂件，点击就可以加入到桌面上了</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/rainmeter-add.jpg"  alt="加入挂件"></p><p>将挂件拖动到合适的位置，你就完成自己的美化啦！</p><hr><h3 id="我的皮肤配置："><a href="#我的皮肤配置：" class="headerlink" title="我的皮肤配置："></a>我的皮肤配置：</h3><p>Live 4 Music\In  Out</p><p>Live 4 Music\DIgital Circles</p><p>Live 4 Music\Cpu  Ram</p><p>Simple Clean\音乐频谱</p><p>系统信息Bars_II_by_Rasylver\Bars II\WIFI</p><p>系统信息Bars_II_by_Rasylver\Bars II\RAM</p><p>系统信息Bars_II_by_Rasylver\Bars II\CPU</p><p>这些皮肤在我发的文件里面都有，链接在上面，需要的可以自己取用。</p><hr><h3 id="题外话："><a href="#题外话：" class="headerlink" title="题外话："></a>题外话：</h3><p>二月就过去了，学校还没开学，上网课感觉不是很在状态……</p><p>下周土命2就开新赛季了，本赛季等级120，下赛季冲个35就好了</p><p>想玩VR……</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;这几天在折腾Win10的美化，本来是想在&lt;a href=&quot;https://zhutix.com/tag/win10-zhuti/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;某美化网站&lt;/a&gt;上下载主题包来美化的（这里有两个美化主题包需要自取 &lt;a hr
      
    
    </summary>
    
    
      <category term="Software" scheme="http://bili33.top/categories/Software/"/>
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>Netease-Comment-Spider 网易云音乐热评爬虫使用手册</title>
    <link href="http://bili33.top/2020/02/17/Netease-Comment-Spider/"/>
    <id>http://bili33.top/2020/02/17/Netease-Comment-Spider/</id>
    <published>2020-02-17T09:35:16.000Z</published>
    <updated>2020-03-29T02:52:32.911Z</updated>
    
    <content type="html"><![CDATA[<p>今天有人申请适配网易云音乐热评的api，反正也没啥事干，就做一个吧！</p><p>如果你想看使用手册，那么请你直接往下拉跳过制作过程</p><p><strong>观前提示：可以点击左下角点开导航栏阅读，项目地址：<a href="https://github.com/GamerNoTitle/Netease-Comment-Spider" target="_blank" rel="noopener">https://github.com/GamerNoTitle/Netease-Comment-Spider</a></strong></p><hr><h3 id="制作过程"><a href="#制作过程" class="headerlink" title="制作过程"></a>制作过程</h3><p>本程序是调用的<a href="https://www.mouse123.cn/api/163/api.php" target="_blank" rel="noopener">https://www.mouse123.cn/api/163/api.php</a>这个api，会返回很多数据，下面是一个返回的例子</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"song_id"</span>:<span class="string">"118"</span>,<span class="attr">"title"</span>:<span class="string">"Wolves"</span>,<span class="attr">"images"</span>:<span class="string">"https:\/\/p1.music.126.net\/-nQ2E-8ZjuwGtMipBTYzBw==\/17902248323721194.jpg"</span>,<span class="attr">"author"</span>:<span class="string">"Selena Gomez"</span>,<span class="attr">"album"</span>:<span class="string">"Wolves"</span>,<span class="attr">"description"</span>:<span class="string">"\u6b4c\u624b\uff1aSelena Gomez\u3002\u6240\u5c5e\u4e13\u8f91\uff1aWolves\u3002"</span>,<span class="attr">"pub_date"</span>:<span class="string">"2017-10-24 16:00:00"</span>,<span class="attr">"comment_id"</span>:<span class="string">"1510"</span>,<span class="attr">"comment_user_id"</span>:<span class="string">"333845131"</span>,<span class="attr">"comment_nickname"</span>:<span class="string">"Stroyberry"</span>,<span class="attr">"comment_avatar_url"</span>:<span class="string">"https:\/\/p2.music.126.net\/D7Z2xViXVpB7xH3m5NxDIw==\/109951164448917887.jpg"</span>,<span class="attr">"comment_content"</span>:<span class="string">"\ud83d\udc95\u5bf9\u65b0\u6b4c\u6709\u8bf4\u4e0d\u51fa\u7684\u611f\u89c9\uff0csel\u7684\u58f0\u97f3\u8f7b\u5feb\u5374\u53c8\u5f88\u968f\u6027\uff0c\u50cf\u662f\u8ffd\u72fc\u5374\u53c8\u9a7e\u9a6d\u7740\uff0c\u5b8c\u7f8e\u7684future bass\u8ba9\u4f60\u65e0\u6cd5\u81ea\u62d4\u554a\uff01sel\u548c\u68c9\u82b1\u7cd6\u8fd9\u6837\u795e\u7ea7\u7684\u78b0\u649e\ud83d\udca5\u8ba9\u4eba\u7a92\u606f\uff01\u5feb\u5e26\u4e0a\u8033\u673a\ud83c\udfa7\uff01\u95ed\u4e0a\u773c\u775b\uff01\u4e00\u8d77\u7a7f\u68ad\u4e8e\u4e1b\u6797\u4e4b\u4e2d\ud83d\ude0f"</span>,<span class="attr">"comment_pub_date"</span>:<span class="string">"2017-10-26 22:23:26"</span>&#125;</span><br></pre></td></tr></table></figure><p>这个返回的数据看上去很复杂，但是分析一下，返回的还是json格式，那么这个东西的解析就跟<a href="http://bili33.top/2020/02/11/Hitokoto-Spider/">一言的那个项目</a>是一样的，根据上面的信息，我把config.json的可选配置分成了以下几个</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"path"</span>: <span class="string">"Netease.csv"</span>,</span><br><span class="line">    <span class="attr">"times"</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">"delay"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>: <span class="number">60</span>,</span><br><span class="line">    <span class="attr">"song_id"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"images"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"album"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"description"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"pub_date"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"comment_user_id"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"comment_avatar_url"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"comment_pub_date"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>path</code>为文件输出的路径，文件以csv格式输出，请务必带文件后缀！</p><p><code>times</code>为抓取次数，支持大于0的整数，直接输入数字即可！</p><p><code>delay</code>表示抓取一次得到结果以后等待的时长，为了不给api提供商造成太大的服务器负担，我强烈建议设置此项，填入大于等于0的整数即可，单位是秒</p><p><code>timeout</code>表示连接超时时长，支持大于5的整数</p><p><code>song_id</code>为歌曲的id，如果开启将把歌曲id写入csv文档，只支持true或false</p><p><code>images</code>表示是否抓取图片，这是专辑封面，将保存到<code>&quot;.\albums&quot;</code>文件夹并命名为对应的评论ID，只支持true或false</p><p><code>album</code>表示歌曲来源专辑，如果开启将把专辑名写入csv文件，只支持true或false</p><p><code>description</code>表示歌曲的描述，如果开启将把描述写入csv文件，只支持true或false</p><p><code>pub_date</code>表示歌曲发行的时间，如果开启将把时间写入csv文档，格式为<code>YYYY-MM-DD HH:MM:SS</code>，只支持true或false</p><p><code>comment_user_id</code>表示评论的用户的id，如果开启将把id写入csv文档，只支持true或false</p><p><code>comment_avatar_url</code>表示评论用户的头像，如果开启将把头像存瑞<code>.\avatars</code>文件夹并命名为对应的评论ID，只支持true或false</p><p><code>comment_pub_date</code>表示评论发布的时间，如果开启将把时间写入csv文档，格式为<code>YYYY-MM-DD HH:MM:SS</code>，只支持true或false</p><p>搞定可选配置以后，把<a href="http://bili33.top/2020/02/11/Hitokoto-Spider/">一言的那个项目</a>拿过来当模板，然后把变量名称往里面套，很快就做好了一个程序。但是这个api返回的数据还是有些不一样的，其中就返回了<code>专辑封面的URL</code>、<code>评论用户的头像URL</code>，这两个URL可以让我们获取到相应的图片</p><p>另外，这个api返回的编码格式是Unicode，与一言直接返回中文不一样，我本来想做一个Unicode直接转成gbk保存的功能，但是最后只能以UTF8保存<em>（有能做出相应功能的大佬欢迎提交PR）</em></p><p>我使用了requests直接获取图片的二进制码，然后将其写入一个文件来达到保存功能，具体实现方式如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(conf[<span class="string">'images'</span>]):</span><br><span class="line">    print(<span class="string">"正在保存专辑封面……"</span>)</span><br><span class="line">    image = r.get(data[<span class="string">'images'</span>]).content</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'./images/'</span> + data[<span class="string">'comment_id'</span>] + <span class="string">'.jpg'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(image)</span><br><span class="line"><span class="keyword">if</span>(conf[<span class="string">'comment_avatar_url'</span>]):</span><br><span class="line">    print(<span class="string">"正在保存评论用户头像……"</span>)</span><br><span class="line">    image = r.get(data[<span class="string">'comment_avatar_url'</span>]).content</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'./avatars/'</span> + data[<span class="string">'comment_id'</span>] + <span class="string">'.jpg'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(image)</span><br></pre></td></tr></table></figure><p>这样就可以保存图片了，但是对应的文件夹不能够删除，否则会出现找不到文件的BUG~</p><hr><h3 id="使用手册"><a href="#使用手册" class="headerlink" title="使用手册"></a>使用手册</h3><h4 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h4><p>基本功能就有从api获取对应的信息，并将其存入csv文件，固定有的信息是<code>comment_id</code>、<code>comment_username</code>、<code>title</code>、<code>author</code>、<code>comment_content</code>这几个信息，另外可选的在config.json中进行修改</p><p>输出的csv文件目前是以UTF8的编码保存的，如果想要在Excel中查看，你需要使用vscode之类的文本编辑器更改保存的编码方式为gbk才能够在Excel中查看，否则会乱码</p><h4 id="可选配置"><a href="#可选配置" class="headerlink" title="可选配置"></a>可选配置</h4><p>克隆了代码以后，在目录下有一个config.json文件，在config.json文件可以对选项进行启用</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"path"</span>: <span class="string">"Netease.csv"</span>,</span><br><span class="line">    <span class="attr">"times"</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">"delay"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>: <span class="number">60</span>,</span><br><span class="line">    <span class="attr">"song_id"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"images"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"album"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"description"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"pub_date"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"comment_user_id"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"comment_avatar_url"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"comment_pub_date"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>path</code>为文件输出的路径，文件以csv格式输出，请务必带文件后缀！</p><p><code>times</code>为抓取次数，支持大于0的整数，直接输入数字即可！</p><p><code>delay</code>表示抓取一次得到结果以后等待的时长，为了不给api提供商造成太大的服务器负担，我强烈建议设置此项，填入大于等于0的整数即可，单位是秒</p><p><code>timeout</code>表示连接超时时长，支持大于5的整数</p><p><code>song_id</code>为歌曲的id，如果开启将把歌曲id写入csv文档，只支持true或false</p><p><code>images</code>表示是否抓取图片，这是专辑封面，将保存到<code>&quot;.\albums&quot;</code>文件夹并命名为对应的评论ID，只支持true或false</p><p><code>album</code>表示歌曲来源专辑，如果开启将把专辑名写入csv文件，只支持true或false</p><p><code>description</code>表示歌曲的描述，如果开启将把描述写入csv文件，只支持true或false</p><p><code>pub_date</code>表示歌曲发行的时间，如果开启将把时间写入csv文档，格式为<code>YYYY-MM-DD HH:MM:SS</code>，只支持true或false</p><p><code>comment_user_id</code>表示评论的用户的id，如果开启将把id写入csv文档，只支持true或false</p><p><code>comment_avatar_url</code>表示评论用户的头像，如果开启将把头像存瑞<code>.\avatars</code>文件夹并命名为对应的评论ID，只支持true或false</p><p><code>comment_pub_date</code>表示评论发布的时间，如果开启将把时间写入csv文档，格式为<code>YYYY-MM-DD HH:MM:SS</code>，只支持true或false</p><p>上面这些参数根据自己的需要进行设置即可！需要注意的是如果开启了<code>images</code>和<code>comment_avatar_url</code>选项那么不能够删除<code>avatars</code>和<code>images</code>文件夹，否则会报错！！！</p><h4 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q &amp; A"></a>Q &amp; A</h4><h5 id="Q-Errno-2-No-such-file-or-directory"><a href="#Q-Errno-2-No-such-file-or-directory" class="headerlink" title="Q: [Errno 2] No such file or directory"></a>Q: [Errno 2] No such file or directory</h5><p>如果你在使用本程序的时候出现了以下错误：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"main.py"</span>, line 107, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    with open(<span class="string">'images/'</span> + data[<span class="string">'comment_id'</span>] + <span class="string">'.jpg'</span>, <span class="string">'wb'</span>) as f:</span><br><span class="line">FileNotFoundError: [Errno 2] No such file or directory: <span class="string">'images/xxx.jpg'</span> </span><br><span class="line"><span class="comment"># 此处xxx应为某一个数字</span></span><br></pre></td></tr></table></figure><p>A: 请你检查是否删除了<code>avatars</code>文件夹或<code>images</code>文件夹！</p><hr><h5 id="Q-KeyboardInterrupt"><a href="#Q-KeyboardInterrupt" class="headerlink" title="Q: KeyboardInterrupt"></a>Q: KeyboardInterrupt</h5><p>如果你在使用本程序的时候出现了以下错误：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"main.py"</span>, line 50, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    res = r.get(<span class="string">"https://www.mouse123.cn/api/163/api.php"</span>,timeout=timeout)  <span class="comment"># 调用api</span></span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\requests\api.py"</span>, line 75, <span class="keyword">in</span> get</span><br><span class="line">    <span class="built_in">return</span> request(<span class="string">'get'</span>, url, params=params, **kwargs)</span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\requests\api.py"</span>, line 60, <span class="keyword">in</span> request</span><br><span class="line">    <span class="built_in">return</span> session.request(method=method, url=url, **kwargs)</span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\requests\sessions.py"</span>, line 533, <span class="keyword">in</span> request</span><br><span class="line">    resp = self.send(prep, **send_kwargs)</span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\requests\sessions.py"</span>, line 646, <span class="keyword">in</span> send</span><br><span class="line">    r = adapter.send(request, **kwargs)</span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\requests\adapters.py"</span>, line 439, <span class="keyword">in</span> send</span><br><span class="line">    resp = conn.urlopen(</span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\connectionpool.py"</span>, line 665, <span class="keyword">in</span> urlopen</span><br><span class="line">    httplib_response = self._make_request(</span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\connectionpool.py"</span>, line 376, <span class="keyword">in</span> _make_request</span><br><span class="line">    self._validate_conn(conn)</span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\connectionpool.py"</span>, line 994, <span class="keyword">in</span> _validate_conn</span><br><span class="line">    conn.connect()</span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\connection.py"</span>, line 300, <span class="keyword">in</span> connect</span><br><span class="line">    conn = self._new_conn()</span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\connection.py"</span>, line 156, <span class="keyword">in</span> _new_conn</span><br><span class="line">    conn = connection.create_connection(</span><br><span class="line">  File <span class="string">"C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\util\connection.py"</span>, line 74, <span class="keyword">in</span> create_connection</span><br><span class="line">    sock.connect(sa)</span><br><span class="line">KeyboardInterrupt</span><br></pre></td></tr></table></figure><p>A: 请你检查在程序运行的过程中是否有键盘的操作，例如<kbd>Ctrl</kbd>+<kbd>C</kbd>之类的操作！</p><hr><h5 id="Q-requests-exceptions-SSLError"><a href="#Q-requests-exceptions-SSLError" class="headerlink" title="Q: requests.exceptions.SSLError"></a>Q: requests.exceptions.SSLError</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\urllib3\contrib\pyopenssl.py"</span>, line 453, <span class="keyword">in</span> wrap_socket</span><br><span class="line">    cnx.do_handshake()</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\OpenSSL\SSL.py"</span>, line 1915, <span class="keyword">in</span> do_handshake</span><br><span class="line">    self._raise_ssl_error(self._ssl, result)</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\OpenSSL\SSL.py"</span>, line 1639, <span class="keyword">in</span> _raise_ssl_error</span><br><span class="line">    raise SysCallError(errno, errorcode.get(errno))</span><br><span class="line">OpenSSL.SSL.SysCallError: (10060, <span class="string">'WSAETIMEDOUT'</span>)</span><br><span class="line"></span><br><span class="line">During handling of the above exception, another exception occurred:</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\urllib3\connectionpool.py"</span>, line 600, <span class="keyword">in</span> urlopen</span><br><span class="line">    chunked=chunked)</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\urllib3\connectionpool.py"</span>, line 343, <span class="keyword">in</span> _make_request</span><br><span class="line">    self._validate_conn(conn)</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\urllib3\connectionpool.py"</span>, line 839, <span class="keyword">in</span> _validate_conn</span><br><span class="line">    conn.connect()</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\urllib3\connection.py"</span>, line 344, <span class="keyword">in</span> connect</span><br><span class="line">    ssl_context=context)</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\urllib3\util\ssl_.py"</span>, line 344, <span class="keyword">in</span> ssl_wrap_socket</span><br><span class="line">    <span class="built_in">return</span> context.wrap_socket(sock, server_hostname=server_hostname)</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\urllib3\contrib\pyopenssl.py"</span>, line 459, <span class="keyword">in</span> wrap_socket</span><br><span class="line">    raise ssl.SSLError(<span class="string">'bad handshake: %r'</span> % e)</span><br><span class="line">ssl.SSLError: (<span class="string">"bad handshake: SysCallError(10060, 'WSAETIMEDOUT')"</span>,)</span><br><span class="line"></span><br><span class="line">During handling of the above exception, another exception occurred:</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\requests\adapters.py"</span>, line 449, <span class="keyword">in</span> send</span><br><span class="line">    timeout=timeout</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\urllib3\connectionpool.py"</span>, line 638, <span class="keyword">in</span> urlopen</span><br><span class="line">    _stacktrace=sys.exc_info()[2])</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\urllib3\util\retry.py"</span>, line 398, <span class="keyword">in</span> increment</span><br><span class="line">    raise MaxRetryError(_pool, url, error or ResponseError(cause))</span><br><span class="line">urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host=<span class="string">'p2.music.126.net'</span>, port=443): Max retries exceeded with url: /gxo54B2ypqq0Y6tmahBnIw==/109951163596240238.jpg (Caused by SSLError(SSLError(<span class="string">"bad handshake: SysCallError(10060, 'WSAETIMEDOUT')"</span>)))</span><br><span class="line"></span><br><span class="line">During handling of the above exception, another exception occurred:</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"main.py"</span>, line 77, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    image = r.get(data[<span class="string">'images'</span>]).content</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\requests\api.py"</span>, line 75, <span class="keyword">in</span> get</span><br><span class="line">    <span class="built_in">return</span> request(<span class="string">'get'</span>, url, params=params, **kwargs)</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\requests\api.py"</span>, line 60, <span class="keyword">in</span> request</span><br><span class="line">    <span class="built_in">return</span> session.request(method=method, url=url, **kwargs)</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\requests\sessions.py"</span>, line 533, <span class="keyword">in</span> request</span><br><span class="line">    resp = self.send(prep, **send_kwargs)</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\requests\sessions.py"</span>, line 646, <span class="keyword">in</span> send</span><br><span class="line">    r = adapter.send(request, **kwargs)</span><br><span class="line">  File <span class="string">"C:\ProgramData\Anaconda3\lib\site-packages\requests\adapters.py"</span>, line 514, <span class="keyword">in</span> send</span><br><span class="line">    raise SSLError(e, request=request)</span><br><span class="line">requests.exceptions.SSLError: HTTPSConnectionPool(host=<span class="string">'p2.music.126.net'</span>, port=443): Max retries exceeded with url: /gxo54B2ypqq0Y6tmahBnIw==/109951163596240238.jpg (Caused by SSLError(SSLError(<span class="string">"bad handshake: SysCallError(10060, 'WSAETIMEDOUT')"</span>)))</span><br></pre></td></tr></table></figure><p>这种情况是握手失败导致的，请检查网络连接！</p><hr><h3 id="欢迎提交PR！"><a href="#欢迎提交PR！" class="headerlink" title="欢迎提交PR！"></a>欢迎提交PR！</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天有人申请适配网易云音乐热评的api，反正也没啥事干，就做一个吧！&lt;/p&gt;
&lt;p&gt;如果你想看使用手册，那么请你直接往下拉跳过制作过程&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;观前提示：可以点击左下角点开导航栏阅读，项目地址：&lt;a href=&quot;https://github.com/G
      
    
    </summary>
    
    
      <category term="Tech" scheme="http://bili33.top/categories/Tech/"/>
    
    
      <category term="Tech" scheme="http://bili33.top/tags/Tech/"/>
    
  </entry>
  
  <entry>
    <title>Hitokoto-Spider 一言库爬虫开发日记</title>
    <link href="http://bili33.top/2020/02/11/Hitokoto-Spider/"/>
    <id>http://bili33.top/2020/02/11/Hitokoto-Spider/</id>
    <published>2020-02-11T06:17:37.000Z</published>
    <updated>2020-03-29T02:52:32.909Z</updated>
    
    <content type="html"><![CDATA[<p>最近在家里虽然有上课（学校开学了），但是中午两个半小时的休息时间以及晚上的自由时间是真的闲，在想要干什么……然后我在我的学弟的电脑桌面上发现了八爪鱼，想起了他用八爪鱼抓一言库的时候，我就在想：为什么我不自己做一个抓一言的爬虫呢？说干就干，于是我就开始坐了起来……</p><p><strong>下面，是我的个人开发日记，包含回忆，有些细节可能记得不是很清楚</strong></p><p>项目地址：<a href="https://github.com/GamerNoTitle/Hitokoto-Spider" target="_blank" rel="noopener">https://github.com/GamerNoTitle/Hitokoto-Spider</a></p><hr><h3 id="2020年2月10日-星期一-天气：不很好"><a href="#2020年2月10日-星期一-天气：不很好" class="headerlink" title="2020年2月10日 星期一 天气：不很好"></a>2020年2月10日 星期一 天气：不很好</h3><p>今天是学校开学第一天，钉钉的会议功能真的菜，视频延迟3秒钟，互动板延迟3分钟……而且这个会议可以回看不能下载？？？拿fiddler抓包去……</p><p>（12:00）开始做爬虫了，先到一言去看看API是怎么用的先。在官网，可以看到下面这个表格（为了方便，我直接把源码拿过来了）</p><table class="apitable" border="0" cellspacing="0" cellpadding="0">                    <tbody>                    <tr>                        <th width="100"><b>时间</b></th>                        <th width="200"><b>影响Api</b></th>                        <th width="500"><b>调整</b></th>                    </tr>                    <tr>                        <td>2018年6月之前</td>                        <td>旧版API（http://api.hitokoto.cn和https://sslapi.hitokoto.cn）</td>                        <td>旧版API将在6月份之前以切换解析的方式合并到v1API中。也就意味着调整之后请求此API无异于请求v1API。调整后此接口的稳定性将不再受到维护。</td>                    </tr>                    <tr>                        <td>2018年7月之前</td>                        <td>v1API（https://v1.hitokoto.cn）</td>                        <td>v1API将发布最终版本。v1接口将会在未来存在较长时间（即使v2发布，请放心使用）。</td>                    </tr>                    <tr>                        <td>v2 发布（时间未知）</td>                        <td>v2API（域名未知）</td>                        <td>上线v2API。</td>                    </tr>                    </tbody>                </table><p>这个是一言的几个api的地址，我选择的就是用的<a href="https://v1.hitokoto.cn" target="_blank" rel="noopener">https://v1.hitokoto.cn</a></p><p>拿到了api，我要看看访问出来的效果是怎么样的，于是我又访问了这个地址，获得了一大串文本</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"id"</span>: <span class="number">79</span>,<span class="comment">//一言的ID</span></span><br><span class="line">  <span class="attr">"hitokoto"</span>: <span class="string">"所以，他们的祭典还没结束。"</span>,<span class="comment">//一言内容</span></span><br><span class="line">  <span class="attr">"type"</span>: <span class="string">"a"</span>,<span class="comment">//类型，具体可在官网查阅，这里a是Anime即动漫</span></span><br><span class="line">  <span class="attr">"from"</span>: <span class="string">"我的青春恋爱物语果然有问题"</span>,<span class="comment">//一言出处</span></span><br><span class="line">  <span class="attr">"from_who"</span>: <span class="literal">null</span>,<span class="comment">//谁说的话</span></span><br><span class="line">  <span class="attr">"creator"</span>: <span class="string">"阿布碳。"</span>,<span class="comment">//提交此条目的用户</span></span><br><span class="line">  <span class="attr">"creator_uid"</span>: <span class="number">0</span>,<span class="comment">//用户的uid，可以不看</span></span><br><span class="line">  <span class="attr">"reviewer"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">"uuid"</span>: <span class="string">"f6aa4116-5a0f-4ab0-807a-bf3838a5fd23"</span>,<span class="comment">//用户的uuid，可以不看</span></span><br><span class="line">  <span class="attr">"created_at"</span>: <span class="string">"1468605909"</span><span class="comment">//何时创建，这里是以时间戳的方式展示</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我看着：这玩意怎么格式这么像json呢？？？</p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0.0/嗯？.jpg"  width="200" height="200"><p>直到我往下拉，发现：</p><p>这塔喵不就是json嘛……（上面的注释是我加入的）</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.12/img/Hitokoto-spider/return.png"  alt=""></p><p>搞清楚了返回出来的结果的组成后，我们就可以开始撸代码了！</p><p>打开VSCode，新建一个文件夹，在这个文件夹里面进行修改</p><p>首先确定我需要用什么来模拟http请求，因为我自己用过<a href="https://github.com/Dawnnnnnn/bilibili-live-tools" target="_blank" rel="noopener">@Dawnnnnnn/bilibili-live-tools</a>这个项目，而且在用这个项目的时候，特别是在学校的服务器上面挂，那个Windows Server 2016 DataCenter装个requests运行库都难，所以我特别记得requests这个库可以模拟http请求，先装上再说！</p><p>于是我在powershell内打了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install requests</span><br></pre></td></tr></table></figure><p>来安装我的requests运行库，接着，在我的python文件内打入</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">as</span> r</span><br></pre></td></tr></table></figure><p>因为本人比较懒，所以喜欢把运行库简写，加入了<code>as r</code>我就可以不用打那么多字母了，真的方便</p><p>接着，要先搞清楚requests库的用法，于是乎我又去查了一下，查到这几个函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">requests.get(‘https://github.com/timeline.json’)                 <span class="comment"># GET请求</span></span><br><span class="line">requests.post(“http://httpbin.org/post”)                         <span class="comment"># POST请求</span></span><br><span class="line">requests.put(“http://httpbin.org/put”)                           <span class="comment"># PUT请求</span></span><br><span class="line">requests.delete(“http://httpbin.org/delete”)                     <span class="comment"># DELETE请求</span></span><br><span class="line">requests.head(“http://httpbin.org/get”)                          <span class="comment"># HEAD请求</span></span><br><span class="line">requests.options(“http://httpbin.org/get” )                      <span class="comment"># OPTIONS请求</span></span><br></pre></td></tr></table></figure><p>那么我要获得结果，采用了GET请求，然后在我的项目中打入了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res = r.get(<span class="string">'https://international.v1.hitokoto.cn/'</span>)</span><br></pre></td></tr></table></figure><p>这样就可以把获得的结果赋给res，然后通过调用res的值来获得我们想要的结果，接着运行一次我们的文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">as</span> r</span><br><span class="line">res = r.get(<span class="string">'https://v1.hitokoto.cn/'</span>)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure><p>然后返回的值为：<code>&lt;Response [200]&gt;</code></p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.12/img/Hitokoto-spider/Output1.png"  alt="状态码输出">这不是状态码嘛？？？我不要这玩意儿啊，我要结果。。。</p><p>然后我就commit了一下，盖上我的垃圾Lenovo，然后去睡觉了……</p><hr><h3 id="2020年2月11日-星期二-天气：还是不很好"><a href="#2020年2月11日-星期二-天气：还是不很好" class="headerlink" title="2020年2月11日 星期二 天气：还是不很好"></a>2020年2月11日 星期二 天气：还是不很好</h3><p>今天继续开发，昨天拿到的结果是个状态码，然后我又有思路了！</p><p>我就在print中动一下手脚，给被打印的res加上一个参数，然后代码就变成了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">as</span> r</span><br><span class="line">res = r.get(<span class="string">'https://v1.hitokoto.cn/'</span>)</span><br><span class="line">print(res.text)</span><br></pre></td></tr></table></figure><p>接着就给我输出了我想要的东西嘿嘿</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.12/img/Hitokoto-spider/Output2.png"  alt="json格式输出"></p><p>这个项目本来想跟<a href="https://github.com/soulxyz" target="_blank" rel="noopener">学弟@Soulxyz</a>一起做的，然后我就先把这个雏形push到了仓库里面，他也fork了，然后回来给我的是一个叫做<a href="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.12/files/Hitokoto-Spider/csvdomo.py" target="_blank" rel="noopener">csvdomo.py（点击可下载）</a>的文件（我寻思你是不是想打csvdemo？？？）</p><p>我打开了，然后发现：你这不是并发获取10次都是一个结果吗？？？你这不重新获取不是每次都一样的吗？？？</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.12/img/Hitokoto-spider/csvdomo-output.png"  alt="csvdomo输出"></p><p>于是我决定放弃他这里，我自己来弄这个项目……后来他告诉我，用一言的国际节点可以有更高的QPS，然后我就转用国际节点了……</p><p>接着下一步是要重复抓取，对于这一部分，我想到的是让用户输入要抓取的次数，类型为int，命名为num，然后采用for循环重复抓取，就写了下面的这一段</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"请输入抓取的数量，如果要抓取全部请到https://hitokoto.cn/status查看现在的一言总数并填入："</span>)</span><br><span class="line">num=input()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">    res = r.get(<span class="string">'https://v1.hitokoto.cn/'</span>)</span><br></pre></td></tr></table></figure><p>这样子来实现重复抓取的功能，至于为什么如果要抓取全部还要输入，因为那个数字我是真的拿不到啊……</p><p>终于实现了抓取的功能，接下来要实现写入文件的功能</p><p>我的想法是写入csv文件，因为我自己在华南理工学习的时候就用过相关的函数，所以我就去搜索了一下，结果发现python原生支持csv，不需要用到pandas，所以我就调用了自带的csv库</p><p>（要上课了，先撤了）</p><p>（16:30）我回来了！现在就是要搞定写入csv库的问题，我在网上找到了相关的方法：</p><p>先打开一个文件，然后把这个文件设定为file变量，然后def两个函数，一个创建，一个写入，就像下面这个亚子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_csv</span><span class="params">(path)</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(path,<span class="string">"w+"</span>,newline=<span class="string">""</span>,encoding=<span class="string">"utf8"</span>) <span class="keyword">as</span> file:    </span><br><span class="line">        <span class="comment"># 打开文件，也相当于一个回车，避免覆盖文档</span></span><br><span class="line">        csv_file = csv.writer(file)</span><br><span class="line">        head = [<span class="string">"id"</span>,<span class="string">"sort"</span>,<span class="string">"hitokoto"</span>] <span class="comment"># 创建csv表头</span></span><br><span class="line">        csv_file.writerow(head)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">append_csv</span><span class="params">(path)</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(path,<span class="string">"a+"</span>,newline=<span class="string">''</span>,encoding=<span class="string">"utf8"</span>) <span class="keyword">as</span> file:</span><br><span class="line">        csv_file = csv.writer(file)</span><br><span class="line">        data = [inputs]</span><br><span class="line">        csv_file.writerows(data)</span><br></pre></td></tr></table></figure><p>这样我就定义了两个函数，然后在下面直接用这个函数就好了</p><p>再加上上面写过让用户填入输出路径和爬取次数的相关代码，直接把变量拿过来用就好了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"请输入文件输出名（请自行输入后缀，文件以csv的方式保存）："</span>)</span><br><span class="line">path=input()    <span class="comment"># 输出文件</span></span><br><span class="line">print(<span class="string">"请输入抓取的数量，如果要抓取全部请到https://hitokoto.cn/status查看现在的一言总数并填入："</span>)</span><br><span class="line">num=int(input()) <span class="comment"># 抓取数量</span></span><br></pre></td></tr></table></figure><p>将path用于文件的路径，将num用于下面的抓取次数，完美！</p><p>然后在下面，将抓取到的数据排版一下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">data=res.json()</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"a"</span>: sorts=(<span class="string">"Anime"</span>)  <span class="comment"># 自动把分类码还原为分类</span></span><br><span class="line"><span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"b"</span>: sorts=(<span class="string">"Comic"</span>)</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"c"</span>: sorts=(<span class="string">"Game"</span>)</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"d"</span>: sorts=(<span class="string">"Novel"</span>)</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"e"</span>: sorts=(<span class="string">"Myself"</span>)</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"f"</span>: sorts=(<span class="string">"Internet"</span>)</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"g"</span>: sorts=(<span class="string">"Other"</span>)</span><br><span class="line">inputs=[data[<span class="string">"id"</span>],sorts,data[<span class="string">"hitokoto"</span>]]</span><br><span class="line"><span class="comment"># print(res.text)   # 输出一言，如需要把最前面的#去掉即可</span></span><br><span class="line">append_csv(path)</span><br></pre></td></tr></table></figure><p>这样就完成了写入操作！写入csv的操作搞定了以后，最后剩下除掉重复的结果，不然会有很多同样的话，这是最麻烦的部分……</p><p>开始我的想法是：每次获取到一个结果以后，将id存入存入一个存储变量叫做ids，开始先初始化</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ids=[]</span><br></pre></td></tr></table></figure><p>这样将ids初始化为一个空列表，然后往这个空列表里面加入id，每次遍历一次ids里面的id是否与获取到的id相同，如果相同则说明获取到了重复的话，将这个结果舍弃，然后重新获取</p><p>将我的重复剔除的功能写出来，就像这样（从之前的commit弄出来的）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ids=[<span class="string">'0'</span>]</span><br><span class="line">i=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">    res = r.get(<span class="string">'https://international.v1.hitokoto.cn/'</span>,timeout=<span class="number">60</span>) <span class="comment"># 得到服务器回应，此时回应的内容为json文件（res.text）和状态码</span></span><br><span class="line">    data=res.json() <span class="comment"># 将获取到的结果转为json字符串</span></span><br><span class="line">    t=<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> range(i):</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">"id"</span>]==ids[t]:  </span><br><span class="line">            <span class="comment"># ID已经存在，即已经抓到过，这地方可能会报BUG，目前没修（数组越限BUG）</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            t=t+<span class="number">1</span>   <span class="comment"># 自增</span></span><br><span class="line">            <span class="keyword">if</span> t==i:</span><br><span class="line">                ids.append(data[<span class="string">"id"</span>])  </span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"a"</span>: sorts=(<span class="string">"Anime"</span>)  <span class="comment"># 自动把分类码还原为分类</span></span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"b"</span>: sorts=(<span class="string">"Comic"</span>)</span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"c"</span>: sorts=(<span class="string">"Game"</span>)</span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"d"</span>: sorts=(<span class="string">"Novel"</span>)</span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"e"</span>: sorts=(<span class="string">"Myself"</span>)</span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"f"</span>: sorts=(<span class="string">"Internet"</span>)</span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"g"</span>: sorts=(<span class="string">"Other"</span>)</span><br><span class="line">    temp=[data[<span class="string">"id"</span>],sorts,data[<span class="string">"hitokoto"</span>]]</span><br><span class="line">    print(res.text)</span><br><span class="line">    append_csv(path)</span><br></pre></td></tr></table></figure><p>接着就会发现，运行着运行着，告诉我数组越限了？！！！</p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0.0/害怕.jpg"  width="186" height="302"><p>这个问题就真的很烦，因为C++是允许数组越限的，但是python不允许，会直接冷不丁给你报错，所以每次遇到这个问题我都不是很想去理它，但是不理它我的程序就运行不下去了啊！！！所以我先把检测重复这一段注释掉了，合上垃圾Lenovo，睡觉！</p><hr><h3 id="2020年2月12日-星期三-天气：下雨了啊！"><a href="#2020年2月12日-星期三-天气：下雨了啊！" class="headerlink" title="2020年2月12日 星期三 天气：下雨了啊！"></a>2020年2月12日 星期三 天气：下雨了啊！</h3><p>今天早上上课上到11点20分，开始写代码，用一中午想把这个重复检测的功能写完……</p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0.0/大佬带我.jpg"  width="360" height="344.5"><p>想到昨天的数组越限就头疼，我打算放弃这个方法，不存列表了！</p><p>我记得当时在华工有用过像<code>array[t]</code>这样的东西，于是我想起了一个利器——array数组！</p><p>新的思路是这样的：将得到的数据存入数组名为temp，开始先初始化这个变量：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> array <span class="keyword">import</span> array</span><br><span class="line">temp = array[<span class="string">'i'</span>,[<span class="number">0</span>]]</span><br></pre></td></tr></table></figure><p>至于我为什么在里面写一个0，是因为我发现我不这么做的话他会给我报错……</p><p>这样就初始化了一个名为temp类型为int的数组，里面含有一个元素0。然后在下面每次获取完id以后就将其存入temp变量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp.append(data[<span class="string">"id"</span>])</span><br></pre></td></tr></table></figure><p>通过这样，每次再遍历temp里面的东西，只要重复，就说明抓过，没重复就说明没抓过，就可以达到去掉重复的效果！</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">    time.sleep(delay)</span><br><span class="line">    print(<span class="string">"正在获取新的一言……"</span>)</span><br><span class="line">    res = r.get(<span class="string">'https://international.v1.hitokoto.cn/'</span>,timeout=<span class="number">60</span>) </span><br><span class="line">    <span class="comment"># 得到服务器回应，此时回应的内容为json文件（res.text）和状态码</span></span><br><span class="line">    data=res.json() <span class="comment"># 将获取到的结果转为json字符串</span></span><br><span class="line">    temp_minus=temp.count<span class="number">-1</span></span><br><span class="line">    <span class="keyword">if</span> temp_minus!=<span class="number">0</span>:</span><br><span class="line">        t=<span class="number">1</span></span><br><span class="line">        print(<span class="string">"正在检测是否抓取过结果……"</span>)</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> range(temp.count):</span><br><span class="line">            <span class="keyword">if</span>(int(data[<span class="string">"id"</span>])==temp[t]):</span><br><span class="line">                print(<span class="string">"发现已经抓取到的结果，正在丢弃……"</span>)</span><br><span class="line">                i=i<span class="number">-1</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">elif</span>(t==temp.count<span class="number">-1</span>):</span><br><span class="line">                print(<span class="string">"未抓取过的结果，正在存入文件……"</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"a"</span>: sorts=(<span class="string">"Anime"</span>)  <span class="comment"># 自动把分类码还原为分类</span></span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"b"</span>: sorts=(<span class="string">"Comic"</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"c"</span>: sorts=(<span class="string">"Game"</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"d"</span>: sorts=(<span class="string">"Novel"</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"e"</span>: sorts=(<span class="string">"Myself"</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"f"</span>: sorts=(<span class="string">"Internet"</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"g"</span>: sorts=(<span class="string">"Other"</span>)</span><br><span class="line">                inputs=[data[<span class="string">"id"</span>],sorts,data[<span class="string">"hitokoto"</span>]]</span><br><span class="line">                <span class="comment"># print(res.text)   # 输出一言，如需要把最前面的#去掉即可</span></span><br><span class="line">                append_csv(path)</span><br><span class="line">                temp.append(data[<span class="string">"id"</span>])</span><br><span class="line">                end_Pro=datetime.datetime.now()</span><br><span class="line">                print(<span class="string">"已完成数量："</span>+str(i+<span class="number">1</span>)+<span class="string">'，已经用时：'</span>+str(end_Pro-start_Pro))</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"a"</span>: sorts=(<span class="string">"Anime"</span>)  <span class="comment"># 自动把分类码还原为分类</span></span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"b"</span>: sorts=(<span class="string">"Comic"</span>)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"c"</span>: sorts=(<span class="string">"Game"</span>)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"d"</span>: sorts=(<span class="string">"Novel"</span>)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"e"</span>: sorts=(<span class="string">"Myself"</span>)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"f"</span>: sorts=(<span class="string">"Internet"</span>)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">"type"</span>]== <span class="string">"g"</span>: sorts=(<span class="string">"Other"</span>)</span><br><span class="line">        inputs=[data[<span class="string">"id"</span>],sorts,data[<span class="string">"hitokoto"</span>]]</span><br><span class="line">        <span class="comment"># print(res.text) # 输出一言，如需要把最前面的#去掉即可</span></span><br><span class="line">        append_csv(path)</span><br><span class="line">        temp.append(data[<span class="string">"id"</span>])</span><br><span class="line">        end_Pro=datetime.datetime.now()</span><br><span class="line">        print(<span class="string">"已完成数量："</span>+str(i+<span class="number">1</span>)+<span class="string">'，已经用时：'</span>+str(end_Pro-start_Pro))</span><br></pre></td></tr></table></figure><p>最后写出来的效果是这样子的，然后问题又出来了，我的temp.count似乎不能被它正确识别出来，于是我打开了一个新的文档，测试一下这个玩意输出长什么样子：</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.12/img/Hitokoto-spider/Output3.png"  alt="Output3"></p><p>emmmm，这是啥？？？</p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0.0/害怕崩坏限定.jpg"  width="428" height="345.5"><p>然后我又去求助万能的百度，网友们告诉我可以用len(temp)来获得数组的元素个数，然后我就把这玩意改了，终于可以运行了！！！接着问题又来了。。。</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.12/img/Hitokoto-spider/Output4.png"  alt="Output4"></p><p>这是？？？这怎么不连续啊，这数字？？？我想到可能是抓到重复的时候算抓了，就导致了i+1（不过这次测试挺非的，这么多次一样。。。非到极致也是一种欧！）</p><p>后来我试试加一个<code>i=i-1</code>在相应位置，结果还是不行，我就想到可能是局部变量改不动？？？</p><p>我就自己定义一个变量，用while循环呗……然后我就改用while循环</p><p>这下终于可以了，抓到的结果没有抓到重复的（因为中途连接超时导致程序停止运行了，所以只抓了2159条，本来是想把整个一言库抓完的，<a href="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.12/files/Hitokoto-Spider/Hitokoto.csv" target="_blank" rel="noopener">点我下载2159条数据，请用UTF8解码后保存为gbk才能在Excel上查看哦</a>）</p><p>终于搞定啦！！！这个项目终于能够按照期望运行了！</p><p>接下来要解决的问题：</p><ul><li><input disabled="" type="checkbox"> json配置文件支持</li><li><input disabled="" type="checkbox"> GUI支持</li></ul><hr><h3 id="题外话："><a href="#题外话：" class="headerlink" title="题外话："></a>题外话：</h3><p>这是我第一次做爬虫，把学到的python技术用出来。项目已经上传到<a href="https://github.com/GamerNoTitle/Hitokoto-Spider" target="_blank" rel="noopener">https://github.com/GamerNoTitle/Hitokoto-Spider</a></p><p>有人愿意与我一起做项目我也非常开心，希望大家能够活用此项目，不要再用什么八爪鱼抓一言了，那种要VIP的软件对我们这种程序员来说一点也不友好，还不如自己来……</p><hr><h3 id="2020年2月16日-星期日-天气：还是下雨天……"><a href="#2020年2月16日-星期日-天气：还是下雨天……" class="headerlink" title="2020年2月16日 星期日 天气：还是下雨天……"></a>2020年2月16日 星期日 天气：还是下雨天……</h3><p>今天晚上，我对爬虫进行了优化，之前我上面就说过要提供json配置文件的支持，今天的目标就是这个！走起！</p><p>首先，要新建一个json文件，里面包含的参数如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"path"</span>: <span class="string">"Hitokoto.csv"</span>,<span class="comment">//文件输出路径</span></span><br><span class="line">    <span class="attr">"times"</span>: <span class="number">3</span>,<span class="comment">// 抓取次数</span></span><br><span class="line">    <span class="attr">"delay"</span>: <span class="number">0</span>,<span class="comment">// 抓取延迟，针对一言的QPS设置</span></span><br><span class="line">    <span class="attr">"timeout"</span>: <span class="number">60</span>,<span class="comment">// 连接超时时间（单位：秒）</span></span><br><span class="line">    <span class="attr">"from"</span>: <span class="literal">false</span>,<span class="comment">// 来自什么作品</span></span><br><span class="line">    <span class="attr">"from_who"</span>: <span class="literal">false</span>,<span class="comment">// 来自谁</span></span><br><span class="line">    <span class="attr">"creator"</span>: <span class="literal">false</span>,<span class="comment">// 哪位用户提交的</span></span><br><span class="line">    <span class="attr">"created_at"</span>: <span class="literal">false</span><span class="comment">// 何时提交</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中，文件输出路径是str变量，抓取次数、抓取延迟、抓取超时都是int变量，from、from_who、creator、created_at都是bool型变量，这就表示它只支持true和false</p><p>搞定config文件的内容后，反过来对代码进行添加，定义一个读取json文件的函数，命名为read_config()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_config</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">"config.json"</span>) <span class="keyword">as</span> json_file:</span><br><span class="line">        config = js.load(json_file)</span><br><span class="line">    <span class="keyword">return</span> config</span><br></pre></td></tr></table></figure><p>这样，我使用conf = read_config()就可以获得文件中的所有内容，文件读出来的结果应该是这样的（如图）</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@2020.2.17-1/img/Hitokoto-Spider/json_read.png"  alt="json read"></p><p>把程序再美化一下，运行后发现，出了BUG</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@2020.2.17/img/Hitokoto-Spider/from_who_bug.png"  alt="from_who KeyError"></p><p>KeyError？？？WTF？？？你不是能正常读入的呢嘛？这又是个什么鬼错误……</p><p>上网搜索说是读不到相关的东西，不在字典中，我就想在上面提前置顶from_who的值，但是一言返回的结果里面的东西我也修改不了啊……所以还是要解决KeyError的问题</p><p>上网一搜，全部都是用dict导致的问题。我寻思：我怎么也没有操作字典吧。。。</p><p>算了，先上传吧，明天再修复from_who的BUG……</p><p>我的友人表示想建立一个一言的镜像站，所以要求我把其他的参数给加上，我先加吧……</p><p>尴尬……又出现了KeyError的问题，这次是creator_uid和reviewer，算了明天弄吧……睡觉！</p><h3 id="2020年2月17日-星期一-天气：晴天"><a href="#2020年2月17日-星期一-天气：晴天" class="headerlink" title="2020年2月17日 星期一 天气：晴天"></a>2020年2月17日 星期一 天气：晴天</h3><p>今天早上起来，换了台电脑，还是有keyerror的错误，然后去问了一下大学导师，他告诉我是data里面没有这个key的项的问题，然后我又倒回去看发现，上面提到的三个数值有些结果是没有使用双引号括起来的，基本都写的null或者是0，这样就导致data里面没有这个key，进而导致keyerror</p><p>所以我是打算用try和except这两个东西进行解决。</p><p>在代码里稍作修改，加入try和except</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(conf[<span class="string">"from_who"</span>] == <span class="literal">True</span>): </span><br><span class="line"><span class="keyword">try</span>: inputs.append(data[<span class="string">"from_who"</span>])</span><br><span class="line">    <span class="keyword">except</span> KeyError: inputs.append(<span class="string">"null"</span>)</span><br></pre></td></tr></table></figure><p>在会报KeyError错误的地方都进行这样的修改，然后进行调试</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@2020.2.17-1/img/Hitokoto-Spider/KeyError-Fixed.png"  alt="KeyError Fixed"></p><p>终于可以啦！！！推送代码，项目完成！</p><p>接下来就是要加入GUI支持了，但是我其实不是很会做GUI，所以说别抱太大希望，很有可能鸽掉……</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Diary/Gugugu.jpg"  alt="白咕咕"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近在家里虽然有上课（学校开学了），但是中午两个半小时的休息时间以及晚上的自由时间是真的闲，在想要干什么……然后我在我的学弟的电脑桌面上发现了八爪鱼，想起了他用八爪鱼抓一言库的时候，我就在想：为什么我不自己做一个抓一言的爬虫呢？说干就干，于是我就开始坐了起来……&lt;/p&gt;
&lt;
      
    
    </summary>
    
    
      <category term="Tech" scheme="http://bili33.top/categories/Tech/"/>
    
    
      <category term="Tech" scheme="http://bili33.top/tags/Tech/"/>
    
  </entry>
  
  <entry>
    <title>Onedrive分享型网盘搭建 - FODI</title>
    <link href="http://bili33.top/2020/02/09/FODI/"/>
    <id>http://bili33.top/2020/02/09/FODI/</id>
    <published>2020-02-09T01:58:43.000Z</published>
    <updated>2020-03-29T02:52:32.907Z</updated>
    
    <content type="html"><![CDATA[<p>本人有两个onedrive账号，一个自用，另外一个是<a href="http://bili33.top/2019/08/30/Office365/#%E9%A2%98%E5%A4%96%E8%AF%9D%EF%BC%9A">前几天蹭的edu账号</a>，之前一直想用onedrive来分享文件（毕竟容量是真的大），就在放寒假前，我发现了github的一个项目：<a href="https://github.com/vcheckzen/FODI" target="_blank" rel="noopener">FODI</a>，虽说这UI不是很好看，但是不用服务器（嗯，让白嫖党有点快乐了），所以就动起了手……</p><p>官方教程：<a href="https://logi.im/front-end/scf-fodi.html" target="_blank" rel="noopener">https://logi.im/front-end/scf-fodi.html</a></p><p>当我正在按照官方教程搭建的时候，在获取refresh_token这一步，它居然给我报错了？？？</p><p>官方教程中，是要求进入<a href="https://service-36wivxsc-1256127833.ap-hongkong.apigateway.myqcloud.com/release/scf_onedrive_filelistor" target="_blank" rel="noopener">此网址</a>进行登录后，把第一个<code>?</code>删掉，把第一个<code>&amp;</code>改成<code>?</code>，然后就给我弹出以下错误：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Message</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"error"</span>: <span class="string">"invalid_grant"</span>,</span><br><span class="line">    <span class="string">"error_description"</span>: <span class="string">"AADSTS54005: OAuth2 Authorization code was already redeemed, please retry with a new valid code or use an existing refresh token.\r\nTrace ID: b0425d60-48d1-4006-aec5-76d97732cd00\r\nCorrelation ID: 0d390346-7cfa-4284-9518-67444dca1511\r\nTimestamp: 2020-02-09 02:08:21Z"</span>,</span><br><span class="line">    <span class="string">"error_codes"</span>: [</span><br><span class="line">        <span class="number">54005</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"timestamp"</span>: <span class="string">"2020-02-09 02:08:21Z"</span>,</span><br><span class="line">    <span class="string">"trace_id"</span>: <span class="string">"b0425d60-48d1-4006-aec5-76d97732cd00"</span>,</span><br><span class="line">    <span class="string">"correlation_id"</span>: <span class="string">"0d390346-7cfa-4284-9518-67444dca1511"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我的内心是崩溃的……好了不干了！</p><p><img src="/" class="lazyload" data-src="https://cdn.bili33.top/NotFoundNEKKO/Storage/master/%E8%A1%A8%E6%83%85%E5%8C%85/%E5%92%95%E5%92%95%E5%92%95.jpg"  alt="咕咕咕"></p><hr><p>回归正题，干还是要干的，要么握着5T的onedrive没意思是吧……</p><p>然后我在Github又发现了一个新的项目——<a href="https://github.com/qkqpttgf/OneManager-php" target="_blank" rel="noopener">OneManager</a></p><p><img src="/" class="lazyload" data-src="https://cdn.bili33.top/NotFoundNEKKO/Storage/master/%E8%A1%A8%E6%83%85%E5%8C%85/%E5%88%9D%E9%9F%B3%E5%98%A4%E5%98%A4%E5%98%A4.jpg"  alt="嘤嘤嘤"></p><p>打算部署这个玩意，这时候就有人问了：诶不是，你这标题不是写的FODI？怎么变成OneManager了？</p><p>别急，这玩意自然有它利用的价值</p><p><img src="/" class="lazyload" data-src="https://camo.githubusercontent.com/83b0e95b38892b49184e07ad572c94c8038323fb/68747470733a2f2f7777772e6865726f6b7563646e2e636f6d2f6465706c6f792f627574746f6e2e737667"  alt="Deploy" data-canonical-src="https://www.herokucdn.com/deploy/button.svg" style="max-width:100%;">点击这个紫色的按钮，就会进入heroku的部署界面<del>（啥？你说你不会用？那没事了）</del>，将此项目部署后进行安装，会要求输入heroku的api和管理员密码，这些就按要求填写就好了</p><p>接着就到了比较重要的一步：获取refresh_token（没错你知道我要干嘛了）</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.9/img/FODI/Onemanager-Step1.png"  alt="版本选择"></p><p>第一步安装的时候选择MS（中国版选择CN，如果你喜欢搞事情，你也可以选择MSC自己申请api，我就是懒，就不自己申请api了）</p><p>然后登陆自己的微软账户，接着就会弹出自己的refresh_token，这不就搞定了refresh_token啦？！</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.9/img/FODI/refresh-token-in-install.png"  alt="refresh_token获取"></p><p>如果你没有及时复制你自己的refresh_token，你也可以到你自己heroku项目的变量下复制</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.9/img/FODI/refresh-token-heroku.png"  alt="refresh_token in Heroku"></p><p>接着我们返回FODI，将自己的refresh_token贴近官方给的<a href="https://github.com/vcheckzen/FODI/blob/master/back-end-cf/index.js" target="_blank" rel="noopener">模板</a>的对应位置，接着将代码复制到cloudflare的workers里面（你又问我workers是什么？看<a href="/2019/10/25/CloudFlare-Workers-Section1/">这里</a>啦！），然后保存即可！</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.9-1/img/FODI/workers-editor.png"  alt="cloudflare editor"></p><p>官方模板：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IS_CN: 如果为世纪互联版本，请将 0 改为 1</span></span><br><span class="line"><span class="comment"> * EXPOSE_PATH：暴露路径，如全盘展示请留空，否则按 '/媒体/音乐' 的格式填写</span></span><br><span class="line"><span class="comment"> * ONEDRIVE_REFRESHTOKEN: refresh_token</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> IS_CN = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> EXPOSE_PATH = <span class="string">""</span></span><br><span class="line"><span class="keyword">const</span> ONEDRIVE_REFRESHTOKEN = <span class="string">""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">handleRequest</span>(<span class="params">request</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> requestPath</span><br><span class="line">  <span class="keyword">let</span> querySplited</span><br><span class="line">  <span class="keyword">let</span> queryString = request.url.split(<span class="string">'?'</span>)[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">if</span> (queryString) &#123;</span><br><span class="line">    querySplited = queryString.split(<span class="string">'='</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (querySplited &amp;&amp; querySplited[<span class="number">0</span>] === <span class="string">'file'</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> file = querySplited[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">const</span> fileName = file.split(<span class="string">'/'</span>).pop();</span><br><span class="line">    requestPath = file.replace(<span class="string">'/'</span> + fileName, <span class="string">''</span>)</span><br><span class="line">    <span class="keyword">const</span> url = <span class="keyword">await</span> fetchFiles(requestPath, fileName)</span><br><span class="line">    <span class="keyword">return</span> Response.redirect(url, <span class="number">302</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; headers &#125; = request</span><br><span class="line">    <span class="keyword">const</span> contentType = headers.get(<span class="string">'content-type'</span>)</span><br><span class="line">    <span class="keyword">let</span> body=&#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> (contentType &amp;&amp; contentType.includes(<span class="string">'form'</span>)) &#123;</span><br><span class="line">      <span class="keyword">const</span> formData = <span class="keyword">await</span> request.formData()</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> entry <span class="keyword">of</span> formData.entries()) &#123;</span><br><span class="line">        body[entry[<span class="number">0</span>]] = entry[<span class="number">1</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    requestPath = body ? body[<span class="string">'?path'</span>] : <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">const</span> files = <span class="keyword">await</span> fetchFiles(requestPath, <span class="literal">null</span>, body.passwd);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Response(files, &#123;</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'content-type'</span>: <span class="string">'application/json; charset=utf-8'</span>,</span><br><span class="line">        <span class="string">'Access-Control-Allow-Origin'</span>: <span class="string">'*'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addEventListener(<span class="string">'fetch'</span>, event =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> event.respondWith(handleRequest(event.request))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> clientId = [</span><br><span class="line">  <span class="string">'4da3e7f2-bf6d-467c-aaf0-578078f0bf7c'</span>,</span><br><span class="line">  <span class="string">'04c3ca0b-8d07-4773-85ad-98b037d25631'</span></span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> clientSecret = [</span><br><span class="line">  <span class="string">'7/+ykq2xkfx:.DWjacuIRojIaaWL0QI6'</span>,</span><br><span class="line">  <span class="string">'h8@B7kFVOmj0+8HKBWeNTgl@pU/z4yLB'</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> oauthHost = [</span><br><span class="line">  <span class="string">'https://login.microsoftonline.com'</span>,</span><br><span class="line">  <span class="string">'https://login.partner.microsoftonline.cn'</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> apiHost = [</span><br><span class="line">  <span class="string">'https://graph.microsoft.com'</span>,</span><br><span class="line">  <span class="string">'https://microsoftgraph.chinacloudapi.cn'</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> OAUTH = &#123;</span><br><span class="line">  <span class="string">'redirectUri'</span>: <span class="string">'https://scfonedrive.github.io'</span>,</span><br><span class="line">  <span class="string">'refreshToken'</span>: ONEDRIVE_REFRESHTOKEN,</span><br><span class="line">  <span class="string">'clientId'</span>: clientId[IS_CN],</span><br><span class="line">  <span class="string">'clientSecret'</span>: clientSecret[IS_CN],</span><br><span class="line">  <span class="string">'oauthUrl'</span>: oauthHost[IS_CN] + <span class="string">'/common/oauth2/v2.0/'</span>,</span><br><span class="line">  <span class="string">'apiUrl'</span>: apiHost[IS_CN] + <span class="string">'/v1.0/me/drive/root'</span>,</span><br><span class="line">  <span class="string">'scope'</span>: apiHost[IS_CN] + <span class="string">'/Files.ReadWrite.All offline_access'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">gatherResponse</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; headers &#125; = response</span><br><span class="line">  <span class="keyword">const</span> contentType = headers.get(<span class="string">'content-type'</span>)</span><br><span class="line">  <span class="keyword">if</span> (contentType.includes(<span class="string">'application/json'</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.json()</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (contentType.includes(<span class="string">'application/text'</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.text()</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (contentType.includes(<span class="string">'text/html'</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.text()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.text()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url)</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> gatherResponse(response)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getContentWithHeaders</span>(<span class="params">url, headers</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url, &#123; <span class="attr">headers</span>: headers &#125;)</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> gatherResponse(response)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchFormData</span>(<span class="params">url, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> formdata = <span class="keyword">new</span> FormData();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">    <span class="keyword">if</span> (data.hasOwnProperty(key)) &#123;</span><br><span class="line">      formdata.append(key, data[key])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> requestOptions = &#123;</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    body: formdata</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(url, requestOptions)</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> gatherResponse(response)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchAccessToken</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  url = OAUTH[<span class="string">'oauthUrl'</span>] + <span class="string">'token'</span></span><br><span class="line">  data = &#123;</span><br><span class="line">    <span class="string">'client_id'</span>: OAUTH[<span class="string">'clientId'</span>],</span><br><span class="line">    <span class="string">'client_secret'</span>: OAUTH[<span class="string">'clientSecret'</span>],</span><br><span class="line">    <span class="string">'grant_type'</span>: <span class="string">'refresh_token'</span>,</span><br><span class="line">    <span class="string">'requested_token_use'</span>: <span class="string">'on_behalf_of'</span>,</span><br><span class="line">    <span class="string">'refresh_token'</span>: OAUTH[<span class="string">'refreshToken'</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> fetchFormData(url, data)</span><br><span class="line">  <span class="keyword">return</span> result.access_token</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchFiles</span>(<span class="params">path, fileName, passwd</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!path || path === <span class="string">'/'</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (EXPOSE_PATH === <span class="string">''</span>) &#123;</span><br><span class="line">      path = <span class="string">''</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      path = <span class="string">':'</span> + EXPOSE_PATH</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (EXPOSE_PATH === <span class="string">''</span>) &#123;</span><br><span class="line">      path = <span class="string">':'</span> + path</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      path = <span class="string">':'</span> + EXPOSE_PATH + path</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> accessToken = <span class="keyword">await</span> fetchAccessToken()</span><br><span class="line">  <span class="keyword">const</span> uri = OAUTH.apiUrl + <span class="built_in">encodeURI</span>(path) + <span class="string">'?expand=children(select=name,size,parentReference,lastModifiedDateTime,@microsoft.graph.downloadUrl)'</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> body = <span class="keyword">await</span> getContentWithHeaders(uri, &#123;</span><br><span class="line">    Authorization: <span class="string">'Bearer '</span> + accessToken</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (fileName) &#123;</span><br><span class="line">    <span class="keyword">let</span> thisFile = <span class="literal">null</span></span><br><span class="line">    body.children.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (file.name === <span class="built_in">decodeURIComponent</span>(fileName)) &#123;</span><br><span class="line">        thisFile = file[<span class="string">'@microsoft.graph.downloadUrl'</span>]</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> thisFile</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> files = []</span><br><span class="line">    <span class="keyword">let</span> encrypted = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; body.children.length; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> file = body.children[i]</span><br><span class="line">      <span class="keyword">if</span> (file.name === <span class="string">'.password'</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> PASSWD = <span class="keyword">await</span> getContent(file[<span class="string">'@microsoft.graph.downloadUrl'</span>])</span><br><span class="line">        <span class="keyword">if</span> (PASSWD !== passwd) &#123;</span><br><span class="line">          encrypted = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      files.push(&#123;</span><br><span class="line">        name: file.name,</span><br><span class="line">        size: file.size,</span><br><span class="line">        time: file.lastModifiedDateTime,</span><br><span class="line">        url: file[<span class="string">'@microsoft.graph.downloadUrl'</span>]</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> parent</span><br><span class="line">    <span class="keyword">if</span> (body.children.length) &#123;</span><br><span class="line">      parent = body.children[<span class="number">0</span>].parentReference.path</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      parent = body.parentReference.path</span><br><span class="line">    &#125;</span><br><span class="line">    parent = parent.split(<span class="string">':'</span>).pop().replace(EXPOSE_PATH, <span class="string">''</span>) || <span class="string">'/'</span></span><br><span class="line">    parent = <span class="built_in">decodeURIComponent</span>(parent)</span><br><span class="line">    <span class="keyword">if</span> (encrypted) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(&#123; <span class="attr">parent</span>: parent, <span class="attr">files</span>: [], <span class="attr">encrypted</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(&#123; <span class="attr">parent</span>: parent, <span class="attr">files</span>: files &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接着，我们打开<a href="https://github.com/vcheckzen/FODI/blob/master/front-end/index.html" target="_blank" rel="noopener">官方给的html文件</a>，将自己的workers链接贴到对应的位置，部署到github即可！</p><p>html文件备份：（可以直接复制）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">        /**</span><br><span class="line">        * SCF_GATEWAY：SCF 云函数网关地址</span><br><span class="line">        * SITE_NAME：站点名称</span><br><span class="line">        */</span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.GLOBAL_CONFIG = &#123;</span></span><br><span class="line"><span class="actionscript">            SCF_GATEWAY: <span class="string">""</span>,</span></span><br><span class="line"><span class="actionscript">            SITE_NAME: <span class="string">"FODI"</span>,</span></span><br><span class="line"><span class="actionscript">            IS_CF: <span class="literal">true</span></span></span><br><span class="line">        &#125;;</span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">window</span>.GLOBAL_CONFIG.SCF_GATEWAY.indexOf(<span class="string">'workers'</span>) === <span class="number">-1</span>) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.GLOBAL_CONFIG.SCF_GATEWAY += <span class="string">'/fodi/'</span>;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.GLOBAL_CONFIG.IS_CF = <span class="literal">false</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="comment">// if (location.protocol === 'http:') &#123;</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//     location.href = location.href.replace(/http/, 'https');</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// &#125;</span></span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"</span> <span class="attr">name</span>=<span class="string">"viewport"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//s0.pstatp.com/cdn/expire-1-M/ionicons/4.5.6/ionicons.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//s0.pstatp.com/cdn/expire-1-M/marked/0.6.2/marked.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//s0.pstatp.com/cdn/expire-1-M/highlight.js/9.15.6/highlight.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"//s0.pstatp.com/cdn/expire-1-M/highlight.js/9.15.6/styles/github.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"//s0.pstatp.com/cdn/expire-1-M/github-markdown-css/3.0.1/github-markdown.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//s0.pstatp.com/cdn/expire-1-M/jquery/3.4.0/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//s0.pstatp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"//s0.pstatp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.password-wrapper</span> &#123;</span></span><br><span class="line">            display: flex;</span><br><span class="line">            align-items: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.password</span> &#123;</span></span><br><span class="line">            margin: 0 auto;</span><br><span class="line">            padding-top: 1em;</span><br><span class="line">            display: none;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.password</span> <span class="selector-tag">input</span> &#123;</span></span><br><span class="line">            height: 2em;</span><br><span class="line">            outline: none;</span><br><span class="line">            border: solid rgb(218, 215, 215) 1px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.password</span> <span class="selector-tag">button</span> &#123;</span></span><br><span class="line">            background: white;</span><br><span class="line">            height: 2em;</span><br><span class="line">            outline: none;</span><br><span class="line">            border: solid rgb(218, 215, 215) 1px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.password</span> <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            color: white;</span><br><span class="line">            background: rgb(218, 215, 215);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pre * &#123;</span><br><span class="line">            font-family: Courier New;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.preview</span> &#123;</span></span><br><span class="line">            display: none;</span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span>: <span class="selector-class">.8em</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.content</span> &#123;</span></span><br><span class="line">            clear: both;</span><br><span class="line">            padding: 0 1em;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.file-name</span> &#123;</span></span><br><span class="line">            line-height: 1em;</span><br><span class="line">            padding: 1em 1em 0;</span><br><span class="line">            text-align: center;</span><br><span class="line">            white-space: nowrap;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.btn</span> &#123;</span></span><br><span class="line">            float: right;</span><br><span class="line">            text-align: center;</span><br><span class="line">            border: solid rgb(218, 215, 215) 1px;</span><br><span class="line">            border-radius: 1em;</span><br><span class="line"><span class="css">            <span class="selector-tag">margin</span>: 1<span class="selector-tag">em</span> <span class="selector-class">.2em</span>;</span></span><br><span class="line">            width: 4em;</span><br><span class="line">            height: 2em;</span><br><span class="line">            line-height: 2em;</span><br><span class="line">            user-select: none;</span><br><span class="line">            -moz-user-select: none;</span><br><span class="line">            -o-user-select: none;</span><br><span class="line">            -khtml-user-select: none;</span><br><span class="line">            -webkit-user-select: none;</span><br><span class="line">            -ms-user-select: none;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            color: white;</span><br><span class="line">            background: rgb(218, 215, 215);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.btn</span><span class="selector-class">.download</span> &#123;</span></span><br><span class="line">            margin-right: 1em;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#arrow-back</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-id">#arrow-forward</span> &#123;</span></span><br><span class="line">            color: rgb(218, 215, 215);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.loading-wrapper</span> &#123;</span></span><br><span class="line">            display: none;</span><br><span class="line">            position: fixed;</span><br><span class="line">            height: 2em;</span><br><span class="line">            line-height: 2em;</span><br><span class="line"><span class="css">            <span class="selector-tag">margin-top</span>: <span class="selector-class">.5em</span>;</span></span><br><span class="line">            width: 100%;</span><br><span class="line">            z-index: 1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.loading</span> &#123;</span></span><br><span class="line">            color: white;</span><br><span class="line">            background: rgb(218, 215, 215);</span><br><span class="line">            height: 100%;</span><br><span class="line">            width: 8em;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">            text-align: center;</span><br><span class="line">            border-radius: 1em;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ion-icon &#123;</span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span>: 1<span class="selector-class">.5em</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        * &#123;</span><br><span class="line">            box-sizing: border-box;</span><br><span class="line">            font-family: serif;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.markdown-body</span> &#123;</span></span><br><span class="line">            min-width: 200px;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line"><span class="css">            <span class="selector-tag">padding</span>: <span class="selector-class">.7em</span> 1<span class="selector-tag">em</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span>: <span class="selector-class">.8em</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.markdown-body</span> <span class="selector-tag">h1</span>,</span></span><br><span class="line">        h2,</span><br><span class="line">        h3,</span><br><span class="line">        h4,</span><br><span class="line">        h5,</span><br><span class="line">        h6 &#123;</span><br><span class="line">            margin-top: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.markdown-body</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line">            max-width: 90%;</span><br><span class="line">            max-height: 800px;</span><br><span class="line">            width: auto;</span><br><span class="line">            height: auto;</span><br><span class="line">            display: block;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.header-wrapper</span> &#123;</span></span><br><span class="line">            position: fixed;</span><br><span class="line">            height: 3em;</span><br><span class="line">            width: 100%;</span><br><span class="line">            -moz-user-select: none;</span><br><span class="line">            -o-user-select: none;</span><br><span class="line">            -khtml-user-select: none;</span><br><span class="line">            -webkit-user-select: none;</span><br><span class="line">            -ms-user-select: none;</span><br><span class="line">            user-select: none;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">padding</span>: 0 1<span class="selector-class">.8em</span> 0 1<span class="selector-tag">em</span>;</span></span><br><span class="line">            height: 100%;</span><br><span class="line">            display: flex;</span><br><span class="line">            align-items: center;</span><br><span class="line">            border-bottom: solid rgb(218, 215, 215) 1px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.logo</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">margin-right</span>: <span class="selector-class">.3em</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.site</span> &#123;</span></span><br><span class="line">            white-space: nowrap;</span><br><span class="line">            /* margin-left: auto;</span><br><span class="line">                padding-left: 2em; */</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.nav</span> &#123;</span></span><br><span class="line">            width: 100%;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            text-overflow: ellipsis;</span><br><span class="line">            white-space: nowrap;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.nav-path</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.nav-arr</span> &#123;</span></span><br><span class="line">            font-size: 1em;</span><br><span class="line"><span class="css">            <span class="selector-tag">height</span>: 1<span class="selector-class">.5em</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">margin-right</span>: <span class="selector-class">.3em</span>;</span></span><br><span class="line">            overflow: hidden;</span><br><span class="line">            text-overflow: ellipsis;</span><br><span class="line">            white-space: nowrap;</span><br><span class="line">            cursor: default;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#main-page</span><span class="selector-pseudo">:hover</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.nav-path</span><span class="selector-pseudo">:hover</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.tree-node</span><span class="selector-pseudo">:hover</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.row</span><span class="selector-class">.file-wrapper</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            color: rgb(90, 101, 133);</span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">            position: fixed;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: calc(100% - 3em);</span><br><span class="line">            margin-top: 3em;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.main</span> &#123;</span></span><br><span class="line">            position: relative;</span><br><span class="line">            height: 100%;</span><br><span class="line">            width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            display: inline-grid;</span><br><span class="line">            width: 20%;</span><br><span class="line">            height: 100%;</span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span>: <span class="selector-class">.8em</span>;</span></span><br><span class="line">            overflow: scroll;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.tree-node-wrapper</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">margin-left</span>: 1<span class="selector-class">.5em</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.tree-node</span> &#123;</span></span><br><span class="line">            display: flex;</span><br><span class="line">            align-items: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.tree-node-name</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">margin-left</span>: <span class="selector-class">.3em</span>;</span></span><br><span class="line">            white-space: nowrap;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            width: 80%;</span><br><span class="line">            height: 100%;</span><br><span class="line">            margin-left: 20%;</span><br><span class="line">            overflow: scroll;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.row</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">height</span>: 2<span class="selector-class">.5em</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">padding</span>: 0 <span class="selector-class">.8em</span> 0 1<span class="selector-tag">em</span>;</span></span><br><span class="line">            display: flex;</span><br><span class="line">            align-items: center;</span><br><span class="line">            border-bottom: solid rgb(218, 215, 215) 1px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.row</span><span class="selector-class">.file-wrapper</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span>: <span class="selector-class">.8em</span>;</span></span><br><span class="line">            padding: 0 1em;</span><br><span class="line">            height: 2em;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.file</span> &#123;</span></span><br><span class="line">            width: 100%;</span><br><span class="line">            display: flex;</span><br><span class="line">            align-items: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.name</span> &#123;</span></span><br><span class="line">            display: flex;</span><br><span class="line">            align-items: center;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            text-overflow: ellipsis;</span><br><span class="line">            white-space: nowrap;</span><br><span class="line">            width: 70%;</span><br><span class="line"><span class="css">            <span class="selector-tag">padding-left</span>: <span class="selector-class">.3em</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.list-header</span> <span class="selector-class">.name</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">width</span>: <span class="selector-tag">calc</span>(70% + 1<span class="selector-class">.1em</span>);</span></span><br><span class="line">            padding-left: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.time</span> &#123;</span></span><br><span class="line">            overflow: hidden;</span><br><span class="line">            text-overflow: ellipsis;</span><br><span class="line">            white-space: nowrap;</span><br><span class="line">            text-align: right;</span><br><span class="line">            ;</span><br><span class="line">            width: 133px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.size</span> &#123;</span></span><br><span class="line">            overflow: hidden;</span><br><span class="line">            text-overflow: ellipsis;</span><br><span class="line">            white-space: nowrap;</span><br><span class="line">            margin-left: auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">1000px</span>) &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">                display: none;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">                width: 100%;</span><br><span class="line">                margin-left: initial;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">800px</span>) &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.name</span> &#123;</span></span><br><span class="line">                width: 60%;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.list-header</span> <span class="selector-class">.name</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">width</span>: <span class="selector-tag">calc</span>(60% + 1<span class="selector-class">.1em</span>);</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.file-name</span> &#123;</span></span><br><span class="line">                overflow-x: scroll;</span><br><span class="line">                height: 100%;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">600px</span>) &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.name</span> &#123;</span></span><br><span class="line">                width: 75%;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.time</span> &#123;</span></span><br><span class="line">                display: none;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">padding</span>: 0 <span class="selector-class">.3em</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.row</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">padding</span>: 0 <span class="selector-class">.3em</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.row</span><span class="selector-class">.file-wrapper</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">padding</span>: 0 <span class="selector-class">.3em</span>;</span></span><br><span class="line">                height: 3em;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.markdown-body</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">padding</span>: <span class="selector-class">.6em</span> <span class="selector-class">.3em</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.file-name</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">padding</span>: 1<span class="selector-tag">em</span> <span class="selector-class">.3em</span> 0;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">padding</span>: 0 <span class="selector-class">.3em</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.btn</span><span class="selector-class">.download</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">margin-right</span>: <span class="selector-class">.3em</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="selector-class">.logo</span> &#123;</span></span><br><span class="line">                width: 2em;</span><br><span class="line">                height: 2em;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">createCORSRequest</span><span class="params">(method, url, timeout)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (<span class="string">'withCredentials'</span> <span class="keyword">in</span> xhr) &#123;</span></span><br><span class="line"><span class="actionscript">                xhr.open(method, url, <span class="literal">true</span>);</span></span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> XDomainRequest !== <span class="string">'undefined'</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                xhr = <span class="keyword">new</span> XDomainRequest();</span></span><br><span class="line">                xhr.open(method, url);</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">                xhr = <span class="literal">null</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">            if (xhr) &#123;</span><br><span class="line">                xhr.timeout = timeout;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> xhr;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">sendRequest</span><span class="params">(method, url, data, headers, callback, error, times)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> xhr = createCORSRequest(method, url, <span class="number">2500</span>);</span></span><br><span class="line"><span class="javascript">            xhr.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line">                if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123;</span><br><span class="line">                    callback(xhr.responseText);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line"><span class="javascript">            xhr.timeout = xhr.onerror = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line">                if (!times) &#123;</span><br><span class="line">                    times = 0;</span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(&#123;</span></span><br><span class="line">                    url: url,</span><br><span class="line">                    data: data,</span><br><span class="line">                    times: times</span><br><span class="line">                &#125;)</span><br><span class="line">                if (times &lt; 1) &#123;</span><br><span class="line">                    sendRequest(method, url, data, headers, callback, error, times + 1);</span><br><span class="line"><span class="actionscript">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> error === <span class="string">'function'</span>) &#123;</span></span><br><span class="line">                    error();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (headers) &#123;</span><br><span class="line">                for (key in headers) &#123;</span><br><span class="line">                    if (headers.hasOwnProperty(key)) &#123;</span><br><span class="line">                        xhr.setRequestHeader(key, headers[key]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (data) &#123;</span><br><span class="line">                xhr.send(data);</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">                xhr.send();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">renderPage</span><span class="params">(data, cache)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> files;</span></span><br><span class="line">            if (data) &#123;</span><br><span class="line"><span class="javascript">                files = <span class="built_in">JSON</span>.parse(data);</span></span><br><span class="line"><span class="javascript">                <span class="built_in">window</span>.fileCache.set(files.parent, files);</span></span><br><span class="line">                preCache(files, 0);</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">                files = cache;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (files.parent === <span class="built_in">window</span>.backFordwardCache.current) &#123;</span></span><br><span class="line">                renderPath(files.parent);</span><br><span class="line">                if (files.encrypted) &#123;</span><br><span class="line">                    handleEncryptedFolder(files);</span><br><span class="line"><span class="actionscript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">                    renderFileList(files);</span><br><span class="line">                &#125;</span><br><span class="line">                renderTreeNode(files);</span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="built_in">document</span>.body.getAttribute(<span class="string">'hidden'</span>)) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.body.removeAttribute(<span class="string">'hidden'</span>);</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.querySelector(<span class="string">'.loading-wrapper'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">renderPath</span><span class="params">(path)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> createPathSpan = <span class="function">(<span class="params">text, path</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> pathSpan = <span class="built_in">document</span>.createElement(<span class="string">'span'</span>);</span></span><br><span class="line"><span class="actionscript">                pathSpan.innerHTML = text.length &gt; <span class="number">20</span> ? text.substring(<span class="number">0</span>, <span class="number">20</span>) + <span class="string">'..'</span> : text;</span></span><br><span class="line"><span class="actionscript">                pathSpan.className = text === <span class="string">'/'</span> ? <span class="string">'nav-arr'</span> : <span class="string">'nav-path'</span>;</span></span><br><span class="line">                if (path) &#123;</span><br><span class="line">                    addPathListener(pathSpan, path);</span><br><span class="line">                &#125;</span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> pathSpan;</span></span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> paths = path.split(<span class="string">'/'</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> pathSpanWrapper = <span class="built_in">document</span>.getElementById(<span class="string">'path'</span>);</span></span><br><span class="line"><span class="actionscript">            pathSpanWrapper.innerHTML = <span class="string">''</span>;</span></span><br><span class="line"><span class="javascript">            pathSpanWrapper.appendChild(createPathSpan(<span class="built_in">window</span>.api.root));</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> continualPath = <span class="string">'/'</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; paths.length - <span class="number">1</span>; i++) &#123;</span></span><br><span class="line">                continualPath += paths[i];</span><br><span class="line">                pathSpanWrapper.appendChild(createPathSpan(paths[i], continualPath));</span><br><span class="line"><span class="actionscript">                pathSpanWrapper.appendChild(createPathSpan(<span class="string">'/'</span>));</span></span><br><span class="line"><span class="actionscript">                continualPath += <span class="string">'/'</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">            pathSpanWrapper.appendChild(createPathSpan(paths[paths.length - 1]));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">renderFileList</span><span class="params">(files)</span> </span>&#123;</span></span><br><span class="line">            switchRightDisplay();</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> createFileWrapper = <span class="function">(<span class="params">type, name, time, size, path, url</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> fileWrapper = <span class="built_in">document</span>.getElementById(<span class="string">'file-wrapper-templete'</span>).content.cloneNode(<span class="literal">true</span>);</span></span><br><span class="line"><span class="actionscript">                fileWrapper.querySelector(<span class="string">'ion-icon'</span>).setAttribute(<span class="string">'name'</span>, type);</span></span><br><span class="line"><span class="actionscript">                fileWrapper.querySelector(<span class="string">'.name'</span>).innerHTML = name;</span></span><br><span class="line"><span class="actionscript">                fileWrapper.querySelector(<span class="string">'.time'</span>).innerHTML = time;</span></span><br><span class="line"><span class="actionscript">                fileWrapper.querySelector(<span class="string">'.size'</span>).innerHTML = size;</span></span><br><span class="line"><span class="actionscript">                addFileListLineListener(fileWrapper.querySelector(<span class="string">'.row.file-wrapper'</span>), path, url, size);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> fileWrapper;</span></span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> formatDate = <span class="function"><span class="params">date</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> addZero = <span class="function"><span class="params">num</span> =&gt;</span> num &gt; <span class="number">9</span> ? num : <span class="string">'0'</span> + num;</span></span><br><span class="line"><span class="javascript">                date = <span class="keyword">new</span> <span class="built_in">Date</span>(date);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> year = date.getFullYear();</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> month = addZero(date.getMonth() + <span class="number">1</span>);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> day = addZero(date.getDate());</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> hour = addZero(date.getHours());</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> minute = addZero(date.getMinutes());</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> second = addZero(date.getSeconds());</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="string">'yyyy-MM-dd HH:mm:ss'</span></span></span><br><span class="line"><span class="actionscript">                    .replace(<span class="string">'yyyy'</span>, year)</span></span><br><span class="line"><span class="actionscript">                    .replace(<span class="string">'MM'</span>, month)</span></span><br><span class="line"><span class="actionscript">                    .replace(<span class="string">'dd'</span>, day)</span></span><br><span class="line"><span class="actionscript">                    .replace(<span class="string">'HH'</span>, hour)</span></span><br><span class="line"><span class="actionscript">                    .replace(<span class="string">'mm'</span>, minute)</span></span><br><span class="line"><span class="actionscript">                    .replace(<span class="string">'ss'</span>, second);</span></span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> formatSize = <span class="function"><span class="params">size</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> count = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">while</span> (size &gt;= <span class="number">1024</span>) &#123;</span></span><br><span class="line">                    size /= 1024;</span><br><span class="line">                    count++;</span><br><span class="line">                &#125;</span><br><span class="line">                size = size.toFixed(2);</span><br><span class="line"><span class="actionscript">                <span class="keyword">switch</span> (count) &#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">1</span>:</span></span><br><span class="line"><span class="actionscript">                        size += <span class="string">' KB'</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">2</span>:</span></span><br><span class="line"><span class="actionscript">                        size += <span class="string">' MB'</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">3</span>:</span></span><br><span class="line"><span class="actionscript">                        size += <span class="string">' GB'</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">4</span>:</span></span><br><span class="line"><span class="actionscript">                        size += <span class="string">' TB'</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">5</span>:</span></span><br><span class="line"><span class="actionscript">                        size += <span class="string">' PB'</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">default</span>:</span></span><br><span class="line"><span class="actionscript">                        size += <span class="string">' B'</span>;</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> size;</span></span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> fileList = <span class="built_in">document</span>.getElementById(<span class="string">'file-list'</span>);</span></span><br><span class="line"><span class="actionscript">            fileList.innerHTML = <span class="string">''</span>;</span></span><br><span class="line"><span class="javascript">            files.files.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span> (file.name.split(<span class="string">'.'</span>).pop() === <span class="string">'md'</span>) &#123;</span></span><br><span class="line">                    if (file.url) &#123;</span><br><span class="line"><span class="actionscript">                        renderReadme(files.parent + <span class="string">'/'</span> + file.name, file.url);</span></span><br><span class="line">                    &#125;</span><br><span class="line"><span class="actionscript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">const</span> parent = files.parent === <span class="built_in">window</span>.api.root ? <span class="string">''</span> : files.parent;</span></span><br><span class="line">                    fileList.appendChild(createFileWrapper(</span><br><span class="line"><span class="actionscript">                        file.url ? <span class="string">'document'</span> : <span class="string">'folder'</span>,</span></span><br><span class="line">                        file.name,</span><br><span class="line">                        formatDate(file.time),</span><br><span class="line">                        formatSize(file.size),</span><br><span class="line"><span class="actionscript">                        parent + <span class="string">'/'</span> + file.name,</span></span><br><span class="line">                        file.url</span><br><span class="line">                    ));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">renderTreeNode</span>(<span class="params">files</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> createTreeNodeWrapper = <span class="function">(<span class="params">array, type, name, path</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> treeNodeWrapper = <span class="built_in">document</span>.getElementById(<span class="string">'tree-node-wrapper-template'</span>).content</span></span><br><span class="line"><span class="actionscript">                    .cloneNode(<span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> icons = treeNodeWrapper.querySelectorAll(<span class="string">'ion-icon'</span>);</span></span><br><span class="line"><span class="actionscript">                icons[<span class="number">0</span>].setAttribute(<span class="string">'name'</span>, array);</span></span><br><span class="line"><span class="actionscript">                icons[<span class="number">1</span>].setAttribute(<span class="string">'name'</span>, type);</span></span><br><span class="line"><span class="actionscript">                treeNodeWrapper.querySelector(<span class="string">'.tree-node-name'</span>).innerText = name;</span></span><br><span class="line"><span class="javascript">                treeNodeWrapper.appendNode = <span class="function"><span class="params">node</span> =&gt;</span> treeNodeWrapper.querySelector(<span class="string">'.tree-node-wrapper'</span>).append(</span></span><br><span class="line">                    node);</span><br><span class="line"><span class="actionscript">                addTreeNodeListener(treeNodeWrapper.querySelector(<span class="string">'.tree-node'</span>), path);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> treeNodeWrapper;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> paths = files.parent.split(<span class="string">'/'</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> absolutePath = <span class="function"><span class="params">max</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> absolutePath = <span class="string">''</span>;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= max; j++) &#123;</span></span><br><span class="line"><span class="actionscript">                    absolutePath += <span class="string">'/'</span> + paths[j];</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> absolutePath;</span></span><br><span class="line">            &#125;;</span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> maxIndex = paths.length - <span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> currentTreeNode = createTreeNodeWrapper(<span class="string">'arrow-dropdown'</span>,</span></span><br><span class="line"><span class="actionscript">                <span class="string">'folder-open'</span>,</span></span><br><span class="line">                paths[maxIndex],</span><br><span class="line">                absolutePath(maxIndex)</span><br><span class="line">            );</span><br><span class="line"><span class="javascript">            files.files.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line">                if (!file.url) &#123;</span><br><span class="line"><span class="actionscript">                    currentTreeNode.appendNode(createTreeNodeWrapper(<span class="string">'arrow-dropright'</span>,</span></span><br><span class="line"><span class="actionscript">                        <span class="string">'folder'</span>,</span></span><br><span class="line">                        file.name,</span><br><span class="line"><span class="actionscript">                        files.parent + <span class="string">'/'</span> + file.name</span></span><br><span class="line">                    ));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = maxIndex - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> currentTreeNodeParentAbsolutePath = absolutePath(i);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> currentTreeNodeParent = createTreeNodeWrapper(<span class="string">'arrow-dropdown'</span>,</span></span><br><span class="line"><span class="actionscript">                    <span class="string">'folder'</span>,</span></span><br><span class="line">                    paths[i],</span><br><span class="line">                    currentTreeNodeParentAbsolutePath</span><br><span class="line">                );</span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> cache = <span class="built_in">window</span>.fileCache.get(currentTreeNodeParentAbsolutePath);</span></span><br><span class="line">                if (cache) &#123;</span><br><span class="line"><span class="javascript">                    cache.files.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line">                        if (!file.url) &#123;</span><br><span class="line">                            if (file.name === paths[i + 1]) &#123;</span><br><span class="line">                                currentTreeNodeParent.appendNode(currentTreeNode);</span><br><span class="line"><span class="actionscript">                            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">                                currentTreeNodeParent.appendNode(createTreeNodeWrapper(</span><br><span class="line"><span class="actionscript">                                    <span class="string">'arrow-dropright'</span>,</span></span><br><span class="line"><span class="actionscript">                                    <span class="string">'folder'</span>,</span></span><br><span class="line">                                    file.name,</span><br><span class="line"><span class="actionscript">                                    currentTreeNodeParentAbsolutePath + <span class="string">'/'</span> + file.name</span></span><br><span class="line">                                ));</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line"><span class="actionscript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">                    currentTreeNodeParent.appendNode(currentTreeNode);</span><br><span class="line">                &#125;</span><br><span class="line">                currentTreeNode = currentTreeNodeParent;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> treeRoot = <span class="built_in">document</span>.getElementById(<span class="string">'tree-root'</span>);</span></span><br><span class="line"><span class="actionscript">            treeRoot.innerHTML = <span class="string">''</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> cache = <span class="built_in">window</span>.fileCache.get(<span class="built_in">window</span>.api.root);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> currentNodeName = currentTreeNode.querySelector(<span class="string">'.tree-node-name'</span>).innerText;</span></span><br><span class="line">            if (cache) &#123;</span><br><span class="line"><span class="javascript">                cache.files.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line">                    if (!file.url) &#123;</span><br><span class="line">                        if (file.name === currentNodeName) &#123;</span><br><span class="line">                            treeRoot.append(currentTreeNode);</span><br><span class="line"><span class="actionscript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">                            treeRoot.append(createTreeNodeWrapper(</span><br><span class="line"><span class="actionscript">                                <span class="string">'arrow-dropright'</span>,</span></span><br><span class="line"><span class="actionscript">                                <span class="string">'folder'</span>,</span></span><br><span class="line">                                file.name,</span><br><span class="line"><span class="javascript">                                <span class="built_in">window</span>.api.root + file.name</span></span><br><span class="line">                            ));</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">                treeRoot.append(currentTreeNode);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">renderReadme</span>(<span class="params">path, url</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> render = <span class="function"><span class="params">text</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> markedText;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line">                    markedText = marked(text, &#123;</span><br><span class="line"><span class="actionscript">                        gfm: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">                        highlight: <span class="function">(<span class="params">code, lang, callback</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">return</span> hljs.highlight(lang, code).value;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line"><span class="actionscript">                &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line">                    markedText = marked(text, &#123;</span><br><span class="line"><span class="actionscript">                        gfm: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">                        highlight: <span class="function">(<span class="params">code, lang, callback</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">return</span> hljs.highlight(<span class="string">'bash'</span>, code).value;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (<span class="built_in">window</span>.backFordwardCache.current + <span class="string">'/README.md'</span> === path) &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span> (!<span class="built_in">window</span>.backFordwardCache.preview) &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">document</span>.getElementById(<span class="string">'readme'</span>).innerHTML = markedText;</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">document</span>.querySelector(<span class="string">'.markdown-body'</span>).style.display = <span class="string">'block'</span>;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> cache = <span class="built_in">window</span>.fileCache.get(path);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span> (!cache || cache === <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.fileCache.set(path, text);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> text = <span class="built_in">window</span>.fileCache.get(path);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (text === <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> cacheWaitReadmeFetch = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    text = <span class="built_in">window</span>.fileCache.get(path);</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> text === <span class="string">'object'</span>) &#123;</span></span><br><span class="line">                        render(text, path);</span><br><span class="line">                        clearInterval(cacheWaitReadmeFetch);</span><br><span class="line"><span class="actionscript">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (text === <span class="literal">false</span>) &#123;</span></span><br><span class="line">                        clearInterval(cacheWaitReadmeFetch);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, 100);</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (text) &#123;</span></span><br><span class="line">                render(text, path);</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">window</span>.fileCache.set(path, <span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">                sendRequest(<span class="string">'GET'</span>, url, <span class="literal">null</span>, <span class="literal">null</span>, text =&gt; render(text, path), () =&gt; <span class="built_in">window</span>.fileCache.set(path, <span class="literal">false</span>));</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">handleEncryptedFolder</span><span class="params">(files)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            switchRightDisplay(<span class="string">'encrypted'</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> password = <span class="built_in">document</span>.querySelector(<span class="string">'.password'</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> input = password.querySelector(<span class="string">'input'</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> button = password.querySelector(<span class="string">'button'</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> buttonParent = button.parentElement;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> buttonClone = button.cloneNode(<span class="literal">true</span>);</span></span><br><span class="line">            buttonParent.replaceChild(buttonClone, button);</span><br><span class="line"><span class="actionscript">            input.placeholder = <span class="string">'请输入密码'</span>;</span></span><br><span class="line"><span class="actionscript">            buttonClone.addEventListener(<span class="string">'click'</span>, event =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> passwd = input.value;</span></span><br><span class="line">                if (!input.value) &#123;</span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span>;</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="actionscript">                input.value = <span class="string">''</span>;</span></span><br><span class="line"><span class="actionscript">                input.placeholder = <span class="string">'正在验证..'</span>;</span></span><br><span class="line"><span class="javascript">                sendRequest(<span class="built_in">window</span>.api.method,</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.api.url,</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.api.formatPayload(files.parent, passwd),</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.api.headers,</span></span><br><span class="line">                    data =&gt; &#123;</span><br><span class="line"><span class="javascript">                        <span class="keyword">const</span> newFiles = <span class="built_in">JSON</span>.parse(data);</span></span><br><span class="line">                        if (newFiles.encrypted) &#123;</span><br><span class="line"><span class="actionscript">                            input.placeholder = <span class="string">'密码错误'</span>;</span></span><br><span class="line"><span class="actionscript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                            <span class="built_in">window</span>.fileCache.set(newFiles.parent, newFiles);</span></span><br><span class="line">                            fetchFileList(newFiles.parent);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line"><span class="javascript">                    () =&gt; <span class="built_in">window</span>.fileCache.set(newFiles.parent, <span class="literal">false</span>)</span></span><br><span class="line">                );</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">addPathListener</span><span class="params">(elem, path)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            elem.addEventListener(<span class="string">'click'</span>, event =&gt; &#123;</span></span><br><span class="line">                fetchFileList(path);</span><br><span class="line">                switchBackForwardStatus(path);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">addTreeNodeListener</span><span class="params">(elem, path)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            elem.addEventListener(<span class="string">'click'</span>, event =&gt; &#123;</span></span><br><span class="line">                fetchFileList(path);</span><br><span class="line">                switchBackForwardStatus(path);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">addFileListLineListener</span><span class="params">(elem, path, url, size)</span> </span>&#123;</span></span><br><span class="line">            if (url) &#123;</span><br><span class="line"><span class="actionscript">                elem.addEventListener(<span class="string">'click'</span>, event =&gt; &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.backFordwardCache.preview = <span class="literal">true</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">const</span> previewHandler = &#123;</span></span><br><span class="line"><span class="javascript">                        copyTextContent: <span class="function">(<span class="params">source, text</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> result = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> target = <span class="built_in">document</span>.createElement(<span class="string">'pre'</span>);</span></span><br><span class="line"><span class="actionscript">                            target.style.opacity = <span class="string">'0'</span>;</span></span><br><span class="line">                            target.textContent = text || source.textContent;</span><br><span class="line"><span class="javascript">                            <span class="built_in">document</span>.body.appendChild(target);</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="javascript">                                <span class="keyword">let</span> range = <span class="built_in">document</span>.createRange();</span></span><br><span class="line">                                range.selectNode(target);</span><br><span class="line"><span class="javascript">                                <span class="built_in">window</span>.getSelection().removeAllRanges();</span></span><br><span class="line"><span class="javascript">                                <span class="built_in">window</span>.getSelection().addRange(range);</span></span><br><span class="line"><span class="javascript">                                <span class="built_in">document</span>.execCommand(<span class="string">'copy'</span>);</span></span><br><span class="line"><span class="javascript">                                <span class="built_in">window</span>.getSelection().removeAllRanges();</span></span><br><span class="line"><span class="actionscript">                                result = <span class="literal">true</span>;</span></span><br><span class="line"><span class="actionscript">                            &#125; <span class="keyword">catch</span> (e) &#123; &#125;</span></span><br><span class="line"><span class="javascript">                            <span class="built_in">document</span>.body.removeChild(target);</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">return</span> result;</span></span><br><span class="line">                        &#125;,</span><br><span class="line"><span class="javascript">                        fileType: <span class="function"><span class="params">suffix</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                            <span class="built_in">Array</span>.prototype.contains = <span class="function"><span class="keyword">function</span> (<span class="params">search</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                                <span class="keyword">const</span> object = <span class="keyword">this</span>;</span></span><br><span class="line"><span class="actionscript">                                <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> object) &#123;</span></span><br><span class="line">                                    if (object.hasOwnProperty(key)) &#123;</span><br><span class="line"><span class="javascript">                                        <span class="keyword">if</span> ((<span class="built_in">eval</span>(<span class="string">'/'</span> + search + <span class="string">'/i'</span>)).test(object[key])) &#123;</span></span><br><span class="line"><span class="actionscript">                                            <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line">                                        &#125;</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;</span><br><span class="line"><span class="actionscript">                                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">                            &#125;;</span><br><span class="line"><span class="actionscript">                            <span class="keyword">if</span> ([<span class="string">'bmp'</span>, <span class="string">'jpg'</span>, <span class="string">'png'</span>, <span class="string">'svg'</span>, <span class="string">'webp'</span>, <span class="string">'gif'</span>].contains(suffix)) &#123;</span></span><br><span class="line"><span class="actionscript">                                <span class="keyword">return</span> <span class="string">'image'</span>;</span></span><br><span class="line"><span class="actionscript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([<span class="string">'mp3'</span>, <span class="string">'flac'</span>, <span class="string">'wav'</span>].contains(suffix)) &#123;</span></span><br><span class="line"><span class="actionscript">                                <span class="keyword">return</span> <span class="string">'audio'</span>;</span></span><br><span class="line"><span class="actionscript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([<span class="string">'mp4'</span>, <span class="string">'avi'</span>, <span class="string">'mkv'</span>, <span class="string">'flv'</span>, <span class="string">'m3u8'</span>].contains(suffix)) &#123;</span></span><br><span class="line"><span class="actionscript">                                <span class="keyword">return</span> <span class="string">'video'</span>;</span></span><br><span class="line"><span class="actionscript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span></span><br><span class="line">                                [</span><br><span class="line"><span class="actionscript">                                    <span class="string">'txt'</span>, <span class="string">'js'</span>, <span class="string">'json'</span>, <span class="string">'css'</span>, <span class="string">'html'</span>, <span class="string">'java'</span>, <span class="string">'c'</span>, <span class="string">'cpp'</span>, <span class="string">'php'</span>,</span></span><br><span class="line"><span class="actionscript">                                    <span class="string">'cmd'</span>, <span class="string">'ps1'</span>,</span></span><br><span class="line"><span class="actionscript">                                    <span class="string">'bat'</span>, <span class="string">'sh'</span>, <span class="string">'py'</span>, <span class="string">'go'</span>, <span class="string">'asp'</span>,</span></span><br><span class="line">                                ].contains(suffix)</span><br><span class="line">                            ) &#123;</span><br><span class="line"><span class="actionscript">                                <span class="keyword">return</span> <span class="string">'text'</span>;</span></span><br><span class="line"><span class="actionscript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span></span><br><span class="line"><span class="actionscript">                                [<span class="string">'doc'</span>, <span class="string">'docx'</span>, <span class="string">'ppt'</span>, <span class="string">'pptx'</span>, <span class="string">'xls'</span>, <span class="string">'xlsx'</span>, <span class="string">'mpp'</span>, <span class="string">'rtf'</span>, <span class="string">'vsd'</span>, <span class="string">'vsdx'</span>].contains(suffix)</span></span><br><span class="line">                            ) &#123;</span><br><span class="line"><span class="actionscript">                                <span class="keyword">return</span> <span class="string">'office'</span>;</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;,</span><br><span class="line"><span class="javascript">                        loadResource: <span class="function">(<span class="params">resource, callback</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> type;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">switch</span> (resource.split(<span class="string">'.'</span>).pop()) &#123;</span></span><br><span class="line"><span class="actionscript">                                <span class="keyword">case</span> <span class="string">'css'</span>:</span></span><br><span class="line"><span class="actionscript">                                    type = <span class="string">'link'</span>;</span></span><br><span class="line"><span class="actionscript">                                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                                <span class="keyword">case</span> <span class="string">'js'</span>:</span></span><br><span class="line"><span class="actionscript">                                    type = <span class="string">'script'</span>;</span></span><br><span class="line"><span class="actionscript">                                    <span class="keyword">break</span>;</span></span><br><span class="line">                            &#125;</span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> element = <span class="built_in">document</span>.createElement(type);</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> loaded = <span class="literal">false</span>;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">if</span> (<span class="keyword">typeof</span> callback === <span class="string">'function'</span>) &#123;</span></span><br><span class="line"><span class="javascript">                                element.onload = element.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                                    <span class="keyword">if</span> (!loaded &amp;&amp; (!element.readyState || <span class="regexp">/loaded|complete/</span>.test(</span></span><br><span class="line">                                        element.readyState))) &#123;</span><br><span class="line"><span class="actionscript">                                        element.onload = element.onreadystatechange = <span class="literal">null</span>;</span></span><br><span class="line"><span class="actionscript">                                        loaded = <span class="literal">true</span>;</span></span><br><span class="line">                                        callback();</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line"><span class="actionscript">                            <span class="keyword">if</span> (type === <span class="string">'link'</span>) &#123;</span></span><br><span class="line">                                element.href = resource;</span><br><span class="line"><span class="actionscript">                                element.rel = <span class="string">'stylesheet'</span>;</span></span><br><span class="line"><span class="actionscript">                            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">                                element.src = resource;</span><br><span class="line">                            &#125;</span><br><span class="line"><span class="javascript">                            <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(element);</span></span><br><span class="line">                        &#125;,</span><br><span class="line"></span><br><span class="line"><span class="javascript">                        createDplayer: <span class="function">(<span class="params">video, type, elem</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">const</span> host = <span class="string">'//s0.pstatp.com/cdn/expire-1-M'</span>;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">const</span> resources = [</span></span><br><span class="line"><span class="actionscript">                                <span class="string">'/dplayer/1.25.0/DPlayer.min.css'</span>,</span></span><br><span class="line"><span class="actionscript">                                <span class="string">'/dplayer/1.25.0/DPlayer.min.js'</span>,</span></span><br><span class="line"><span class="actionscript">                                <span class="string">'/hls.js/0.12.4/hls.light.min.js'</span>,</span></span><br><span class="line"><span class="actionscript">                                <span class="string">'/flv.js/1.5.0/flv.min.js'</span></span></span><br><span class="line">                            ];</span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> unloadedResourceCount = resources.length;</span></span><br><span class="line"><span class="javascript">                            resources.forEach(<span class="function"><span class="params">resource</span> =&gt;</span> &#123;</span></span><br><span class="line">                                previewHandler.loadResource(host + resource, () =&gt; &#123;</span><br><span class="line">                                    if (!--unloadedResourceCount) &#123;</span><br><span class="line"><span class="javascript">                                        <span class="keyword">let</span> option = &#123;</span></span><br><span class="line">                                            url: video</span><br><span class="line">                                        &#125;</span><br><span class="line"><span class="actionscript">                                        <span class="keyword">if</span> (type === <span class="string">'flv'</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                                            option.type = <span class="string">'flv'</span>;</span></span><br><span class="line">                                        &#125;</span><br><span class="line"><span class="actionscript">                                        <span class="keyword">new</span> DPlayer(&#123;</span></span><br><span class="line">                                            container: elem,</span><br><span class="line"><span class="actionscript">                                            screenshot: <span class="literal">true</span>,</span></span><br><span class="line">                                            video: option</span><br><span class="line">                                        &#125;);</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;)</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"><span class="actionscript">                    <span class="keyword">const</span> suffix = path.split(<span class="string">'.'</span>).pop();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">let</span> content = <span class="built_in">document</span>.querySelector(<span class="string">'.content'</span>);</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">switch</span> (previewHandler.fileType(suffix)) &#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">case</span> <span class="string">'image'</span>:</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> img = <span class="keyword">new</span> Image();</span></span><br><span class="line"><span class="actionscript">                            img.style.maxWidth = <span class="string">'100%'</span>;</span></span><br><span class="line">                            img.src = url;</span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> fancy = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span></span><br><span class="line"><span class="actionscript">                            fancy.setAttribute(<span class="string">'data-fancybox'</span>, <span class="string">'image'</span>);</span></span><br><span class="line">                            fancy.href = img.src;</span><br><span class="line">                            fancy.append(img);</span><br><span class="line"><span class="actionscript">                            content.innerHTML = <span class="string">''</span>;</span></span><br><span class="line">                            content.append(fancy);</span><br><span class="line"><span class="actionscript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">case</span> <span class="string">'audio'</span>:</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> audio = <span class="keyword">new</span> Audio();</span></span><br><span class="line"><span class="actionscript">                            audio.style.outline = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="actionscript">                            audio.preload = <span class="string">'auto'</span>;</span></span><br><span class="line"><span class="actionscript">                            audio.controls = <span class="string">'controls'</span>;</span></span><br><span class="line"><span class="actionscript">                            audio.style.width = <span class="string">'100%'</span>;</span></span><br><span class="line">                            audio.src = url;</span><br><span class="line"><span class="actionscript">                            content.innerHTML = <span class="string">''</span>;</span></span><br><span class="line">                            content.append(audio);</span><br><span class="line"><span class="actionscript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">case</span> <span class="string">'video'</span>:</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> video = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line">                            previewHandler.createDplayer(url, suffix, video);</span><br><span class="line"><span class="actionscript">                            content.innerHTML = <span class="string">''</span>;</span></span><br><span class="line">                            content.append(video);</span><br><span class="line"><span class="actionscript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">case</span> <span class="string">'text'</span>:</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> pre = <span class="built_in">document</span>.createElement(<span class="string">'pre'</span>);</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> code = <span class="built_in">document</span>.createElement(<span class="string">'code'</span>);</span></span><br><span class="line">                            pre.append(code);</span><br><span class="line"><span class="actionscript">                            pre.style.background = <span class="string">'rgb(245,245,245)'</span>;</span></span><br><span class="line"><span class="actionscript">                            pre.style[<span class="string">'overflow-x'</span>] = <span class="string">'scroll'</span>;</span></span><br><span class="line">                            pre.classList.add(suffix);</span><br><span class="line"><span class="actionscript">                            content.style[<span class="string">'text-align'</span>] = <span class="string">'initial'</span>;</span></span><br><span class="line"><span class="actionscript">                            content.innerHTML = <span class="string">''</span>;</span></span><br><span class="line">                            content.append(pre);</span><br><span class="line"><span class="actionscript">                            sendRequest(<span class="string">'GET'</span>, url, <span class="literal">null</span>, <span class="literal">null</span>, data =&gt; &#123;</span></span><br><span class="line">                                code.textContent = data;</span><br><span class="line"><span class="actionscript">                                <span class="keyword">if</span> (size.indexOf(<span class="string">' B'</span>) &gt;= <span class="number">0</span> || size.indexOf(<span class="string">' KB'</span>) &amp;&amp;</span></span><br><span class="line"><span class="actionscript">                                    size.split(<span class="string">' '</span>)[<span class="number">0</span>] &lt; <span class="number">100</span></span></span><br><span class="line">                                ) &#123;</span><br><span class="line">                                    hljs.highlightBlock(pre);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;);</span><br><span class="line"><span class="actionscript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">case</span> <span class="string">'office'</span>:</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">const</span> officeOnline = <span class="string">'//view.officeapps.live.com/op/view.aspx?src='</span> + <span class="built_in">encodeURIComponent</span>(url);</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="actionscript">                            div.style.lineHeight = <span class="string">'2em'</span>;</span></span><br><span class="line"><span class="actionscript">                            div.style.background = <span class="string">'rgba(218, 215, 215, 0.21)'</span>;</span></span><br><span class="line"><span class="actionscript">                            div.style.webkitTapHighlightColor = <span class="string">'rgba(0, 0, 0, 0)'</span>;</span></span><br><span class="line"><span class="actionscript">                            div.style.cursor = <span class="string">'pointer'</span>;</span></span><br><span class="line"><span class="actionscript">                            div.innerHTML = <span class="string">'新窗口打开'</span>;</span></span><br><span class="line"><span class="javascript">                            div.addEventListener(<span class="string">'click'</span>, () =&gt; <span class="built_in">window</span>.open(officeOnline));</span></span><br><span class="line"><span class="actionscript">                            content.innerHTML = <span class="string">''</span>;</span></span><br><span class="line">                            content.appendChild(div);</span><br><span class="line"><span class="javascript">                            <span class="keyword">if</span> (<span class="built_in">document</span>.body.clientWidth &gt;= <span class="number">480</span>) &#123;</span></span><br><span class="line"><span class="javascript">                                <span class="keyword">let</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>);</span></span><br><span class="line"><span class="actionscript">                                iframe.width = <span class="string">'100%'</span>;</span></span><br><span class="line"><span class="actionscript">                                iframe.style.height = <span class="string">'41em'</span>;</span></span><br><span class="line"><span class="actionscript">                                iframe.style.border = <span class="string">'0'</span>;</span></span><br><span class="line">                                iframe.src = officeOnline;</span><br><span class="line">                                content.appendChild(iframe);</span><br><span class="line">                            &#125;</span><br><span class="line"><span class="actionscript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">default</span>:</span></span><br><span class="line"><span class="actionscript">                            content.style[<span class="string">'text-align'</span>] = <span class="string">'center'</span>;</span></span><br><span class="line"><span class="actionscript">                            content.innerHTML = <span class="string">'该文件不支持预览'</span>;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">break</span>;</span></span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.querySelector(<span class="string">'.file-name'</span>).innerHTML = path;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.querySelector(<span class="string">'.btn.download'</span>).addEventListener(<span class="string">'click'</span>,</span></span><br><span class="line">                        () =&gt; location.href = url</span><br><span class="line">                    );</span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.querySelector(<span class="string">'.btn.quote'</span>).addEventListener(<span class="string">'click'</span>,</span></span><br><span class="line">                        event =&gt; &#123;</span><br><span class="line"><span class="javascript">                            previewHandler.copyTextContent(<span class="literal">null</span>, <span class="built_in">window</span>.api.url + <span class="string">'?file='</span> + path);</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">const</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">'.btn.quote'</span>);</span></span><br><span class="line"><span class="actionscript">                            btn.innerHTML = <span class="string">'已复制'</span>;</span></span><br><span class="line"><span class="javascript">                            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> btn.innerHTML = <span class="string">'引用'</span>, <span class="number">250</span>);</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    );</span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.querySelector(<span class="string">'.btn.share'</span>).addEventListener(<span class="string">'click'</span>,</span></span><br><span class="line">                        event =&gt; &#123;</span><br><span class="line"><span class="javascript">                            <span class="keyword">const</span> sharePath = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                                <span class="keyword">let</span> arr = <span class="built_in">window</span>.backFordwardCache.current.split(<span class="string">'/'</span>);</span></span><br><span class="line"><span class="javascript">                                <span class="keyword">let</span> r = <span class="string">''</span>;</span></span><br><span class="line"><span class="javascript">                                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">                                    r += <span class="string">'/'</span> + arr[i];</span></span><br><span class="line">                                &#125;</span><br><span class="line"><span class="actionscript">                                <span class="keyword">return</span> r;</span></span><br><span class="line">                            &#125;</span><br><span class="line"><span class="actionscript">                            previewHandler.copyTextContent(<span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">                                <span class="built_in">window</span>.location.origin +</span></span><br><span class="line"><span class="javascript">                                <span class="built_in">window</span>.location.pathname +</span></span><br><span class="line"><span class="actionscript">                                <span class="string">'?path='</span> + sharePath());</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">const</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">'.btn.share'</span>);</span></span><br><span class="line"><span class="actionscript">                            btn.innerHTML = <span class="string">'已复制'</span>;</span></span><br><span class="line"><span class="javascript">                            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> btn.innerHTML = <span class="string">'分享'</span>, <span class="number">250</span>);</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    );</span><br><span class="line"><span class="actionscript">                    switchRightDisplay(<span class="string">'preview'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="keyword">let</span> start = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">let</span> right = <span class="built_in">document</span>.querySelector(<span class="string">'.right'</span>);</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">const</span> scrollToBottom = <span class="function">(<span class="params">timestamp</span>) =&gt;</span> &#123;</span></span><br><span class="line">                        if (!start) start = timestamp;</span><br><span class="line"><span class="javascript">                        <span class="keyword">let</span> progress = timestamp - start;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">let</span> last = right.scrollTop;</span></span><br><span class="line">                        right.scrollTo(0, right.scrollTop + 14);</span><br><span class="line">                        if (right.scrollTop !== last &amp;&amp; progress &lt; 1000 * 2) &#123;</span><br><span class="line"><span class="javascript">                            <span class="built_in">window</span>.requestAnimationFrame(scrollToBottom);</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;;</span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.requestAnimationFrame(scrollToBottom);</span></span><br><span class="line">                &#125;);</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">                elem.addEventListener(<span class="string">'click'</span>, event =&gt; &#123;</span></span><br><span class="line">                    fetchFileList(path);</span><br><span class="line">                    switchBackForwardStatus(path);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">addBackForwardListener</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'arrow-back'</span>).addEventListener(<span class="string">'click'</span>, back);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">'arrow-forward'</span>).addEventListener(<span class="string">'click'</span>, forward);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.querySelector(<span class="string">'#main-page'</span>).addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">                fetchFileList(<span class="built_in">window</span>.api.root);</span></span><br><span class="line"><span class="javascript">                switchBackForwardStatus(<span class="built_in">window</span>.api.root);</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">switchRightDisplay</span><span class="params">(display)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (display === <span class="string">'preview'</span>) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.list-header'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'#file-list'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.markdown-body'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.password'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.preview'</span>).style.display = <span class="string">'initial'</span></span></span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (display === <span class="string">'encrypted'</span>) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.list-header'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'#file-list'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.markdown-body'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.preview'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.password'</span>).style.display = <span class="string">'initial'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'#readme'</span>).innerHTML = <span class="string">''</span>;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> content = <span class="built_in">document</span>.querySelector(<span class="string">'.preview .content'</span>);</span></span><br><span class="line">                if (content) &#123;</span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.querySelector(<span class="string">'.preview .content'</span>).innerHTML = <span class="string">''</span>;</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.list-header'</span>).style.display = <span class="string">'initial'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'#file-list'</span>).style.display = <span class="string">'initial'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.markdown-body'</span>).style.display = <span class="string">'none'</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.preview'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'.password'</span>).style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.querySelector(<span class="string">'#readme'</span>).innerHTML = <span class="string">''</span>;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> content = <span class="built_in">document</span>.querySelector(<span class="string">'.preview .content'</span>);</span></span><br><span class="line">                if (content) &#123;</span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.querySelector(<span class="string">'.preview .content'</span>).innerHTML = <span class="string">''</span>;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">switchBackForwardStatus</span><span class="params">(path)</span> </span>&#123;</span></span><br><span class="line">            if (path) &#123;</span><br><span class="line"><span class="javascript">                <span class="built_in">window</span>.backFordwardCache.deepest = path;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="built_in">window</span>.backFordwardCache.root !== <span class="built_in">window</span>.backFordwardCache.current) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">window</span>.backFordwardCache.backable = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">'arrow-back'</span>).style.color = <span class="string">'black'</span>;</span></span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">window</span>.backFordwardCache.backable = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">'arrow-back'</span>).style.color = <span class="string">'rgb(218, 215, 215)'</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="built_in">window</span>.backFordwardCache.deepest !== <span class="built_in">window</span>.backFordwardCache.current) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">window</span>.backFordwardCache.forwardable = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">'arrow-forward'</span>).style.color = <span class="string">'black'</span>;</span></span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">window</span>.backFordwardCache.forwardable = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">'arrow-forward'</span>).style.color = <span class="string">'rgb(218, 215, 215)'</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">back</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (!<span class="built_in">window</span>.backFordwardCache.backable) &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="built_in">window</span>.backFordwardCache.preview) &#123;</span></span><br><span class="line"><span class="javascript">                fetchFileList(<span class="built_in">window</span>.backFordwardCache.current);</span></span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> former = <span class="function">(<span class="params">(</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">let</span> formerEndIndex = <span class="built_in">window</span>.backFordwardCache.current.lastIndexOf(<span class="string">'/'</span>);</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="built_in">window</span>.backFordwardCache.current.substring(<span class="number">0</span>, formerEndIndex);</span></span><br><span class="line">                &#125;)();</span><br><span class="line"><span class="javascript">                former = former || <span class="built_in">window</span>.api.root;</span></span><br><span class="line">                fetchFileList(former);</span><br><span class="line">                switchBackForwardStatus();</span><br><span class="line">            &#125;</span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(window.backFordwardCache);</span></span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">forward</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (!<span class="built_in">window</span>.backFordwardCache.forwardable) &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span></span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> current = <span class="built_in">window</span>.backFordwardCache.current === <span class="built_in">window</span>.api.root ? <span class="string">''</span> : <span class="built_in">window</span>.backFordwardCache.current</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> subLength = current ? current.length : <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> later = current + <span class="string">'/'</span> +</span></span><br><span class="line"><span class="javascript">                <span class="built_in">window</span>.backFordwardCache.deepest.substring(subLength).split(<span class="string">'/'</span>)[<span class="number">1</span>];</span></span><br><span class="line">            fetchFileList(later);</span><br><span class="line">            switchBackForwardStatus();</span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log(window.backFordwardCache);</span></span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">preCache</span>(<span class="params">files, level</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (level &gt; <span class="number">2</span>) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">            files.files.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> parent = files.parent === <span class="string">'/'</span> ? <span class="string">''</span> : files.parent</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> path = parent + <span class="string">'/'</span> + file.name;</span></span><br><span class="line">                if (!file.url) &#123;</span><br><span class="line"><span class="actionscript">                    <span class="comment">// console.log('caching ' + path + ', level ' + level);</span></span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.fileCache.set(path, <span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">                    sendRequest(<span class="built_in">window</span>.api.method,</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">window</span>.api.url,</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">window</span>.api.formatPayload(path),</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">window</span>.api.headers,</span></span><br><span class="line">                        data =&gt; &#123;</span><br><span class="line"><span class="javascript">                            <span class="keyword">const</span> files = <span class="built_in">JSON</span>.parse(data);</span></span><br><span class="line"><span class="javascript">                            <span class="built_in">window</span>.fileCache.set(path, files);</span></span><br><span class="line">                            preCache(files, level + 1);</span><br><span class="line">                        &#125;,</span><br><span class="line"><span class="javascript">                        () =&gt; <span class="built_in">window</span>.fileCache.set(path, <span class="literal">false</span>)</span></span><br><span class="line">                    );</span><br><span class="line"><span class="actionscript">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (file.name.split(<span class="string">'.'</span>).pop() === <span class="string">'md'</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">// console.log('caching ' + path + ', level ' + level);</span></span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.fileCache.set(path, <span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">                    sendRequest(<span class="string">'GET'</span>, file.url, <span class="literal">null</span>, <span class="literal">null</span>, text =&gt; <span class="built_in">window</span>.fileCache.set(path, text), () =&gt; <span class="built_in">window</span>.fileCache.set(path, <span class="literal">false</span>));</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">preCacheCheck</span>(<span class="params">cache, path</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            cache.files.forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> prefix = path === <span class="built_in">window</span>.api.root ? <span class="string">''</span> : path;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">const</span> nextPath = prefix + <span class="string">'/'</span> + file.name;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> pathCache = <span class="built_in">window</span>.fileCache.get(nextPath);</span></span><br><span class="line">                if (!file.url) &#123;</span><br><span class="line"><span class="actionscript">                    <span class="keyword">if</span> (!pathCache &amp;&amp; pathCache !== <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="comment">// console.log('inner caching ' + nextPath);</span></span></span><br><span class="line"><span class="javascript">                        <span class="built_in">window</span>.fileCache.set(nextPath, <span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">                        sendRequest(<span class="built_in">window</span>.api.method,</span></span><br><span class="line"><span class="javascript">                            <span class="built_in">window</span>.api.url,</span></span><br><span class="line"><span class="javascript">                            <span class="built_in">window</span>.api.formatPayload(nextPath),</span></span><br><span class="line"><span class="javascript">                            <span class="built_in">window</span>.api.headers,</span></span><br><span class="line">                            data =&gt; &#123;</span><br><span class="line"><span class="javascript">                                <span class="keyword">const</span> files = <span class="built_in">JSON</span>.parse(data);</span></span><br><span class="line"><span class="javascript">                                <span class="built_in">window</span>.fileCache.set(nextPath, files);</span></span><br><span class="line">                                preCache(files, 0);</span><br><span class="line">                            &#125;,</span><br><span class="line"><span class="javascript">                            () =&gt; <span class="built_in">window</span>.fileCache.set(nextPath, <span class="literal">false</span>)</span></span><br><span class="line">                        );</span><br><span class="line">                    &#125;</span><br><span class="line"><span class="actionscript">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (file.name.split(<span class="string">'.'</span>).pop() === <span class="string">'md'</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">if</span> (!pathCache &amp;&amp; pathCache !== <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="comment">// console.log('inner caching ' + nextPath);</span></span></span><br><span class="line"><span class="javascript">                        <span class="built_in">window</span>.fileCache.set(nextPath, <span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">                        sendRequest(<span class="string">'GET'</span>, file.url, <span class="literal">null</span>, <span class="literal">null</span>, text =&gt; <span class="built_in">window</span>.fileCache.set(nextPath,</span></span><br><span class="line"><span class="javascript">                            text), () =&gt; <span class="built_in">window</span>.fileCache.set(nextPath,</span></span><br><span class="line"><span class="actionscript">                                <span class="literal">false</span>));</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">fetchFileList</span><span class="params">(path)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// console.log('fetching ' + path);</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> loading = <span class="built_in">document</span>.querySelector(<span class="string">'.loading-wrapper'</span>);</span></span><br><span class="line"><span class="actionscript">            loading.style.display = <span class="string">'initial'</span>;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.backFordwardCache.preview = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.backFordwardCache.current = path;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> cache = <span class="built_in">window</span>.fileCache.get(path);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (cache === <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> cacheWaitFileListFetch = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    cache = <span class="built_in">window</span>.fileCache.get(path);</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> cache === <span class="string">'object'</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                        renderPage(<span class="literal">null</span>, cache);</span></span><br><span class="line">                        preCacheCheck(cache, path);</span><br><span class="line">                        clearInterval(cacheWaitFileListFetch);</span><br><span class="line"><span class="actionscript">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cache === <span class="literal">false</span>) &#123;</span></span><br><span class="line">                        clearInterval(cacheWaitFileListFetch);</span><br><span class="line"><span class="actionscript">                        loading.style.color = <span class="string">'red'</span>;</span></span><br><span class="line"><span class="actionscript">                        loading.innerText = <span class="string">'Failed!'</span>;</span></span><br><span class="line"><span class="javascript">                        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">                            loading.style.display = <span class="string">'none'</span>;</span></span><br><span class="line"><span class="actionscript">                            loading.style.color = <span class="string">'white'</span>;</span></span><br><span class="line"><span class="actionscript">                            loading.innerText = <span class="string">'Loading..'</span>;</span></span><br><span class="line">                        &#125;, 2000);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, 100);</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cache) &#123;</span></span><br><span class="line"><span class="actionscript">                renderPage(<span class="literal">null</span>, cache);</span></span><br><span class="line">                preCacheCheck(cache, path);</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">window</span>.fileCache.set(path, <span class="literal">true</span>);</span></span><br><span class="line"><span class="javascript">                sendRequest(<span class="built_in">window</span>.api.method,</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.api.url,</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.api.formatPayload(path),</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.api.headers,</span></span><br><span class="line">                    renderPage</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.title = <span class="built_in">window</span>.GLOBAL_CONFIG.SITE_NAME;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.querySelector(<span class="string">'.site'</span>).textContent = <span class="built_in">window</span>.GLOBAL_CONFIG.SITE_NAME;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.api = &#123;</span></span><br><span class="line"><span class="actionscript">                root: <span class="string">'/'</span>,</span></span><br><span class="line"><span class="javascript">                url: <span class="built_in">window</span>.GLOBAL_CONFIG.SCF_GATEWAY,</span></span><br><span class="line"><span class="actionscript">                method: <span class="string">'POST'</span>,</span></span><br><span class="line"><span class="javascript">                formatPayload: <span class="function">(<span class="params">path, passwd</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="string">'?path='</span> + <span class="built_in">encodeURIComponent</span>(path) +</span></span><br><span class="line"><span class="javascript">                        <span class="string">'&amp;encrypted='</span> + <span class="built_in">window</span>.api.accessToken.encrypted +</span></span><br><span class="line"><span class="javascript">                        <span class="string">'&amp;plain='</span> + <span class="built_in">window</span>.api.accessToken.plain +</span></span><br><span class="line"><span class="actionscript">                        <span class="string">'&amp;passwd='</span> + passwd;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                headers: &#123;</span><br><span class="line"><span class="actionscript">                    <span class="string">'Content-type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.backFordwardCache = &#123;</span></span><br><span class="line"><span class="javascript">                root: <span class="built_in">window</span>.api.root,</span></span><br><span class="line"><span class="javascript">                deepest: <span class="built_in">window</span>.api.root,</span></span><br><span class="line"><span class="javascript">                current: <span class="built_in">window</span>.api.root,</span></span><br><span class="line"><span class="actionscript">                backable: <span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">                forwardable: <span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">                preview: <span class="literal">false</span></span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="built_in">window</span>.fileCache = <span class="keyword">new</span> <span class="built_in">Map</span>();</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> initialPath = <span class="keyword">new</span> URLSearchParams(<span class="built_in">window</span>.location.search).get(<span class="string">'path'</span>) || <span class="built_in">window</span>.api.root;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (<span class="built_in">window</span>.GLOBAL_CONFIG.IS_CF) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">window</span>.api.accessToken = &#123;</span></span><br><span class="line"><span class="actionscript">                    encrypted: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">                    plain: <span class="string">''</span></span></span><br><span class="line">                &#125;;</span><br><span class="line">                fetchFileList(initialPath);</span><br><span class="line">                addBackForwardListener();</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                sendRequest(<span class="built_in">window</span>.api.method,</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.api.url + <span class="string">'?accessToken'</span>,</span></span><br><span class="line"><span class="actionscript">                    <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.api.headers,</span></span><br><span class="line">                    data =&gt; &#123;</span><br><span class="line"><span class="javascript">                        <span class="keyword">const</span> accessToken = <span class="built_in">JSON</span>.parse(data);</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">window</span>.api.accessToken = &#123;</span></span><br><span class="line">                            encrypted: accessToken.encrypted,</span><br><span class="line">                            plain: accessToken.plain</span><br><span class="line">                        &#125;;</span><br><span class="line">                        fetchFileList(initialPath);</span><br><span class="line">                        addBackForwardListener();</span><br><span class="line">                    &#125;</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">hidden</span>=<span class="string">"hidden"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"tree-node-wrapper-template"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tree-node-wrapper"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tree-node"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ion-icon</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ion-icon</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tree-node-name"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"file-wrapper-templete"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row file-wrapper"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"file"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ion-icon</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"size"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loading-wrapper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loading"</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header-wrapper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ion-icon</span> <span class="attr">id</span>=<span class="string">"arrow-back"</span> <span class="attr">class</span>=<span class="string">"logo"</span> <span class="attr">name</span>=<span class="string">"arrow-back"</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ion-icon</span> <span class="attr">id</span>=<span class="string">"arrow-forward"</span> <span class="attr">class</span>=<span class="string">"logo"</span> <span class="attr">name</span>=<span class="string">"arrow-forward"</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ion-icon</span> <span class="attr">id</span>=<span class="string">"main-page"</span> <span class="attr">class</span>=<span class="string">"logo"</span> <span class="attr">name</span>=<span class="string">"folder"</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"path"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"site"</span> <span class="attr">id</span>=<span class="string">"nav-site"</span>&gt;</span>ONEDRIVE<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tree-root"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"list-header"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"file"</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span>ITEMS<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span>TIME<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"size"</span>&gt;</span>SIZE<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"file-list"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"markdown-body"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"readme"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"preview"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"file-name"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"btn download"</span>&gt;</span>下载<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"btn quote"</span>&gt;</span>引用<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"btn share"</span>&gt;</span>分享<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"password-wrapper"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>完成界面：<br><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.9-1/img/FODI/Success.png"  alt="cloudflare editor"></p><hr><p>题外话：</p><p>那个获取refresh_token的网页并不是不可用，但是成功率巨低，我试了前前后后三十多次才一次成功……</p><p>heroku的登录需要科学上网，怎么科学上网就不要问我了，Google上大把……</p><p>以后发文件我会放到我的onedrive上，大家可以自取，地址是<a href="http://drive.bili33.top/" target="_blank" rel="noopener">http://drive.bili33.top/</a>，友链页面也有链接。</p><p>我自己部署的heroku项目不会开放给大家获取refresh_token，因为获取完一次要到后台删除refresh_token才能进行下一次的获取</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;本人有两个onedrive账号，一个自用，另外一个是&lt;a href=&quot;http://bili33.top/2019/08/30/Office365/#%E9%A2%98%E5%A4%96%E8%AF%9D%EF%BC%9A&quot;&gt;前几天蹭的edu账号&lt;/a&gt;，之前一直想用one
      
    
    </summary>
    
    
      <category term="Software" scheme="http://bili33.top/categories/Software/"/>
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>jsDelivr的正确打开方式</title>
    <link href="http://bili33.top/2020/02/08/jsDelivr-Usage/"/>
    <id>http://bili33.top/2020/02/08/jsDelivr-Usage/</id>
    <published>2020-02-08T13:09:35.000Z</published>
    <updated>2020-04-05T04:43:45.152Z</updated>
    
    <content type="html"><![CDATA[<div class="note info">            <p>文章已经在2020.4.5更新</p>          </div><p><del>开始持续高产</del>前几天开始，github的raw文件下载域名<code>raw.githubusercontent.com</code>被墙了，导致我的网站很多图片都是404（因为我是直接使用github的文件），我转为使用cloudflare的workers反代。但是反代有每日10W次的请求次数限制。<del>万一以后我的网站访问量增大了呢？这样岂不是不够用？</del>（在想Peach）</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.8/img/jsDelivr/Chiyota-momo.jpg"  alt="没错，我在想もも"></p><p>今天早上我才在<a href="/2020/02/06/diary4/">【日常吐槽04】</a>的评论区里面说不会用jsDelivr，到了晚上，嗯，真香……</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.8/img/jsDelivr/home.png"  alt="jsDelivr"></p><p>jsDelivr是一个比较好的CDN平台，官方号称<code>jsDelivr – Open Source CDN</code> <code>free, fast, and reliable</code>，简单来说就是开源的CDN，免费、快、可靠这样的</p><p>不过确实，这玩意的口碑也挺好，那我就按照我半天的使用体验，来说说这玩意的正确打开方式吧</p><hr><h3 id="你需要准备："><a href="#你需要准备：" class="headerlink" title="你需要准备："></a>你需要准备：</h3><p>一个github账号</p><h3 id="开始操作"><a href="#开始操作" class="headerlink" title="开始操作"></a>开始操作</h3><p>你需要登录你的Github，创建一个你想用来放文件的仓库，然后在这个仓库里面上传你的文件，像我这样</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.8/img/jsDelivr/Picture-repo.png"  alt="上传文件后的仓库"></p><p>然后点击Release，新建一个版本，在上面的小方框里面填写你的版本号，尽量填写数字，例如<code>1.0</code>之类的，不要用中文！！！</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@2020.2.8/img/jsDelivr/release.png"  alt="新建Release"></p><p>接着直接调用jsDelivr，例如我在名为Picture-repo的仓库发布了1.0版本，那么我访问链接：</p><p><code>https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/AboutMe/logo-mini.png</code></p><p>就可以直接调用我的头像，按照官方的格式，就是</p><p><code>https://cdn.jsdelivr.net/gh/&lt;username&gt;/&lt;repo-name&gt;@&lt;version&gt;/&lt;path&gt;</code></p><p>的样子，解释一下：</p><p>&lt;username&gt;就改成自己的名字，&lt;repo-name&gt;改成自己的仓库名字，&lt;version&gt;就是你的release版本，如果不填会自动选择最新的release&lt;path&gt;改成自己的文件路径。当我上传的时候我的文件夹路径是<code>.\folder\example.png</code>的话，那么&lt;path&gt;就要改成<code>folder/example.png</code></p><p>但是请注意！当你的release包大于50MB，那么jsdelivr会给你报错并且不给你提供加速服务，例如下面这条链接:</p><p><a href="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/Storage@1.0/表情包/真叫人质壁分离.jpg" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/NotFoundNEKKO/Storage@1.0/表情包/真叫人质壁分离.jpg</a></p><p>点开就会发现提示：</p><p><code>Package size exceeded the configured limit of 50 MB. Try https://github.com/NotFoundNEKKO/Storage/tree/1.0/表情包/真叫人质壁分离.jpg instead.</code></p><p>所以说还是要尽量减少自己每个release的大小，如果说太大了建议分成几个仓库放哦~</p><hr><div class="note info">            <h3 id="2020-4-5-更新：Github-Page法"><a href="#2020-4-5-更新：Github-Page法" class="headerlink" title="2020.4.5 更新：Github Page法"></a>2020.4.5 更新：Github Page法</h3>          </div><p>根据评论区@Anonymous的回复，发现有另外一种方式也能够访问Github中的文件（而且还是raw）</p><p>我们还是以上面那个仓库为例子，先到仓库中的设置，打开Github Pages服务</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@jsdelivr-usage/img/jsdelivr-Usage/Picture-repo-Pages.png"  alt="打开Github Pages服务"></p><p>然后我们可以看到Github将我的这个仓库的page服务部署到了<code>https://bili33.top/Picture-repo/</code>这个链接</p><p>我们尝试访问仓库中的文件</p><p>在这里我访问的是我的网站头图↓</p><p><img src="/" class="lazyload" data-src="https://bili33.top/Picture-repo/img/Top-img/NEKO-Hackers.jpg"  alt="网站头图（以Page方式加载）"></p><p>可以看到，的确是可以进行访问的。而如果在Github Pages服务中开启自定义域名的话，还能够配合CloudFlare的CDN进行一波加<del>（jian）</del>速</p><p><img src="/" class="lazyload" data-src="https://gamernotitle.coding.net/p/BQB/d/BQB/git/raw/master/001Funny_%E6%BB%91%E7%A8%BD%E5%A4%A7%E4%BD%AC%F0%9F%98%8FBQB/Funny00008.gif"  alt=""></p><hr><p>题外话：</p><p>但是还是有人要直接访问raw.githubusercontent.com域名，所以我在这里开放出我的反代</p><p>当你访问了域名为raw.githubusercontent.com的文件后（后面应该有一大串的文件路径链接），把它改成下面任意一个域名</p><p><code>反代1：cdn.bili33.top</code>（每日请求上限较少，因为我的反代都在这里）</p><p><code>反代2：bilicdn.tk</code>（推荐）</p><p>希望能够帮到大家吧~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;note info&quot;&gt;
            &lt;p&gt;文章已经在2020.4.5更新&lt;/p&gt;
          &lt;/div&gt;

&lt;p&gt;&lt;del&gt;开始持续高产&lt;/del&gt;前几天开始，github的raw文件下载域名&lt;code&gt;raw.githubuserc
      
    
    </summary>
    
    
      <category term="Software" scheme="http://bili33.top/categories/Software/"/>
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>日常吐槽04</title>
    <link href="http://bili33.top/2020/02/06/diary4/"/>
    <id>http://bili33.top/2020/02/06/diary4/</id>
    <published>2020-02-06T12:00:00.000Z</published>
    <updated>2020-03-29T02:52:32.951Z</updated>
    
    <content type="html"><![CDATA[<p>最近甚是无聊，因为做完了作业又不能出门（这都要从一只蝙蝠说起……），天天在家里打命(tu)运(ming)2，在家里躺着都算给国家做贡献……也没干什么技术活，就还是来吐槽一下吧</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Diary/04/origin.jpg"  width="256" height="364.8"></img></p><p>首先先感谢2019-ncov送来的寒假延长消息，让我们的寒假至少延迟到了2020.2.17（原来是9号回校，10号正式开学），也让我肝土命2的时间变多了（这赛季等级莫不是要冲100，正因如此，周末双休可能就要变成单休了，而且准高三的暑假估计要被阉割掉了）。因为病毒的影响，导致人人不能出门，出门必戴口罩。因为口罩太畅销了，有些地方的口罩纷纷涨价。涨价一点点能接受对吧，但是我看到我们班上有人20买个医用口罩，真心贵……（强烈斥责坐地起价的行为）昨天早上还去排队买口罩，凭身份证一人买五个5￥，买完了还去别的地方看看有没有口罩买，最后十一点半回到家……</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0/真叫人质壁分离.jpg"  width="300" height="300"></img></p><p>既然学校延迟开学，那也不能闲着，让学生开始用起了钉钉，想着用钉钉的会议模式上课（什么脑洞……）钉钉的商店评分骤降（XSWL），这算是躺枪_(:з」∠)_吧……但是也让钉钉首次超过微信拿到了iOS榜单第一（嘿嘿）</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0/嗯？.jpg"  width="300" height="300"></img></p><p>最近特别喜欢用twitter（我也不知道为什么，我的Twitter<a href="https://twitter.com/GamerNoTitle" target="_blank" rel="noopener">@GamerNoTitle</a>），天天早上就打开手机看推，然后看到@PlayWarframe（WARFRAME官方账号）关注了@Bungie（命运2开发商）和@Destiny2（命运2官方账号），这两家公司莫非有啥关系？？？（不过话说是同一题材的游戏撒）</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0/歪头.jpg"  width="300" height="300"></img></p><p>15天前，我在Valine-Admin的仓库发布了issue<a href="https://github.com/DesertsP/Valine-Admin/issues/75" target="_blank" rel="noopener">#75</a>，主要是邮件的发送上的问题，直到今天，终于有人回复我啦^v^，感谢大佬<strong><a href="https://github.com/tnrzy" target="_blank" rel="noopener">@tnrzy</a></strong>帮我解决了邮件发送的问题*v*</p><p><img src="/" class="lazyload" data-src="https://camo.githubusercontent.com/5f08fd71196a826d3a7efee0b526eab78aec658b/68747470733a2f2f63646e2e62696c6933332e746f702f4e6f74466f756e644e454b4b4f2f53746f726167652f6d61737465722f2545382541312541382545362538332538352545352538432538352f2545382542302541322545382542302541322545372538422542382545372538432541422e6a7067"  alt=""></p><p>前几天还是在刷Twitter的时候，想去Soundcloud上听大佬的歌曲，然后发现国内访问不了Soundcloud，而且用cloudflare反代也不行，我就只能翻墙上soundcloud了。话说到底为啥soundcloud不能在国内用？？？</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0/灵梦FL.jpg"  width="300" height="350"></img></p><hr><p>近期想做的事情：</p><p>1、想玩VR！！！想玩Beat Saber！！！（没有VR的人哭了）</p><p>2、趁着现在闲，想继续学一下C++和Python（目前只会基础撒）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近甚是无聊，因为做完了作业又不能出门（这都要从一只蝙蝠说起……），天天在家里打命(tu)运(ming)2，在家里躺着都算给国家做贡献……也没干什么技术活，就还是来吐槽一下吧&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/&quot; class=&quot;lazyload&quot; data-src=&quot;ht
      
    
    </summary>
    
    
      <category term="diary" scheme="http://bili33.top/categories/diary/"/>
    
    
      <category term="diary" scheme="http://bili33.top/tags/diary/"/>
    
  </entry>
  
  <entry>
    <title>日常吐槽03 - 聊一聊WARFRAME COINCIDANCE的制作</title>
    <link href="http://bili33.top/2020/01/22/diary3/"/>
    <id>http://bili33.top/2020/01/22/diary3/</id>
    <published>2020-01-22T14:00:00.000Z</published>
    <updated>2020-03-29T02:52:32.949Z</updated>
    
    <content type="html"><![CDATA[<p>近期做了一个视频：<a href="https://www.bilibili.com/video/av84462179/" target="_blank" rel="noopener">【WARFRAME 抖肩舞】星 际 仓 鼠 再来亿遍！打三傻不如跳舞！每天一遍，防止抑郁~ WARFRAME版 Coincidance 自制</a></p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Diary/Coincidance.png"  alt="WARFRAME COINCIDANCE"></p><p>什么？你说你还没有看？赶紧点开上面的蓝链前往B站查看！！！</p><p>哔哩哔哩播放：<a href="https://www.bilibili.com/video/av84462179/" target="_blank" rel="noopener">【WARFRAME 抖肩舞】星 际 仓 鼠 再来亿遍！打三傻不如跳舞！每天一遍，防止抑郁~ WARFRAME版 Coincidance 自制</a></p><iframe src="//player.bilibili.com/player.html?aid=84462179&cid=144465868&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>YouTube播放：<iframe width="560" height="315" src="https://www.youtube.com/embed/aA3QgQMm4FE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>这是[bilibili@GamerNoTitle](https://space.bilibili.com/44666814)（也就是我自己）和[bilibili@ThisNEKKO_xd](https://space.bilibili.com/49835313/)、[bilibili@MI-rice-json](https://space.bilibili.com/22267745/)和[bilibili@毁天灭地的GEnX](https://space.bilibili.com/49914186/)四人一起合作完成的视频，这算是2019（农历）的最后一个视频，也是第一个视频。至于这个发布日期也是特意挑的，因为是我农历生日……<p>一开始想做这个是因为看到了这个<a href="https://www.bilibili.com/video/av80351178" target="_blank" rel="noopener">【命运2 抖肩舞】再来亿遍！打游戏不如跳舞！每天一遍，防止抑郁~命运2版Coincidance 自制</a></p><p>没错，就是命（tu）运（ming）2版的Coincidance。其实这个视频我是在期末考试最后一天的中午在宿舍里面看的，因为我们的考试安排是这样的（如下表，忘了具体日期了，本人选科是全理科）↓</p><table><thead><tr><th>日期</th><th>场次</th><th>科目</th><th>时间</th></tr></thead><tbody><tr><td>第一天</td><td>1</td><td>语文</td><td>7:40~10:10</td></tr><tr><td>第一天</td><td>2</td><td>物理</td><td>10:30~11:45</td></tr><tr><td>第一天</td><td>3</td><td>政治（不考）</td><td>14:30~15:45</td></tr><tr><td>第二天</td><td>1</td><td>数学</td><td>8:00~10:00</td></tr><tr><td>第二天</td><td>2</td><td>生物</td><td>10:20~11:45</td></tr><tr><td>第二天</td><td>3</td><td>地理（不考）</td><td>14:30~15:45</td></tr><tr><td>第三天</td><td>1</td><td>英语</td><td>8:00~10:00</td></tr><tr><td>第三天</td><td>2</td><td>化学</td><td>10:20~11:45</td></tr><tr><td>第三天</td><td>3</td><td>历史（不考）</td><td>14:30~15:45</td></tr></tbody></table><p>也就是在第三天的中午，反正下午也不考试，我就掏出了手机，打开了B站，开始看了一中午的视频（在这天之前我从未掏出过手机！），然后就看到了这个视频。</p><p>这个视频也是我的各个好友不断分享，然后在前天（2020.1.20）的晚上，我突然想到“为啥我们不做一个自己的COINCIDANCE”？用WARFRAME来做呢？（因为WARFRAME较完善的动作系统）</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Diary/WF-Me-Too.jpg"  alt="给我也整一个 MOD"></p><p>然后我就在群里面找人，讲真，我身边加上我玩WARFRAME的人（就是身边的，不算上沙雕群友们）就只有4个人，而且WARFRAME刚好也是一个队伍最多4个人（这里我就要吐槽了，为什么不能像土命一样一个队伍6个人，这样更快乐，即使有5人小队BUG，但是不如土命2快乐），我们就相约第二天九点上线动工。</p><p>到了早上8点50分，我的手机闹铃就响了，<del>是标准的Pixel音效</del> 是在催促我起床了，我就赶紧起床，然后打开了WARFRAME。幸好我已经提前更新完了，要不都不知道要等多久。我打开了前一天晚上与<a href="https://space.bilibili.com/49835313/" target="_blank" rel="noopener">@ThisNEKKO_xd</a>一起讨论修改的脚本打开，然后CALL上小队成员，进入Chaptcha（好像是这么叫的）摄影棚开始拍摄。</p><p>（下面先放出脚本）</p><hr><p>KIKI:Gamer.bili</p><p>ChuChu: Notfound404.</p><p>摄像机？（中间的人）：GodGenx</p><p>机动：UBIthepotato</p><p>第一幕：KIKI</p><p>KIKI走路（第一个仓鼠叫做kiki）</p><p>KIKI拍绝路（她手上的是8极化绝路 – 截图）</p><p>机动&amp;中间的人（不要和后面用一个甲）拳击（动作：洞悉武式）（她的车队喜拳击）</p><p>KIKI跳舞（但KIKI喜欢跳舞）</p><p>第二幕：ChooChoo</p><p>ChooChoo三弦琴（第二只仓鼠叫做ChooChoo，是一只？？的仓鼠）</p><p>ChooChoo子弹跳×2（她喜欢解救受难仓鼠，但更喜欢跳舞）</p><p>ChooChoo跳舞</p><p>第三幕：</p><p>KIKI子弹跳×1，走动  ChooChoo三弦琴（她们踏上了旅程）</p><p>飞船（去到各个星球）</p><p>KIKI&amp;ChooChoo处决&amp;砍怪（分开）（她们听从莲妈，成为了Tenno强盗）</p><p>第四幕：</p><p>KIKI中继站子弹跳（她们跑遍了宇宙）</p><p>ChooChoo&amp;NPC深鞠躬（遇到了许多的人）</p><p>七字真言弹出登录界面（无论是否有七字真言，她们都在跳舞）</p><p>KIKI跳舞  </p><p>ChooChoo跳舞</p><p>KIKI在NPC面前跳舞</p><p>第五幕：摄影棚中继站</p><p>四人加载界面&amp;四人进去不要动（一天她们到达了，宇宙的某个中继站）（加Hydroid中继站大字）</p><p>中间黑咖喱显赫刀剑疯狂长按E（她们俩肩并肩跳舞引来了其他仓鼠的围观）</p><p>KIKI&amp;ChooChoo转身（她们转身面对面）</p><p>Kiki&amp;ChooChoo跳舞（一切就在这巧合发生了）</p><p>KIKI鼓掌ChooChoo跳舞（Wow,跳的不错嘛）</p><p>KIKI跳舞ChooChoo鼓掌（Wow,你也不错嘛）</p><p>（He went dongdongdong, he went dongdongdong，They said we both been dance all this time）</p><p>KIKI&amp;ChooChoo转向镜头（同时）（What coincidance）</p><p>Kiki&amp;ChooChoo跳舞</p><p>▲注意一定要看下面</p><p>三个人（kiki&amp;ChooChoo&amp;机动）</p><p>Kiki左 机动中 ChooChoo右</p><p>1、 kiki&amp;ChooChoo跳</p><p>2、 三人跳</p><p>3、 机动跳</p><p>4、 三人跳</p><p>第六幕：多场景</p><p>1、（场景无所谓）两人跳（从此她们一起跳舞）</p><p>2、（塞防图）上下两人跳（在这之前没人像她们一样）</p><p>3、（去希图斯）四人跳舞步可不统一（整个小队都在跳舞）</p><p>4、（夜灵平野三傻面前）四人跳舞（没有人去欺负三傻）</p><p>5、（放大KIKI）（KIKI停下面对镜头）（NO MORE）</p><p>6、（金星平原蜘蛛前面）四人跳（整个小队一起跳舞跳到了金星平原）</p><p>第七幕：</p><p>Kiki&amp;ChooChoo同时跳（这都是因为两人的相遇，What a coincidence!）</p><p>很多镜头&amp;甲用于快闪 都是单独舞步跳两个轮回</p><p>机动 指挥家武式（Lets dance）</p><p>第八幕：</p><p>1、 （KIKI左 机动中（靠后） ChooChoo右）KIKI&amp;ChooChoo跳</p><p>2、 （KIKI左 机动中（靠前） ChooChoo右）（同上）</p><p>3、 （KIKI左 机动中（靠后） ChooChoo右）三人跳</p><p>4、 （KIKI左 机动中（靠前） ChooChoo右）（同上）</p><p>5、 （KIKI左 机动中（并排） ChooChoo右）三人跳</p><p>6、 （KIKI）KIKI跳</p><p>7、 （ChooChoo）ChooChoo跳</p><p>8、 （机动）</p><p>9、 （机动）蚀之武式</p><p>10、（机动&amp;摄影）</p><p>11、KIKI跳 机动左侧鼓掌</p><p>12、ChooChoo跳 机动右侧鼓掌</p><p>13、KIKI跳</p><p>14、全队跳</p><p>—END—</p><p>制作者名单</p><hr><p>对比起视频，讲真，有些镜头我们并没有拍。但是拍摄过程中，同一素材我们拍摄了多次，而且也在刷突击的时候顺带拍摄了某些素材，拍摄时长算下来一个小时多一点，效率还是挺高的。</p><p>然后就到了最难的时候了——传素材。我们是四个人分别录制了素材，土豆（这里指<a href="https://space.bilibili.com/22267745/" target="_blank" rel="noopener">@MI-rice-json</a>，因为WARFRAME的ID叫做UBI.the.potato故称作土豆）的电脑比较渣，录了一小段，总共1.46GB，直接使用奶牛快传传给了我；笨猫（此处指<a href="https://space.bilibili.com/49835313/" target="_blank" rel="noopener">@ThisNEKKO_xd</a>）录了总共2.54GB素材，因为人就在我旁边，所以直接用我的SSD拷贝过来；最难的是<a href="https://space.bilibili.com/49914186/" target="_blank" rel="noopener">@GEnX</a>的素材，他的电脑被我们称为“全队最好的电脑”，大部分素材都是他那里录制出来的，总共有29个G，这可难了，QQ最大传输文件和奶牛快传最大传输大小都为4个G，我就想到用压缩的方式，把文件分成N个4095MB（4GB=4096MB）的压缩包分段，然后一个一个传。<a href="https://space.bilibili.com/49914186/" target="_blank" rel="noopener">@GEnX</a>的龟速上行网络最高只有2.5MB/s的传输速度，所以无论我的下载速度多快也突破不了这2.5MB/s的上限，没办法，只能慢慢传了。8个文件，5个用QQ传输，3个用奶牛快传，总计传输了5个多小时。。。</p><p>终于传完素材了！可以开始剪辑啦！我满心欢喜地打开了我的PR，问题又来了！我的PR，它，它，它居然——闪退！！！因为我安装的是Adobe Premiere Pro 2020，上网查了以后发现，没有CC（Adobe Creative Cloud）是运行不了的，我就只能被迫下了一个CC（太难了），开始了剪辑</p><p>剪辑花费时长大概两个小时，因为素材拖进PR里面以后，PR会自动开始生成视频的峰值文件，这就吃了我很大一部分的CPU，只能顶着100%的CPU剪辑，剪辑了两个半小时（期间包括我上大字幕和<a href="https://space.bilibili.com/49835313/" target="_blank" rel="noopener">@ThisNEKKO_xd</a>上下面的字幕），终于完成了~</p><p>然后我就开始上传，编辑稿件，选择投稿日期-&gt;2020.1.22 09:00（因为这天刚好是我农历生日，我家生日算农历），然后提交了稿件，关上了电脑。</p><p>出场的仓鼠们如下（以下为WARFRAME ID）：<br>音乐甲 &amp; NOVA PRIME <code>@Gamer.bili</code><br>瓦喵 PRIME &amp; 电男 PRIME <code>@NotFound404.</code><br>黑咖喱 &amp; ASH PRIME &amp; 指挥官 <code>@UBI.the.potato</code><br>女枪PRIME &amp; （潜行）指挥官 <code>@GODGEnX</code><br>制作者名单：<br>导演 <code>@Gamer.bili</code><br>剧本 <code>@Gamer.bili @NotFound404.</code><br>拍摄 <code>@GODGEnX @NotFound404. @Gamer.bili</code><br>剪辑 <code>@Gamer.bili @NotFound404.</code><br>字幕 <code>@NotFound404.</code></p><p>现在我写这一篇文章，应该是算作留个纪念吧，毕竟，这个视频做起来也不容易。。。</p><p>喜欢我的视频，请长按点赞键支持我哦~虽然我只是一只比白咕咕还要会咕咕咕的鸽子~</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Diary/Gugugu.jpg"  alt="白咕咕"></p><p>2020.1.22</p><p>GamerNoTitle</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;近期做了一个视频：&lt;a href=&quot;https://www.bilibili.com/video/av84462179/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;【WARFRAME 抖肩舞】星 际 仓 鼠 再来亿遍！打三傻不如跳舞！每天一遍，防止抑郁
      
    
    </summary>
    
    
      <category term="diary" scheme="http://bili33.top/categories/diary/"/>
    
    
      <category term="diary" scheme="http://bili33.top/tags/diary/"/>
    
  </entry>
  
  <entry>
    <title>网易云音乐去除版权限制（Nodejs）</title>
    <link href="http://bili33.top/2020/01/18/Unblock163Music/"/>
    <id>http://bili33.top/2020/01/18/Unblock163Music/</id>
    <published>2020-01-18T04:03:32.000Z</published>
    <updated>2020-03-29T02:52:32.915Z</updated>
    
    <content type="html"><![CDATA[<div class="note info">            <h3 id="2020-3-23重制"><a href="#2020-3-23重制" class="headerlink" title="2020.3.23重制"></a>2020.3.23重制</h3>          </div><p><strong>今天拿网易云开刀~</strong></p><p>网易云音乐一直是我们使用得比较频繁的音乐平台，可是他的版权问题实在是令人发寒，每次搜索音乐就看着灰色的歌名失望。。。而隔壁的扣扣音乐就什么都有<br><img src="/" class="lazyload" data-src="https://f002.backblazeb2.com/file/GamerNoTitle-img/home/UnblockNeteaseMusic/CloudMusic-Gray.png"  alt="灰色的网易云音乐"></p><p>这种情况真的很烦，点开一首歌直接告诉你因版权无法播放，这时候我们就需要脚本登场了<br>脚本由@nondanee编写，原理是将其他音乐网站的链接替换到网易云，所以并不存在破解网易云音乐的软件，与法律并不矛盾。<br>源代码可以点<a href="https://github.com/nondanee/UnblockNeteaseMusic" target="_blank" rel="noopener">@nondanee/UnblockNeteaseMusic</a>，在使用之前，需要安装nodejs环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/nondanee/UnblockNeteaseMusic.git</span><br></pre></td></tr></table></figure><p>克隆代码后，在文件夹里启动命令窗口，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx @nondanee/unblockneteasemusic</span><br></pre></td></tr></table></figure><p>就可以打开程序了，如果提示npx未找到，请先使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install npx -g</span><br></pre></td></tr></table></figure><p>来安装npx哦~</p><p>启动了以后，在你的网易云音乐里面修改代理，按照你的配置填写即可！</p><p><img src="/" class="lazyload" data-src="https://f002.backblazeb2.com/file/GamerNoTitle-img/home/UnblockNeteaseMusic/Proxy.png"  alt="代理修改"></p><hr><p>题外话：</p><p>最近Github的地址raw.githubusercontent.com好像被墙了？不能直接在Github网站中下载RAW文件，很烦</p><p>CloudFlare的Workers最近也是BUG一大堆，总是给我抛出1101错误，先不搭建新的反代了……</p><p>本网站的邮件提醒已经搭建好了，以后留言就有邮件了~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;note info&quot;&gt;
            &lt;h3 id=&quot;2020-3-23重制&quot;&gt;&lt;a href=&quot;#2020-3-23重制&quot; class=&quot;headerlink&quot; title=&quot;2020.3.23重制&quot;&gt;&lt;/a&gt;2020.3.23重制&lt;/h3&gt;

      
    
    </summary>
    
    
      <category term="Software" scheme="http://bili33.top/categories/Software/"/>
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>Cloudflare Workers反代实战（下）</title>
    <link href="http://bili33.top/2020/01/17/Cloudflare-Workers-Section2/"/>
    <id>http://bili33.top/2020/01/17/Cloudflare-Workers-Section2/</id>
    <published>2020-01-17T13:55:31.000Z</published>
    <updated>2020-03-29T02:52:32.903Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/2019/10/25/CloudFlare-Workers-Section1/">上篇</a>说道：<br>我们已经成功搭建了Workers的反代服务，但是有的时候我们需要绑定自己的域名来访问该网页，那么本篇我们将来讲一讲怎么绑定自己的域名来访问workers<br>我们先来到我们的域名管理界面，点开自己的任意一个域名，然后点击上面的workers<br><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Cloudflare-Workers/workers-in-domain.png"  alt="workers-in-domain"><br>在本界面中，上面的两个按钮点击Add Route<br><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Cloudflare-Workers/Workers-Panel.png"  alt="Workers-Panel"><br>然后在上面填写你想要的域名（当然得是你的域名），格式如<code>&lt;SubDoamin&gt;.&lt;Domain&gt;/*</code>，下面选择你创建好的Workers配置，例如我在上面填写<code>g.bili33.top/*</code>，然后下面选择我的名字叫做”g”的Workers配置文件（用于反代Google），然后点击保存，这样就成功添加了route，当然这个时候并不是直接访问就可以访问被反代的网站，而是要进行进一步配置~</p><p>回到我们的域名DNS解析界面，添加一个CNAME记录，指向我们的Workers，在这之中，Proxy Status一定要设定为Proxied！下面照样给个例子</p><table><thead><tr><th>Type</th><th>Name</th><th>Target</th><th>TTL</th><th>Proxy</th></tr></thead><tbody><tr><td>CNAME</td><td>g</td><td>g.bili33.workers.dev</td><td>Auto</td><td><img src="/" class="lazyload" data-src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDQgMzkuNSI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiM5OTk7fS5jbHMtMntmaWxsOiNmNjhhMWQ7fS5jbHMtM3tmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5Bc3NldCAxPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iTGF5ZXJfMS0yIiBkYXRhLW5hbWU9IkxheWVyIDEiPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSIxMDQgMjAuMTIgOTQgMTAuNjIgOTQgMTYuMTIgMCAxNi4xMiAwIDI0LjEyIDk0IDI0LjEyIDk0IDI5LjYyIDEwNCAyMC4xMiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTc0LjUsMzljLTIuMDgsMC0xNS40My0uMTMtMjguMzQtLjI1LTEyLjYyLS4xMi0yNS42OC0uMjUtMjcuNjYtLjI1YTgsOCwwLDAsMS0xLTE1LjkzYzAtLjE5LDAtLjM4LDAtLjU3YTkuNDksOS40OSwwLDAsMSwxNC45LTcuODEsMTkuNDgsMTkuNDgsMCwwLDEsMzguMDUsNC42M0ExMC41LDEwLjUsMCwxLDEsNzQuNSwzOVoiLz48cGF0aCBjbGFzcz0iY2xzLTMiIGQ9Ik01MSwxQTE5LDE5LDAsMCwxLDcwLDE5LjU5LDEwLDEwLDAsMSwxLDc0LjUsMzguNWMtNC4xMSwwLTUyLS41LTU2LS41YTcuNSw3LjUsMCwwLDEtLjQ0LTE1QTguNDcsOC40NywwLDAsMSwxOCwyMmE5LDksMCwwLDEsMTQuNjgtN0ExOSwxOSwwLDAsMSw1MSwxbTAtMUEyMCwyMCwwLDAsMCwzMi4xMywxMy40MiwxMCwxMCwwLDAsMCwxNywyMnYuMTRBOC41LDguNSwwLDAsMCwxOC41LDM5YzIsMCwxNSwuMTMsMjcuNjYuMjUsMTIuOTEuMTIsMjYuMjYuMjUsMjguMzQuMjVhMTEsMTEsMCwxLDAtMy42MS0yMS4zOUEyMC4xLDIwLjEsMCwwLDAsNTEsMFoiLz48L2c+PC9nPjwvc3ZnPg=="  alt=""></td></tr></tbody></table><p>然后添加进入DNS解析，这时候我们再访问自己的域名（在这里是<a href="http://g.bili33.top" target="_blank" rel="noopener">g.bili33.top</a>），然后就发现我们进入了自己反代的网站</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Cloudflare-Workers/Result.png"  alt=""></p><p>当然这也有一定的缺点：</p><p>1、因为Redirect URL与api不一致，所以反代出来的网站一般无法登陆</p><p>2、使用了Google Recaptcha之类的验证码用于网站保护的网站可能会因为Redirect URL不一致而导致无法访问（如Google自带的Recaptcha保护机制将导致无法进行搜索，这种情况下更换被反代的Google地区即可）</p><hr><div class="note primary">            <h4 id="2020-3-14-更新"><a href="#2020-3-14-更新" class="headerlink" title="2020.3.14 更新"></a>2020.3.14 更新</h4><p>今天给我的博客上SSL，然后临时把CloudFlare自带的SSL关掉了，代理Google旗下网站出现了重定向次数过多的问题，把SSL调回Flexible就可以了，目前只发现Google旗下产品会出现此问题，其他暂未发现</p>          </div><hr><p>题外话：</p><p>网站终于又开始更新啦！小高考考得个人感觉还不错，二月份出成绩*V*，六月份还有物理和政治的……</p><p><a href="https://github.com/TheBaiRuo" target="_blank" rel="noopener">@TheBaiRuo</a>的公网IP被墙了，需要备案，所以他的网站进不去，确实是有点惨吼，Github Pages它不香吗？</p><p>另外，在Cloudflare的workers调试界面有可能会出现500的错误码，忽略就好，实际上部署后是可以访问的（除非cloudflare分配给你的服务器炸了）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;/2019/10/25/CloudFlare-Workers-Section1/&quot;&gt;上篇&lt;/a&gt;说道：&lt;br&gt;我们已经成功搭建了Workers的反代服务，但是有的时候我们需要绑定自己的域名来访问该网页，那么本篇我们将来讲一讲怎么绑定自己的域名来访问work
      
    
    </summary>
    
    
      <category term="Software" scheme="http://bili33.top/categories/Software/"/>
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>日常吐槽02</title>
    <link href="http://bili33.top/2019/11/17/diary2/"/>
    <id>http://bili33.top/2019/11/17/diary2/</id>
    <published>2019-11-17T11:10:42.000Z</published>
    <updated>2020-03-29T02:52:32.948Z</updated>
    
    <content type="html"><![CDATA[<p>今天是周日，还要考试，哭了。。。</p><p>本周二是学校的研学活动，但是说不给带手机给带相机，对我倒是没什么所谓啦（原因在下面），但是学校有没有考虑过有些人家里莫得相机啊？</p><p>周三晚上校运会开幕式，有我们至今为止最庞大的直播阵容：</p><p>直播及录像机：我的Lenovo不知道是什么鬼型号，反正i7 7700k够用了，加个16G运存，用NDI采集导播机的画面<br>导播机：梅导的新电脑，用的9900k还有32G运存，我觉得用vmix莫得问题，用NDI传输画面给我的电脑中的OBS<br>（PS：我们是vMix导播切镜头，我的OBS来直播+录像）<br>字幕机：梅导以前的电脑，用的6700k<br>采集机（4台）：采集四个相机/无人机的实时画面，利用NDI传输到导播机<br>相信这一次我们能够避免上次的马赛克<br>由于导播，所以我们一定要使用手机，所以上面才说没什么所谓~</p><p>准备退休啦~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天是周日，还要考试，哭了。。。&lt;/p&gt;
&lt;p&gt;本周二是学校的研学活动，但是说不给带手机给带相机，对我倒是没什么所谓啦（原因在下面），但是学校有没有考虑过有些人家里莫得相机啊？&lt;/p&gt;
&lt;p&gt;周三晚上校运会开幕式，有我们至今为止最庞大的直播阵容：&lt;/p&gt;
&lt;p&gt;直播及录像机
      
    
    </summary>
    
    
      <category term="diary" scheme="http://bili33.top/categories/diary/"/>
    
    
      <category term="diary" scheme="http://bili33.top/tags/diary/"/>
    
  </entry>
  
  <entry>
    <title>日常吐槽01</title>
    <link href="http://bili33.top/2019/11/05/diary1/"/>
    <id>http://bili33.top/2019/11/05/diary1/</id>
    <published>2019-11-05T05:35:58.000Z</published>
    <updated>2020-03-29T02:52:32.946Z</updated>
    
    <content type="html"><![CDATA[<p>想开一个日常吐槽分区，除了技术（汗？）文还可以发一发平常的感受~</p><p>期中考考完啦！！！开心~</p><p>但是数学考得不很好，反正就是不很好（自闭中）</p><p>本周遇到了<a href="https://wordpress.org" target="_blank" rel="noopener">wordpress</a>会出现429错误的问题，貌似被墙了，果断搭建一个<a href="http://wordpress.bili33.workers.dev" target="_blank" rel="noopener">代理站</a>，但是wordpress的链接不是相对链接，是绝对链接，所以要下载wordpress要手动把原来的域名改成我的域名</p><p><a href="http://wordpress.bili33.workers.dev/latest-zh_CN.zip" target="_blank" rel="noopener">点我下载wordpress最新版~(zip)</a></p><p><a href="http://wordpress.bili33.workers.dev/latest-zh_CN.tar.gz" target="_blank" rel="noopener">点我下载wordpress最新版~(tar.gz)</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;想开一个日常吐槽分区，除了技术（汗？）文还可以发一发平常的感受~&lt;/p&gt;
&lt;p&gt;期中考考完啦！！！开心~&lt;/p&gt;
&lt;p&gt;但是数学考得不很好，反正就是不很好（自闭中）&lt;/p&gt;
&lt;p&gt;本周遇到了&lt;a href=&quot;https://wordpress.org&quot; target=&quot;_b
      
    
    </summary>
    
    
      <category term="diary" scheme="http://bili33.top/categories/diary/"/>
    
    
      <category term="diary" scheme="http://bili33.top/tags/diary/"/>
    
  </entry>
  
  <entry>
    <title>Cloudflare Workers反代实战（上）</title>
    <link href="http://bili33.top/2019/10/25/CloudFlare-Workers-Section1/"/>
    <id>http://bili33.top/2019/10/25/CloudFlare-Workers-Section1/</id>
    <published>2019-10-25T04:15:20.000Z</published>
    <updated>2020-03-29T02:52:32.901Z</updated>
    
    <content type="html"><![CDATA[<p>CloudFlare一直以其域名托管服务和CDN服务闻名于各位网站管理员，当然我的域名也是托管在这个上面的，后来，有一位被我介绍入CF的同志告诉我CF有种功能。。。（<a href="https://bairuo.top/" target="_blank" rel="noopener">@TheBaiRuo</a>）</p><p>就是CF的Workers服务，这是一种能够访问网页时运行特定的JS脚本的服务，所以我们就可以利用它进行 <del>JSPROXY</del> Workers-Proxy（感谢@Anonymous的提醒）的搭建（某反向代理）</p><h4 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h4><p>1、一个CloudFlare账号</p><p>2、一个域名（可以到Freenom注册一个）</p><h4 id="搭建反向代理"><a href="#搭建反向代理" class="headerlink" title="搭建反向代理"></a>搭建反向代理</h4><p>在这之前，你需要把你的域名托管到CF上！！！</p><p>然后进入CF的workers界面，看下图</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Cloudflare-Workers/into-workers.png"  alt="Workers"></p><p>进入到Workers后，点击Create a Worker来创建你的第一个JS</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Cloudflare-Workers/Workers-Interface.png"  alt="Create a Worker"></p><p>然后在workers界面的左边，填入你的JS代码，这时候就需要万能反代代码QAQ</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Cloudflare-Workers/Workers-Edit.png"  alt="Worker Editor"></p><p>解释一下这个界面：</p><p>①项目名称：表现为<strong>[Project].[subdomain].workers.dev</strong>，其中subdomain是你注册workers是输入的名字，project就是项目名称</p><p>②编辑区：就是你放下代码的地方</p><p>③效果预览区：当你按下运行按钮的时候展现出来的效果</p><p>④运行：顾名思义，运行嘛，然后在右边看得到</p><p>⑤保存并部署：部署该项目</p><p>将下面的代码放到你的编辑区中：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> upstream = <span class="string">'example.com'</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 如果那个站点有专门的移动适配站点，否则保持和上面一致</span></span><br><span class="line"><span class="keyword">const</span> upstream_mobile = <span class="string">'example.com'</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 你希望禁止哪些国家访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_region = [<span class="string">'KP'</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 禁止自访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_ip_address = [<span class="string">'0.0.0.0'</span>, <span class="string">'127.0.0.1'</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> replace_dict = &#123;</span><br><span class="line">    <span class="string">'$upstream'</span>: <span class="string">'$custom_domain'</span>,</span><br><span class="line">    <span class="string">'//google.com'</span>: <span class="string">''</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//以下内容都不用动</span></span><br><span class="line">addEventListener(<span class="string">'fetch'</span>, event =&gt; &#123;</span><br><span class="line">    event.respondWith(fetchAndApply(event.request));</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchAndApply</span>(<span class="params">request</span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> region = request.headers.get(<span class="string">'cf-ipcountry'</span>).toUpperCase();</span><br><span class="line">    <span class="keyword">const</span> ip_address = request.headers.get(<span class="string">'cf-connecting-ip'</span>);</span><br><span class="line">    <span class="keyword">const</span> user_agent = request.headers.get(<span class="string">'user-agent'</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">let</span> response = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="keyword">new</span> URL(request.url);</span><br><span class="line">    <span class="keyword">let</span> url_host = url.host;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (url.protocol == <span class="string">'http:'</span>) &#123;</span><br><span class="line">        url.protocol = <span class="string">'https:'</span></span><br><span class="line">        response = Response.redirect(url.href);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">await</span> device_status(user_agent)) &#123;</span><br><span class="line">        upstream_domain = upstream</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        upstream_domain = upstream_mobile</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    url.host = upstream_domain;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (blocked_region.includes(region)) &#123;</span><br><span class="line">        response = <span class="keyword">new</span> Response(<span class="string">'Access denied: WorkersProxy is not available in your region yet.'</span>, &#123;</span><br><span class="line">            status: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(blocked_ip_address.includes(ip_address))&#123;</span><br><span class="line">        response = <span class="keyword">new</span> Response(<span class="string">'Access denied: Your IP address is blocked by WorkersProxy.'</span>, &#123;</span><br><span class="line">            status: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> method = request.method;</span><br><span class="line">        <span class="keyword">let</span> request_headers = request.headers;</span><br><span class="line">        <span class="keyword">let</span> new_request_headers = <span class="keyword">new</span> Headers(request_headers);</span><br><span class="line"> </span><br><span class="line">        new_request_headers.set(<span class="string">'Host'</span>, upstream_domain);</span><br><span class="line">        new_request_headers.set(<span class="string">'Referer'</span>, url.href);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> original_response = <span class="keyword">await</span> fetch(url.href, &#123;</span><br><span class="line">            method: method,</span><br><span class="line">            headers: new_request_headers</span><br><span class="line">        &#125;)</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> original_response_clone = original_response.clone();</span><br><span class="line">        <span class="keyword">let</span> original_text = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> response_headers = original_response.headers;</span><br><span class="line">        <span class="keyword">let</span> new_response_headers = <span class="keyword">new</span> Headers(response_headers);</span><br><span class="line">        <span class="keyword">let</span> status = original_response.status;</span><br><span class="line"> </span><br><span class="line">        new_response_headers.set(<span class="string">'access-control-allow-origin'</span>, <span class="string">'*'</span>);</span><br><span class="line">        new_response_headers.set(<span class="string">'access-control-allow-credentials'</span>, <span class="literal">true</span>);</span><br><span class="line">        new_response_headers.delete(<span class="string">'content-security-policy'</span>);</span><br><span class="line">        new_response_headers.delete(<span class="string">'content-security-policy-report-only'</span>);</span><br><span class="line">        new_response_headers.delete(<span class="string">'clear-site-data'</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">const</span> content_type = new_response_headers.get(<span class="string">'content-type'</span>);</span><br><span class="line">        <span class="keyword">if</span> (content_type.includes(<span class="string">'text/html'</span>) &amp;&amp; content_type.includes(<span class="string">'UTF-8'</span>)) &#123;</span><br><span class="line">            original_text = <span class="keyword">await</span> replace_response_text(original_response_clone, upstream_domain, url_host);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            original_text = original_response_clone.body</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        response = <span class="keyword">new</span> Response(original_text, &#123;</span><br><span class="line">            status,</span><br><span class="line">            headers: new_response_headers</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">replace_response_text</span>(<span class="params">response, upstream_domain, host_name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> text = <span class="keyword">await</span> response.text()</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">var</span> i, j;</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> replace_dict) &#123;</span><br><span class="line">        j = replace_dict[i]</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="string">'$upstream'</span>) &#123;</span><br><span class="line">            i = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="string">'$custom_domain'</span>) &#123;</span><br><span class="line">            i = host_name</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (j == <span class="string">'$upstream'</span>) &#123;</span><br><span class="line">            j = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="string">'$custom_domain'</span>) &#123;</span><br><span class="line">            j = host_name</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> re = <span class="keyword">new</span> <span class="built_in">RegExp</span>(i, <span class="string">'g'</span>)</span><br><span class="line">        text = text.replace(re, j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">device_status</span> (<span class="params">user_agent_info</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> agents = [<span class="string">"Android"</span>, <span class="string">"iPhone"</span>, <span class="string">"SymbianOS"</span>, <span class="string">"Windows Phone"</span>, <span class="string">"iPad"</span>, <span class="string">"iPod"</span>];</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> v = <span class="number">0</span>; v &lt; agents.length; v++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (user_agent_info.indexOf(agents[v]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后点击运行，就可以反代你需要的网站啦，但是注意，有些网站是无法进行反代的，例如twitter之类的，而且如果原来的网站具有登陆功能，那么这些<strong>登陆功能是无法使用的！！！</strong></p><p><a href="/2020/01/17/Cloudflare-Workers-Section2/">下篇：Cloudflare Workers绑定自定义域名进行访问</a></p><p>这就是JSPROXY的反代啦，祝各位成功呀！<br>题外话：</p><p>下周要考试了，我好方，怎么办</p><p>我已经用此方法部署了Google镜像站、Google学术镜像站、wiki镜像站，可以在我的友链界面找到哦~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;CloudFlare一直以其域名托管服务和CDN服务闻名于各位网站管理员，当然我的域名也是托管在这个上面的，后来，有一位被我介绍入CF的同志告诉我CF有种功能。。。（&lt;a href=&quot;https://bairuo.top/&quot; target=&quot;_blank&quot; rel=&quot;noo
      
    
    </summary>
    
    
      <category term="Software" scheme="http://bili33.top/categories/Software/"/>
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>白嫖党教你白嫖Cloudflare Workers反代~</title>
    <link href="http://bili33.top/2019/10/25/CloudFlare-Workers/"/>
    <id>http://bili33.top/2019/10/25/CloudFlare-Workers/</id>
    <published>2019-10-25T04:15:20.000Z</published>
    <updated>2020-03-29T02:52:32.902Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/2019/10/25/CloudFlare-Workers-Section1/"><strong><font color=#FF0000>注：本页面为旧版本备份，新版本请点我！</font></strong></a></p><p>CloudFlare一直以其域名托管服务和CDN服务闻名于各位网站管理员，当然我的域名也是托管在这个上面的，后来，有一位被我介绍入CF的同志告诉我CF有种功能。。。（<a href="https://bairuo.top/" target="_blank" rel="noopener">@TheBaiRuo</a>）</p><p>就是CF的Workers服务，这是一种能够访问网页时运行特定的JS脚本的服务，所以我们就可以利用它进行 <del>JSPROXY</del> Workers-Proxy（感谢@Anonymous的提醒）的搭建（某反向代理）</p><h4 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h4><p>1、一个CloudFlare账号</p><p>2、一个域名（可以到Freenom注册一个）</p><h4 id="搭建反向代理"><a href="#搭建反向代理" class="headerlink" title="搭建反向代理"></a>搭建反向代理</h4><p>在这之前，你需要把你的域名托管到CF上！！！</p><p>然后进入CF的workers界面，看下图</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Cloudflare-Workers/into-workers.png"  alt="Workers"></p><p>进入到Workers后，点击Create a Worker来创建你的第一个JS</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Cloudflare-Workers/Workers-Interface.png"  alt="Create a Worker"></p><p>然后在workers界面的左边，填入你的JS代码，这时候就需要万能反代代码QAQ</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Cloudflare-Workers/Workers-Edit.png"  alt="Worker Editor"></p><p>解释一下这个界面：</p><p>①项目名称：表现为<strong>[Project].[subdomain].workers.dev</strong>，其中subdomain是你注册workers是输入的名字，project就是项目名称</p><p>②编辑区：就是你放下代码的地方</p><p>③效果预览区：当你按下运行按钮的时候展现出来的效果</p><p>④运行：顾名思义，运行嘛，然后在右边看得到</p><p>⑤保存并部署：部署该项目</p><p>将下面的代码放到你的编辑区中：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> upstream = <span class="string">'example.com'</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 如果那个站点有专门的移动适配站点，否则保持和上面一致</span></span><br><span class="line"><span class="keyword">const</span> upstream_mobile = <span class="string">'example.com'</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 你希望禁止哪些国家访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_region = [<span class="string">'KP'</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 禁止自访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_ip_address = [<span class="string">'0.0.0.0'</span>, <span class="string">'127.0.0.1'</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> replace_dict = &#123;</span><br><span class="line">    <span class="string">'$upstream'</span>: <span class="string">'$custom_domain'</span>,</span><br><span class="line">    <span class="string">'//google.com'</span>: <span class="string">''</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//以下内容都不用动</span></span><br><span class="line">addEventListener(<span class="string">'fetch'</span>, event =&gt; &#123;</span><br><span class="line">    event.respondWith(fetchAndApply(event.request));</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchAndApply</span>(<span class="params">request</span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> region = request.headers.get(<span class="string">'cf-ipcountry'</span>).toUpperCase();</span><br><span class="line">    <span class="keyword">const</span> ip_address = request.headers.get(<span class="string">'cf-connecting-ip'</span>);</span><br><span class="line">    <span class="keyword">const</span> user_agent = request.headers.get(<span class="string">'user-agent'</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">let</span> response = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="keyword">new</span> URL(request.url);</span><br><span class="line">    <span class="keyword">let</span> url_host = url.host;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (url.protocol == <span class="string">'http:'</span>) &#123;</span><br><span class="line">        url.protocol = <span class="string">'https:'</span></span><br><span class="line">        response = Response.redirect(url.href);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">await</span> device_status(user_agent)) &#123;</span><br><span class="line">        upstream_domain = upstream</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        upstream_domain = upstream_mobile</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    url.host = upstream_domain;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (blocked_region.includes(region)) &#123;</span><br><span class="line">        response = <span class="keyword">new</span> Response(<span class="string">'Access denied: WorkersProxy is not available in your region yet.'</span>, &#123;</span><br><span class="line">            status: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(blocked_ip_address.includes(ip_address))&#123;</span><br><span class="line">        response = <span class="keyword">new</span> Response(<span class="string">'Access denied: Your IP address is blocked by WorkersProxy.'</span>, &#123;</span><br><span class="line">            status: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> method = request.method;</span><br><span class="line">        <span class="keyword">let</span> request_headers = request.headers;</span><br><span class="line">        <span class="keyword">let</span> new_request_headers = <span class="keyword">new</span> Headers(request_headers);</span><br><span class="line"> </span><br><span class="line">        new_request_headers.set(<span class="string">'Host'</span>, upstream_domain);</span><br><span class="line">        new_request_headers.set(<span class="string">'Referer'</span>, url.href);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> original_response = <span class="keyword">await</span> fetch(url.href, &#123;</span><br><span class="line">            method: method,</span><br><span class="line">            headers: new_request_headers</span><br><span class="line">        &#125;)</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> original_response_clone = original_response.clone();</span><br><span class="line">        <span class="keyword">let</span> original_text = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> response_headers = original_response.headers;</span><br><span class="line">        <span class="keyword">let</span> new_response_headers = <span class="keyword">new</span> Headers(response_headers);</span><br><span class="line">        <span class="keyword">let</span> status = original_response.status;</span><br><span class="line"> </span><br><span class="line">        new_response_headers.set(<span class="string">'access-control-allow-origin'</span>, <span class="string">'*'</span>);</span><br><span class="line">        new_response_headers.set(<span class="string">'access-control-allow-credentials'</span>, <span class="literal">true</span>);</span><br><span class="line">        new_response_headers.delete(<span class="string">'content-security-policy'</span>);</span><br><span class="line">        new_response_headers.delete(<span class="string">'content-security-policy-report-only'</span>);</span><br><span class="line">        new_response_headers.delete(<span class="string">'clear-site-data'</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">const</span> content_type = new_response_headers.get(<span class="string">'content-type'</span>);</span><br><span class="line">        <span class="keyword">if</span> (content_type.includes(<span class="string">'text/html'</span>) &amp;&amp; content_type.includes(<span class="string">'UTF-8'</span>)) &#123;</span><br><span class="line">            original_text = <span class="keyword">await</span> replace_response_text(original_response_clone, upstream_domain, url_host);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            original_text = original_response_clone.body</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        response = <span class="keyword">new</span> Response(original_text, &#123;</span><br><span class="line">            status,</span><br><span class="line">            headers: new_response_headers</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">replace_response_text</span>(<span class="params">response, upstream_domain, host_name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> text = <span class="keyword">await</span> response.text()</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">var</span> i, j;</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> replace_dict) &#123;</span><br><span class="line">        j = replace_dict[i]</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="string">'$upstream'</span>) &#123;</span><br><span class="line">            i = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="string">'$custom_domain'</span>) &#123;</span><br><span class="line">            i = host_name</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (j == <span class="string">'$upstream'</span>) &#123;</span><br><span class="line">            j = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="string">'$custom_domain'</span>) &#123;</span><br><span class="line">            j = host_name</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> re = <span class="keyword">new</span> <span class="built_in">RegExp</span>(i, <span class="string">'g'</span>)</span><br><span class="line">        text = text.replace(re, j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">device_status</span> (<span class="params">user_agent_info</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> agents = [<span class="string">"Android"</span>, <span class="string">"iPhone"</span>, <span class="string">"SymbianOS"</span>, <span class="string">"Windows Phone"</span>, <span class="string">"iPad"</span>, <span class="string">"iPod"</span>];</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> v = <span class="number">0</span>; v &lt; agents.length; v++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (user_agent_info.indexOf(agents[v]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后点击运行，就可以反代你需要的网站啦，但是注意，有些网站是无法进行反代的，例如twitter之类的，而且如果原来的网站具有登陆功能，那么这些<strong>登陆功能是无法使用的！！！</strong></p><p><a href="/2020/01/17/Cloudflare-Workers-Section2/">下篇：Cloudflare Workers绑定自定义域名进行访问</a></p><p>这就是JSPROXY的反代啦，祝各位成功呀！<br>题外话：</p><p>下周要考试了，我好方，怎么办</p><p>我已经用此方法部署了Google镜像站、Google学术镜像站、wiki镜像站，可以在我的友链界面找到哦~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;/2019/10/25/CloudFlare-Workers-Section1/&quot;&gt;&lt;strong&gt;&lt;font color=#FF0000&gt;注：本页面为旧版本备份，新版本请点我！&lt;/font&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;CloudFlare一
      
    
    </summary>
    
    
      <category term="Software" scheme="http://bili33.top/categories/Software/"/>
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>PIXIV网页版及客户端访问恢复指南（Linux版）</title>
    <link href="http://bili33.top/2019/10/04/Pixiv-Nginx/"/>
    <id>http://bili33.top/2019/10/04/Pixiv-Nginx/</id>
    <published>2019-10-04T11:16:38.000Z</published>
    <updated>2020-03-29T02:52:32.913Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://2heng.xin/2017/09/19/pixiv/" target="_blank" rel="noopener">Windows版点这里，本文只介绍linux</a></p><p>国庆快乐鸭~</p><p>本周在想，既然Mashirozx的Nginx反代上P站的方案能在Windows上用，那Linux上肯定也是可以的，而且如果是一台linux服务器搭建好了，只需要把host指向到linux服务器上，就可以直接上P站，不用再开Mashirozx的Windows反代工具包了</p><p>废话不多说，直接上教程（封面图是从樱花庄的白猫引用过来的）</p><h4 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h4><p>在这里，我们安装Nginx（既然都是Nginx的反代了，不装怎么可以呢），Ubuntu上使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install nginx</span><br></pre></td></tr></table></figure><p>就可以安装了，安装完后输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nginx -t</span><br></pre></td></tr></table></figure><p>如果提示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br></pre></td></tr></table></figure><p>就证明你安装成功了，当然，你也可以试着访问一下nginx的默认网站</p><p>访问<a href="http://localhost" target="_blank" rel="noopener">localhost</a>即可~！</p><h4 id="克隆工具包"><a href="#克隆工具包" class="headerlink" title="克隆工具包"></a>克隆工具包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:mashirozx/Pixiv-Nginx.git</span><br></pre></td></tr></table></figure><p>使用上面这个命令来克隆<a href="https://github.com/mashirozx/Pixiv-Nginx" target="_blank" rel="noopener">@Mashirozx/Pixiv-Nginx</a>的反代工具包，然后打开文件夹中的“配置文件（非Windows用户使用）”文件夹</p><h4 id="安装反代配置"><a href="#安装反代配置" class="headerlink" title="安装反代配置"></a>安装反代配置</h4><p>进入~/etc/nginx/这个位置，把上面打开的那个文件夹的东西全部都丢进去（此处需要root权限），提示覆盖就覆盖即可！</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/Pixiv-Nginx/Move-Files.png"  alt="移动文件到~/etc/nginx/"></p><p>然后在~/etc/nginx目录下打开终端，输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ca</span><br><span class="line">$ cp pixiv.net.crt /usr/<span class="built_in">local</span>/share/ca-certificates/pixiv.net.crt</span><br></pre></td></tr></table></figure><p>将证书复制到根证书安装目录下，然后使用该命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ update-ca-certificates</span><br></pre></td></tr></table></figure><p>更新证书，这样子你的根证书就成功安装了！</p><h4 id="重载Nginx"><a href="#重载Nginx" class="headerlink" title="重载Nginx"></a>重载Nginx</h4><p>使用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nginx -t reload</span><br></pre></td></tr></table></figure><p>重启nginx，然后新配置就会应用到nginx中，这样，反向代理就建好了</p><h4 id="修改host"><a href="#修改host" class="headerlink" title="修改host"></a>修改host</h4><p>接下来，你需要修改ubuntu的host</p><p>在~/etc/目录中找到host文件<code>host文件没有后缀名</code>，然后打开它，在里面加入以下内容（摘自<a href="https://2heng.xin/2017/09/19/pixiv/" target="_blank" rel="noopener">PIXIV网页版及客户端访问恢复指南</a>）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#www.google.com域名仅用于登陆验证</span></span><br><span class="line"><span class="comment">#如果你不需要这个功能，请把下一行删掉</span></span><br><span class="line">127.0.0.1       www.google.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#Pixiv Start</span></span><br><span class="line">127.0.0.1       pixiv.net </span><br><span class="line">127.0.0.1       www.pixiv.net </span><br><span class="line">127.0.0.1       ssl.pixiv.net</span><br><span class="line">127.0.0.1       accounts.pixiv.net </span><br><span class="line">127.0.0.1       touch.pixiv.net</span><br><span class="line">127.0.0.1       oauth.secure.pixiv.net</span><br><span class="line">127.0.0.1       dic.pixiv.net</span><br><span class="line">127.0.0.1       en-dic.pixiv.net </span><br><span class="line">127.0.0.1       sketch.pixiv.net</span><br><span class="line">127.0.0.1       payment.pixiv.net</span><br><span class="line">127.0.0.1       factory.pixiv.net </span><br><span class="line">127.0.0.1       comic.pixiv.net  </span><br><span class="line">127.0.0.1       novel.pixiv.net </span><br><span class="line">127.0.0.1       imgaz.pixiv.net </span><br><span class="line">127.0.0.1       sensei.pixiv.net</span><br><span class="line">127.0.0.1       fanbox.pixiv.net</span><br><span class="line">127.0.0.1       i.pximg.net</span><br><span class="line">127.0.0.1       source.pixiv.net</span><br><span class="line">127.0.0.1       i1.pixiv.net </span><br><span class="line">127.0.0.1       i2.pixiv.net </span><br><span class="line">127.0.0.1       i3.pixiv.net </span><br><span class="line">127.0.0.1       i4.pixiv.net </span><br><span class="line">210.129.120.50  app-api.pixiv.net  </span><br><span class="line">74.120.148.207  g-client-proxy.pixiv.net </span><br><span class="line">210.140.131.159 d.pixiv.org </span><br><span class="line">210.140.92.135  pixiv.pximg.net  </span><br><span class="line">210.140.92.134  s.pximg.net</span><br><span class="line"><span class="comment">#Pixiv End</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 顺手修一下维基百科</span></span><br><span class="line"><span class="comment"># Wikipedia Start</span></span><br><span class="line">127.0.0.1 en.wikipedia.org</span><br><span class="line">127.0.0.1 zh.wikipedia.org <span class="comment">#中文维基百科桌面版</span></span><br><span class="line">127.0.0.1 en.m.wikipedia.org</span><br><span class="line">127.0.0.1 zh.m.wikipedia.org</span><br><span class="line">127.0.0.1 zh-yue.wikipedia.org <span class="comment">#粤文维基百科桌面版</span></span><br><span class="line">127.0.0.1 wuu.wikipedia.org <span class="comment">#吴语维基百科桌面版</span></span><br><span class="line">127.0.0.1 ug.wikipedia.org <span class="comment">#维吾尔文维基百科桌面版</span></span><br><span class="line">127.0.0.1 ja.wikipedia.org <span class="comment">#日文维基百科桌面版</span></span><br><span class="line">127.0.0.1 zh.wikinews.org <span class="comment">#中文维基新闻桌面版</span></span><br><span class="line"><span class="comment"># Wikipedia End</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 顺手修一下Steam</span></span><br><span class="line"><span class="comment"># Steam</span></span><br><span class="line">127.0.0.1 store.steampowered.com</span><br><span class="line">127.0.0.1 steamcommunity.com</span><br><span class="line"><span class="comment"># Steam end</span></span><br></pre></td></tr></table></figure><p>接下来有两种方式让host生效</p><h5 id="重启电脑"><a href="#重启电脑" class="headerlink" title="重启电脑"></a>重启电脑</h5><p>这个不多说了，右上角电源键走起</p><h5 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h5><p>使用一下命令来重启networking服务（请用root用户运行）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ <span class="built_in">cd</span> etc/init.d</span><br><span class="line">$ ./networking restart</span><br></pre></td></tr></table></figure><p>这样就可以立即加载HOST文件，打开你的浏览器，打开P站就可以愉快地浏览图片啦~</p><h4 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h4><p>当你在你的linux服务器上安装了反代服务后，你可以在你的windows计算机上利用host指向到你的linux服务器来达到上P站的目的<strong>（当然，你需要安装Mashirozx提供的ca证书）</strong></p><p>在host文件中输入以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#www.google.com域名仅用于登陆验证</span></span><br><span class="line"><span class="comment">#如果你不需要这个功能，请把下一行删掉</span></span><br><span class="line">172.52.5.100       www.google.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#Pixiv Start</span></span><br><span class="line">172.52.5.100       pixiv.net </span><br><span class="line">172.52.5.100       www.pixiv.net </span><br><span class="line">172.52.5.100       ssl.pixiv.net</span><br><span class="line">172.52.5.100       accounts.pixiv.net </span><br><span class="line">172.52.5.100       touch.pixiv.net</span><br><span class="line">172.52.5.100       oauth.secure.pixiv.net</span><br><span class="line">172.52.5.100       dic.pixiv.net</span><br><span class="line">172.52.5.100       en-dic.pixiv.net </span><br><span class="line">172.52.5.100       sketch.pixiv.net</span><br><span class="line">172.52.5.100       payment.pixiv.net</span><br><span class="line">172.52.5.100       factory.pixiv.net </span><br><span class="line">172.52.5.100       comic.pixiv.net  </span><br><span class="line">172.52.5.100       novel.pixiv.net </span><br><span class="line">172.52.5.100       imgaz.pixiv.net </span><br><span class="line">172.52.5.100       sensei.pixiv.net</span><br><span class="line">172.52.5.100       fanbox.pixiv.net</span><br><span class="line">172.52.5.100       i.pximg.net</span><br><span class="line">172.52.5.100       source.pixiv.net</span><br><span class="line">172.52.5.100       i1.pixiv.net </span><br><span class="line">172.52.5.100       i2.pixiv.net </span><br><span class="line">172.52.5.100       i3.pixiv.net </span><br><span class="line">172.52.5.100       i4.pixiv.net </span><br><span class="line">210.129.120.50  app-api.pixiv.net  </span><br><span class="line">74.120.148.207  g-client-proxy.pixiv.net </span><br><span class="line">210.140.131.159 d.pixiv.org </span><br><span class="line">210.140.92.135  pixiv.pximg.net  </span><br><span class="line">210.140.92.134  s.pximg.net</span><br><span class="line"><span class="comment">#Pixiv End</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 顺手修一下维基百科</span></span><br><span class="line"><span class="comment"># Wikipedia Start</span></span><br><span class="line">172.52.5.100 en.wikipedia.org</span><br><span class="line">172.52.5.100 zh.wikipedia.org <span class="comment">#中文维基百科桌面版</span></span><br><span class="line">172.52.5.100 en.m.wikipedia.org</span><br><span class="line">172.52.5.100 zh.m.wikipedia.org</span><br><span class="line">172.52.5.100 zh-yue.wikipedia.org <span class="comment">#粤文维基百科桌面版</span></span><br><span class="line">172.52.5.100 wuu.wikipedia.org <span class="comment">#吴语维基百科桌面版</span></span><br><span class="line">172.52.5.100 ug.wikipedia.org <span class="comment">#维吾尔文维基百科桌面版</span></span><br><span class="line">172.52.5.100 ja.wikipedia.org <span class="comment">#日文维基百科桌面版</span></span><br><span class="line">172.52.5.100 zh.wikinews.org <span class="comment">#中文维基新闻桌面版</span></span><br><span class="line"><span class="comment"># Wikipedia End</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 顺手修一下Steam</span></span><br><span class="line"><span class="comment"># Steam</span></span><br><span class="line">172.52.5.100 store.steampowered.com</span><br><span class="line">172.52.5.100 steamcommunity.com</span><br><span class="line"><span class="comment"># Steam end</span></span><br></pre></td></tr></table></figure><p><strong>其中的ip地址172.52.5.100请更换为你的linux服务器地址！！！</strong></p><p>当你确认已经安装完了证书，linux服务器的nginx服务运行正常后，你就可以打开pixiv愉快地浏览图片了！</p><h4 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h4><p>上个月没有写3篇文章，我的问题（给自己的定位是3篇/mo）</p><p>国庆我没有咕咕咕，是不是应该夸奖我~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://2heng.xin/2017/09/19/pixiv/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Windows版点这里，本文只介绍linux&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;国庆快乐鸭~&lt;/p&gt;
&lt;p&gt;本周在想，既然Mashi
      
    
    </summary>
    
    
      <category term="Software" scheme="http://bili33.top/categories/Software/"/>
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>手把手教你怎么搭建属于自己的直播服务器~</title>
    <link href="http://bili33.top/2019/09/19/srs/"/>
    <id>http://bili33.top/2019/09/19/srs/</id>
    <published>2019-09-19T05:23:16.000Z</published>
    <updated>2020-03-29T02:52:32.956Z</updated>
    
    <content type="html"><![CDATA[<p>前两个月学校的旧外包跑路了（其实是合约到期了），他们的直播系统就被学校废弃了，那么问题就来了：学校要直播呀！！！没有直播系统怎么办啊！！！</p><p>所以这次就来手把手（按照我搭建的经验）来教你怎么搭建属于自个的直播系统~</p><p><code>PS：可以打开侧边栏看，方便找到需要的内容</code></p><h3 id="准备材料"><a href="#准备材料" class="headerlink" title="准备材料"></a>准备材料</h3><p><code>*表示非必需</code></p><p>1、一台linux电脑（windows上没试过，感兴趣的同志们可以试试）</p><p>*2、一台网页服务器（可以用上面的linux电脑，或者个人电脑）</p><h3 id="搭建环境"><a href="#搭建环境" class="headerlink" title="搭建环境"></a>搭建环境</h3><h4 id="GoLang环境"><a href="#GoLang环境" class="headerlink" title="GoLang环境"></a>GoLang环境</h4><p>使用命令进入root用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ su</span><br></pre></td></tr></table></figure><h5 id="一键安装方式"><a href="#一键安装方式" class="headerlink" title="一键安装方式"></a>一键安装方式</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/letseeqiji/oneinstall.git</span><br><span class="line">$ <span class="built_in">cd</span> oneinstall/golang</span><br><span class="line">$ bash goinstall.sh</span><br></pre></td></tr></table></figure><p>直接运行脚本进行安装</p><h6 id="Ubantu-Debian用户"><a href="#Ubantu-Debian用户" class="headerlink" title="Ubantu/Debian用户"></a>Ubantu/Debian用户</h6><p>你可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install golang</span><br></pre></td></tr></table></figure><p>直接安装Go环境，然后设置GOPATH即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/profile</span><br></pre></td></tr></table></figure><p>打开文件后，对文件修改，在文件最下面添加</p><p>export GOPATH=/goWorkPlace</p><p>然后按Esc，保存文件</p><p>最后，刷新文件，使更改生效。输入命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h5 id="二进制码安装方式"><a href="#二进制码安装方式" class="headerlink" title="二进制码安装方式"></a>二进制码安装方式</h5><p>64位</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://storage.googleapis.com/golang/go1.4.1.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure><p>32位</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://storage.googleapis.com/golang/go1.4.1.linux-386.tar.gz</span><br></pre></td></tr></table></figure><p>在/usr/local下安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tar -xzf &lt;filename&gt; -C /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure><p>配置环境变量：有三个变量GOPATH、PATH、GOROOT</p><p>GOROOT就是go的安装路径</p><p>GOPATH就是go的工作目录</p><p>PATH是go安装路径下的bin目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/profile</span><br></pre></td></tr></table></figure><p>打开文件后，对文件修改，在文件最下面添加</p><p>export GOPATH=/goWorkPlace</p><p>export GOROOT=/usr/local/go</p><p>export PATH=$PATH:$GOROOT/bin</p><p>保存文件，刷新，使更改生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h4 id="srs设置"><a href="#srs设置" class="headerlink" title="srs设置"></a>srs设置</h4><p>使用git克隆代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:ossrs/srs.git</span><br><span class="line">$ <span class="built_in">cd</span> srs</span><br></pre></td></tr></table></figure><p>进入srs目录，对目录中的文件进行修改。</p><p>打开./trunk/conf/srs.conf文件，对其进行修改</p><p>其中有几个参数需要修改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">listen1935; <span class="comment">#直播推流的端口</span></span><br><span class="line">max_connections 1000; <span class="comment">#最大线程数</span></span><br><span class="line">srs_log_tankconsole;<span class="comment">#srs日志输出位置，可以为console或file</span></span><br><span class="line">srs_log_file ./objs/srs.log;<span class="comment">#srs日志输出文件，当上面为file时必须设置</span></span><br></pre></td></tr></table></figure><p>上面的参数根据自己的需要进行修改，其中max_connections推荐设置为100，否则编译有可能会出错</p><p>在root用户中，进入./trunk，使用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./configure &amp;&amp; make</span><br></pre></td></tr></table></figure><p>对srs进行编译，编译过程稍长，请耐心等待</p><p>当编译完成后，可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./objs/srs -c conf/srs.conf</span><br></pre></td></tr></table></figure><p>打开srs服务器，打开客户机上的OBS Studio（vMix也可以），推流地址填写如下</p><p><code>rtmp://&lt;你的srs服务器ip&gt;:1935/home</code></p><p>推流密钥填写如下</p><p><code>/live</code></p><p>也可以把live换成任意的文字或路径</p><p>此时可以使用VLC Media Player来检测是否推流成功，打开VLC Media Player，选择“媒体”-&gt;“打开网络串流”，在URL里面填写你的rtmp地址（包括密钥）例如我的OBS配置如下</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/srs/OBS-Conf.png"  alt="OBS-Config"></p><p>那么我就应该填写<code>rtmp://172.52.5.100:1935/home/live</code></p><p>点击确定，可以看到我推流出来的内容</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/srs/VLC-Media-Player-Success.png"  alt="VLC"></p><p>这样就证明我推流成功了！</p><h3 id="网页前端设置"><a href="#网页前端设置" class="headerlink" title="网页前端设置"></a>网页前端设置</h3><p>我们毕竟是个直播，总不可能每个班级都安装一个VLC Media Player的嘛，所以说，我们要用网页来拉流。</p><p>用网页来拉流，就要用到HLS了（具体百度哦~），但是我们要怎么打开HLS呢？</p><p>你需要在你的srs.conf中的</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vhost __defaultVhost__ &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>中加入以下内容（可以直接复制粘贴）</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vhost __defaultVhost__ &#123;</span><br><span class="line"> # http-flv设置</span><br><span class="line">    http_remux&#123;</span><br><span class="line">        enabled    on;</span><br><span class="line">        mount      [vhost]/[app]/[stream].flv;</span><br><span class="line">        hstrs      on;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    # hls设置</span><br><span class="line">    hls&#123;</span><br><span class="line">        enabled       on;</span><br><span class="line">        hls_path      ./objs/nginx/html;</span><br><span class="line">        hls_fragment  10;</span><br><span class="line">        hls_window    60;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后重新打开srs即可</p><p>那么下面的链接应该都可以使用（按照我的填写方法为例）</p><table><thead><tr><th align="center">链接类型</th><th align="center">链接</th></tr></thead><tbody><tr><td align="center">rtmp</td><td align="center">rtmp://172.52.5.100:1935/live/home</td></tr><tr><td align="center">http/flv</td><td align="center"><a href="http://172.52.5.100:8080/live/home.flv" target="_blank" rel="noopener">http://172.52.5.100:8080/live/home.flv</a></td></tr><tr><td align="center">http/m3u8</td><td align="center"><a href="http://172.52.5.100:8080/live/home.m3u8" target="_blank" rel="noopener">http://172.52.5.100:8080/live/home.m3u8</a></td></tr></tbody></table><p>可以利用我们的网页示例，进行调试（请不要使用本地打开文件的方式进行调试，会被拦截）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:5amstd/live-system.git</span><br></pre></td></tr></table></figure><p>将里面的146行的视频地址更改为自己的视频地址即可</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">video:'http://172.52.5.100:8080/home/live.flv' //视频地址</span><br></pre></td></tr></table></figure><p>然后保存刷新，打开里面的视频播放器（都9102年了还用Flash？？？），就可以看到直播画面了</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/srs/live.png"  alt="Website"></p><p>如果你看到了直播画面，就证明你成功了~</p><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>第一次用Ubantu来搭建项目，感觉Ubantu挺好用的，所以现在两台电脑吧，把我之前的那台DELL OptiPlex 3046拿来装Ubantu了</p><p>srs搞了我很长时间，其实最主要的问题是Ubantu（Linux）用的不很熟悉，然后权限问题也很烦</p><p>HLS的分发挺麻烦的，查看了很多官方文档，后来在别人的文章里面找到了解决方法</p><p>最近喜欢打方舟，有舟游玩家嘛，加波好友啊：喵呜初音#0717（B服玩家哦~）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;前两个月学校的旧外包跑路了（其实是合约到期了），他们的直播系统就被学校废弃了，那么问题就来了：学校要直播呀！！！没有直播系统怎么办啊！！！&lt;/p&gt;
&lt;p&gt;所以这次就来手把手（按照我搭建的经验）来教你怎么搭建属于自个的直播系统~&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PS：可以打开侧边栏
      
    
    </summary>
    
    
      <category term="Tech" scheme="http://bili33.top/categories/Tech/"/>
    
    
      <category term="Tech" scheme="http://bili33.top/tags/Tech/"/>
    
  </entry>
  
  <entry>
    <title>最全面的Hexo部署方法，交给你了~</title>
    <link href="http://bili33.top/2019/09/07/hexo-deploy-guide/"/>
    <id>http://bili33.top/2019/09/07/hexo-deploy-guide/</id>
    <published>2019-09-07T12:00:00.000Z</published>
    <updated>2020-03-29T02:52:32.954Z</updated>
    
    <content type="html"><![CDATA[<p><strong>温馨提示：推荐点击左下角箭头打开目录，方便你更好地找到内容！</strong></p><h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><h4 id="什么是Hexo？"><a href="#什么是Hexo？" class="headerlink" title="什么是Hexo？"></a>什么是Hexo？</h4><p>（我不多BB了，去看<a href="[https://hexo.io/zh-cn/docs/index.html#%E4%BB%80%E4%B9%88%E6%98%AF-Hexo%EF%BC%9F](https://hexo.io/zh-cn/docs/index.html#什么是-Hexo？)">官网</a>吧，介绍什么的真的不适合我……）</p><h4 id="如何安装？"><a href="#如何安装？" class="headerlink" title="如何安装？"></a>如何安装？</h4><h5 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h5><p>你需要的东西有：</p><p>一个带有Page服务的仓库（推荐Github，Coding）</p><p>一台电脑（Windows或Linux均可，差别不大）</p><p>最后就是耐心（这个过程可能会很枯燥的说~）</p><h5 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h5><h6 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h6><p>安装 Node.js 的最佳方式是使用 <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener">nvm</a>。nvm 的开发者提供了一个自动安装 nvm 的简单脚本：</p>Curl:<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ curl -o- https://cdn.bili33.top/nvm-sh/nvm/v0.34.0/install.sh | sh</span><br></pre></td></tr></tbody></table></figure>wget:<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ wget -qO- https://cdn.bili33.top/nvm-sh/nvm/v0.34.0/install.sh | sh</span><br></pre></td></tr></tbody></table></figure>安装完成后，重启终端并执行下列命令即可安装 Node.js。<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ nvm install stable</span><br></pre></td></tr></tbody></table></figure><blockquote class="note info"><strong class="note-title">Windows 用户</strong><p>对于windows用户来说，建议使用安装程序进行安装。安装时，请勾选<strong>Add to PATH</strong>选项。<br>另外，您也可以使用<strong>Git Bash</strong>，这是git for windows自带的一组程序，提供了Linux风格的shell，在该环境下，您可以直接用上面提到的命令来安装Node.js。打开它的方法很简单，在任意位置单击右键，选择“Git Bash Here”即可。由于Hexo的很多操作都涉及到命令行，您可以考虑始终使用<strong>Git Bash</strong>来进行操作。</p></blockquote><blockquote class="note info"><strong class="note-title">Linux 用户</strong><p>大部分 Linux 发行版都会在它们的默认软件包仓库中分发 Node.js。第三方仓库 <a href="https://github.com/nodesource/distributions" target="_blank" rel="noopener">NodeSource</a> 通常能分发最新版本的 Node.js。</p></blockquote><blockquote class="note warn"><strong class="note-title">可选操作：</strong><p>由于众所周知的原因，使用npm进行安装速度十分缓慢。也可以参考<a href="https://npm.taobao.org/" target="_blank" rel="noopener">这个页面</a>，利用国内镜像安装npm模块。</p></blockquote><h6 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h6><p>Windows：下载并安装 git.<br>Mac：使用 Homebrew, MacPorts ：brew install git;或下载 安装程序 安装。<br>Linux (Ubuntu, Debian)：sudo apt-get install git-core<br>Linux (Fedora, Red Hat, CentOS)：sudo yum install git-core</p><blockquote class="note warn"><strong class="note-title">Windows 用户</strong><p>由于众所周知的原因，从上面的链接下载git for windows最好挂上一个代理，否则下载速度十分缓慢。也可以参考<a href="https://github.com/waylau/git-for-win" target="_blank" rel="noopener">这个页面</a>，收录了存储于百度云的下载地址。</p></blockquote><h6 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h6><p>当你确定你已经安装完了Node.js和Git，就可以使用npm安装hexo了，使用</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span></figure><p>或（<strong>安装了cnpm国内镜像的情况下，下面所有的npm命令均可换为cnpm命令，下面不再说明</strong>）</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cnpm install -g hexo-cli</span></figure><h5 id="初始化Hexo文件夹"><a href="#初始化Hexo文件夹" class="headerlink" title="初始化Hexo文件夹"></a>初始化Hexo文件夹</h5><p>在你认为合适的地方新建一个文件夹，文件夹名字自拟，然后使用</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo init</span></figure><p>来初始化你的文件夹（文件夹必须是空的），并且使用</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm install</span></figure><p>来安装相关的依赖库！</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/hexo-deploy-guide/Powershell-runtime-install.png"  alt="初始化库和安装依赖"></p><h4 id="配置网站"><a href="#配置网站" class="headerlink" title="配置网站"></a>配置网站</h4><p>当你安装完所有的依赖以后，你就可以配置你的网站。</p><p>你也可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure><p>来进行本地调试，在浏览器中输入<a href="localhost:4000">localhost:4000</a>进入自己的网站。</p><p>关于hexo目录下的_config.yml文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line">title: &lt;title&gt;<span class="comment">#自己的网页名字，将在标签页标题中显示为&lt;title&gt; - &lt;subtitle&gt;</span></span><br><span class="line">subtitle: &lt;subtitle&gt; <span class="comment">#副标题，在标签页标题显示</span></span><br><span class="line">description: &lt;descr&gt; <span class="comment">#网页描述（讲真我不知道有啥用）</span></span><br><span class="line">keywords: &lt;keywords&gt; <span class="comment">#网页搜索关键词</span></span><br><span class="line">author: &lt;author&gt; <span class="comment">#网页作者</span></span><br><span class="line">language: en <span class="comment">#网页语言，若主题支持中文可以不用改</span></span><br><span class="line">timezone: <span class="comment">#时区，可以不改</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line">url: http://yoursite.com<span class="comment">#网页网址，一般填写主页的地址，例如我的网页就填http://bili33.top</span></span><br><span class="line">root: /<span class="comment">#网站根目录，可以不改</span></span><br><span class="line">permalink: :year/:month/:day/:title/<span class="comment">#网页永久链接格式，可以自己修改</span></span><br><span class="line">permalink_defaults:</span><br></pre></td></tr></table></figure><p>关于主题：</p><p>主题可以去<a href="https://hexo.io/themes/" target="_blank" rel="noopener">https://hexo.io/themes/</a>找，也可以在github逛一逛，说不定就找到好主题了呢？</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line">theme: landscape<span class="comment"># 主题名字，landscape是默认主题，改成你的主题文件夹的名字即可！</span></span><br></pre></td></tr></table></figure><p>在clone的时候建议用git clone &lt;address&gt; theme/&lt;theme name&gt; 这样方便管理~</p><p>关于主题的配置，详情请见各主题说明文档！</p><h4 id="部署网站"><a href="#部署网站" class="headerlink" title="部署网站"></a>部署网站</h4><p>在准备东西的时候，我们准备了一个github（或coding）账号，下面以github为例子</p><p>在Github中新建一个仓库，仓库名自拟，也可以采用官方格式&lt;username&gt;.github.io，一定要设为公开仓库（有Github Pro的当我没说）</p><p>然后回到你的hexo文件夹，打开命令窗口，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>来安装git的部署器，其他部署器<a href="https://hexo.io/zh-cn/docs/deployment" target="_blank" rel="noopener">请看这里</a></p><p>打开_config.yml，拉到最底下，会发现有个Deployment，你可以按照我下面这么填写</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: &lt;repo address&gt; <span class="comment"># 请替换为你的仓库地址！</span></span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>填写完成后，保存即可，然后打开命令窗口，使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean <span class="comment">#不是必要的</span></span><br><span class="line">$ hexo generate</span><br><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>来部署你的网站，其中generate可以简写为g，deploy可以简写为d，如果觉得打两行命令太麻烦，可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d -g</span><br></pre></td></tr></table></figure><p>一条命令来直接部署，省去不必要的麻烦。</p><p>你也可以同时部署多个仓库，例如</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: &lt;repo1 address&gt;,master <span class="comment"># 请替换为你的仓库地址！</span></span><br><span class="line">  repo: &lt;repo2 address&gt;,master <span class="comment"># 请替换为你的仓库地址！</span></span><br></pre></td></tr></table></figure><p>这样编写的话一次部署，两边的仓库都会上传~</p><p>部署完成后，请到你的Github仓库的设置中，找到Github Pages，将source选到master branch来打开Pages服务！</p><h4 id="撰写文章"><a href="#撰写文章" class="headerlink" title="撰写文章"></a>撰写文章</h4><p>你可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"&lt;article name&gt;"</span></span><br></pre></td></tr></table></figure><p>来创建一篇文章，它会出现在source/_posts中，是一个.md文件，使用md编辑器打开（推荐<a href="https://www.typora.io/" target="_blank" rel="noopener">Typora</a>）编辑即可，支持<a href="https://www.runoob.com/markdown/md-tutorial.html" target="_blank" rel="noopener">markdown</a>和<a href="https://www.runoob.com/html/html-tutorial.html" target="_blank" rel="noopener">html</a>语法</p><h3 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h3><h4 id="添加自定义域名"><a href="#添加自定义域名" class="headerlink" title="添加自定义域名"></a>添加自定义域名</h4><p>每次部署hexo都会清除你的库并且重新部署，这意味着如果你在Github的设置中添加自定义域名（会生成CNAME文件）每次都会被清除，为了避免这种麻烦，我们可以使用在source文件夹里新建CNAME文件</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/hexo-deploy-guide/CNAME-Create.png"  alt="CNAME文件"></p><p>并且在CNAME文件中填写你的域名</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/hexo-deploy-guide/CNAME.png"  alt="CNAME"></p><p>这样就可以避免每次部署都清除掉自定义域名，导致网站404了~</p><h4 id="自定义404页面"><a href="#自定义404页面" class="headerlink" title="自定义404页面"></a>自定义404页面</h4><p>你可以在/themes/&lt;themes name&gt;/source中放置你的404页面，当你的网站页面不存在的时候，就会显示404页面，可以引用css文件和js文件，只要跟404页面放在同一目录即可！</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/hexo-deploy-guide/404.png"  alt="404"></p><p>如何直接看到404呢？你可以直接在网站后面加上<a href="/404">/404</a>就可以进入<a href="/404">404页面</a>了~</p><h4 id="添加看板娘（live2d）"><a href="#添加看板娘（live2d）" class="headerlink" title="添加看板娘（live2d）"></a>添加看板娘（live2d）</h4><p>你是否也想像我一样领养一只猫呢？或者领养一只~</p><p>回归正题，我们要怎么领养一只萌萌哒看板娘呢？当然还是要用到插件的说~</p><p>先安装插件hexo-helper-live2d</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-helper-live2d --save</span><br></pre></td></tr></table></figure><p>等待安装完后，在你的网站根目录的_config.yml中加入（可以直接复制粘贴）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#hexo-helper-live2d</span></span><br><span class="line">live2d:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span><span class="comment">#是否开启显示</span></span><br><span class="line">  pluginModelPath: assets/</span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-tororo  <span class="comment">#模板目录，在node_modules里</span></span><br><span class="line">  display:</span><br><span class="line">    position: right</span><br><span class="line">    width: 150 </span><br><span class="line">    height: 300</span><br><span class="line">  mobile:</span><br><span class="line">    show: <span class="literal">false</span>  <span class="comment">#是否在手机进行显示</span></span><br></pre></td></tr></table></figure><p>然后，找到你喜欢的模型进行安装，并把model的use属性的文本改成你安装的看板娘的文件夹名字（在node_modules里面）即可！</p><p>这样你就可以像我一样领养一只萌萌哒看板娘了~</p><h4 id="搜索引擎站点认证"><a href="#搜索引擎站点认证" class="headerlink" title="搜索引擎站点认证"></a>搜索引擎站点认证</h4><p>当你提交站点到搜索引擎的时候，免不了的就是认证你的站点。当然，认证方式有很多种，例如什么把标记放在&lt;head&gt;&lt;/head&gt;之间啦，什么文件认证啊之类的，太多了</p><p>当然最方便的就是文件认证了，下载一个文件到本地，然后传到你的网站上面。</p><p>有的人就会问了，文件要放在哪里呢？</p><p>其实有两个地方都可以放，一个是根目录的source文件夹，另一个就是主题里面的source文件夹，都可以放，放在这两个文件夹的根目录即可！</p><h4 id="添加站点地图"><a href="#添加站点地图" class="headerlink" title="添加站点地图"></a>添加站点地图</h4><p>当你想让你的网站被Google或者Baidu什么的收录的时候，你就需要用到站点地图。</p><p>使用以下命令安装站点地图插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-baidu-sitemap --save <span class="comment">#安装Baidu的站点地图，为Baidu优化过的</span></span><br><span class="line">$ npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><p>然后打开网站根目录的_config.yml文件，加入以下条目：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Plugins:</span><br><span class="line">- hexo-generator-baidu-sitemap</span><br><span class="line">- hexo-generator-sitemap</span><br><span class="line"></span><br><span class="line">baidusitemap:</span><br><span class="line">    path: baidusitemap.xml</span><br><span class="line">sitemap:</span><br><span class="line">    path: sitemap.xml</span><br></pre></td></tr></table></figure><p>这样每次部署就会生成一个baidusitemap.xml和一个sitemap.xml文件，用于提交站点地图</p><p>这里以google为例子描述怎么添加站点地图</p><p>当你的网站提交到Google后，为了点击量高，我们会提交站点地图，在左边的栏目中选择站点地图，然后在上面”添加新的站点地图”中填写&lt;Your Link&gt;/sitemap.xml即可，Google会定期收集你的站点，并且展示在搜索结果上</p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/hexo-deploy-guide/sitemap-google.png"  alt="Google Webmaster"></p><p><img src="/" class="lazyload" data-src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo@1.0/hexo-deploy-guide/sitemap-google-search.png"  alt="Google Search Result"></p><h4 id="添加RSS订阅"><a href="#添加RSS订阅" class="headerlink" title="添加RSS订阅"></a>添加RSS订阅</h4><p>虽然我不知道这年头谁还用RSS，但是有好过没有嘛</p><p>先打开命令窗口，然后输入命令安装插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>安装完成后，在网站的根目录中的_config.yml中，加入以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#RSS订阅</span></span><br><span class="line">plugin:</span><br><span class="line">- hexo-generator-feed</span><br><span class="line"><span class="comment">#Feed Atom</span></span><br><span class="line">feed:</span><br><span class="line"><span class="built_in">type</span>: atom</span><br><span class="line">path: atom.xml<span class="comment">#RSS文件名字，可自定义</span></span><br><span class="line"><span class="built_in">limit</span>: 20</span><br></pre></td></tr></table></figure><p>当你加入RSS订阅按钮的时候，就可以设置链接到你的/atom.xml文件（RSS文件名字改过的当我没说），这样当别人点击你的RSS按钮时，就会弹出订阅提醒，让别人订阅你的网站。</p><h4 id="按钮调用邮件应用"><a href="#按钮调用邮件应用" class="headerlink" title="按钮调用邮件应用"></a>按钮调用邮件应用</h4><p>如果你想让别人联系你，那么最方便的方式就是通过电子邮件了。如何才能让别人点击链接或者按钮直接调用邮件应用发邮件给你呢？<a href="mailto:admin@bili33.top">实例</a></p><p>在文章中，可以使用这样的编写格式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&lt;Text&gt;</span>](<span class="link">mailto:&lt;Email Address&gt;</span>)</span><br></pre></td></tr></table></figure><p>这样当别人点击&lt;Text&gt;的时候，就会调用电子邮件应用，同样如果是按钮的话，只需要将按钮的链接设为</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mailto:<span class="tag">&lt;<span class="name">Email</span> <span class="attr">Address</span>&gt;</span></span><br></pre></td></tr></table></figure><p>即可调用电子邮件程序！</p><h3 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h3><p>Hexo的教程我就写了这么多，可能有些没写到的或者我没想到的，有可能在将来会偶尔更新一下这篇文章，当然，如果你有什么问题，欢迎发邮件到<a href="mailto:admin@bili33.top">admin@bili33.top</a>来与我探讨，我非常欢迎！如果你想与我交换友链，请到<a href="/link">友情链接网页</a>的评论区留言，我有时间会看评论的~商业网站勿扰哦~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;温馨提示：推荐点击左下角箭头打开目录，方便你更好地找到内容！&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;开始&quot;&gt;&lt;a href=&quot;#开始&quot; class=&quot;headerlink&quot; title=&quot;开始&quot;&gt;&lt;/a&gt;开始&lt;/h3&gt;&lt;h4 id=&quot;什么是Hexo？&quot;&gt;
      
    
    </summary>
    
    
      <category term="Software" scheme="http://bili33.top/categories/Software/"/>
    
    
      <category term="Software" scheme="http://bili33.top/tags/Software/"/>
    
  </entry>
  
</feed>
